<?xml version="1.0"?>
<mavlink>
  <include>common.xml</include>
  <version>1</version>
  <enums>
    <enum name="LEAF_MODE">
      <entry value="0" name="LEAF_MODE_RC_Stabilized">
        <description>Remote control stabilized mode</description>
      </entry>
      <entry value="1" name="LEAF_MODE_RC_POSITION">
        <description>Remote control position mode</description>
      </entry>
      <entry value="2" name="LEAF_MODE_WAYPOINT_MISSION">
        <description>Waypoint mission mode</description>
      </entry>
      <entry value="3" name="LEAF_MODE_ROLL_PITCH_LEARNING">
        <description>learning Roll/Pitch loops mode</description>
      </entry>
      <entry value="4" name="LEAF_MODE_SELECTIVE_X_Y_ALTITUDE_LEARNING">
        <description>Selective X, Y, Altitude learning mode</description>
      </entry>
      <entry value="5" name="LEAF_MODE_FULL_LEARNING">
        <description>Full system learning mode</description>
      </entry>
      <entry value="7" name="LEAF_MODE_RC_STABILIZE_HOVER_THRUST_ID">
        <description>RC stabilize hover thrust identification mode</description>
      </entry>
      <entry value="8" name="LEAF_MODE_REFINED_TUNING_COLLECT_DATA">
        <description>Refined tuning data collection mode</description>
      </entry>
      <entry value="9" name="LEAF_MODE_REFINED_TUNING_OUTER">
        <description>Refined tuning outer mode</description>
      </entry>
      <entry value="10" name="LEAF_MODE_MISSION">
        <description>LeafSDK mission mode</description>
      </entry>
      <entry value="11" name="LEAF_MODE_LEARNING_FULL_DATA_COLLECTION">
        <description>Learning all loops mode - no real-time tuning</description>
      </entry>
    </enum>
    <enum name="LEAF_STATUS">
      <entry value="0" name="LEAF_STATUS_READY_TO_LEARN">
        <description>Leaf is ready to learn</description>
      </entry>
      <entry value="1" name="LEAF_STATUS_LEARNING">
        <description>Leaf is learning</description>
      </entry>
      <entry value="2" name="LEAF_STATUS_READY_TO_FLY">
        <description>Leaf is ready to fly</description>
      </entry>
      <entry value="3" name="LEAF_STATUS_TAKING_OFF">
        <description>Leaf is taking off</description>
      </entry>
      <entry value="4" name="LEAF_STATUS_FLYING">
        <description>Leaf is flying</description>
      </entry>
      <entry value="5" name="LEAF_STATUS_LANDING">
        <description>Leaf is landing</description>
      </entry>
      <entry value="6" name="LEAF_STATUS_LANDED">
        <description>Leaf has landed</description>
      </entry>
      <entry value="7" name="LEAF_STATUS_ARMED_IDLE">
        <description>Leaf is in idle mode</description>
      </entry>
      <entry value="8" name="LEAF_STATUS_ARMED">
        <description>Leaf is armed</description>
      </entry>
      <entry value="9" name="LEAF_STATUS_DISARMED">
        <description>Leaf is disarmed</description>
      </entry>
      <entry value="10" name="LEAF_STATUS_NOT_READY">
        <description>Leaf is not ready to fly yet</description>
      </entry>

      <entry value="20" name="LEAF_STATUS_MISSION_PAUSED">
        <description>Leaf has paused the mission</description>
      </entry>
      <entry value="21" name="LEAF_STATUS_RETURNING_TO_BASE">
        <description>Leaf is heading to base</description>
      </entry>
    </enum>
    <enum name="LEAF_MISSION_STATE">
      <entry value="0" name="LEAF_MISSION_STATE_IDLE">
        <description>Queue is empty, no mission loaded</description>
      </entry>
      <entry value="1" name="LEAF_MISSION_STATE_READY">
        <description>Current mission is ready to execute</description>
      </entry>
      <entry value="2" name="LEAF_MISSION_STATE_RUNNING">
        <description>Current mission is running</description>
      </entry>
      <entry value="3" name="LEAF_MISSION_STATE_SCHEDULED_PAUSE">
        <description>Current mission is running but has a scheduled pause</description>
      </entry>
      <entry value="4" name="LEAF_MISSION_STATE_PAUSED_MID_STEP">
        <description>Current mission is paused mid-step</description>
      </entry>
      <entry value="5" name="LEAF_MISSION_STATE_PAUSED_BETWEEN_STEPS">
        <description>Current mission is paused between steps</description>
      </entry>
      <entry value="6" name="LEAF_MISSION_STATE_COMPLETED">
        <description>Current mission completed successfully</description>
      </entry>
      <entry value="7" name="LEAF_MISSION_STATE_FAILED">
        <description>Current mission failed</description>
      </entry>
      <entry value="8" name="LEAF_MISSION_STATE_CANCELLED">
        <description>Current mission was cancelled</description>
      </entry>
      <entry value="9" name="LEAF_MISSION_STATE_SAFETY">
        <description>Critical safety state, FC decides what to do</description>
      </entry>
    </enum>
    <enum name="LEAF_MISSION_CONTROL_COMMAND">
      <entry value="0" name="LEAF_MISSION_CONTROL_PAUSE">
        <description>Pause the exection of the current mission</description>
      </entry>
      <entry value="1" name="LEAF_MISSION_CONTROL_RESUME">
        <description>Resume the exection of the current mission</description>
      </entry>
      <entry value="2" name="LEAF_MISSION_CONTROL_ABORT">
        <description>Abort the exection of the current mission</description>
      </entry>
      <entry value="3" name="LEAF_MISSION_CONTROL_LAND_IN_PLACE">
        <description>Land in place</description>
      </entry>
      <entry value="4" name="LEAF_MISSION_CONTROL_RETURN_TO_LAUNCH">
        <description>Return to launch</description>
      </entry>
      <entry value="5" name="LEAF_MISSION_CONTROL_READY">
        <description>Set the vehicle to mission ready state</description>
      </entry>
      <entry value="6" name="LEAF_MISSION_CONTROL_START">
        <description>Start the mission</description>
      </entry>
    </enum>
    <enum name="JoystickMode">
      <entry value="0" name="DISABLED">
        <description>Joystick is disabled</description>
      </entry>
      <entry value="1" name="ENABLED_ALWAYS">
        <description>Joystick is always enabled</description>
      </entry>
      <entry value="2" name="ENABLED_ON_PAUSE">
        <description>Joystick is enabled only on pause</description>
      </entry>
    </enum>
    <enum name="LEAF_PREDEFINED_ACTIONS_STATUS">
      <entry value="0" name="NOT_STARTED">
        <description>Predefined actions have not started</description>
      </entry>
      <entry value="1" name="TAKING_OFF">
        <description>Predefined actions are taking off</description>
      </entry>
      <entry value="2" name="LANDING">
        <description>Predefined actions are landing</description>
      </entry>
      <entry value="3" name="RETURNING_TO_LAUNCH">
        <description>Predefined actions are returning to launch</description>
      </entry>
      <entry value="4" name="GOTO_XYZ">
        <description>Going to single location</description>
      </entry>
    </enum>
  </enums>
  <messages>
    <message id="77000" name="LEAF_MODE">
      <description>The system mode, as defined by enum LEAF_MODE</description>
      <field type="uint8_t" name="mode" enum="LEAF_MODE">The new leaf mode.</field>
    </message>
    <message id="77001" name="LEAF_SET_MODE">
      <description>Set the system mode, as defined by enum LEAF_MODE. There is no target component id as the mode is by definition for the overall aircraft, not only for one component.</description>
      <field type="uint8_t" name="target_system">The system setting the mode</field>
      <field type="uint8_t" name="mode" enum="LEAF_MODE">The new leaf mode.</field>
    </message>
    <message id="77002" name="LEAF_STATUS">
      <description>The system status, as defined by enum LEAF_STATUS</description>
      <field type="uint8_t" name="status" enum="LEAF_STATUS">The new leaf status.</field>
    </message>
    <message id="77003" name="LEAF_DO_ARM">
      <description>Arms the leaf</description>
      <field type="uint8_t" name="target_system">The system needs to be armed</field>
      <field type="uint8_t" name="arm">1 to arm, 0 to disarm</field>
    </message>
    <message id="77005" name="LEAF_DO_TAKEOFF">
      <description>Commands the leaf to takeoff</description>
      <field type="uint8_t" name="target_system">The system needs to takeoff</field>
      <field type="float" name="altitude">The altitude to takeoff to</field>
    </message>
    <message id="77006" name="LEAF_DO_LAND">
      <description>Commands the leaf to land</description>
      <field type="uint8_t" name="target_system">The system needs to land</field>
    </message>
    <message id="77007" name="LEAF_DO_REGISTER_POS_OFFSET_FROM_EST_POS">
      <description>Commands the leaf to go into emergency mode</description>
      <field type="uint8_t" name="target_system">The system needs to go into emergency mode</field>
      <field type="uint8_t" name="reg">1 to register, 0 to unregister</field>
    </message>
    <message id="77008" name="LEAF_DO_QUEUE_TRAJ_FROM_BUFFER_BY_ID">
      <description>Commands the leaf to queue a trajectory from the buffer by id</description>
      <field type="uint8_t" name="target_system">The system needs to queue a trajectory</field>
      <field type="char[64]" name="traj_id">The id of the trajectory to queue</field>
    </message>
    <message id="77009" name="LEAF_DO_SWITCH_MRFT_ROLL">
      <description>Commands the leaf to switch to MRFT roll controller</description>
      <field type="uint8_t" name="target_system">The system needs to switch to MRFT roll controller</field>
      <field type="uint8_t" name="enable">1 to switch on, 0 to switch back off</field>
    </message>
    <message id="77010" name="LEAF_DO_SWITCH_MRFT_PITCH">
      <description>Commands the leaf to switch to MRFT pitch controller</description>
      <field type="uint8_t" name="target_system">The system needs to switch to MRFT pitch controller</field>
      <field type="uint8_t" name="enable">1 to switch on, 0 to switch back off</field>
    </message>
    <message id="77011" name="LEAF_DO_SWITCH_MRFT_ALT">
      <description>Commands the leaf to switch to MRFT altitude controller</description>
      <field type="uint8_t" name="target_system">The system needs to switch to MRFT altitude controller</field>
      <field type="uint8_t" name="enable">1 to switch on, 0 to switch back off</field>
    </message>
    <message id="77012" name="LEAF_DO_SWITCH_MRFT_X">
      <description>Commands the leaf to switch to MRFT x controller</description>
      <field type="uint8_t" name="target_system">The system needs to switch to MRFT x controller</field>
      <field type="uint8_t" name="enable">1 to switch on, 0 to switch back off</field>
    </message>
    <message id="77013" name="LEAF_DO_SWITCH_MRFT_Y">
      <description>Commands the leaf to switch to MRFT y controller</description>
      <field type="uint8_t" name="target_system">The system needs to switch to MRFT y controller</field>
      <field type="uint8_t" name="enable">1 to switch on, 0 to switch back off</field>
    </message>
    <message id="77015" name="LEAF_SET_MISSION_STATE">
      <description>Commands the leaf to set the mission state</description>
      <field type="uint8_t" name="target_system">The system needs to set the mission state</field>
      <field type="uint8_t" name="state" enum="LEAF_MISSION_STATE">The mission state to set</field>
      <field type="char[64]" name="mission_id">The id of the mission to control</field>
    </message>
    <message id="77016" name="LEAF_SAY_TO_QGC">
      <description>Commands the leaf to say something to QGC</description>
      <field type="uint8_t" name="target_system">The system needs to say something to QGC</field>
      <field type="char[64]" name="content">The message to say</field>
    </message>
    <message id="77017" name="LEAF_DO_ARM_IDLE">
      <description>Commands the leaf to switch to MRFT y controller</description>
      <field type="uint8_t" name="target_system">The system needs to idle</field>
      <field type="uint8_t" name="enable">1 to idle, 0 to disarm</field>
    </message>
    <message id="77018" name="LEAF_CLIENT_TAGNAME">
      <description>The client tag name</description>
      <field type="char[64]" name="tagname">The tag name of the client</field>
    </message>
    <message id="77019" name="LEAF_MRFT_STATUS">
      <description>The MRFT status</description>
      <field type="uint8_t" name="roll">The roll MRFT status</field>
      <field type="uint8_t" name="pitch">The pitch MRFT status</field>
      <field type="uint8_t" name="alt">The altitude MRFT status</field>
      <field type="uint8_t" name="x">The x MRFT status</field>
      <field type="uint8_t" name="y">The y MRFT status</field>
    </message>
    <message id="77022" name="LEAF_HEARTBEAT">
      <description>The heartbeat message</description>
      <field type="uint8_t" name="status" enum="LEAF_STATUS">The status of the system</field>
      <field type="uint8_t" name="mode" enum="LEAF_MODE">The mode of the system</field>
      <field type="char[64]" name="profile">The profile of the system</field>
      <field type="char[64]" name="version">The version of the system</field>
    </message>
    <message id="77023" name="LEAF_DO_QUEUE_EXTERNAL_TRAJECTORY">
      <description>Commands the leaf to queue the external trajectory primitive.</description>
      <field type="uint8_t" name="target_system">The system needs to queue the trajectory</field>
      <field type="uint8_t" name="queue">1 to queue, 0 to not</field>
      <field type="uint8_t" name="traj_id">0 for pos, 1 for ori</field>
    </message>
    <message id="77024" name="LEAF_ACK_QUEUE_EXTERNAL_TRAJECTORY_POS">
      <description>Acknowledges that the external trajectory primitive is queued.</description>
      <field type="uint8_t" name="target_system">The system needs to queue the trajectory</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="uint8_t" name="traj_id">0 for pos, 1 for ori</field>
    </message>
    <message id="77025" name="LEAF_ACK_QUEUE_EXTERNAL_TRAJECTORY_ORI">
      <description>Acknowledges that the external trajectory primitive is queued.</description>
      <field type="uint8_t" name="target_system">The system needs to queue the trajectory</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="uint8_t" name="traj_id">0 for pos, 1 for ori</field>
    </message>
    <message id="77026" name="LEAF_EXTERNAL_TRAJECTORY_SETPOINT_ENU">
      <description>Reports the leaf vehicle position, velocity, and acceleration as specified by the external trajectory.</description>
      <field type="float" name="x" units="m">X Position in ENU frame</field>
      <field type="float" name="y" units="m">Y Position in ENU frame</field>
      <field type="float" name="z" units="m">Z Position in ENU frame</field>
      <field type="float" name="vx" units="m/s">X velocity in ENU frame</field>
      <field type="float" name="vy" units="m/s">Y velocity in ENU frame</field>
      <field type="float" name="vz" units="m/s">Z velocity in ENU frame</field>
      <field type="float" name="afx" units="m/s/s">X acceleration or force in ENU frame in meter / s^2 or N</field>
      <field type="float" name="afy" units="m/s/s">Y acceleration or force in ENU frame in meter / s^2 or N</field>
      <field type="float" name="afz" units="m/s/s">Z acceleration or force in ENU frame in meter / s^2 or N</field>
      <field type="float" name="yaw" units="rad">yaw setpoint</field>
      <field type="float" name="yaw_rate" units="rad/s">yaw rate setpoint</field>
    </message>
    <message id="77027" name="LEAF_DO_TERMINATE_EXTERNAL_TRAJECTORY">
      <description>Terminates the external trajectory is completed.</description>
      <field type="uint8_t" name="target_system">The system needs to queue the trajectory</field>
      <field type="uint8_t" name="status">1 for terminate, 0 for not</field>
      <field type="uint8_t" name="traj_id">0 for pos, 1 for ori</field>
    </message>
    <message id="77028" name="LEAF_ACK_TERMINATE_EXTERNAL_TRAJECTORY_POS">
      <description>Acknowledges that the external trajectory is completed.</description>
      <field type="uint8_t" name="target_system">The system needs to queue the trajectory</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="uint8_t" name="traj_id">0 for pos, 1 for ori</field>
    </message>
    <message id="77029" name="LEAF_ACK_TERMINATE_EXTERNAL_TRAJECTORY_ORI">
      <description>Acknowledges that the external trajectory is completed.</description>
      <field type="uint8_t" name="target_system">The system needs to queue the trajectory</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="uint8_t" name="traj_id">0 for pos, 1 for ori</field>
    </message>
    <message id="77030" name="LEAF_EXTERNAL_TRAJECTORY_OFFSET_ENU_POS">
      <description>Stores the last positional offset value in ENU frame.</description>
      <field type="float" name="x" units="m">X Position in ENU frame</field>
      <field type="float" name="y" units="m">Y Position in ENU frame</field>
      <field type="float" name="z" units="m">Z Position in ENU frame</field>
    </message>
    <message id="77031" name="LEAF_EXTERNAL_TRAJECTORY_OFFSET_ENU_ORI">
      <description>Stores the last orientational offset value in ENU frame.</description>
      <field type="float" name="x" units="rad">X orientation in rad</field>
      <field type="float" name="y" units="rad">Y orientation in rad</field>
      <field type="float" name="z" units="rad">Z orientation in rad</field>
    </message>
    <message id="77032" name="LEAF_QGC_RESERVED_MESSAGE_77032">
      <description>Reserved message for QGC.</description>
      <field type="uint8_t" name="reserved">Reserved field</field>
    </message>
    <message id="77033" name="LEAF_ACK_MISSION_RUN">
      <description>Acknowledges that the mission run command has been received.</description>
      <field type="uint8_t" name="target_system">The system that received the mission run command</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="char[64]" name="mission_id">The id of the mission</field>
    </message>
    <message id="77034" name="LEAF_ACK_MISSION_COMPLETE">
      <description>Notifies the leaf that the mission has been completed.</description>
      <field type="uint8_t" name="target_system">The system that completed the mission</field>
      <field type="char[64]" name="mission_id">The id of the completed mission</field>
    </message>
    <message id="77035" name="LEAF_MISSION_STATUS">
      <description>The mission manager status including mission state and joystick mode</description>
      <field type="uint8_t" name="status" enum="LEAF_MISSION_STATE">The current mission status.</field>
      <field type="uint8_t" name="joystick_mode" enum="JoystickMode">The current joystick mode.</field>
    </message>
    <message id="77036" name="LEAF_DO_QGC_MISSION_CONTROL_CMD">
      <description>Commands the leaf to execute a mission control command (from QGC)</description>
      <field type="uint8_t" name="target_system">The system needs to execute a mission control command</field>
      <field type="uint8_t" name="cmd" enum="LEAF_MISSION_CONTROL_COMMAND">The mission control command to execute</field>
      <field type="char[64]" name="mission_id">The id of the mission to control</field>
    </message>
    <message id="77037" name="LEAF_QGC_RESERVED_MESSAGE_77037">
      <description>Reserved message 77037</description>
      <field type="uint8_t" name="reserved">Reserved field</field>
    </message>
    <message id="77038" name="LEAF_DO_EMERGENCY_RTL">
      <description>Commands the leaf to return to launch</description>
      <field type="uint8_t" name="target_system">The system needs to execute a control command</field>
    </message>
    <message id="77039" name="LEAF_ACK_MISSION_PAUSE">
      <description>Acknowledges that the mission pause command has been received.</description>
      <field type="uint8_t" name="target_system">The system that received the mission pause command</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="char[64]" name="mission_id">The id of the mission</field>
    </message>
    <message id="77040" name="LEAF_ACK_MISSION_RESUME">
      <description>Acknowledges that the mission resume command has been received.</description>
      <field type="uint8_t" name="target_system">The system that received the mission resume command</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="char[64]" name="mission_id">The id of the mission</field>
    </message>
    <message id="77041" name="LEAF_ACK_MISSION_ABORT">
      <description>Acknowledges that the mission abort command has been received.</description>
      <field type="uint8_t" name="target_system">The system that received the mission abort command</field>
      <field type="uint8_t" name="status">1 for ack, 0 for nack</field>
      <field type="char[64]" name="mission_id">The id of the mission</field>
    </message>
    <message id="77042" name="LEAF_DO_EMERGENCY_ABORT">
      <description>Commands the leaf to abort the mission</description>
      <field type="uint8_t" name="target_system">The system needs to execute a control command</field>
    </message>
    <message id="77043" name="LEAF_SETPOINT_OFFSET">
      <description>Setpoint offset</description>
      <field type="float" name="x" units="m">X position</field>
      <field type="float" name="y" units="m">Y position</field>
      <field type="float" name="z" units="m">Z position</field>
      <field type="float" name="yaw" units="rad">Yaw angle</field>
    </message>
    <message id="77044" name="LEAF_MISSION_HEARTBEAT">
      <description>The mission heartbeat message</description>
      <field type="uint8_t" name="mission_status" enum="LEAF_MISSION_STATE">The mission status</field>
      <field type="uint8_t" name="joystick_mode" enum="JoystickMode">The joystick mode</field>
      <field type="char[64]" name="mission_id">The id of the mission</field>
      <field type="uint8_t" name="queue_count">The number of missions in the queue</field>
      <field type="uint8_t" name="predefined_actions_status" enum="LEAF_PREDEFINED_ACTIONS_STATUS">The predefined actions status</field>
    </message>
  </messages>
</mavlink>
