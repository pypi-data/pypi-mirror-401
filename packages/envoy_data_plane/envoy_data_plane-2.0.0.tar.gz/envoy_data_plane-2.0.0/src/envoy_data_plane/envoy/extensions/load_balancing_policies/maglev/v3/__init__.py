# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/extensions/load_balancing_policies/maglev/v3/maglev.proto
# plugin: python-betterproto2
# This file has been @generated

__all__ = ("Maglev",)


import betterproto2
from pydantic.dataclasses import dataclass

from ......message_pool import default_message_pool

_COMPILER_VERSION = "0.9.0"
betterproto2.check_compiler_version(_COMPILER_VERSION)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class Maglev(betterproto2.Message):
    """
    [#protodoc-title: Maglev Load Balancing Policy]
    [#extension: envoy.load_balancing_policies.maglev]

    This configuration allows the built-in Maglev LB policy to be configured via the LB policy
    extension point. See the :ref:`load balancing architecture overview
    <arch_overview_load_balancing_types>` and :ref:`Maglev<arch_overview_load_balancing_types_maglev>` for more information.
    """

    table_size: "int | None" = betterproto2.field(
        1,
        betterproto2.TYPE_MESSAGE,
        unwrap=lambda: _____google__protobuf__.UInt64Value,
        optional=True,
    )
    """
    The table size for Maglev hashing. Maglev aims for "minimal disruption" rather than an absolute guarantee.
    Minimal disruption means that when the set of upstream hosts change, a connection will likely be sent to the same
    upstream as it was before. Increasing the table size reduces the amount of disruption.
    The table size must be prime number limited to 5000011. If it is not specified, the default is 65537.
    """

    consistent_hashing_lb_config: "__common__v3__.ConsistentHashingLbConfig | None" = (
        betterproto2.field(2, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    Common configuration for hashing-based load balancing policies.
    """

    locality_weighted_lb_config: "__common__v3__.LocalityLbConfigLocalityWeightedLbConfig | None" = betterproto2.field(
        3, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    Enable locality weighted load balancing for maglev lb explicitly.
    """


default_message_pool.register_message(
    "envoy.extensions.load_balancing_policies.maglev.v3", "Maglev", Maglev
)


from ......google import protobuf as _____google__protobuf__
from ...common import v3 as __common__v3__
