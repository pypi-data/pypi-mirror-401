# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/extensions/filters/http/geoip/v3/geoip.proto
# plugin: python-betterproto2
# This file has been @generated

__all__ = (
    "Geoip",
    "GeoipXffConfig",
)

import typing

import betterproto2
import pydantic
from pydantic.dataclasses import dataclass

from .......message_pool import default_message_pool

_COMPILER_VERSION = "0.9.0"
betterproto2.check_compiler_version(_COMPILER_VERSION)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class Geoip(betterproto2.Message):
    """
    [#protodoc-title: Geoip]
    Geoip :ref:`configuration overview <config_http_filters_geoip>`.
    [#extension: envoy.filters.http.geoip]
    """

    xff_config: "GeoipXffConfig | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    If set, the :ref:`xff_num_trusted_hops <envoy_v3_api_field_extensions.filters.http.geoip.v3.Geoip.XffConfig.xff_num_trusted_hops>` field will be used to determine
    trusted client address from ``x-forwarded-for`` header.
    Otherwise, the immediate downstream connection source address will be used.
    [#next-free-field: 2]
    """

    provider: "_____config__core__v3__.TypedExtensionConfig | None" = (
        betterproto2.field(3, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    Geoip driver specific configuration which depends on the driver being instantiated.
    See the geoip drivers for examples:

    - :ref:`MaxMindConfig <envoy_v3_api_msg_extensions.geoip_providers.maxmind.v3.MaxMindConfig>`
    [#extension-category: envoy.geoip_providers]
    """


default_message_pool.register_message(
    "envoy.extensions.filters.http.geoip.v3", "Geoip", Geoip
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class GeoipXffConfig(betterproto2.Message):
    xff_num_trusted_hops: "typing.Annotated[int, pydantic.Field(ge=0, le=2**32 - 1)]" = betterproto2.field(
        1, betterproto2.TYPE_UINT32
    )
    """
    The number of additional ingress proxy hops from the right side of the
    :ref:`config_http_conn_man_headers_x-forwarded-for` HTTP header to trust when
    determining the origin client's IP address. The default is zero if this option
    is not specified. See the documentation for
    :ref:`config_http_conn_man_headers_x-forwarded-for` for more information.
    """


default_message_pool.register_message(
    "envoy.extensions.filters.http.geoip.v3", "Geoip.XffConfig", GeoipXffConfig
)


from ......config.core import v3 as _____config__core__v3__
