# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/extensions/common/aws/v3/credential_provider.proto
# plugin: python-betterproto2
# This file has been @generated

__all__ = (
    "AssumeRoleCredentialProvider",
    "AssumeRoleWithWebIdentityCredentialProvider",
    "AwsCredentialProvider",
    "ConfigCredentialProvider",
    "ContainerCredentialProvider",
    "CredentialsFileCredentialProvider",
    "EnvironmentCredentialProvider",
    "IamRolesAnywhereCredentialProvider",
    "InlineCredentialProvider",
    "InstanceProfileCredentialProvider",
)

import datetime
import typing

import betterproto2
import pydantic
from pydantic.dataclasses import dataclass

from ......message_pool import default_message_pool

_COMPILER_VERSION = "0.9.0"
betterproto2.check_compiler_version(_COMPILER_VERSION)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class AssumeRoleCredentialProvider(betterproto2.Message):
    """
    Configuration to use `AssumeRole <https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html>`_ for retrieving new credentials, via role chaining.
    [#next-free-field: 6]
    """

    role_arn: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        1, betterproto2.TYPE_STRING
    )
    """
    The ARN of the role to assume.
    """

    role_session_name: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        2, betterproto2.TYPE_STRING
    )
    """
    An optional role session name, used when identifying the role in subsequent AWS API calls. If not provided, the role session name will default
    to the current timestamp.
    """

    external_id: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        3, betterproto2.TYPE_STRING
    )
    """
    Optional string value to use as the externalId
    """

    session_duration: "datetime.timedelta | None" = betterproto2.field(
        4,
        betterproto2.TYPE_MESSAGE,
        unwrap=lambda: _____google__protobuf__.Duration,
        optional=True,
    )
    """
    An optional duration, in seconds, of the role session. Minimum role duration is 900s (5 minutes) and maximum is 43200s (12 hours).
    If the session duration is not provided, the default will be determined using the `table described here <https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_manage-assume.html>`_.
    """

    credential_provider: "AwsCredentialProvider | None" = betterproto2.field(
        5, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The credential provider for signing the AssumeRole request. This is optional and if not set,
    it will be retrieved from the procedure described in :ref:`config_http_filters_aws_request_signing`.
    This list of credential providers cannot include an AssumeRole credential provider and if one is provided
    it will be ignored.
    """


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "AssumeRoleCredentialProvider",
    AssumeRoleCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class AssumeRoleWithWebIdentityCredentialProvider(betterproto2.Message):
    """
    Configuration to use `AssumeRoleWithWebIdentity <https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html>`_
    to retrieve AWS credentials.
    """

    web_identity_token_data_source: "____config__core__v3__.DataSource | None" = (
        betterproto2.field(1, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    Data source for a web identity token that is provided by the identity provider to assume the role.
    When using this data source, even if a ``watched_directory`` is provided, the token file will only be re-read when the credentials
    returned from AssumeRoleWithWebIdentity expire.
    """

    role_arn: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        2, betterproto2.TYPE_STRING
    )
    """
    The ARN of the role to assume.
    """

    role_session_name: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        3, betterproto2.TYPE_STRING
    )
    """
    Optional role session name to use in AssumeRoleWithWebIdentity API call.
    """


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "AssumeRoleWithWebIdentityCredentialProvider",
    AssumeRoleWithWebIdentityCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class AwsCredentialProvider(betterproto2.Message):
    """
    [#protodoc-title: AWS common configuration]

    Configuration for AWS credential provider. This is optional and the credentials are normally
    retrieved from the environment or AWS configuration files by following the default credential
    provider chain. However, this configuration can be used to override the default behavior.
    [#next-free-field: 11]
    """

    assume_role_with_web_identity_provider: "AssumeRoleWithWebIdentityCredentialProvider | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The option to use `AssumeRoleWithWebIdentity <https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html>`_.
    """

    inline_credential: "InlineCredentialProvider | None" = betterproto2.field(
        2, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The option to use an inline credential. If inline credential is provided, no chain will be created and only the inline credential will be used.
    """

    credentials_file_provider: "CredentialsFileCredentialProvider | None" = (
        betterproto2.field(3, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The option to specify parameters for credential retrieval from an envoy data source, such as a file in AWS credential format.
    """

    custom_credential_provider_chain: "bool" = betterproto2.field(
        4, betterproto2.TYPE_BOOL
    )
    """
    Create a custom credential provider chain instead of the default credential provider chain.
    If set to TRUE, the credential provider chain that is created contains only those set in this credential provider message.
    If set to FALSE, the settings provided here will act as modifiers to the default credential provider chain.
    Defaults to FALSE.

    This has no effect if inline_credential is provided.
    """

    iam_roles_anywhere_credential_provider: "IamRolesAnywhereCredentialProvider | None" = betterproto2.field(
        5, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The option to use `IAM Roles Anywhere <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/introduction.html>`_.
    """

    config_credential_provider: "ConfigCredentialProvider | None" = betterproto2.field(
        6, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The option to use credentials sourced from standard `AWS configuration files <https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html>`_.
    """

    container_credential_provider: "ContainerCredentialProvider | None" = (
        betterproto2.field(7, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The option to use credentials sourced from `container environment variables <https://docs.aws.amazon.com/sdkref/latest/guide/feature-container-credentials.html>`_.
    """

    environment_credential_provider: "EnvironmentCredentialProvider | None" = (
        betterproto2.field(8, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The option to use credentials sourced from `environment variables <https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html>`_.
    """

    instance_profile_credential_provider: "InstanceProfileCredentialProvider | None" = (
        betterproto2.field(9, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The option to use credentials sourced from an EC2 `Instance Profile <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html>`_.
    """

    assume_role_credential_provider: "AssumeRoleCredentialProvider | None" = (
        betterproto2.field(10, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The option to use `STS:AssumeRole aka Role Chaining <https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html>`_.
    """


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3", "AwsCredentialProvider", AwsCredentialProvider
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class ConfigCredentialProvider(betterproto2.Message):
    """
    The Config Credential Provider has no configurable parameters, but listing it in a custom credential provider chain will enable this
    credential provider.
    """

    pass


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "ConfigCredentialProvider",
    ConfigCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class ContainerCredentialProvider(betterproto2.Message):
    """
    The Container Credential Provider has no configurable parameters, but listing it in a custom credential provider chain will enable this
    credential provider.
    """

    pass


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "ContainerCredentialProvider",
    ContainerCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class CredentialsFileCredentialProvider(betterproto2.Message):
    credentials_data_source: "____config__core__v3__.DataSource | None" = (
        betterproto2.field(1, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    Data source from which to retrieve AWS credentials
    When using this data source, if a ``watched_directory`` is provided, the credential file will be re-read when a file move is detected.
    See :ref:`watched_directory <envoy_v3_api_msg_config.core.v3.DataSource>` for more information about the ``watched_directory`` field.
    """

    profile: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        2, betterproto2.TYPE_STRING
    )
    """
    The profile within the credentials_file data source. If not provided, the default profile will be used.
    """


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "CredentialsFileCredentialProvider",
    CredentialsFileCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class EnvironmentCredentialProvider(betterproto2.Message):
    """
    The Environment Credential Provider has no configurable parameters, but listing it in a custom credential provider chain will enable this
    credential provider.
    """

    pass


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "EnvironmentCredentialProvider",
    EnvironmentCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class IamRolesAnywhereCredentialProvider(betterproto2.Message):
    """
    Configuration to use `IAM Roles Anywhere <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/introduction.html>`_
    to retrieve AWS credentials.
    [#next-free-field: 9]
    """

    role_arn: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        1, betterproto2.TYPE_STRING
    )
    """
    The ARN of the role to assume via the IAM Roles Anywhere sessions API. See `Configure Roles <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/getting-started.html#getting-started-step2>`_ for more details.
    """

    certificate: "____config__core__v3__.DataSource | None" = betterproto2.field(
        2, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The certificate used for authenticating to the IAM Roles Anywhere service.
    This certificate must match one configured in the IAM Roles Anywhere profile. See `Configure Roles <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/getting-started.html#getting-started-step2>`_ for more details.
    """

    certificate_chain: "____config__core__v3__.DataSource | None" = betterproto2.field(
        3, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The optional certificate chain, required when you are using a subordinate certificate authority for certificate issuance.
    A certificate chain can contain a maximum of 5 elements, see `The IAM Roles Anywhere authentication process <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/authentication.html>`_ for more details.
    """

    private_key: "____config__core__v3__.DataSource | None" = betterproto2.field(
        4, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The TLS private key matching the certificate provided.
    """

    trust_anchor_arn: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        5, betterproto2.TYPE_STRING
    )
    """
    The arn of the IAM Roles Anywhere trust anchor configured in your AWS account. A trust anchor in IAM Roles anywhere establishes
    trust between your certificate authority (CA) and AWS. See `Establish trust <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/getting-started.html#getting-started-step1>`_ for more details.
    """

    profile_arn: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        6, betterproto2.TYPE_STRING
    )
    """
    The IAM Roles Anywhere profile ARN configured in your AWS account.
    """

    role_session_name: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        7, betterproto2.TYPE_STRING
    )
    """
    An optional role session name, used when identifying the role in subsequent AWS API calls.
    """

    session_duration: "datetime.timedelta | None" = betterproto2.field(
        8,
        betterproto2.TYPE_MESSAGE,
        unwrap=lambda: _____google__protobuf__.Duration,
        optional=True,
    )
    """
    An optional session duration, used when calculating the maximum time before vended credentials expire. This value cannot exceed the value configured
    in the IAM Roles Anywhere profile and the resultant session duration is calculate by the formula `here <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/authentication-create-session.html#credentials-object>`_.
    If no session duration is provided here, the session duration is sourced from the IAM Roles Anywhere profile.
    """


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "IAMRolesAnywhereCredentialProvider",
    IamRolesAnywhereCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class InlineCredentialProvider(betterproto2.Message):
    """
    Configuration to use an inline AWS credential. This is an equivalent to setting the well-known
    environment variables ``AWS_ACCESS_KEY_ID``, ``AWS_SECRET_ACCESS_KEY``, and the optional ``AWS_SESSION_TOKEN``.
    """

    access_key_id: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        1, betterproto2.TYPE_STRING
    )
    """
    The AWS access key ID.
    """

    secret_access_key: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        2, betterproto2.TYPE_STRING
    )
    """
    The AWS secret access key.
    """

    session_token: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        3, betterproto2.TYPE_STRING
    )
    """
    The AWS session token. This is optional.
    """


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "InlineCredentialProvider",
    InlineCredentialProvider,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class InstanceProfileCredentialProvider(betterproto2.Message):
    """
    The Instance Profile Credential Provider has no configurable parameters, but listing it in a custom credential provider chain will enable this
    credential provider.
    """

    pass


default_message_pool.register_message(
    "envoy.extensions.common.aws.v3",
    "InstanceProfileCredentialProvider",
    InstanceProfileCredentialProvider,
)


from ......google import protobuf as _____google__protobuf__
from .....config.core import v3 as ____config__core__v3__
