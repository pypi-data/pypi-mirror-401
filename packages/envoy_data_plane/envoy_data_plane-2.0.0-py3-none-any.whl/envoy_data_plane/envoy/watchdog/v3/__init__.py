# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/watchdog/v3/abort_action.proto
# plugin: python-betterproto2
# This file has been @generated

__all__ = ("AbortActionConfig",)

import datetime

import betterproto2
from pydantic.dataclasses import dataclass

from ....message_pool import default_message_pool

_COMPILER_VERSION = "0.9.0"
betterproto2.check_compiler_version(_COMPILER_VERSION)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class AbortActionConfig(betterproto2.Message):
    """
    [#protodoc-title: Watchdog Action that kills a stuck thread to kill the process.]

    A GuardDogAction that will terminate the process by killing the
    stuck thread. This would allow easier access to the call stack of the stuck
    thread since we would run signal handlers on that thread. By default
    this will be registered to run as the last watchdog action on KILL and
    MULTIKILL events if those are enabled.
    """

    wait_duration: "datetime.timedelta | None" = betterproto2.field(
        1,
        betterproto2.TYPE_MESSAGE,
        unwrap=lambda: ___google__protobuf__.Duration,
        optional=True,
    )
    """
    How long to wait for the thread to respond to the thread kill function
    before killing the process from this action. This is a blocking action.
    By default this is 5 seconds.
    """


default_message_pool.register_message(
    "envoy.watchdog.v3", "AbortActionConfig", AbortActionConfig
)


from ....google import protobuf as ___google__protobuf__
