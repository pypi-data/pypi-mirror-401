<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Namel3ss Studio</title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/studio_ui.css">
  <link rel="stylesheet" href="/studio_panels.css">
  <link rel="stylesheet" href="/theme_tokens.css">
</head>
<body class="studio-root">
  <div class="studio-shell">
    <header class="topbar" data-testid="studio-topbar">
      <div class="topbar-left">
        <div class="studio-title">namel3ss Studio</div>
      </div>
      <div class="topbar-center">
        <div class="app-title" id="appName" data-testid="studio-app-name">App</div>
      </div>
      <div class="topbar-actions">
        <div class="ai-mode-badge hidden" id="aiModeBadge" data-testid="studio-ai-mode-badge">
          <span id="aiModeBadgeText">AI: Mock</span>
          <button class="btn ghost ai-mode-badge-button hidden" id="aiModeBadgeSetup">Open Setup</button>
        </div>
        <button class="btn primary" id="run" title="Run the default flow" data-testid="studio-run-button" disabled>Run ▸</button>
        <button
          class="btn ghost icon-button"
          id="studioMenuToggle"
          aria-haspopup="true"
          aria-expanded="false"
          aria-controls="studioMenu"
          title="Developer actions"
        >
          ⋯
        </button>
        <div class="menu hidden" id="studioMenu" role="menu" data-testid="studio-menu">
          <button class="menu-item" data-action="seed" role="menuitem">Seed demo data</button>
          <button class="menu-item" data-action="reset" role="menuitem">Reset state</button>
          <button class="menu-item" data-action="replay" role="menuitem">Replay last run</button>
          <button class="menu-item" data-action="export" role="menuitem">Export trace</button>
        </div>
        <div id="toast" class="toast run-status" aria-live="polite"></div>
      </div>
    </header>
    <div id="errorBanner" class="error-banner hidden" role="status" aria-live="polite" data-testid="studio-error-banner"></div>
    <div id="setupBanner" class="setup-banner hidden" role="status" aria-live="polite" data-testid="studio-setup-banner"></div>
    <main class="canvas" id="canvas" data-testid="studio-canvas">
      <section class="canvas-mode active" data-mode="preview" aria-labelledby="dock-preview">
        <div class="preview-shell" id="previewShell">
          <div class="preview-prompt">Ask a question to begin.</div>
          <div class="preview-input">
            <input
              id="previewQuestion"
              type="text"
              placeholder="Which region has the most returns?"
              aria-label="Question"
            />
            <button class="btn primary" id="previewAsk">Ask AI</button>
          </div>
          <div class="preview-hint" id="previewHint" aria-live="polite"></div>
          <div class="preview-answer">
            <div class="preview-answer-label">Answer</div>
            <div id="previewAnswer" class="preview-answer-text empty">Ask a question to see an answer.</div>
            <button class="btn ghost preview-why hidden" id="previewWhy">Why?</button>
          </div>
        </div>
      </section>
      <section class="canvas-mode" data-mode="why" aria-labelledby="dock-why">
        <div id="why" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="data" aria-labelledby="dock-data">
        <div id="data" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="errors" aria-labelledby="dock-errors">
        <div id="errors" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="formulas" aria-labelledby="dock-formulas">
        <div class="canvas-panel">
          <div class="control-row formulas-controls">
            <div class="formula-toggle" role="group" aria-label="Formula view">
              <button class="btn ghost active" data-formula-view="code" aria-pressed="true">Code View</button>
              <button class="btn ghost" data-formula-view="formula" aria-pressed="false">Formula View</button>
            </div>
          </div>
          <div id="formulas" class="panel-stack"></div>
        </div>
      </section>
      <section class="canvas-mode" data-mode="explain" aria-labelledby="dock-explain">
        <div id="explain" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="traces" aria-labelledby="dock-traces">
        <div class="canvas-panel">
          <div class="control-row">
            <input id="tracesFilter" type="text" placeholder="Filter traces..." aria-label="Filter traces">
          </div>
          <div id="traces"></div>
        </div>
      </section>
      <section class="canvas-mode" data-mode="memory" aria-labelledby="dock-memory">
        <div id="memory" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="agents" aria-labelledby="dock-agents">
        <div id="agents" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="setup" aria-labelledby="dock-setup">
        <div id="setup" class="canvas-panel"></div>
      </section>
      <section class="canvas-mode" data-mode="graph" aria-labelledby="dock-graph">
        <div class="graph-layout canvas-panel">
          <div class="graph-wrap">
            <div id="graphCanvas" class="graph-canvas"></div>
          </div>
          <div class="graph-details" id="graphDetails"></div>
        </div>
      </section>
    </main>
  </div>
  <footer class="dock" id="dock" role="tablist" data-testid="studio-dock">
    <div class="dock-inner">
      <button class="tab" data-tab="preview" id="dock-preview" data-testid="studio-dock-item-preview">Preview</button>
      <button class="tab" data-tab="why" id="dock-why" data-testid="studio-dock-item-why">Why</button>
      <button class="tab" data-tab="data" id="dock-data" data-testid="studio-dock-item-data">Data</button>
      <button class="tab" data-tab="errors" id="dock-errors" data-testid="studio-dock-item-errors">Errors</button>
      <button class="tab" data-tab="formulas" id="dock-formulas" data-testid="studio-dock-item-formulas">Formulas</button>
      <button class="tab" data-tab="explain" id="dock-explain" data-testid="studio-dock-item-explain">Explain</button>
      <button class="tab" data-tab="traces" id="dock-traces" data-testid="studio-dock-item-traces">Traces</button>
      <button class="tab" data-tab="memory" id="dock-memory" data-testid="studio-dock-item-memory">Memory</button>
      <button class="tab" data-tab="agents" id="dock-agents" data-testid="studio-dock-item-agents">Agents</button>
      <button class="tab" data-tab="setup" id="dock-setup" data-testid="studio-dock-item-setup">Setup</button>
      <button class="tab" data-tab="graph" id="dock-graph" data-testid="studio-dock-item-graph">Graph</button>
    </div>
  </footer>
  <div id="secretsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="secretsModalTitle">
    <div class="modal-content">
      <div class="modal-header">
        <div id="secretsModalTitle" class="section-title">Missing secrets</div>
        <button class="btn ghost" id="secretsModalClose" aria-label="Close">Close</button>
      </div>
      <div class="modal-body">
        <p id="secretsModalBody">This action may require secrets that are missing.</p>
        <div class="ui-buttons">
          <button class="btn ghost" id="secretsModalSetup">Open Setup</button>
          <button class="btn primary" id="secretsModalContinue">Run anyway</button>
        </div>
      </div>
    </div>
  </div>
  <script src="/ui_renderer_collections.js"></script>
  <script src="/ui_renderer_form.js"></script>
  <script src="/ui_renderer_chat.js"></script>
  <script src="/ui_renderer_chart.js"></script>
  <script src="/ui_renderer.js"></script>
  <script src="/theme_tokens.js"></script>
  <script src="/theme_runtime.js"></script>
  <script src="/trace_utils.js"></script>
  <script src="/studio/guidance.js"></script>
  <script src="/studio/dom.js"></script>
  <script src="/studio/net.js"></script>
  <script src="/studio/state.js"></script>
  <script src="/studio/action_result.js"></script>
  <script src="/studio/run.js"></script>
  <script src="/studio/refresh.js"></script>
  <script src="/studio/secret_keys.js"></script>
  <script src="/studio/traces.js"></script>
  <script src="/studio/errors.js"></script>
  <script src="/studio/formulas.js"></script>
  <script src="/studio/explain.js"></script>
  <script src="/studio/memory.js"></script>
  <script src="/studio/agents/wizard.js"></script>
  <script src="/studio/agents/run.js"></script>
  <script src="/studio/agents/handoff.js"></script>
  <script src="/studio/agents/memory_packs.js"></script>
  <script src="/studio/agents/index.js"></script>
  <script src="/studio/setup.js"></script>
  <script src="/studio/why.js"></script>
  <script src="/studio/preview.js"></script>
  <script src="/studio/data.js"></script>
  <script src="/graph_panel.js"></script>
  <script src="/studio/menu.js"></script>
  <script src="/studio/dock.js"></script>
  <script src="/app.js"></script>
</body>
</html>
