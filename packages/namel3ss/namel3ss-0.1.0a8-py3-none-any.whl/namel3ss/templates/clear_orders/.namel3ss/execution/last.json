{
  "execution_steps": [
    {
      "because": null,
      "column": 1,
      "data": {},
      "id": "step:0001",
      "kind": "flow_start",
      "line": 238,
      "what": "flow \"ask_ai\" started"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0002",
      "kind": "statement_delete",
      "line": 239,
      "what": "deleted Answer"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0003",
      "kind": "statement_delete",
      "line": 240,
      "what": "deleted ExplanationStat"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0004",
      "kind": "statement_find",
      "line": 241,
      "what": "found Order"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0005",
      "kind": "statement_let",
      "line": 242,
      "what": "set local order_count"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0006",
      "kind": "statement_let",
      "line": 243,
      "what": "set local question"
    },
    {
      "because": null,
      "column": 24,
      "data": {
        "tool_name": "format orders prompt"
      },
      "id": "step:0007",
      "kind": "tool_call",
      "line": 244,
      "what": "called tool format orders prompt"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0008",
      "kind": "statement_let",
      "line": 244,
      "what": "set local prompt_result"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0009",
      "kind": "statement_let",
      "line": 248,
      "what": "set local prompt"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0010",
      "kind": "statement_set",
      "line": 249,
      "what": "set state.status.message"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0011",
      "kind": "statement_let",
      "line": 250,
      "what": "set local openai_status"
    },
    {
      "because": null,
      "column": 20,
      "data": {},
      "id": "step:0012",
      "kind": "function_enter",
      "line": 251,
      "what": "entered function select ai provider"
    },
    {
      "because": null,
      "column": 3,
      "data": {
        "condition": "openai_available == true",
        "value": true
      },
      "id": "step:0013",
      "kind": "decision_if",
      "line": 230,
      "what": "if openai_available == true was true"
    },
    {
      "because": "condition was true",
      "column": 3,
      "data": {},
      "id": "step:0014",
      "kind": "branch_taken",
      "line": 230,
      "what": "took then branch"
    },
    {
      "because": null,
      "column": 5,
      "data": {},
      "id": "step:0015",
      "kind": "statement_return",
      "line": 231,
      "what": "returned a value"
    },
    {
      "because": null,
      "column": 20,
      "data": {},
      "id": "step:0016",
      "kind": "function_return",
      "line": 251,
      "what": "returned from select ai provider"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0017",
      "kind": "statement_let",
      "line": 251,
      "what": "set local selection"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0018",
      "kind": "statement_set",
      "line": 253,
      "what": "set state.ai_provider_selected"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0019",
      "kind": "statement_set",
      "line": 254,
      "what": "set state.ai_mode"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0020",
      "kind": "statement_let",
      "line": 255,
      "what": "set local selected"
    },
    {
      "because": null,
      "column": 3,
      "data": {
        "condition": "selected == \"assistant_openai\"",
        "value": true
      },
      "id": "step:0021",
      "kind": "decision_if",
      "line": 256,
      "what": "if selected == \"assistant_openai\" was true"
    },
    {
      "because": "condition was true",
      "column": 3,
      "data": {},
      "id": "step:0022",
      "kind": "branch_taken",
      "line": 256,
      "what": "took then branch"
    },
    {
      "because": "condition was true",
      "column": 3,
      "data": {},
      "id": "step:0023",
      "kind": "branch_skipped",
      "line": 256,
      "what": "skipped else branch"
    },
    {
      "because": null,
      "column": 5,
      "data": {},
      "id": "step:0024",
      "kind": "decision_try",
      "line": 257,
      "what": "try block"
    },
    {
      "because": null,
      "column": 7,
      "data": {},
      "id": "step:0025",
      "kind": "ai_call",
      "line": 258,
      "what": "asked ai assistant_openai"
    },
    {
      "because": "error raised",
      "column": 5,
      "data": {},
      "id": "step:0026",
      "kind": "catch_taken",
      "line": 257,
      "what": "catch block taken"
    },
    {
      "because": null,
      "column": 7,
      "data": {},
      "id": "step:0027",
      "kind": "statement_let",
      "line": 262,
      "what": "set local category"
    },
    {
      "because": null,
      "column": 7,
      "data": {
        "condition": "category == \"model_access\"",
        "value": false
      },
      "id": "step:0028",
      "kind": "decision_if",
      "line": 263,
      "what": "if category == \"model_access\" was false"
    },
    {
      "because": "condition was false",
      "column": 7,
      "data": {},
      "id": "step:0029",
      "kind": "branch_taken",
      "line": 263,
      "what": "took else branch"
    },
    {
      "because": "condition was false",
      "column": 7,
      "data": {},
      "id": "step:0030",
      "kind": "branch_skipped",
      "line": 263,
      "what": "skipped then branch"
    },
    {
      "because": null,
      "column": 9,
      "data": {
        "condition": "category == \"server\" or category == \"network\"",
        "value": false
      },
      "id": "step:0031",
      "kind": "decision_if",
      "line": 275,
      "what": "if category == \"server\" or category == \"network\" was false"
    },
    {
      "because": "condition was false",
      "column": 9,
      "data": {},
      "id": "step:0032",
      "kind": "branch_taken",
      "line": 275,
      "what": "took else branch"
    },
    {
      "because": "condition was false",
      "column": 9,
      "data": {},
      "id": "step:0033",
      "kind": "branch_skipped",
      "line": 275,
      "what": "skipped then branch"
    },
    {
      "because": null,
      "column": 11,
      "data": {
        "condition": "category == \"rate_limit\"",
        "value": false
      },
      "id": "step:0034",
      "kind": "decision_if",
      "line": 287,
      "what": "if category == \"rate_limit\" was false"
    },
    {
      "because": "condition was false",
      "column": 11,
      "data": {},
      "id": "step:0035",
      "kind": "branch_taken",
      "line": 287,
      "what": "took else branch"
    },
    {
      "because": "condition was false",
      "column": 11,
      "data": {},
      "id": "step:0036",
      "kind": "branch_skipped",
      "line": 287,
      "what": "skipped then branch"
    },
    {
      "because": null,
      "column": 13,
      "data": {
        "condition": "category == \"auth\" or category == \"missing_key\"",
        "value": true
      },
      "id": "step:0037",
      "kind": "decision_if",
      "line": 294,
      "what": "if category == \"auth\" or category == \"missing_key\" was true"
    },
    {
      "because": "condition was true",
      "column": 13,
      "data": {},
      "id": "step:0038",
      "kind": "branch_taken",
      "line": 294,
      "what": "took then branch"
    },
    {
      "because": "condition was true",
      "column": 13,
      "data": {},
      "id": "step:0039",
      "kind": "branch_skipped",
      "line": 294,
      "what": "skipped else branch"
    },
    {
      "because": null,
      "column": 15,
      "data": {},
      "id": "step:0040",
      "kind": "statement_set",
      "line": 295,
      "what": "set state.status.message"
    },
    {
      "because": null,
      "column": 15,
      "data": {},
      "id": "step:0041",
      "kind": "statement_set",
      "line": 296,
      "what": "set state.ai_provider_selected"
    },
    {
      "because": null,
      "column": 15,
      "data": {},
      "id": "step:0042",
      "kind": "statement_set",
      "line": 297,
      "what": "set state.ai_mode"
    },
    {
      "because": null,
      "column": 15,
      "data": {},
      "id": "step:0043",
      "kind": "ai_call",
      "line": 298,
      "what": "asked ai assistant"
    },
    {
      "because": null,
      "column": 15,
      "data": {},
      "id": "step:0044",
      "kind": "statement_set",
      "line": 299,
      "what": "set state.answer.text"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0045",
      "kind": "statement_create",
      "line": 310,
      "what": "created Answer"
    },
    {
      "because": null,
      "column": 3,
      "data": {},
      "id": "step:0046",
      "kind": "statement_return",
      "line": 311,
      "what": "returned a value"
    },
    {
      "because": "completed successfully",
      "column": 1,
      "data": {},
      "id": "step:0047",
      "kind": "flow_end",
      "line": 238,
      "what": "flow \"ask_ai\" ended"
    }
  ],
  "flow_name": "ask_ai",
  "ok": true,
  "summary": "Flow \"ask_ai\" ran with 47 steps.",
  "traces": [
    {
      "ai_name": null,
      "events": 0,
      "tool_calls": 0
    },
    {
      "ai_name": null,
      "events": 0,
      "tool_calls": 0
    },
    {
      "ai_name": null,
      "events": 0,
      "tool_calls": 0
    },
    {
      "ai_name": "assistant_openai",
      "events": 17,
      "tool_calls": 0
    },
    {
      "ai_name": "assistant",
      "events": 23,
      "tool_calls": 0
    }
  ]
}
