"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[6301],{723:function(t,e,l){var n,a=this&&this.__createBinding||(Object.create?function(t,e,l,n){void 0===n&&(n=l);var a=Object.getOwnPropertyDescriptor(e,l);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[l]}}),Object.defineProperty(t,n,a)}:function(t,e,l,n){void 0===n&&(n=l),t[n]=e[l]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[e.length]=l);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var l=n(t),r=0;r<l.length;r++)"default"!==l[r]&&a(e,t,l[r]);return o(e,t),e}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.quillMention=e.imageHandler=e.overrideImageButtonHandler=e.changeDelta=e.getQuillModules=e.quillLoad=e.tableContextMenuProps=e.TextBoxTable=e.TextBoxTableRow=e.TextBoxTableCell=e.TableModule=e.TableContainer=e.TableRow=e.TableCell=e.Delta=e.Quill=e.name=void 0,e.textboxId=q,e.QuillEditor=W,e.name="quillmodules";const s=i(l(6540)),d=i(l(5556)),c=r(l(5743));e.Quill=c.default,Object.defineProperty(e,"Delta",{enumerable:!0,get:function(){return c.Delta}});const u=i(l(3503)),m=l(7421),h=i(l(4744)),b=i(l(1244)),f=i(l(7514)),g=i(l(537)),p=i(l(194)),x=i(l(3117)),A=l(5548),v=l(6606);l(5065),l(1882);const y=r(l(8524));function q(){return`textbox-${Math.random().toString(36).slice(2,6)}`}class w extends f.default{static create(t){y.debugMessage("TextBoxBlock.create",t);const e=super.create(t);return t?e.setAttribute("data-textbox-id",t):e.setAttribute("data-textbox-id",q()),e}static formats(t){if(t.hasAttribute("data-textbox-id"))return t.getAttribute("data-textbox-id")||void 0}getTextBoxId(){return this.domNode.getAttribute("data-textbox-id")||void 0}format(t,e){t===w.blotName&&e?this.domNode.setAttribute("data-textbox-id",String(e)):super.format(t,e)}formats(){return{[this.statics.blotName]:w.formats(this.domNode)}}textbox(){return this.parent&&"textbox"===this.parent.statics.blotName?this.parent:null}optimize(t){if(super.optimize(t),this.parent&&"textbox"!==this.parent.statics.blotName){const t="50%",e="",l=this.scroll.create("textbox",{width:t,align:e});l.appendChild(this),this.replaceWith(l)}}}w.blotName="textbox-block",w.tagName="P",w.className="ql-textbox-block";class C extends b.default{get textboxId(){return this.children.head&&this.children.head.getTextBoxId()||""}static create(t){y.debugMessage("TextBoxBlot.create",t);const e=super.create(),l="string"==typeof t?{}:t||{};return l.width?(e.style.width=l.width,e.setAttribute("data-width",l.width)):(e.style.width="50%",e.setAttribute("data-width","50%")),l.align&&(e.setAttribute("data-align",l.align),e.classList.add(`ql-textbox-align-${l.align}`)),e}static formats(t){return{width:t.getAttribute("data-width")||t.style.width,align:t.getAttribute("data-align")||void 0}}constructor(t,e){super(t,e)}format(t,e){if("textbox"!==t)throw new Error(`${this.statics.name}.format: Unsupported format name '${t}'`);if("object"==typeof e&&null!==e){const t=e,l=this.domNode;t.width&&(l.style.width=t.width,l.setAttribute("data-width",t.width)),void 0!==t.align&&(l.classList.remove("ql-textbox-align-left","ql-textbox-align-center","ql-textbox-align-right"),t.align?(l.setAttribute("data-align",t.align),l.classList.add(`ql-textbox-align-${t.align}`)):l.removeAttribute("data-align"))}}formats(){return{[this.statics.blotName]:C.formats(this.domNode)}}optimize(t,e){if(super.optimize(t),0===this.children.length){const t=this.scroll.create(w.blotName,this.textboxId);this.appendChild(t)}this.children.head&&(this.children.forEach(t=>{var e;if(!(null===(e=C.allowedChildren)||void 0===e?void 0:e.some(e=>t instanceof e))){const e=this.scroll.create(w.blotName,this.textboxId);t.replaceWith(e),e.appendChild(t)}}),this.children.forEach(t=>{if(null==t.next)return;if(t.getTextBoxId()!==t.next.getTextBoxId()){const e=this.splitAfter(t);e&&e.optimize({})}}))}checkMerge(){if(super.checkMerge()&&this.next instanceof C){const t=this.next.children.head.getTextBoxId();return this.textboxId===t}return!1}}C.blotName="textbox",C.tagName="DIV",C.className="ql-textbox",C.defaultChild=w,C.allowedChildren=[w],w.requiredContainer=C;const B=c.default.import("modules/table"),E=c.default.import("formats/table"),N=c.default.import("formats/table-row"),I=c.default.import("formats/table-container"),T=c.default.import("formats/table-body");class k extends E{static create(t){let e;return"string"==typeof t||null==t?e=super.create(t):(e=super.create(t.row),t.class&&e.setAttribute("class",t.class)),e}static formats(t,e){const l={};if(l.row=super.formats(t,e),t.hasAttribute("class")){const e=t.getAttribute("class");e&&e.length&&(l.class=e)}return l}formats(){return{[this.statics.blotName]:k.formats(this.domNode,this.scroll)}}format(t,e){if(t===this.statics.blotName){if("string"==typeof e)throw new Error(`${this.statics.name}.format: string value is not supported, use an object { row?: string, class?: string }`);"object"==typeof e&&null!=e&&(e.row&&super.format(t,e.row),e.class&&e.class.length?this.domNode.setAttribute("class",e.class):this.domNode.hasAttribute("class")&&this.domNode.removeAttribute("class"))}else super.format(t,e)}}e.TableCell=k;class R extends N{static create(t){const e=super.create();return t&&t.length&&e.setAttribute("class",t),e}static formats(t){if(t.hasAttribute("class"))return t.getAttribute("class")}formats(){return{[this.statics.blotName]:R.formats(this.domNode)}}format(t,e){if(t!==this.statics.blotName)throw new Error(`${this.statics.name}.format: Unsupported format name '${t}'`);e&&e.length?this.domNode.setAttribute("class",e):this.domNode.removeAttribute("class")}checkMerge(){if(b.default.prototype.checkMerge.call(this)&&null!=this.next.children.head){const t=this.children.head.statics.blotName,e=this.children.head.formats(),l=this.children.tail.formats(),n=this.next.children.head.formats(),a=this.next.children.tail.formats();return e[t].row===l[t].row&&e[t].row===n[t].row&&e[t].row===a[t].row}return!1}optimize(...t){b.default.prototype.optimize.call(this,...t);const e=this instanceof P?_:k;this.children.forEach(t=>{var l,n;if(null==t.next)return;const a=t.formats(),o=t.next.formats();if((null===(l=a[e.blotName])||void 0===l?void 0:l.row)!==(null===(n=o[e.blotName])||void 0===n?void 0:n.row)){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}})}}e.TableRow=R;class L extends I{static create(t){const e=super.create(t);return t&&t.length&&e.setAttribute("class",t),e}static formats(t){if(t.hasAttribute("class"))return t.getAttribute("class")}formats(){return{[this.statics.blotName]:L.formats(this.domNode)}}format(t,e){if(t!==this.statics.blotName)throw new Error(`${this.statics.name}.format: Unsupported format name '${t}'`);e&&e.length?this.domNode.setAttribute("class",e):this.domNode.removeAttribute("class")}balanceCells(){const t=this.descendants(R),e=t.reduce((t,e)=>Math.max(e.children.length,t),0),l=t[0]instanceof P?_:k;t.forEach(t=>{new Array(e-t.children.length).fill(0).forEach(()=>{let e=null;null!=t.children.head&&(e=l.formats(t.children.head.domNode,this.scroll));const n=this.scroll.create(l.blotName,e);t.appendChild(n),n.optimize()})})}insertColumn(t){const[e]=this.descendant(T);if(null==e||null==e.children.head)return;const l=e instanceof S?_:k;e.children.forEach(e=>{const n=e.children.at(t),a=l.formats(e.children.head.domNode,this.scroll),o=this.scroll.create(l.blotName,a);e.insertBefore(o,n)})}insertRow(t){const[e]=this.descendant(T);if(null==e||null==e.children.head)return;const l=e instanceof S,n=(0,m.tableId)(),a=e.children.head,o=a&&a.domNode?a.domNode.getAttribute("class"):void 0;let r;o&&o.length&&(r=o);const i=this.scroll.create(l?P.blotName:R.blotName,r);e.children.head.children.forEach(()=>{const t=a.children.head,e=Object.values(t.formats())[0];e.row=n;const o=this.scroll.create(l?_.blotName:k.blotName,e);i.appendChild(o)});const s=e.children.at(t);e.insertBefore(i,s)}}e.TableContainer=L;class M extends B{getTable(t=this.quill.getSelection()){if(null==t)return[null,null,null,-1];const[e,l]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==k.blotName&&e.statics.blotName!==_.blotName)return[null,null,null,-1];const n=e.parent;return[n.parent.parent,n,e,l]}insertTable(t,e){const l=this.quill.getSelection();if(null==l)return;let[n]=this.quill.getLine(l.index),a="table";const o={};for(;null!=n;){if(n instanceof C){a="textbox-table-cell",o.textbox_id=n.textboxId;break}n=n.parent}const r=new Array(t).fill(0).reduce(t=>{const l=new Array(e).fill("\n").join("");return t.insert(l,{[a]:Object.assign({},o,{row:(0,m.tableId)()})})},(new c.Delta).retain(l.index));this.quill.updateContents(r,c.default.sources.USER),this.quill.setSelection(l.index,c.default.sources.SILENT),this.balanceTables()}}e.TableModule=M;class _ extends k{static create(t){if("object"==typeof t&&null!=t){let e=null,l=null,n=null;t.class&&(e=t.class),t.row&&(l=t.row),t.textbox_id&&(n=t.textbox_id);const a=super.create({row:l||"",class:e||""});return n&&a.setAttribute("data-textbox-id",n),a}return super.create(t)}static formats(t,e){const l={},n=super.formats(t,e);if(l.row=n.row,n.class&&(l.class=n.class),t.hasAttribute("data-textbox-id")){const e=t.getAttribute("data-textbox-id");e&&e.length&&(l.textbox_id=e)}return l}formats(){return{[this.statics.blotName]:_.formats(this.domNode,this.scroll)}}format(t,e){if(t===this.statics.blotName){if("string"==typeof e)throw new Error(`${this.statics.name}.format: string value is not supported, use an object { row?: string; class?: string; textbox_id?: string }`);"object"==typeof e&&null!=e&&(e.row&&this.domNode.setAttribute("data-row",e.row),e.class&&e.class.length?this.domNode.setAttribute("class",e.class):this.domNode.hasAttribute("class")&&this.domNode.removeAttribute("class"),e.textbox_id&&e.textbox_id.length?this.domNode.setAttribute("data-textbox-id",e.textbox_id):this.domNode.hasAttribute("data-textbox-id")&&this.domNode.removeAttribute("data-textbox-id"))}else super.format(t,e)}}e.TextBoxTableCell=_,_.blotName="textbox-table-cell",_.className="ql-textbox-table-cell";class P extends R{}e.TextBoxTableRow=P,P.blotName="textbox-table-row",P.className="ql-textbox-table-row";class S extends T{}S.blotName="textbox-table-body",S.className="ql-textbox-table-body";class H extends L{getTextBoxId(){const[t]=this.descendant(_);return t&&t.domNode.hasAttribute("data-textbox-id")?t.domNode.getAttribute("data-textbox-id"):null}}e.TextBoxTable=H,H.blotName="textbox-table",H.className="ql-textbox-table",H.requiredContainer=C,_.requiredContainer=P,P.allowedChildren=[_],P.requiredContainer=S,S.allowedChildren=[P],S.requiredContainer=H,H.allowedChildren=[S],C.allowedChildren=[w,H],c.default.register("formats/textbox-table",H),c.default.register("formats/textbox-table-body",S),c.default.register("formats/textbox-table-row",P),c.default.register("formats/textbox-table-cell",_),c.default.register("modules/imageDropAndPaste",g.default),c.default.register("modules/blotFormatter2",p.default),c.default.register({"blots/mention":A.MentionBlot,"modules/mention":A.Mention}),c.default.register("modules/htmlEditButton",x.default),c.default.register("formats/textbox",C),c.default.register("formats/textbox-block",w),c.default.register("modules/textboxFormatter",class{constructor(t,e={}){this.quill=t,this.options=(0,h.default)({debug:!1,overlay:{className:"ql-textbox-overlay",style:{}},resize:{handleClassName:"ql-textbox-handle",handleStyle:{width:"12px",height:"12px",backgroundColor:"#4285f4",border:"1px solid white"}},align:{alignments:["left","center","right"],icons:{left:"â¬…",center:"â†”",right:"âž¡"}},toolbar:{mainClassName:"ql-textbox-toolbar",buttonClassName:"ql-textbox-toolbar-button"}},e,{arrayMerge:(t,e)=>e}),this.overlay=this.createOverlay(),this.toolbar=this.createToolbar(),this.currentTarget=null,this.resizeHandles=this.createResizeHandles(),this.alignButtons={},this.isDragging=!1,this.dragHandle=null,this.dragStartX=0,this.dragStartWidth=0,this.attachEventListeners(),this.log("TextBoxFormatter initialized")}log(...t){this.options.debug&&console.debug("[TextBoxFormatter]",...t)}createOverlay(){const t=document.createElement("div");return t.className=this.options.overlay.className,t.style.cssText="\n            position: absolute;\n            display: none;\n            border: 2px dashed #4285f4;\n            pointer-events: none;\n            z-index: 100;\n        ",Object.assign(t.style,this.options.overlay.style||{}),this.quill.root.parentNode.appendChild(t),t}createToolbar(){const t=document.createElement("div");return t.className=this.options.toolbar.mainClassName,t.style.cssText="\n            position: absolute;\n            display: none;\n            background: white;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n            padding: 4px;\n            z-index: 101;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n        ",this.quill.root.parentNode.appendChild(t),t}createResizeHandles(){const t={};return[{name:"topLeft",cursor:"nwse-resize",pos:{top:"-6px",left:"-6px"}},{name:"topRight",cursor:"nesw-resize",pos:{top:"-6px",right:"-6px"}},{name:"bottomLeft",cursor:"nesw-resize",pos:{bottom:"-6px",left:"-6px"}},{name:"bottomRight",cursor:"nwse-resize",pos:{bottom:"-6px",right:"-6px"}}].forEach(({name:e,cursor:l,pos:n})=>{const a=document.createElement("div");a.className=this.options.resize.handleClassName,a.setAttribute("data-position",e),a.style.cssText=`\n                position: absolute;\n                cursor: ${l};\n                pointer-events: auto;\n                border-radius: 50%;\n            `,Object.assign(a.style,n),Object.assign(a.style,this.options.resize.handleStyle||{}),this.overlay.appendChild(a),t[e]=a}),t}createAlignButtons(){this.toolbar.innerHTML="",this.alignButtons={},this.options.align.alignments.forEach(t=>{const e=document.createElement("button");e.className=this.options.toolbar.buttonClassName,e.setAttribute("data-action",t),e.innerHTML=this.options.align.icons[t]||t[0].toUpperCase(),e.style.cssText="\n                padding: 6px 10px;\n                margin: 0 2px;\n                border: 1px solid #ddd;\n                background: white;\n                cursor: pointer;\n                border-radius: 3px;\n            ",e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.applyAlignment(t)}),this.toolbar.appendChild(e),this.alignButtons[t]=e})}attachEventListeners(){this.quill.root.addEventListener("click",t=>{const e=t.target.closest(".ql-textbox");e&&e instanceof HTMLElement?(t.preventDefault(),this.show(e)):this.hide()}),Object.values(this.resizeHandles).forEach(t=>{t.addEventListener("mousedown",e=>{e.preventDefault(),e.stopPropagation(),this.startResize(e,t)})}),document.addEventListener("mousedown",t=>{!this.currentTarget||this.overlay.contains(t.target)||this.toolbar.contains(t.target)||t.target.closest(".ql-textbox")||this.hide()}),this.quill.root.addEventListener("scroll",()=>{this.currentTarget&&this.repositionOverlay()}),this.quill.on("text-change",()=>{this.currentTarget&&requestAnimationFrame(()=>{this.repositionOverlay()})})}show(t){this.currentTarget=t,this.createAlignButtons(),this.updateAlignButtons(),this.repositionOverlay(),this.overlay.style.display="block",this.toolbar.style.display="block",this.log("Showing overlay for",t)}hide(){this.isDragging||(this.currentTarget=null,this.overlay.style.display="none",this.toolbar.style.display="none",this.log("Hiding overlay"))}repositionOverlay(){if(!this.currentTarget)return;const t=this.currentTarget.getBoundingClientRect(),e=this.quill.root.getBoundingClientRect();this.overlay.style.left=`${t.left-e.left+this.quill.root.scrollLeft}px`,this.overlay.style.top=`${t.top-e.top+this.quill.root.scrollTop}px`,this.overlay.style.width=`${t.width}px`,this.overlay.style.height=`${t.height}px`,this.toolbar.style.left=`${t.left-e.left+this.quill.root.scrollLeft}px`,this.toolbar.style.top=t.top-e.top+this.quill.root.scrollTop-40+"px"}startResize(t,e){if(!this.currentTarget)return;this.isDragging=!0,this.dragHandle=e,this.dragStartX=t.clientX,this.dragStartWidth=this.currentTarget.offsetWidth;const l=t=>{var e;if(!this.isDragging||!this.currentTarget)return;const l=t.clientX-this.dragStartX,n=this.dragHandle.getAttribute("data-position");let a=this.dragStartWidth;n.includes("Right")?a=this.dragStartWidth+l:n.includes("Left")&&(a=this.dragStartWidth-l);const o=this.quill.root.offsetWidth;a=Math.max(100,Math.min(a,o));const r=(null===(e=this.currentTarget.getAttribute("data-width"))||void 0===e?void 0:e.includes("%"))?`${(a/o*100).toFixed(2)}%`:`${a}px`;this.currentTarget.style.width=r,this.currentTarget.setAttribute("data-width",r),this.repositionOverlay(),this.log("Resizing to",r)},n=()=>{this.isDragging=!1,this.dragHandle=null,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",n),this.updateBlotFormat(),this.log("Resize complete")};document.addEventListener("mousemove",l),document.addEventListener("mouseup",n)}updateAlignButtons(){if(!this.currentTarget)return;const t=this.currentTarget.getAttribute("data-align")||"";Object.entries(this.alignButtons).forEach(([e,l])=>{e===t?(l.style.background="#e3f2fd",l.style.borderColor="#4285f4"):(l.style.background="white",l.style.borderColor="#ddd")})}applyAlignment(t){if(!this.currentTarget)return;this.currentTarget.classList.remove("ql-textbox-align-left","ql-textbox-align-center","ql-textbox-align-right");this.currentTarget.getAttribute("data-align")===t?this.currentTarget.removeAttribute("data-align"):(this.currentTarget.setAttribute("data-align",t),this.currentTarget.classList.add(`ql-textbox-align-${t}`)),this.updateAlignButtons(),this.updateBlotFormat(),requestAnimationFrame(()=>{this.repositionOverlay()}),this.log("Applied alignment",t)}updateBlotFormat(){if(!this.currentTarget)return;const t=c.default.find(this.currentTarget);if(t&&"textbox"===t.statics.blotName){const e=this.quill.getIndex(t),l=C.formats(this.currentTarget);this.quill.formatText(e,1,"textbox",l,"user"),this.log("Updated blot format",l)}}}),c.default.register("modules/table",M),c.default.register("formats/table-row",R),c.default.register("formats/table",k),c.default.register("formats/table-container",L);const D=g.default.ImageData;let z;const j=z={AbortController:Promise.resolve().then(()=>r(l(5568))),prContextMenu:Promise.resolve().then(()=>r(l(3181))),prUtils:Promise.resolve().then(()=>r(l(4881))),queryString:Promise.resolve().then(()=>r(l(8091))),i18n:Promise.resolve().then(()=>r(l(5721))),u:Promise.resolve().then(()=>r(l(7540)))};(0,v.RegisterImportPool)(z);e.tableContextMenuProps=({i18n:t,quillRef:e,c:l})=>{const n=()=>(e.current.focus(),e.current.getModule("table"));return{model:[{command:()=>{n().insertColumnLeft()},icon:s.default.createElement("span",null,"Â â­°Â "),label:t.t("Insert column left")},{command:()=>{n().insertColumnRight()},icon:s.default.createElement("span",null,"Â â­²Â "),label:t.t("Insert column right")},{command:()=>{n().insertRowAbove()},icon:s.default.createElement("span",null,"Â â­±Â "),label:t.t("Insert row above")},{command:()=>{n().insertRowBelow()},icon:s.default.createElement("span",null,"Â â­³Â "),label:t.t("Insert row below")},{command:()=>{n().deleteColumn()},icon:"pi pi-delete-left",label:t.t("Delete column")},{command:()=>{n().deleteRow()},icon:"pi pi-eraser",label:t.t("Delete row")},{command:()=>{n().deleteTable()},icon:"pi pi-trash",label:t.t("Delete table")},{command:()=>{const a=e.current,[o,r,i]=n().getTable(),s=l,d=t.t("TABLE class"),c=t.t("TR class"),u=t.t("TD class"),m=t.t("Apply to all rows"),h=t.t("Apply to all cells"),b=t.t("Apply to all cells of this row"),f=t.t("Manage classes"),g=t.t("Apply");s.APP.dialogFactory.createParamDialog(s,{[d]:{default:o.domNode.getAttribute("class")||"",react_name:"CharFieldElement"},[c]:{default:r.domNode.getAttribute("class")||"",react_name:"CharFieldElement"},[m]:{default:!1,react_name:"BooleanFieldElement"},[u]:{default:i.domNode.getAttribute("class")||"",react_name:"CharFieldElement"},[b]:{default:!1,react_name:"BooleanFieldElement"},[h]:{default:!1,react_name:"BooleanFieldElement"}},f,t=>{const e=t[d].split(",").filter(t=>!!t).join(" ").trim();a.formatLine(a.getIndex(o),1,o.statics.blotName,e);const l=(t,e)=>{a.formatLine(a.getIndex(e),1,e.statics.blotName,t)},n=t[c].split(",").filter(t=>!!t).join(" ").trim();let s;if(l(n,r),t[m]){for(s=r.prev;null!==s;)l(n,s),s=s.prev;for(s=r.next;null!==s;)l(n,s),s=s.next}const f=t[h];let g;const p=t[u].split(",").filter(t=>!!t).join(" ").trim(),x=(t,e)=>{const l=e.statics.blotName,n=e.formats()[l];a.formatLine(a.getIndex(e),1,l,Object.assign({},n,{class:t}))};if(x(p,i),f||t[b]){for(g=i.prev;null!==g;)x(p,g),g=g.prev;for(g=i.next;null!==g;)x(p,g),g=g.next}if(f){for(s=r.prev;null!==s;){if(g=s.children.head,null!==g.prev)throw new Error("Programming error, row.children.head returned cell with prev item");for(;null!==g;)x(p,g),g=g.next;s=s.prev}for(s=r.next;null!==s;){if(g=s.children.head,null!==g.prev)throw new Error("Programming error, row.children.head returned cell with prev item");for(;null!==g;)x(p,g),g=g.next;s=s.next}}return a.emitter.emit("text-change"),!0},g)},icon:s.default.createElement("span",null,"Â ðŸ„¿Â "),label:t.t("Properties")}]}};const O=({plain:t,quillRef:e,elementRef:l})=>t?null:t=>{const n=e.current.getModule("table"),[a]=n.getTable();null!==a&&(t.preventDefault(),l.current.show(t))};e.quillLoad=(t,e)=>{};e.getQuillModules=({signal:t,i18n:l,props:n,quillRef:a})=>{const{c:o}=n,r=`l-ql-toolbar-${n.parent.props.elem.name}`,i={toolbar:`#${r}`,mention:(0,e.quillMention)({silentFetch:o.actionHandler.silentFetch,signal:t,mentionValues:o.mentionValues}),blotFormatter2:{debug:!1,resize:{useRelativeSize:!0},video:{registerBackspaceFix:!1}},textboxFormatter:{debug:!1,resize:{handleStyle:{width:"12px",height:"12px",backgroundColor:"#4285f4",border:"2px solid white"}},align:{alignments:["left","center","right"],icons:{left:"â¬…",center:"â†”",right:"âž¡"}}},table:!0};n.showHeader&&(i.htmlEditButton={msg:l.t('Edit HTML here, when you click "OK" the quill editor\'s contents will be replaced'),prependSelector:"div#raw-editor-container",okText:l.t("Ok"),cancelText:l.t("Cancel"),buttonTitle:l.t("Show HTML source")}),n.c.APP.state.site_data.installed_plugins.includes("uploads")&&(i.imageDropAndPaste={handler:(0,e.imageHandler)(a)}),i.keyboard={bindings:{home:{key:"Home",shiftKey:null,handler:function(t,e){const l=a.current,[n]=l.getLine(t.index);if(n&&"LI"===n.domNode.tagName){if(e.event.shiftKey){const e=n.offset(l.scroll);l.setSelection(e,t.index-e,c.default.sources.USER)}else l.setSelection(n.offset(l.scroll),0,c.default.sources.USER);return!1}return!0}}}},n.plain&&(i.keyboard.bindings["list autofill"]=!1),n.showHeader||delete i.toolbar;return{modules:i,meta:{toolbarID:r}}};e.changeDelta=({quillRef:t,parent:e,prUtils:l,plain:n})=>(a,o,r)=>{const i=t.current,s=i.container.children[0];let d=s?s.innerHTML:null;const u=i.getText();if("<p><br></p>"===d&&(d=null),r===c.default.sources.API){const m=i.container.children[0],h=document.createElement("div");if(h.innerHTML=e.getValue()||"",l.DomHandler.isEqualElement(m,h))return}if(d){const b=document.createElement("div");function f(t){if(t.nodeType===Node.ELEMENT_NODE){const e=Array.from(t.attributes);e.sort((t,e)=>t.name.localeCompare(e.name));for(let l=0;l<e.length;l++)t.removeAttribute(e[l].name);for(let l=0;l<e.length;l++)t.setAttribute(e[l].name,e[l].value)}for(let e=0;e<t.childNodes.length;e++)f(t.childNodes[e])}b.innerHTML=d,f(b),d=b.innerHTML}((t,e,l)=>{const n=l.textValue.slice(0,-1),a=(e?n:l.htmlValue)||"";t.update({[t.dataKey]:a})})(e,n,{htmlValue:d,textValue:u,delta:a,source:r})};e.overrideImageButtonHandler=t=>{t.current.getModule("toolbar").addHandler("image",l=>{if(l){const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),l.classList.add("ql-image"),l.addEventListener("change",n=>{const a=n.target.files;let o;if(a.length>0){o=a[0];const n=o.type,r=new FileReader;r.onload=a=>{const r=a.target.result;(0,e.imageHandler)(t)(r,n,new D(r,n,o.name)),l.value=""},r.readAsDataURL(o)}}),l.click()}})};e.imageHandler=t=>(e,l,n)=>{const a=t.current;let o=(a.getSelection()||{}).index;(void 0===o||o<0)&&(o=a.getLength()),a.insertEmbed(o,"image",e);const r=a.getLeaf(o)[0];r.domNode.setAttribute("width","100%"),r.domNode.setAttribute("height","auto")};e.quillMention=({silentFetch:t,signal:e,mentionValues:l})=>({allowedChars:/^[A-Za-z0-9\s]*$/,mentionDenotationChars:window.App.state.site_data.suggestors,source:function(n,a,o){if(0===n.length){const t=l[o];a(t,n)}else z.resolve(["queryString"]).then(({queryString:l})=>{t({path:`suggestions?${l.default.stringify({query:n,trigger:o})}`,signal:e}).then(t=>a(t.suggestions,n))})},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",dataAttributes:["value","link","title","denotationChar"]});const F=s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:"ql-formats"},s.default.createElement("select",{className:"ql-header",defaultValue:"0"},s.default.createElement("option",{value:"1"},"Header 1"),s.default.createElement("option",{value:"2"},"Header 2"),s.default.createElement("option",{value:"3"},"Header 3"),s.default.createElement("option",{value:"4"},"Header 4"),s.default.createElement("option",{value:"0"},"Normal")),s.default.createElement("select",{className:"ql-font"},s.default.createElement("option",{defaultValue:"true"}),s.default.createElement("option",{value:"serif"}),s.default.createElement("option",{value:"monospace"}))),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("select",{className:"ql-size"},s.default.createElement("option",{value:"small"}),s.default.createElement("option",{defaultValue:"true"}),s.default.createElement("option",{value:"large"}),s.default.createElement("option",{value:"huge"}))),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{className:"ql-script",value:"sub"}),s.default.createElement("button",{className:"ql-script",value:"super"})),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),s.default.createElement("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),s.default.createElement("button",{type:"button",className:"ql-underline","aria-label":"Underline"})),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("select",{className:"ql-color"}),s.default.createElement("select",{className:"ql-background"})),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),s.default.createElement("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),s.default.createElement("select",{className:"ql-align"},s.default.createElement("option",{defaultValue:"true"}),s.default.createElement("option",{value:"center"}),s.default.createElement("option",{value:"right"}),s.default.createElement("option",{value:"justify"}))),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),s.default.createElement("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),s.default.createElement("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"}))),$=({quill:t,c:e})=>{const{APP:l}=e,{URLContext:n}=l;let a=(t.getSelection()||{}).index;(void 0===a||a<0)&&(a=t.getLength()),n.actionHandler.runAction({action_full_name:n.actionHandler.findUniqueAction("insert_reference").full_name,actorId:"about.About",response_callback:e=>{e.success&&t.insertText(a,e.message)}})},U=({quillRef:t,c:e})=>e.APP.state.site_data.installed_plugins.includes("memo")?s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",onClick:()=>$({quill:t.current,c:e}),"aria-label":"Open link dialog"},s.default.createElement("i",{className:"pi pi-link"}))):null,V=({quillRef:t,c:e,i18n:l,u:n})=>s.default.createElement(s.default.Fragment,null,F,U({quillRef:t,c:e}),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",onClick:()=>{const a=e,o=l.t("rows x columns"),r=l.t("Rows"),i=l.t("Columns");a.APP.dialogFactory.createParamDialog(a,{[r]:{react_name:"IntegerFieldElement",default:3},[i]:{react_name:"IntegerFieldElement",default:3}},o,e=>{const o=parseInt(e[r]),s=parseInt(e[i]),d=n.isNaN(o);if(d||n.isNaN(s))return a.APP.toast.show({severity:"warn",summary:l.t("Not a number '{{dir}}'",{dir:d?l.t("rows"):l.t("columns")})}),!1;const c=t.current.getModule("table");return t.current.focus(),c.insertTable(o,s),!0})}},s.default.createElement("i",{className:"pi pi-table"}))),s.default.createElement("span",{className:"ql-formats"},s.default.createElement("button",{type:"button",onClick:()=>{const e=t.current;e.focus();const l=e.getSelection(),n=l?l.index:e.getLength(),a=q(),o=(new c.Delta).retain(n).insert("\n",{textbox:{width:"50%",align:""},"textbox-block":a});e.updateContents(o,c.default.sources.USER),setTimeout(()=>{e.setSelection(n,0,c.default.sources.USER)},0)},title:l.t("Insert text box")},s.default.createElement("i",{className:"pi pi-box"}))));function W(t){const l=s.default.useRef(null),n=s.default.useRef(null),a=s.default.useRef(null),o=(0,v.getExReady)(j,["i18n","prContextMenu","u","AbortController","prUtils"],n=>{n.i18n=n.i18n.default,n.AbortController=n.AbortController.default,a.current=new n.AbortController;const{modules:o,meta:r}=(0,e.getQuillModules)({props:t,signal:a.current.signal,i18n:n.i18n,quillRef:l});n.modules=o,n.meta=r,t.showHeader||(n.modules.toolbar=!1)});return s.default.useEffect(()=>()=>{a.current&&a.current.abort()},[]),o.ready?s.default.createElement("div",{onContextMenu:O({plain:t.plain,quillRef:l,elementRef:n}),onKeyDown:e=>{e.ctrlKey&&e.shiftKey&&"KeyL"==e.code&&(e.stopPropagation(),e.preventDefault(),$({quill:l.current,c:t.c}))}},t.showHeader&&s.default.createElement("div",{id:o.meta.toolbarID},t.plain?U({quillRef:l,c:t.c}):V({quillRef:l,c:t.c,i18n:o.i18n,u:o.u}),t.headerExtend),s.default.createElement(u.default,{config:{modules:o.modules,theme:"snow"},defaultValue:t.plain?(new c.Delta).insert(t.value):null,dangerouslySetInnerHTML:t.plain?null:{__html:t.htmlValue},onReady:n=>{let a;l.current=n,t.parent.quill=n,(t.autoFocus||t.parent.leafIndexMatch())&&n.focus(),a=t.plain?(new c.Delta).insert(t.value||""):n.clipboard.convert({html:t.htmlValue||""}),0===a.length()&&setTimeout(()=>{n.setSelection(0,0,c.default.sources.USER)},50),(0,e.quillLoad)(t.parent,n),!t.showHeader||t.inGrid||t.plain||t.c.APP.state.site_data.installed_plugins.includes("uploads")&&(0,e.overrideImageButtonHandler)(l)},onTextChange:(0,e.changeDelta)({parent:t.parent,plain:t.plain,prUtils:o.prUtils,quillRef:l})}),s.default.createElement(o.prContextMenu.ContextMenu,{...(0,e.tableContextMenuProps)({i18n:o.i18n,quillRef:l,c:t.c}),ref:n}),s.default.createElement("div",{id:"raw-editor-container",onKeyDown:t=>t.stopPropagation()})):null}W.propTypes={value:(t,...e)=>t.plain?d.default.string.isRequired(t,...e):null,htmlValue:(t,...e)=>t.plain?null:d.default.string.isRequired(t,...e),plain:d.default.bool.isRequired,showHeader:d.default.bool.isRequired,c:d.default.object.isRequired,parent:d.default.object.isRequired,inGrid:d.default.bool.isRequired,headerExtend:d.default.node,autoFocus:d.default.bool}},1882:(t,e,l)=>{l.r(e),l.d(e,{default:()=>p});var n=l(5072),a=l.n(n),o=l(7825),r=l.n(o),i=l(7659),s=l.n(i),d=l(5056),c=l.n(d),u=l(540),m=l.n(u),h=l(1113),b=l.n(h),f=l(5969),g={};g.styleTagTransform=b(),g.setAttributes=c(),g.insert=s().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=m();a()(f.A,g);const p=f.A&&f.A.locals?f.A.locals:void 0},5969:(t,e,l)=>{l.d(e,{A:()=>i});var n=l(1354),a=l.n(n),o=l(6314),r=l.n(o)()(a());r.push([t.id,".l-editor .ql-container {\n    font-family: inherit;\n    font-size: inherit;\n}\n\n/* TextBox Blot Styles */\n.ql-textbox {\n    border: 2px solid #ccc;\n    padding: 10px;\n    margin: 10px 0;\n    min-height: 60px;\n    background: #fafafa;\n    border-radius: 4px;\n    box-sizing: border-box;\n    position: relative;\n    transition: border-color 0.2s;\n}\n\n.ql-textbox:hover {\n    border-color: #4285f4;\n}\n\n.ql-textbox:focus-within {\n    border-color: #4285f4;\n    background: white;\n    outline: none;\n}\n\n/* TextBox child elements */\n.ql-textbox-block {\n    margin: 0;\n    padding: 0;\n    min-height: 1em;\n}\n\n.ql-textbox-soft-break {\n    /* Inherits from soft-break */\n}\n\n.ql-textbox-break {\n    /* Custom break styling within textbox */\n    display: block;\n}\n\n/* Alignment classes */\n.ql-textbox-align-left {\n    float: left;\n    margin-left: 0;\n    margin-right: 10px;\n    margin-bottom: 10px;\n}\n\n.ql-textbox-align-center {\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 10px;\n    clear: both;\n}\n\n.ql-textbox-align-right {\n    float: right;\n    margin-left: 10px;\n    margin-right: 0;\n    margin-bottom: 10px;\n}\n\n/* Overlay styles */\n.ql-textbox-overlay {\n    pointer-events: none;\n}\n\n.ql-textbox-overlay .ql-textbox-handle {\n    pointer-events: auto;\n}\n\n/* Toolbar styles */\n.ql-textbox-toolbar {\n    display: flex;\n    gap: 2px;\n}\n\n.ql-textbox-toolbar-button {\n    font-size: 14px;\n    transition: all 0.2s;\n}\n\n.ql-textbox-toolbar-button:hover {\n    background: #f0f0f0 !important;\n    transform: scale(1.05);\n}\n\n.ql-textbox-toolbar-button:active {\n    transform: scale(0.95);\n}","",{version:3,sources:["webpack://./lino_react/react/components/quillmodules.css"],names:[],mappings:"AAAA;IACI,oBAAoB;IACpB,kBAAkB;AACtB;;AAEA,wBAAwB;AACxB;IACI,sBAAsB;IACtB,aAAa;IACb,cAAc;IACd,gBAAgB;IAChB,mBAAmB;IACnB,kBAAkB;IAClB,sBAAsB;IACtB,kBAAkB;IAClB,6BAA6B;AACjC;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,qBAAqB;IACrB,iBAAiB;IACjB,aAAa;AACjB;;AAEA,2BAA2B;AAC3B;IACI,SAAS;IACT,UAAU;IACV,eAAe;AACnB;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,wCAAwC;IACxC,cAAc;AAClB;;AAEA,sBAAsB;AACtB;IACI,WAAW;IACX,cAAc;IACd,kBAAkB;IAClB,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,YAAY;IACZ,iBAAiB;IACjB,eAAe;IACf,mBAAmB;AACvB;;AAEA,mBAAmB;AACnB;IACI,oBAAoB;AACxB;;AAEA;IACI,oBAAoB;AACxB;;AAEA,mBAAmB;AACnB;IACI,aAAa;IACb,QAAQ;AACZ;;AAEA;IACI,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,8BAA8B;IAC9B,sBAAsB;AAC1B;;AAEA;IACI,sBAAsB;AAC1B",sourcesContent:[".l-editor .ql-container {\n    font-family: inherit;\n    font-size: inherit;\n}\n\n/* TextBox Blot Styles */\n.ql-textbox {\n    border: 2px solid #ccc;\n    padding: 10px;\n    margin: 10px 0;\n    min-height: 60px;\n    background: #fafafa;\n    border-radius: 4px;\n    box-sizing: border-box;\n    position: relative;\n    transition: border-color 0.2s;\n}\n\n.ql-textbox:hover {\n    border-color: #4285f4;\n}\n\n.ql-textbox:focus-within {\n    border-color: #4285f4;\n    background: white;\n    outline: none;\n}\n\n/* TextBox child elements */\n.ql-textbox-block {\n    margin: 0;\n    padding: 0;\n    min-height: 1em;\n}\n\n.ql-textbox-soft-break {\n    /* Inherits from soft-break */\n}\n\n.ql-textbox-break {\n    /* Custom break styling within textbox */\n    display: block;\n}\n\n/* Alignment classes */\n.ql-textbox-align-left {\n    float: left;\n    margin-left: 0;\n    margin-right: 10px;\n    margin-bottom: 10px;\n}\n\n.ql-textbox-align-center {\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 10px;\n    clear: both;\n}\n\n.ql-textbox-align-right {\n    float: right;\n    margin-left: 10px;\n    margin-right: 0;\n    margin-bottom: 10px;\n}\n\n/* Overlay styles */\n.ql-textbox-overlay {\n    pointer-events: none;\n}\n\n.ql-textbox-overlay .ql-textbox-handle {\n    pointer-events: auto;\n}\n\n/* Toolbar styles */\n.ql-textbox-toolbar {\n    display: flex;\n    gap: 2px;\n}\n\n.ql-textbox-toolbar-button {\n    font-size: 14px;\n    transition: all 0.2s;\n}\n\n.ql-textbox-toolbar-button:hover {\n    background: #f0f0f0 !important;\n    transform: scale(1.05);\n}\n\n.ql-textbox-toolbar-button:active {\n    transform: scale(0.95);\n}"],sourceRoot:""}]);const i=r}}]);
//# sourceMappingURL=main.quillmodules_TextFieldElement.aa333a0635020af85715.js.map