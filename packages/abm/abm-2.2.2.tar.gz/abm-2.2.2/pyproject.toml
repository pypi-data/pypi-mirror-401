[tool.poetry]
name = "abm"
version = "2.2.2"
description = "A Python client for the Applied BioMath platform"
authors = ["ABM Support <abm-support@certara.com>"]
license = "Proprietary"
readme = "README.md"
repository = "https://github.com/certara/certara-iq-python-client"
keywords = []
classifiers = [
    "Development Status :: 5 - Production/Stable",
    "Intended Audience :: Science/Research",
    "Topic :: Scientific/Engineering :: Medical Science Apps.",
    "Operating System :: POSIX",
]

[tool.poetry.dependencies]
python = "~3.12"
httpx = "^0.27" # Cannot upgrade due to https://github.com/encode/httpx/pull/3367
numpy = "^2.3"
scipy = "^1.16"
pandas = "^2.3"
tabeline = { version = "~0.6", extras = ["pandas", "polars"] }
ipython = "^9.6"
ordered-set = "^4.1"
serialite = "~0.3"
parsita = "~2.2"
pint = "~0.25"
prettytable = "^3.16"

[tool.poetry.dev-dependencies]
nox_poetry = "^1.2.0"

# Test
pytest = "^8.4"
coverage = { version = "^7.10", extras = ["toml"] }
pytest-cov = "^7.0"
pytest-xdist = "^3.8"
pytest-random-order = "^1.2"
pytest-split = "^0.10"

# Docs
mkdocs = "^1.6"
pygments = "^2.19"
mkdocstrings = { version = "^0.27", extras = ["python"] }
mkdocs-material = "^9.6"
pytkdocs = { version = "^0.16", extras = ["numpy-style"] }

# Linting and formatting
ruff = "^0.14"

[tool.coverage.run]
branch = true

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "raise NotImplementedError",
    "@(abc\\.)?abstractmethod",
    "if TYPE_CHECKING:",
]

[tool.coverage.paths]
source = [
    "src/",
    ".nox/test*/lib/python*/site-packages/",
    ".nox/test*/Lib/site-packages/",
]

[tool.ruff]
src = ["src"]
line-length = 120
target-version = "py312"

[tool.ruff.lint]
extend-select = [
    "I", # isort
    "N", # pep8-naming
    "RUF", # ruff
    "B", # flake8-bugbear
    "C4", # flake8-comprehensions
    "PIE", # flake8-pie
    "PT", # flake8-pytest-style
    "PTH", # flake8-use-pathlib
    "ERA", # flake8-eradicate
]

# B006, B008 and RUF009: disable function calls and mutable data structures in defaults
# N802, N803, N806: Uppercase variables are fine in science
# RUF003: Backticks are fine in docstrings
# ERA001: Too many false positives about commented-out code
extend-ignore = [
    "B006",
    "B008",
    "RUF009",
    "N802",
    "N803",
    "N806",
    "RUF003",
    "ERA001",
]

[tool.ruff.lint.per-file-ignores]
# Allow unused imports and star imports in __init__.py files
"__init__.py" = ["F401", "F403"]
"./src/abm/_units/*.py" = ["F403", "F405"]

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"
