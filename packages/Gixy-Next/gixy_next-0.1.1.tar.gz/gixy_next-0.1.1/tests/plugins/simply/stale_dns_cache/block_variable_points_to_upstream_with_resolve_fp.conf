http {
  resolver 1.1.1.1;
  upstream backend {
    server api.example.com:443 resolve;
  }

  server {
    listen 80;
    location / {
      set $up backend;
      proxy_pass https://$up;
    }
  }
}
