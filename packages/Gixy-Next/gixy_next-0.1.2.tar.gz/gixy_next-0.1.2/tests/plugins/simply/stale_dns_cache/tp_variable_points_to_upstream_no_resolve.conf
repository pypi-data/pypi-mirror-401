http {
  upstream backend {
    server api.example.com:443;   # no 'resolve'
  }

  server {
    listen 80;
    location / {
      set $up backend;
      proxy_pass https://$up;
    }
  }
}
