[tool.poetry]
name = "cje-eval"
version = "0.2.13"
description = "Causal Judge Evaluation - Unbiased LLM evaluation framework"
authors = ["Eddie Landesberg <eddie@cimolabs.com>"]
license = "MIT"
packages = [{ include = "cje" }]
readme = "README.md"
homepage = "https://cimolabs.com/cje"
repository = "https://github.com/cimo-labs/cje"
documentation = "https://arxiv.org/abs/2512.11150"
keywords = ["evaluation", "llm", "causal-inference", "off-policy", "importance-sampling", "doubly-robust"]
classifiers = [
    "Intended Audience :: Science/Research",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
]

[tool.poetry.dependencies]
python = ">=3.9,<3.13"
# Core dependencies
numpy = ">=1.26,<2.1"  # Match scipy 1.11-1.14 compatibility (requires <2.1)
pandas = "^2.2"
scipy = "^1.11.0"
scikit-learn = "^1.4"
pydantic = ">=2.6,<3.0"
python-dotenv = "^1.1.0"

# Optional dependency groups
matplotlib = {version = "^3.8", optional = true}
seaborn = {version = "^0.13.2", optional = true}
transformers = {version = "^4.52.2", optional = true}
fireworks-ai = {version = "^0.15.0", optional = true}
hydra-core = {version = "^1.3", optional = true}
omegaconf = {version = "^2.3", optional = true}

[tool.poetry.extras]
viz = ["matplotlib", "seaborn"]
teacher-forcing = ["transformers", "fireworks-ai"]
hydra = ["hydra-core", "omegaconf"]
all = ["matplotlib", "seaborn", "transformers", "fireworks-ai", "hydra-core", "omegaconf"]

[tool.poetry.scripts]
cje = "cje.interface.cli:main"

[tool.poetry.group.dev.dependencies]
black = "^24.3"
mypy = "^1.10"
pytest = "^8.0"
pytest-cov = "^5.0"
pre-commit = "^3.7"
types-PyYAML = "^6.0"
ipykernel = "^6.29.5"
# Documentation now hosted on cimolabs.com - Sphinx dependencies removed
watchdog = "^6.0.0"
pytest-xdist = "^3.7.0"
matplotlib = "^3.8"  # Required for testing visualization code

# CLI scripts can be defined here when needed

[tool.black]
line-length = 88
target-version = ['py39']

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
check_untyped_defs = true
ignore_missing_imports = true
exclude = ["docs/", "cje/experiments/", "examples/", "concat_for_chat.py"]

[tool.pytest.ini_options]
# Pytest configuration
addopts = [
    "--strict-markers",
    "--tb=short"
]
testpaths = ["cje/tests"]

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"
