<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html"><link rel="next" title="Miscellaneous functions" href="misc.html"><link rel="prev" title="Installation" href="installation.html">
        <link rel="prefetch" href="_static/icon64.png" as="image">

    <link rel="shortcut icon" href="_static/favicon.ico"><!-- Generated with Sphinx 9.1.0 and Furo 2025.12.19 -->
        <title>Transformation functions - Pitchmeld documentation 0.21.3</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Pitchmeld documentation 0.21.3</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/icon64.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Pitchmeld documentation 0.21.3</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Transformation functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html#general-terms">1. General Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html#specific-terms">2. Specific Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributions.html">Attributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/transformation.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="transformation-functions">
<h1>Transformation functions<a class="headerlink" href="#transformation-functions" title="Link to this heading">¶</a></h1>
<p>Most audio processing implies handling the following inherent elements:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Clipping_(audio)">Clipping</a>: A transformation is likely to increase some part of the input waveform above its original level. In the worst case, it can go beyond 1.0 (or lower than -1.0) and thus saturate/clip when saving the transformed waveform into a file. <strong>By default, nothing is done</strong> in pitchmeld to prevent this. However, you can use <code class="xref py py-attr docutils literal notranslate"><span class="pre">clipper_knee=0.66</span></code> argument in the functions below to apply a clipping effect that will reduce the distortion of any clipping.</p></li>
<li><p><strong>Equalisation</strong> and loudness preservation: A transformation is likely to change the spectral balance of the input waveform. The standard way to handle this is by preserving the energy in some frequency bands by applying a <a class="reference external" href="https://en.wikipedia.org/wiki/Equalization_(audio)">loudness equalisation</a> effect. This is <strong>done by default</strong> in the functions below, but you can disable it by setting <code class="xref py py-attr docutils literal notranslate"><span class="pre">eq=False</span></code>. You might want to disable it if you’re handling very unatural synthetic signals (ex. a pure tone).</p></li>
<li><p><strong>Multichannels</strong>: Currently, multichannel is <strong>not supported yet</strong> (but will be soon). In the present version, the functions below will average the channels and process the signal as a monophonic signal. The output channel is then duplicated to the same number of channels as the input to preserve dimensions.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Processing flow<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>The function <a class="reference internal" href="#pitchmeld.transform" title="pitchmeld.transform"><code class="xref py py-attr docutils literal notranslate"><span class="pre">transform</span></code></a> is based on an <a class="reference external" href="https://en.wikipedia.org/wiki/Overlap%E2%80%93add_method">Overlap-Add process</a> whose base implementation is <a class="reference external" href="https://github.com/gillesdegottex/phaseshift/blob/main/phaseshift/audio_block/ola.h">freely available here</a>.</p>
<p>The different processing operations are done in the following order:</p>
<img alt="_images/sola.svg" src="_images/sola.svg" />
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pitchmeld.transform_timescaling">
<span class="sig-prename descclassname"><span class="pre">pitchmeld.</span></span><span class="sig-name descname"><span class="pre">transform_timescaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wav</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pitchmeld.transform_timescaling" title="Link to this definition">¶</a></dt>
<dd><p>Same arguments and return values as <a class="reference internal" href="#pitchmeld.transform" title="pitchmeld.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">transform()</span></code></a>.</p>
<p>This function alter a few technical arguments of <a class="reference internal" href="#pitchmeld.transform" title="pitchmeld.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">transform()</span></code></a> in order to optimize speed for time scaling, without compromising audio quality.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pitchmeld.transform_pitchscaling">
<span class="sig-prename descclassname"><span class="pre">pitchmeld.</span></span><span class="sig-name descname"><span class="pre">transform_pitchscaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wav</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pitchmeld.transform_pitchscaling" title="Link to this definition">¶</a></dt>
<dd><p>Same arguments and return values as <a class="reference internal" href="#pitchmeld.transform" title="pitchmeld.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">transform()</span></code></a>.</p>
<p>This function alter a few technical arguments of <a class="reference internal" href="#pitchmeld.transform" title="pitchmeld.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">transform()</span></code></a> in order to optimize speed for pitch scaling only, without compromising audio quality.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pitchmeld.transform">
<span class="sig-prename descclassname"><span class="pre">pitchmeld.</span></span><span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wav</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbfs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">esf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">esp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">boolean</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psfs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_f0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_f0s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psf_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clipper_knee</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">winlen_inner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.020*fs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.005*fs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f0_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">27.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f0_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3520</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">boolean</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">boolean</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">float32</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#pitchmeld.transform" title="Link to this definition">¶</a></dt>
<dd><p>This is the generic function to transform a voice signal while applying multiple audio effects.
See also below for more functions dedicated to specific tasks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It assumes the signal is <em>monophonic</em>, like a voice, a flute, a violin, saxophone, etc.</p>
<p>It is <em>not</em> recommended to use it on polyphonic signals like a piano, a guitar, a drum set, etc.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wav</strong> – Input signal to transform.</p></li>
<li><p><strong>fs</strong> – Sampling rate [Hz].</p></li>
<li><p><strong>pbf</strong> – <p>Playback factor to do time scaling [coefficient, def. 1.0].</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The method is designed so that there is no global time drift possible.
However, because internal frames need to be time aligned for ensuring signal continuity, audio events might be slightly shifted locally, at most one frame before or further (at most 0.005s by default).</p>
<p>For example, assuming a speed up of 2, and a timestep of 0.005s,an audio event at 60s, might end up at 30.005s, instead of 30s. Nevertheless, there is no time drift. So an audio event at 120s will not go as far as 60.010s.</p>
</div>
</p></li>
<li><p><strong>pbfs</strong> – Time varying playback factor [2D ndarray, def. None].
A 2D numpy array of shape (N, 2) where N is the number of given pairs <code class="xref py py-attr docutils literal notranslate"><span class="pre">[time,</span> <span class="pre">pbf]</span></code>.
The first column is the time in seconds, relative to the original signal (not the transformed one).
The second column is the <code class="xref py py-attr docutils literal notranslate"><span class="pre">pbf</span></code> playback factor (as above).</p></li>
<li><p><strong>esf</strong> – Envelope scaling factor [coefficient, def. 1.0].</p></li>
<li><p><strong>esp</strong> – Preserve spectral envelope [boolean, def. True].
Also known as “formants preservation”.</p></li>
<li><p><strong>psf</strong> – Pitch scaling factor [coefficient, def. 1.0].</p></li>
<li><p><strong>psfs</strong> – Time varying pitch scaling factor [2D ndarray, def. None].
A 2D numpy array of shape (N, 2) where N is the number of given pairs <code class="xref py py-attr docutils literal notranslate"><span class="pre">[time,</span> <span class="pre">psf]</span></code>.
The first column is the time in seconds, relative to the original signal (not the transformed one).
The second column is the <code class="xref py py-attr docutils literal notranslate"><span class="pre">psf</span></code> playback factor (as above).</p></li>
<li><p><strong>psf_max</strong> – Maximum value for pitch scaling factor [coefficient, def. 2.0].</p></li>
<li><p><strong>psf_autotune_enable</strong> – Enable autotune [boolean, def. False]. Automatically snap the pitch to the closest note in the given scale.</p></li>
<li><p><strong>psf_autotune_snapping_A4</strong> – A4 reference frequency for autotune [Hz, def. 440.0].</p></li>
<li><p><strong>psf_autotune_snapping_key</strong> – Key for autotune [string, def. “C”, ex.: “C”, “Db”, “D”, “Eb”, “E”, “F”, “Gb”, “G”, “Ab”, “A”, “Bb”, “B”].</p></li>
<li><p><strong>psf_autotune_snapping_scale</strong> – Scale for autotune [string, among: “chromatic”, “chord_major”, “chord_major7”, “chord_minor”, “pentatonic_major”, “pentatonic_minor”, “def. “chord_major7”].</p></li>
<li><p><strong>psf_autotune_amount_coef</strong> – Amount coefficient [coefficient in [0.0, 1.0], def. 0.80]. 1.0 means full correction, 0.0 means no correction.</p></li>
<li><p><strong>psf_autotune_retune_delay</strong> – Retune delay [seconds, def. 0.020]. A short delay speeds up the snapping time and sounds more robotic.</p></li>
<li><p><strong>set_f0</strong> – Force the fundamental frequency to a constant value [Hz, def. None].
<code class="xref py py-attr docutils literal notranslate"><span class="pre">psf</span></code> will be set automatically so that the output fundamental frequency is equal to the given value <code class="xref py py-attr docutils literal notranslate"><span class="pre">f0set_f0</span></code>.</p></li>
<li><p><strong>set_f0s</strong> – Time varying fundamental frequency [2D ndarray, def. None].
A 2D numpy array of shape (N, 2) where N is the number of given pairs <code class="xref py py-attr docutils literal notranslate"><span class="pre">[time,</span> <span class="pre">set_f0]</span></code>.
The first column is the time in seconds, relative to the original signal (not the transformed one).
The second column is the <code class="xref py py-attr docutils literal notranslate"><span class="pre">set_f0</span></code> fundamental frequency (as above).</p></li>
<li><p><strong>clipper_knee</strong> – Clipper knee amplitude [linear amplitude, def. None, common 0.66, <a class="reference external" href="https://github.com/gillesdegottex/phaseshift/blob/main/phaseshift/sigproc/clipper.h">source</a>].
This is to prevent the signal to clip at 1.0 when saving it in a file and create audio glitches.
The knee amplitude is the point where the clipper starts to act.
This will prevent the signal to go above ±1.0 in amplitude.
The lower the value, the less glitches but the more the signal will be distorted.
Set it to <code class="docutils literal notranslate"><span class="pre">None</span></code> to disable it.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following arguments below are used to optimize the processing’s audio quality and speed.
It is not recommended to changed them unless you know what you are doing.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">transform_timescaling</span></code> and <code class="docutils literal notranslate"><span class="pre">transform_pitchscaling</span></code> will automatically do that for you depending on the task.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eq</strong> – Equalisation [boolean, def. True].
This is to preserve the spectral balance of the output waveform compared to the input waveform.</p></li>
<li><p><strong>winlen_inner</strong> – Inner window length [#samples, def. 0.020*fs].
This is the window length used for the inner processing.
The bigger the value, the more stable the sound but the processing will be slower.</p></li>
<li><p><strong>timestep</strong> – Inner window length [#samples, def. 0.005*fs].
This is the time step from one frame to the next.
The smaller the value, the more stable the sound but the processing will be slower.</p></li>
<li><p><strong>f0_min</strong> – Minimum value for the fundamental frequency [Hz, def. 440/16=27.5].
This is to prevent the pitch to go too low and create audio glitches.</p></li>
<li><p><strong>f0_max</strong> – Maximum value for the fundamental frequency [Hz, def. 440*8=3520].
This is to prevent the pitch to go too high and create audio glitches.</p></li>
<li><p><strong>info</strong> – If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns an extra dict with various information related to how the processing went [def. False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><dl class="simple">
<dt><cite>ndarray[float32]</cite> - The modified signal.</dt><dd><p>Shape will be the same as the input signal.
The type will always be <cite>float32</cite> since the whole processing runs on <cite>float32</cite> precision.</p>
</dd>
</dl>
</li>
<li><p><cite>info[dict]</cite> - Processing information [optional: only if argument <code class="xref py py-attr docutils literal notranslate"><span class="pre">info=True</span></code>]</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pitchmeld</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">soundfile</span>
<span class="n">wav</span><span class="p">,</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;path/to/audio.wav&#39;</span><span class="p">)</span>
<span class="n">syn</span> <span class="o">=</span> <span class="n">pitchmeld</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">wav</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">psf</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">soundfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;syn.wav&#39;</span><span class="p">,</span> <span class="n">syn</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="misc.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Miscellaneous functions</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025 Gilles Degottex
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Transformation functions</a><ul>
<li><a class="reference internal" href="#functions">Functions</a><ul>
<li><a class="reference internal" href="#pitchmeld.transform_timescaling"><code class="docutils literal notranslate"><span class="pre">transform_timescaling()</span></code></a></li>
<li><a class="reference internal" href="#pitchmeld.transform_pitchscaling"><code class="docutils literal notranslate"><span class="pre">transform_pitchscaling()</span></code></a></li>
<li><a class="reference internal" href="#pitchmeld.transform"><code class="docutils literal notranslate"><span class="pre">transform()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f301a15e"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>