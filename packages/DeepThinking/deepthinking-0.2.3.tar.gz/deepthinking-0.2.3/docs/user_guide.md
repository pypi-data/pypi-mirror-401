# DeepThinking MCP 用户指南

> 版本: 0.2.3
> 更新日期: 2026-01-08

---

## 简介

DeepThinking MCP 是一个强大的深度思考工具，通过 Model Context Protocol (MCP) 为 Claude 提供结构化的思考能力。它支持顺序思考、会话管理、模板应用、导出和可视化等功能。

### 核心特性

- **顺序思考**: 系统化地进行多步骤思考，支持修订和分支
- **会话管理**: 创建、查看、管理和搜索思考会话
- **模板系统**: 预设的思考框架，快速启动特定类型的思考任务
- **导出功能**: 支持 JSON、Markdown、HTML、Text 多种格式导出
- **可视化**: Mermaid 流程图、ASCII 图、树状结构等多种可视化方式
- **持久化存储**: 自动保存所有思考过程，随时恢复

---

## 快速开始

### 1. 安装

```bash
pip install Deep-Thinking-MCP
```

### 2. 配置 Claude Desktop

在 Claude Desktop 配置文件中添加 DeepThinking MCP 服务器（详见安装指南）

### 3. 开始使用

在 Claude 对话中直接使用思考工具：

```
我需要分析一个问题，请使用 sequential_thinking 工具帮我系统地分析
```

---

## 基础使用

### 顺序思考

顺序思考是核心功能，帮助您系统地分析问题。

#### 基本用法

```
请用5个步骤分析"如何提高团队协作效率"这个问题
```

Claude 会调用 `sequential_thinking` 工具，生成5个思考步骤：
1. 分析当前团队协作的痛点
2. 研究业界最佳实践
3. 评估可行的解决方案
4. 制定实施计划
5. 设定衡量指标

#### 修订思考

如果某个思考步骤需要修改，可以使用修订功能：

```
请修订第2步，添加更多关于远程团队协作的考虑
```

#### 分支思考

探索不同的解决方案路径：

```
从第3步创建一个分支，探索采用敏捷方法的方案
```

---

### 会话管理

会话用于组织和管理相关的思考过程。

#### 创建会话

```
创建一个新的会话，名称为"技术选型分析"，描述"比较不同后端框架的优劣"
```

#### 查看会话

```
显示会话"技术选型分析"的详细信息
```

#### 列出所有会话

```
列出所有活跃的会话
```

#### 更新会话状态

```
将会话"技术选型分析"标记为已完成
```

---

### 使用模板

模板提供预设的思考框架，快速启动特定类型的思考任务。

#### 问题求解模板

```
使用问题求解模板分析"如何降低API响应时间"
```

模板会引导您完成：
1. 问题定义
2. 原因分析
3. 方案生成
4. 评估筛选
5. 实施计划

#### 决策模板

```
使用决策模板帮助选择"React vs Vue"
```

模板会引导您完成：
1. 明确决策目标
2. 列出备选方案
3. 确定评估标准
4. 分析各方案优劣
5. 做出最终决策

#### 分析模板

```
使用分析模板深入分析"用户流失率上升的原因"
```

模板会引导您完成：
1. 数据收集
2. 模式识别
3. 关联分析
4. 根因探究
5. 结论提炼

---

### 导出思考结果

将思考过程导出为文件，便于保存和分享。

#### 导出为 Markdown

```
将会话"技术选型分析"导出为 Markdown 格式
```

#### 导出为 PDF（通过 HTML）

```
将会话"技术选型分析"导出为 HTML 格式，保存为 ~/docs/tech-selection.html
```

#### 导出为 JSON（用于数据处理）

```
将会话"技术选型分析"导出为 JSON 格式
```

---

### 可视化思考流程

将思考过程可视化，更直观地理解思考路径。

#### 生成 Mermaid 流程图

```
将会话"技术选型分析"可视化为 Mermaid 流程图
```

您可以：
1. 复制生成的代码到 [Mermaid Live Editor](https://mermaid.live) 查看图形
2. 将代码嵌入到支持 Mermaid 的 Markdown 文档中

#### 生成 ASCII 图

```
将会话"技术选型分析"可视化为 ASCII 格式
```

#### 生成树状结构

```
将会话"技术选型分析"可视化为树状结构
```

---

## 高级用法

### 自定义模板

您可以创建自己的思考模板：

1. 在模板目录创建 JSON 文件
2. 定义模板结构和步骤
3. 使用 `apply_template` 应用自定义模板

模板文件示例：

```json
{
  "template_id": "custom_analysis",
  "name": "自定义分析模板",
  "description": "针对特定场景的分析框架",
  "category": "analysis",
  "metadata": {
    "author": "Your Name",
    "version": "1.0",
    "tags": ["analysis", "custom"]
  },
  "structure": {
    "steps": [
      {
        "step_number": 1,
        "prompt": "第一步：收集背景信息",
        "type": "regular"
      },
      {
        "step_number": 2,
        "prompt": "第二步：分析核心问题",
        "type": "regular"
      },
      {
        "step_number": 3,
        "prompt": "第三步：评估解决方案",
        "type": "regular"
      }
    ]
  }
}
```

---

### 结合其他 MCP 工具

DeepThinking MCP 可以与其他 MCP 工具配合使用：

#### 与 WebSearch 结合

```
使用 sequential_thinking 分析最新的 AI 技术趋势，每一步可以使用 WebSearch 搜索最新信息
```

#### 与 CodeExecution 结合

```
分析代码性能问题，使用 sequential_thinking 系统化分析，同时使用 CodeExecution 运行性能测试
```

---

### 批量处理会话

```
列出所有已归档的会话，将它们批量导出为 Markdown 格式
```

---

## 最佳实践

### 1. 明确思考目标

在开始思考前，明确您要解决的问题或达成的目标：

```
我要分析"如何提高代码质量"，请帮我使用问题求解模板，重点关注测试覆盖率方面
```

### 2. 合理规划思考步骤

根据问题复杂度，合理规划思考步骤数量：
- 简单问题：3-5 步
- 中等复杂度：5-8 步
- 复杂问题：8-12 步

### 3. 善用修订和分支

- 使用修订功能优化之前的思考
- 使用分支功能探索不同路径

### 4. 及时保存和导出

重要思考过程及时导出保存：
```
将当前会话导出为 Markdown 和 JSON 两种格式
```

### 5. 使用可视化梳理思路

当思考过程复杂时，使用可视化工具：

```
将当前会话可视化为树状结构，帮我梳理思考脉络
```

---

## 常见场景示例

### 场景1：技术方案选型

```
我需要在前端框架中选择一个，候选有 React、Vue、Svelte。
请使用决策模板，从以下维度分析：学习曲线、生态系统、性能、团队经验。
```

### 场景2：问题诊断

```
生产环境出现内存泄漏，请使用问题求解模板帮我系统分析可能的原因和解决方案。
```

### 场景3：架构设计

```
设计一个微服务架构，需要考虑服务拆分、通信方式、数据一致性。
请使用顺序思考，分8个步骤完成设计。
```

### 场景4：代码审查

```
审查这段代码的性能问题，使用分析模板，逐个方面分析可能的瓶颈。
```

### 场景5：学习规划

```
我想学习 Rust 语言，请使用问题求解模板帮我制定一个3个月的学习计划。
```

---

## 故障排除

### 问题：找不到会话

**解决方案**：
1. 检查会话ID是否正确
2. 使用 `list_sessions` 查看所有会话
3. 检查会话是否被归档

### 问题：导出文件位置找不到

**解决方案**：
1. 默认导出到 `~/exports/` 目录
2. 使用绝对路径指定导出位置
3. 检查文件权限

### 问题：可视化结果显示异常

**解决方案**：
1. 尝试不同的可视化格式（mermaid/ascii/tree）
2. 确认思考步骤数量合理（过多步骤可能导致显示问题）
3. 使用 `visualize_session_simple` 获取纯内容

---

## 常见问题 (FAQ)

**Q: 思考步骤可以修改吗？**

A: 可以。使用修订功能 (`isRevision=True`) 可以修改之前的思考步骤。

**Q: 会话有数量限制吗？**

A: 没有硬性限制，但建议定期清理已完成或不再需要的会话。

**Q: 导出的 HTML 文件可以编辑吗？**

A: 可以。导出的 HTML 文件包含完整的样式，可以在浏览器中打开和编辑。

**Q: 模板可以自定义吗？**

A: 可以。模板文件是 JSON 格式，您可以创建自己的模板。

**Q: 支持多用户吗？**

A: 会话数据存储在本地，每个用户/实例有独立的数据空间。

**Q: 数据可以备份吗？**

A: 可以。数据存储在 `~/.deep-thinking/` 目录，可以直接复制备份。

---

## 进阶技巧

### 1. 链式思考

将一个思考会话的结论作为另一个会话的起点：

```
基于会话"技术选型分析"的结论，创建一个新会话"实施计划"，制定具体的实施步骤
```

### 2. 对比分析

创建多个分支会话，对比不同方案：

```
从第3步创建两个分支：分支A探索方案一，分支B探索方案二
```

### 3. 迭代优化

使用修订功能反复优化思考：

```
修订第5步，添加更多关于成本考虑的内容
再修订第5步，补充风险评估
```

### 4. 模板组合

先使用一个模板，再基于结果应用另一个模板：

```
先使用问题求解模板分析问题，再使用决策模板选择解决方案
```

---

## 相关资源

- [API 文档](./api.md)
- [安装与配置指南](./installation.md)
- [架构设计文档](../ARCHITECTURE.md)
- [项目主页](https://github.com/your-org/Deep-Thinking-MCP)

---

## 反馈与贡献

如果您有问题或建议，欢迎：
- 提交 Issue
- 发起 Pull Request
- 参与讨论

---

## 许可证

MIT License
