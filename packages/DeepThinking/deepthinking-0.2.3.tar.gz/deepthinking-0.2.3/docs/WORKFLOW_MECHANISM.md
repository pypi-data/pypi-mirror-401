# Deep-Thinking MCP æ€è€ƒæ­¥éª¤æ¨è¿›æœºåˆ¶è¯¦è§£

> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0
> **æ›´æ–°æ—¥æœŸ**: 2026-01-01
> **ç›®çš„**: æ·±å…¥è§£æ Deep-Thinking MCP å¦‚ä½•å“åº”å¹¶è§£å†³ç”¨æˆ·æé—®

---

## ä¸€ã€æ ¸å¿ƒæœºåˆ¶æ¦‚è¿°

### 1.1 å…³é”®è®¤çŸ¥ï¼šAI è‡ªä¸»é©±åŠ¨

**é‡è¦**: Deep-Thinking MCP **ä¸ä¼šè‡ªåŠ¨å†³å®š**ä½¿ç”¨å¤šå°‘æ€è€ƒæ­¥éª¤ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æå‡ºé—®é¢˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Claude AI åˆ†æ                             â”‚
â”‚                                                             â”‚
â”‚  ğŸ¤” åˆ¤æ–­é—®é¢˜å¤æ‚åº¦                                          â”‚
â”‚  ğŸ“Š å†³å®šæ€è€ƒç­–ç•¥                                            â”‚
â”‚  ğŸ¯ è®¾å®šæ€è€ƒæ­¥éª¤æ•° (totalThoughts)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Deep-Thinking MCP æä¾›å·¥å…·                        â”‚
â”‚                                                             â”‚
â”‚  sequential_thinking  - æ‰§è¡Œå•æ­¥æ€è€ƒ                        â”‚
â”‚  create_session      - åˆ›å»ºæ€è€ƒå®¹å™¨                         â”‚
â”‚  apply_template      - æä¾›æ€è€ƒæ¡†æ¶ï¼ˆå¯é€‰ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 è§’è‰²åˆ†å·¥

| ç»„ä»¶ | èŒè´£ | å†³ç­–æƒ |
|------|------|--------|
| **Claude AI** | å†³å®šæ€è€ƒæ­¥æ•°ã€æ€è€ƒå†…å®¹ã€ä½•æ—¶ç»“æŸ | âœ… å®Œå…¨æ§åˆ¶ |
| **Deep-Thinking MCP** | æä¾›æ€è€ƒå·¥å…·ã€æŒä¹…åŒ–ä¼šè¯ | âŒ ä¸å¹²é¢„å†³ç­– |

---

## äºŒã€æ€è€ƒæ­¥éª¤æ¨è¿›çš„å®Œæ•´æµç¨‹

### 2.1 æµç¨‹å›¾

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant AI as Claude AI
    participant MCP as Deep-Thinking MCP
    participant Storage as å­˜å‚¨å±‚

    U->>AI: æå‡ºé—®é¢˜ï¼ˆå¦‚ï¼šåˆ†æ2026å¹´é»„é‡‘ä»·æ ¼ï¼‰

    Note over AI: AI åˆ†æé—®é¢˜å¤æ‚åº¦
    AI->>AI: å†³å®šä½¿ç”¨ 8 æ­¥æ€è€ƒ
    AI->>AI: åˆ›å»ºä¼šè¯æˆ–ä½¿ç”¨æ¨¡æ¿

    AI->>MCP: create_session(name, description)
    MCP->>Storage: ä¿å­˜ä¼šè¯

    loop æ¯ä¸€æ­¥æ€è€ƒ
        AI->>MCP: sequential_thinking(
            thought: "æ€è€ƒå†…å®¹",
            thoughtNumber: å½“å‰æ­¥éª¤,
            totalThoughts: 8,
            nextThoughtNeeded: true/false
        )
        MCP->>Storage: ä¿å­˜æ€è€ƒæ­¥éª¤
        MCP-->>AI: è¿”å›ç¡®è®¤
    end

    AI->>MCP: update_session_status("completed")
    MCP->>Storage: æ›´æ–°ä¼šè¯çŠ¶æ€

    AI-->>U: è¿”å›å®Œæ•´åˆ†æç»“æœ
```

### 2.2 å®é™…æ¡ˆä¾‹è§£æ

**ç”¨æˆ·é—®é¢˜**: "è¯·å¸®æˆ‘æ·±åº¦åˆ†æä¸€ä¸‹2026å¹´å…¨çƒé»„é‡‘ä»·æ ¼ä¼šå¦‚ä½•å‘å±•"

**AI çš„å†³ç­–è¿‡ç¨‹**:

```
1ï¸âƒ£ é—®é¢˜åˆ†æ
   é—®é¢˜ç±»å‹ï¼šç»æµé¢„æµ‹åˆ†æ
   å¤æ‚ç»´åº¦ï¼šå®è§‚ç»æµã€åœ°ç¼˜æ”¿æ²»ã€ä¾›éœ€å…³ç³»ã€æŠ€æœ¯é¢ã€é£é™©å› ç´ 
   é¢„è®¡æ€è€ƒæ­¥æ•°ï¼š8æ­¥

2ï¸âƒ£ å·¥å…·è°ƒç”¨è®¡åˆ’
   - åˆ›å»ºä¼šè¯ï¼š"2026å¹´é»„é‡‘ä»·æ ¼è¶‹åŠ¿åˆ†æ"
   - æ‰§è¡Œ 8 æ¬¡ sequential_thinking
   - æ›´æ–°ä¼šè¯çŠ¶æ€ä¸º completed
   - ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š

3ï¸âƒ£ æ‰§è¡Œæ€è€ƒ
   Step 1: å®è§‚ç»æµå› ç´ åˆ†æ â†’ nextThoughtNeeded=true
   Step 2: åœ°ç¼˜æ”¿æ²»åˆ†æ â†’ nextThoughtNeeded=true
   Step 3: ä¾›éœ€åŸºæœ¬é¢åˆ†æ â†’ nextThoughtNeeded=true
   Step 4: å¸‚åœºæƒ…ç»ªåˆ†æ â†’ nextThoughtNeeded=true
   Step 5: æŠ€æœ¯åˆ†æ â†’ nextThoughtNeeded=true
   Step 6: é£é™©å› ç´ åˆ†æ â†’ nextThoughtNeeded=true
   Step 7: å…³é”®æ—¶é—´èŠ‚ç‚¹ â†’ nextThoughtNeeded=true
   Step 8: ç»¼åˆç»“è®º â†’ nextThoughtNeeded=false âœ…

4ï¸âƒ£ è¿”å›ç»“æœ
   - æ•´åˆ 8 æ­¥æ€è€ƒå†…å®¹
   - ç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Š
   - æä¾›æŠ•èµ„å»ºè®®
```

---

## ä¸‰ã€æ€è€ƒæ­¥éª¤æ•°çš„å†³å®šæœºåˆ¶

### 3.1 AI å¦‚ä½•å†³å®š totalThoughts

**å…³é”®å‚æ•°**:
```python
sequential_thinking(
    thought="å½“å‰æ€è€ƒå†…å®¹",
    thoughtNumber=3,           # AI å½“å‰åœ¨ç¬¬å‡ æ­¥
    totalThoughts=8,           # AI é¢„è®¡æ€»å…±éœ€è¦å‡ æ­¥
    nextThoughtNeeded=True,     # AI å†³å®šæ˜¯å¦ç»§ç»­
    ...
)
```

**AI çš„åˆ¤æ–­ä¾æ®**:

| å› ç´  | è¯´æ˜ | å½±å“ |
|------|------|------|
| é—®é¢˜å¤æ‚åº¦ | ç®€å•é—®é¢˜ vs å¤æ‚é—®é¢˜ | å¤æ‚ â†’ æ›´å¤šæ­¥éª¤ |
| åˆ†æç»´åº¦ | å•ä¸€ç»´åº¦ vs å¤šç»´åº¦ | å¤šç»´åº¦ â†’ æ›´å¤šæ­¥éª¤ |
| æœŸæœ›æ·±åº¦ | å¿«é€Ÿå›ç­” vs æ·±åº¦åˆ†æ | æ·±åº¦åˆ†æ â†’ æ›´å¤šæ­¥éª¤ |
| æ¨¡æ¿å¼•å¯¼ | ä½¿ç”¨æ¨¡æ¿è®¾å®šæ¡†æ¶ | æ¨¡æ¿æ­¥æ•°ä½œä¸ºå‚è€ƒ |

### 3.2 æ¨¡æ¿çš„ä½œç”¨

**æ¨¡æ¿æä¾›æ€è€ƒæ¡†æ¶**ï¼Œä½†ä¸å¼ºåˆ¶æ­¥æ•°ï¼š

```json
// problem_solving.json
{
  "name": "é—®é¢˜æ±‚è§£æ¨¡æ¿",
  "structure": {
    "steps": [
      {"step_number": 1, "prompt": "æ˜ç¡®é—®é¢˜å®šä¹‰"},
      {"step_number": 2, "prompt": "åˆ†æé—®é¢˜æˆå› "},
      {"step_number": 3, "prompt": "æ”¶é›†ç›¸å…³ä¿¡æ¯"},
      {"step_number": 4, "prompt": "ç”Ÿæˆè§£å†³æ–¹æ¡ˆ"},
      {"step_number": 5, "prompt": "è¯„ä¼°æ–¹æ¡ˆä¼˜åŠ£"},
      {"step_number": 6, "prompt": "é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ"},
      {"step_number": 7, "prompt": "åˆ¶å®šå®æ–½è®¡åˆ’"},
      {"step_number": 8, "prompt": "éªŒè¯ç»“æœ"}
    ]
  },
  "metadata": {
    "estimated_steps": 8  // ä»…ä½œä¸ºå‚è€ƒ
  }
}
```

**AI å¦‚ä½•ä½¿ç”¨æ¨¡æ¿**:
1. è°ƒç”¨ `apply_template("problem_solving", context="ç”¨æˆ·é—®é¢˜")`
2. è·å–æ¨¡æ¿çš„ 8 ä¸ªå¼•å¯¼æç¤º
3. AI **å¯ä»¥é€‰æ‹©**:
   - ä¸¥æ ¼æŒ‰ç…§æ¨¡æ¿çš„ 8 æ­¥è¿›è¡Œ
   - æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æ­¥æ•°
   - æŸäº›æ­¥éª¤åˆå¹¶æˆ–æ‹†åˆ†

### 3.3 åŠ¨æ€è°ƒæ•´æœºåˆ¶

**å¦‚æœæ€è€ƒè¿‡ç¨‹ä¸­å‘ç°æ­¥æ•°ä¸å¤Ÿ**:

```python
# åŸè®¡åˆ’ 5 æ­¥ï¼Œä½†ç¬¬ 3 æ­¥å‘ç°éœ€è¦æ›´å¤šæ€è€ƒ
sequential_thinking(
    thought="åœ¨åˆ†æè¿‡ç¨‹ä¸­å‘ç°äº†æ–°çš„å› ç´ ...",
    thoughtNumber=3,
    totalThoughts=5,
    needsMoreThoughts=True,  # ğŸ”‘ å…³é”®ï¼šè¯·æ±‚å¢åŠ æ­¥æ•°
    nextThoughtNeeded=True
)

# ç³»ç»Ÿå“åº”
# "ğŸ“ˆ æ€è€ƒæ­¥éª¤æ€»æ•°å·²è°ƒæ•´: 5 â†’ 15"
# ï¼ˆæ¯æ¬¡å¢åŠ  10 æ­¥ï¼Œä¸Šé™ 1000 æ­¥ï¼‰
```

**needsMoreThoughts å‚æ•°**:

| å€¼ | æ•ˆæœ | ä½¿ç”¨åœºæ™¯ |
|----|------|---------|
| `true` | totalThoughts å¢åŠ  10 æ­¥ | å‘ç°æ–°çš„åˆ†æç»´åº¦ |
| `true` (å¤šæ¬¡) | æœ€å¤šå¢åŠ åˆ° 1000 æ­¥ | è¶…å¤æ‚é—®é¢˜ |
| `false` | ä¿æŒåŸè®¡åˆ’ | æŒ‰é¢„æœŸè¿›è¡Œ |

**æœ€å¤§é™åˆ¶**:
```python
max_thoughts_limit = 1000  # ç¡¬ç¼–ç ä¸Šé™
```

---

## å››ã€ä¸šåŠ¡é€»è¾‘è¯¦è§£

### 4.1 sequential_thinking å·¥å…·çš„æ ¸å¿ƒé€»è¾‘

```python
def sequential_thinking(
    thought: str,              # AI ç”Ÿæˆçš„æ€è€ƒå†…å®¹
    nextThoughtNeeded: bool,   # AI å†³å®šæ˜¯å¦ç»§ç»­
    thoughtNumber: int,        # AI å½“å‰åœ¨ç¬¬å‡ æ­¥
    totalThoughts: int,        # AI é¢„è®¡çš„æ€»æ­¥æ•°
    session_id: str = "default",
    isRevision: bool = False,
    revisesThought: int | None = None,
    branchFromThought: int | None = None,
    branchId: str | None = None,
    needsMoreThoughts: bool = False,  # AI è¯·æ±‚å¢åŠ æ­¥æ•°
) -> str:
```

**å‚æ•°æ¥æº**:

| å‚æ•° | æ¥æº | è¯´æ˜ |
|------|------|------|
| `thought` | AI ç”Ÿæˆ | Claude æ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆ |
| `thoughtNumber` | AI è®¡ç®— | å½“å‰æ­¥æ•° = ä¸Šä¸€æ­¥æ•° + 1 |
| `totalThoughts` | AI ä¼°ç®— | åŸºäºé—®é¢˜å¤æ‚åº¦åˆ¤æ–­ |
| `nextThoughtNeeded` | AI å†³ç­– | `true` ç»§ç»­ / `false` ç»“æŸ |
| `needsMoreThoughts` | AI å†³ç­– | å‘ç°éœ€è¦æ›´å¤šæ€è€ƒæ—¶è®¾ç½® |

### 4.2 çŠ¶æ€ç®¡ç†

**ä¼šè¯ç”Ÿå‘½å‘¨æœŸ**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   created   â”‚ â† create_session() åˆ›å»º
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   active    â”‚ â† è¿›è¡Œä¸­ï¼Œå¯ä»¥æ·»åŠ æ€è€ƒæ­¥éª¤
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ (nextThoughtNeeded=false)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  completed  â”‚ â† æ ‡è®°ä¸ºå®Œæˆï¼Œä¸å†æ·»åŠ æ€è€ƒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ (æ‰‹åŠ¨æ“ä½œ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  archived   â”‚ â† å½’æ¡£ï¼Œä¿ç•™å†å²
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€è½¬æ¢ä»£ç **:
```python
# sequential_thinking.py ç¬¬176-183è¡Œ
if nextThoughtNeeded:
    result_parts.append("â¡ï¸ ç»§ç»­ä¸‹ä¸€æ­¥æ€è€ƒ...")
else:
    result_parts.append("âœ… æ€è€ƒå®Œæˆï¼")
    # æ ‡è®°ä¼šè¯ä¸ºå·²å®Œæˆ
    session.mark_completed()
    manager.update_session(session)
```

### 4.3 æ•°æ®æŒä¹…åŒ–

**æ¯æ¬¡è°ƒç”¨çš„æ•°æ®æµ**:

```
1. AI è°ƒç”¨ sequential_thinking()
   â†“
2. è·å–æˆ–åˆ›å»ºä¼šè¯ (StorageManager)
   â†“
3. åˆ›å»º Thought å¯¹è±¡ (Pydantic æ¨¡å‹)
   â†“
4. æ·»åŠ åˆ°ä¼šè¯ (session.add_thought())
   â†“
5. ä¿å­˜åˆ°æ–‡ä»¶ (åŸå­å†™å…¥)
   â†“
6. è¿”å›ç¡®è®¤ä¿¡æ¯ç»™ AI
```

**å­˜å‚¨ç»“æ„**:
```
./.Deep-Thinking-MCP/
â”œâ”€â”€ sessions/
â”‚   â”œâ”€â”€ .index.json              # ä¼šè¯ç´¢å¼•
â”‚   â”œâ”€â”€ 9408db80-0b04-4f00...     # å…·ä½“ä¼šè¯æ–‡ä»¶
â”‚   â”‚   {
â”‚   â”‚     "session_id": "...",
â”‚   â”‚     "name": "2026å¹´é»„é‡‘ä»·æ ¼åˆ†æ",
â”‚   â”‚     "thoughts": [
â”‚   â”‚       {
â”‚   â”‚         "thought_number": 1,
â”‚   â”‚         "content": "å®è§‚ç»æµå› ç´ åˆ†æ...",
â”‚   â”‚         "timestamp": "2026-01-01T08:11:40Z"
â”‚   â”‚       },
â”‚   â”‚       {
â”‚   â”‚         "thought_number": 2,
â”‚   â”‚         "content": "åœ°ç¼˜æ”¿æ²»åˆ†æ...",
â”‚   â”‚         "timestamp": "2026-01-01T08:11:42Z"
â”‚   â”‚       },
â”‚   â”‚       ... (å…± 8 ä¸ªæ€è€ƒæ­¥éª¤)
â”‚   â”‚     ]
â”‚   â”‚   }
â”‚   â””â”€â”€ ...
```

---

## äº”ã€ä¸åŒå¤æ‚åº¦é—®é¢˜çš„å¤„ç†

### 5.1 ç®€å•é—®é¢˜ï¼ˆ2-3æ­¥ï¼‰

**ç”¨æˆ·é—®é¢˜**: "Python ä¸­å¦‚ä½•åè½¬å­—ç¬¦ä¸²ï¼Ÿ"

**AI çš„å¤„ç†**:
```python
# Step 1
sequential_thinking(
    thought="Python ä¸­æœ‰å¤šç§æ–¹æ³•åè½¬å­—ç¬¦ä¸²ï¼šåˆ‡ç‰‡ã€reversed()ã€join()",
    thoughtNumber=1,
    totalThoughts=2,
    nextThoughtNeeded=True
)

# Step 2
sequential_thinking(
    thought="æ¨èä½¿ç”¨åˆ‡ç‰‡æ³• s[::-1]ï¼Œç®€æ´é«˜æ•ˆã€‚æä¾›ä»£ç ç¤ºä¾‹ã€‚",
    thoughtNumber=2,
    totalThoughts=2,
    nextThoughtNeeded=False  # âœ… å®Œæˆ
)
```

### 5.2 ä¸­ç­‰å¤æ‚åº¦ï¼ˆ5-8æ­¥ï¼‰

**ç”¨æˆ·é—®é¢˜**: "æ¯”è¾ƒä¸¤ç§æŠ€æœ¯æ–¹æ¡ˆçš„ä¼˜åŠ£"

**AI çš„å¤„ç†**:
```python
# Step 1: ç†è§£éœ€æ±‚
# Step 2: åˆ†ææ–¹æ¡ˆA
# Step 3: åˆ†ææ–¹æ¡ˆB
# Step 4: å¯¹æ¯”ç»´åº¦å®šä¹‰
# Step 5: é€é¡¹å¯¹æ¯”
# Step 6: ç»¼åˆè¯„ä¼°
# Step 7: ç»™å‡ºå»ºè®®
# Step 8: é£é™©æç¤º
totalThoughts=8
```

### 5.3 é«˜å¤æ‚åº¦ï¼ˆ10+æ­¥ï¼‰

**ç”¨æˆ·é—®é¢˜**: "è®¾è®¡ä¸€ä¸ªå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„"

**AI çš„å¤„ç†**:
```python
# Step 1-5: éœ€æ±‚åˆ†æã€æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡
# Step 6: å‘ç°éœ€è¦æ›´æ·±å…¥çš„è®¨è®º
sequential_thinking(
    thought="åœ¨æ¶æ„è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº†æ–°çš„è€ƒè™‘å› ç´ ...",
    thoughtNumber=6,
    totalThoughts=10,
    needsMoreThoughts=True,  # ğŸ”‘ å¢åŠ æ­¥æ•°
    nextThoughtNeeded=True
)
# totalThoughts è‡ªåŠ¨è°ƒæ•´ä¸º 20

# Step 7-20: ç»§ç»­æ·±å…¥åˆ†æ
# Step 15: å†æ¬¡å‘ç°éœ€è¦æ‰©å±•
sequential_thinking(
    thought="è¿˜éœ€è¦è€ƒè™‘å®¹ç¾å’Œå¤‡ä»½ç­–ç•¥...",
    thoughtNumber=15,
    totalThoughts=20,
    needsMoreThoughts=True,  # å†æ¬¡å¢åŠ 
    nextThoughtNeeded=True
)
# totalThoughts è‡ªåŠ¨è°ƒæ•´ä¸º 30

# æœ€ç»ˆå¯èƒ½ä½¿ç”¨ 25 æ­¥å®Œæˆåˆ†æ
```

---

## å…­ã€å…³é”®å‚æ•°è¯¦è§£

### 6.1 thoughtNumber vs totalThoughts

```python
# thoughtNumber: å½“å‰æ˜¯ç¬¬å‡ æ­¥ï¼ˆä»1å¼€å§‹é€’å¢ï¼‰
thoughtNumber = 1, 2, 3, ..., totalThoughts

# totalThoughts: é¢„è®¡æ€»å…±éœ€è¦å‡ æ­¥
# - AI æ ¹æ®é—®é¢˜å¤æ‚åº¦ä¼°ç®—
# - å¯ä»¥é€šè¿‡ needsMoreThoughts åŠ¨æ€è°ƒæ•´
totalThoughts = 5, 8, 10, ..., 1000 (ä¸Šé™)

# å…³ç³»ï¼šthoughtNumber <= totalThoughts
# å½“ thoughtNumber > totalThoughts æ—¶ï¼Œä½¿ç”¨ needsMoreThoughts
```

### 6.2 nextThoughtNeeded çš„ä½œç”¨

```python
if nextThoughtNeeded:
    # AI è®¡åˆ’ç»§ç»­æ€è€ƒ
    # è¿”å›ï¼š"â¡ï¸ ç»§ç»­ä¸‹ä¸€æ­¥æ€è€ƒ..."
    # ä¼šè¯çŠ¶æ€ä¿æŒä¸º "active"
else:
    # AI å†³å®šç»“æŸæ€è€ƒ
    # è¿”å›ï¼š"âœ… æ€è€ƒå®Œæˆï¼"
    # ä¼šè¯çŠ¶æ€å˜ä¸º "completed"
```

**å†³ç­–ä¾æ®**:

| æƒ…å†µ | nextThoughtNeeded | è¯´æ˜ |
|------|------------------|------|
| è¾¾åˆ°é¢„æœŸç›®æ ‡ | `false` | é—®é¢˜å·²è§£å†³ |
| å‘ç°æ–°é—®é¢˜ | `true` | éœ€è¦è¿›ä¸€æ­¥åˆ†æ |
| æ€»æ­¥æ•°æœªå®Œæˆ | `true` | æŒ‰è®¡åˆ’ç»§ç»­ |
| æ€è€ƒå·²å……åˆ† | `false` | å¯ä»¥æ€»ç»“ |

### 6.3 needsMoreThoughts çš„ä½¿ç”¨åœºæ™¯

**åœºæ™¯1: å‘ç°æ–°çš„åˆ†æç»´åº¦**
```python
# åŸè®¡åˆ’åˆ†ææŠ€æœ¯å› ç´ ï¼Œå‘ç°è¿˜éœ€è¦è€ƒè™‘å¸‚åœºå› ç´ 
sequential_thinking(
    thought="é™¤äº†æŠ€æœ¯å› ç´ ï¼Œå¸‚åœºç¯å¢ƒä¹Ÿå¾ˆé‡è¦...",
    thoughtNumber=6,
    totalThoughts=8,
    needsMoreThoughts=True  # éœ€è¦å¢åŠ æ­¥æ•°æ¥åˆ†æå¸‚åœº
)
```

**åœºæ™¯2: é—®é¢˜æ¯”é¢„æœŸå¤æ‚**
```python
# åŸä»¥ä¸º5æ­¥èƒ½è§£å†³ï¼Œå®é™…éœ€è¦æ›´æ·±å…¥
sequential_thinking(
    thought="è¿™ä¸ªé—®é¢˜æ¯”é¢„æœŸå¤æ‚ï¼Œéœ€è¦åˆ†è§£æ›´å¤šå­é—®é¢˜...",
    thoughtNumber=5,
    totalThoughts=5,
    needsMoreThoughts=True  # å¢åŠ æ­¥æ•°
)
# totalThoughts å˜ä¸º 15
```

---

## ä¸ƒã€æ–­ç‚¹ç»­ä¼ æœºåˆ¶

### 7.1 ä¼šè¯æ¢å¤

**å½“æ€è€ƒè¢«ä¸­æ–­æ—¶**ï¼š

```python
# ä½¿ç”¨ resume_session æ¢å¤
result = resume_session("9408db80-0b04-4f00-a257-6d708eee4a29")

# è¿”å›ï¼š
# "## ğŸ”„ ä¼šè¯æ¢å¤æˆåŠŸ
#
# **ä¼šè¯ID**: 9408db80-...
# **æ€»æ€è€ƒæ•°**: 8
# **ä¸Šä¸€ä¸ªæ€è€ƒæ­¥éª¤**: æ­¥éª¤ 8: ç»¼åˆç»“è®ºä¸æŠ•èµ„å»ºè®®
#
# ### ç»§ç»­æ€è€ƒ
# è¦ç»§ç»­æ·»åŠ æ€è€ƒæ­¥éª¤ï¼Œè¯·è®¾ç½®ï¼š
# - thoughtNumber = 9
# - session_id = 9408db80-..."
```

### 7.2 è°ƒæ•´å†å²è®°å½•

**æŸ¥çœ‹æ€è€ƒæ­¥éª¤çš„è°ƒæ•´å†å²**ï¼š

```python
# ä¼šè¯å…ƒæ•°æ®ä¸­ä¿å­˜äº†è°ƒæ•´è®°å½•
session.metadata["total_thoughts_history"] = [
    {
        "original_total": 5,
        "new_total": 15,
        "thought_number": 6,
        "timestamp": "2026-01-01T10:30:00Z"
    },
    {
        "original_total": 15,
        "new_total": 25,
        "thought_number": 15,
        "timestamp": "2026-01-01T11:00:00Z"
    }
]
```

---

## å…«ã€æ€»ç»“ï¼šæ ¸å¿ƒå·¥ä½œæµç¨‹

### 8.1 å®Œæ•´å·¥ä½œæµ

```mermaid
flowchart TD
    Start([ç”¨æˆ·æé—®]) --> AI1[Claude AI åˆ†æé—®é¢˜]
    AI1 --> Decide{å†³å®šæ€è€ƒç­–ç•¥}

    Decide -->|ç®€å•é—®é¢˜| Simple[totalThoughts=2-3]
    Decide -->|ä¸­ç­‰é—®é¢˜| Medium[totalThoughts=5-8]
    Decide -->|å¤æ‚é—®é¢˜| Complex[totalThoughts=10+]
    Decide -->|ä½¿ç”¨æ¨¡æ¿| Template[apply_template]

    Simple --> Create[create_session]
    Medium --> Create
    Complex --> Create
    Template --> Create

    Create --> Loop{nextThoughtNeeded?}

    Loop -->|Yes| Think[sequential_thinking]
    Think --> Check{éœ€è¦æ›´å¤šæ­¥æ•°?}

    Check -->|Yes| Expand[needsMoreThoughts=true]
    Expand --> Think
    Check -->|No| Loop

    Loop -->|No| Complete[update_session_status]
    Complete --> Export[visualize_session / export]
    Export --> End([è¿”å›å®Œæ•´ç­”æ¡ˆ])

    style AI1 fill:#e1f5ff
    style Think fill:#fff3e0
    style End fill:#e8f5e9
```

### 8.2 å…³é”®è¦ç‚¹

1. **AI å®Œå…¨è‡ªä¸»**
   - Deep-Thinking MCP **ä¸è‡ªåŠ¨å†³å®š**æ€è€ƒæ­¥æ•°
   - æ‰€æœ‰å†³ç­–ç”± AIï¼ˆClaudeï¼‰æ ¹æ®é—®é¢˜åˆ¤æ–­

2. **å‚æ•°æ¥æº**
   - `totalThoughts`: AI ä¼°ç®—
   - `nextThoughtNeeded`: AI å†³ç­–
   - `needsMoreThoughts`: AI æŒ‰éœ€è°ƒæ•´

3. **çµæ´»æ€§**
   - å¯ä»¥éšæ—¶å¢åŠ æ­¥æ•°ï¼ˆæœ€å¤š1000æ­¥ï¼‰
   - å¯ä»¥ä½¿ç”¨æ¨¡æ¿ä½œä¸ºå‚è€ƒ
   - æ”¯æŒæ–­ç‚¹ç»­ä¼ 

4. **æŒä¹…åŒ–**
   - æ¯æ­¥è‡ªåŠ¨ä¿å­˜
   - ä¼šè¯ç‹¬ç«‹ç®¡ç†
   - æ•°æ®å®Œæ•´å¯é 

---

## ä¹ã€å®é™…åº”ç”¨ç¤ºä¾‹

### 9.1 ä»£ç å®¡æŸ¥åœºæ™¯

**ç”¨æˆ·**: "å¸®æˆ‘å®¡æŸ¥è¿™æ®µä»£ç çš„å®‰å…¨æ€§"

**AI çš„æ€è€ƒè¿‡ç¨‹**:
```
Step 1: ç†è§£ä»£ç åŠŸèƒ½ (totalThoughts=6)
Step 2: è¯†åˆ«è¾“å…¥éªŒè¯
Step 3: æ£€æŸ¥SQLæ³¨å…¥é£é™©
Step 4: æ£€æŸ¥XSSé£é™©
Step 5: æ£€æŸ¥è®¤è¯æˆæƒ
Step 6: ç”Ÿæˆä¿®å¤å»ºè®® (nextThoughtNeeded=false)
```

### 9.2 ç³»ç»Ÿè®¾è®¡åœºæ™¯

**ç”¨æˆ·**: "è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ"

**AI çš„æ€è€ƒè¿‡ç¨‹**:
```
Step 1: éœ€æ±‚åˆ†æ (totalThoughts=15)
Step 2: æŠ€æœ¯é€‰å‹
Step 3: æ¶æ„è®¾è®¡
Step 4: æ•°æ®åº“è®¾è®¡
Step 5: ç¼“å­˜ç­–ç•¥
Step 6: å¹¶å‘æ§åˆ¶
...
Step 10: å‘ç°éœ€è¦è€ƒè™‘å®¹ç¾
      â†’ needsMoreThoughts=true (totalThoughts: 15â†’25)
Step 11: å®¹ç¾è®¾è®¡
...
Step 20: æ€»ç»“æ–¹æ¡ˆ (nextThoughtNeeded=false)
```

---

## åã€å¸¸è§é—®é¢˜

### Q1: Deep-Thinking MCP ä¼šè‡ªåŠ¨åˆ†æé—®é¢˜å¤æ‚åº¦å—ï¼Ÿ

**A**: ä¸ä¼šã€‚åˆ†æé—®é¢˜å¤æ‚åº¦ã€å†³å®šæ€è€ƒæ­¥æ•°ï¼Œè¿™äº›éƒ½æ˜¯ **Claude AI çš„èŒè´£**ã€‚Deep-Thinking MCP åªæä¾›å·¥å…·æ”¯æŒã€‚

### Q2: å¦‚æœ AI è®¾å®šçš„æ­¥æ•°ä¸å¤Ÿæ€ä¹ˆåŠï¼Ÿ

**A**: ä½¿ç”¨ `needsMoreThoughts=true` å‚æ•°ï¼Œæ¯æ¬¡å¢åŠ 10æ­¥ï¼Œæœ€å¤š1000æ­¥ã€‚

### Q3: æ¨¡æ¿æ˜¯å¼ºåˆ¶çš„å—ï¼Ÿ

**A**: ä¸æ˜¯ã€‚æ¨¡æ¿æ˜¯å¯é€‰çš„å‚è€ƒæ¡†æ¶ã€‚AI å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æ­¥æ•°å’Œå†…å®¹ã€‚

### Q4: æ€è€ƒæ­¥éª¤æœ‰é™åˆ¶å—ï¼Ÿ

**A**: æœ‰ã€‚æœ€å¤§1000æ­¥ï¼Œè¿™æ˜¯ç¡¬ç¼–ç çš„é™åˆ¶ï¼Œé˜²æ­¢æ— é™å¾ªç¯ã€‚

### Q5: å¦‚ä½•æŸ¥çœ‹ä¹‹å‰çš„æ€è€ƒï¼Ÿ

**A**: ä½¿ç”¨ `get_session(session_id)` æˆ– `resume_session(session_id)` å·¥å…·ã€‚

---

> **æ–‡æ¡£è¯´æ˜**: æœ¬æ–‡æ¡£è¯¦ç»†è§£é‡Šäº† Deep-Thinking MCP çš„æ€è€ƒæ­¥éª¤æ¨è¿›æœºåˆ¶ï¼Œå¸®åŠ©ç†è§£ AI å¦‚ä½•ä½¿ç”¨è¯¥å·¥å…·è§£å†³ç”¨æˆ·é—®é¢˜ã€‚
