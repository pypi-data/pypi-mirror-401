# ============================================================================
# CI/CD Hub - Python CI Caller Template
# ============================================================================
# Copy this file to your repo: .github/workflows/hub-ci.yml (or ci.yml)
# All settings are read from .ci-hub.yml in your repo root.
#
# This simple caller triggers the hub wrapper which:
# 1. Reads your .ci-hub.yml config
# 2. Passes all settings to the appropriate language-specific workflow
#
# NOTE: Update the @ref below to match your desired hub version:
#   - Use @main (recommended) for stable releases
#   - Use @main for latest (may have breaking changes)
# ============================================================================

name: CI

on:
  workflow_dispatch:
    inputs:
      hub_correlation_id:
        description: 'Correlation ID (set by hub orchestrator)'
        type: string
        default: ''
      cihub_debug:
        description: 'Enable debug mode'
        type: boolean
        default: false
      cihub_verbose:
        description: 'Enable verbose output'
        type: boolean
        default: false
      cihub_debug_context:
        description: 'Enable context debugging'
        type: boolean
        default: false
      cihub_emit_triage:
        description: 'Emit triage bundle on failures'
        type: boolean
        default: false
  push:
  pull_request:

permissions:
  contents: read
  actions: read
  security-events: write

jobs:
  ci:
    uses: jguida941/ci-cd-hub/.github/workflows/hub-ci.yml@main
    with:
      hub_correlation_id: ${{ github.event.inputs.hub_correlation_id || '' }}
      hub_repo: jguida941/ci-cd-hub
      hub_ref: main
    secrets: inherit
