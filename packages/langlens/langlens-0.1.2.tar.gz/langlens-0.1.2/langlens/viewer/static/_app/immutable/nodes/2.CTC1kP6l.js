import{b as jg,d as jt,a as I,c as ve,p as Fu,f as j}from"../chunks/Ci0TUjzZ.js";import"../chunks/BHpEsMCF.js";import{c as sp,w as vt,o as up,r as Dg}from"../chunks/DZUMnSdD.js";import{ai as Dt,aL as cp,h as Be,a as Su,P as ju,g as d,a1 as te,R as Gg,S as Bg,U as mc,G as Gr,V as Pr,D as Nr,H as Ug,aE as zg,ao as wc,I as Vg,M as ht,O as Hg,aC as Du,x as fp,ab as xc,W as J,aM as Kg,aN as Wg,aO as Yg,y as Nt,aP as Er,J as lp,L as dp,aQ as on,ay as Xg,aB as Jg,K as Mt,z as vp,aR as hp,aS as Zg,Q as Gu,B as pp,aT as Qg,E as e_,aG as Gt,d as M,aU as r_,av as gp,ae as t_,o as Ir,aV as n_,aW as a_,X as _p,aX as yp,aY as i_,aZ as o_,a_ as s_,a$ as u_,b0 as c_,b1 as f_,b2 as l_,b3 as d_,p as Ne,m as T,s as z,n as A,l as Pe,f as D,k as ie,aK as ur,b4 as Bu,b5 as v_,b6 as Au,b7 as bp,u as mp,b as wp,aJ as h_,aI as Br,Z as G,b8 as pe,b9 as Je,t as Z,ap as Ur,ba as qc}from"../chunks/BnUNjuXp.js";import{a as p_,i as g_,b as It,c as __,d as y_,e as b_,n as m_,f as w_,g as x_,o as Iu,s as re,j as ye}from"../chunks/DuTZDju-.js";import{B as xp,l as Ze,p as ne,s as tr,i as ee,r as Uu,c as qp,a as zr,b as gt,d as Vr}from"../chunks/Ct9u_a3k.js";import{i as Ue}from"../chunks/DJXACzzb.js";import{s as He}from"../chunks/DiRAknyg.js";function q_(e,r){if(r){const t=document.body;e.autofocus=!0,Dt(()=>{document.activeElement===t&&e.focus()})}}let Ec=!1;function E_(){Ec||(Ec=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function k_(){return Symbol(cp)}function pr(e,r){return r}function R_(e,r,t){for(var a=[],n=r.length,i,o=r.length,s=0;s<n;s++){let l=r[s];dp(l,()=>{if(i){if(i.pending.delete(l),i.done.add(l),i.pending.size===0){var v=e.outrogroups;Cu(Du(i.done)),v.delete(i),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=a.length===0&&t!==null;if(u){var f=t,c=f.parentNode;Jg(c),c.append(f),e.items.clear()}Cu(r,!u)}else i={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(i)}function Cu(e,r=!0){for(var t=0;t<e.length;t++)Mt(e[t],r)}var kc;function gr(e,r,t,a,n,i=null){var o=e,s=new Map,u=(r&hp)!==0;if(u){var f=e;o=Be?Gr(vp(f)):f.appendChild(Nt())}Be&&Su();var c=null,l=te(()=>{var y=t();return fp(y)?y:y==null?[]:Du(y)}),v,p=!0;function _(){h.fallback=c,S_(h,v,o,r,a),c!==null&&(v.length===0?(c.f&Er)===0?lp(c):(c.f^=Er,at(c,null,o)):dp(c,()=>{c=null}))}var g=ju(()=>{v=d(l);var y=v.length;let m=!1;if(Be){var x=Gg(o)===Bg;x!==(y===0)&&(o=mc(),Gr(o),Pr(!1),m=!0)}for(var w=new Set,E=Vg,b=Hg(),q=0;q<y;q+=1){Be&&Nr.nodeType===Ug&&Nr.data===zg&&(o=Nr,m=!0,Pr(!1));var S=v[q],O=a(S,q),C=p?null:s.get(O);C?(C.v&&wc(C.v,S),C.i&&wc(C.i,q),b&&E.skipped_effects.delete(C.e)):(C=A_(s,p?o:kc??=Nt(),S,O,q,n,r,t),p||(C.e.f|=Er),s.set(O,C)),w.add(O)}if(y===0&&i&&!c&&(p?c=ht(()=>i(o)):(c=ht(()=>i(kc??=Nt())),c.f|=Er)),Be&&y>0&&Gr(mc()),!p)if(b){for(const[k,N]of s)w.has(k)||E.skipped_effects.add(N.e);E.oncommit(_),E.ondiscard(()=>{})}else _();m&&Pr(!0),d(l)}),h={effect:g,items:s,outrogroups:null,fallback:c};p=!1,Be&&(o=Nr)}function S_(e,r,t,a,n){var i=(a&Zg)!==0,o=r.length,s=e.items,u=e.effect.first,f,c=null,l,v=[],p=[],_,g,h,y;if(i)for(y=0;y<o;y+=1)_=r[y],g=n(_,y),h=s.get(g).e,(h.f&Er)===0&&(h.nodes?.a?.measure(),(l??=new Set).add(h));for(y=0;y<o;y+=1){if(_=r[y],g=n(_,y),h=s.get(g).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(h),C.done.delete(h);if((h.f&Er)!==0)if(h.f^=Er,h===u)at(h,null,t);else{var m=c?c.next:u;h===e.effect.last&&(e.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),Sr(e,c,h),Sr(e,h,m),at(h,m,t),c=h,v=[],p=[],u=c.next;continue}if((h.f&on)!==0&&(lp(h),i&&(h.nodes?.a?.unfix(),(l??=new Set).delete(h))),h!==u){if(f!==void 0&&f.has(h)){if(v.length<p.length){var x=p[0],w;c=x.prev;var E=v[0],b=v[v.length-1];for(w=0;w<v.length;w+=1)at(v[w],x,t);for(w=0;w<p.length;w+=1)f.delete(p[w]);Sr(e,E.prev,b.next),Sr(e,c,E),Sr(e,b,x),u=x,c=b,y-=1,v=[],p=[]}else f.delete(h),at(h,u,t),Sr(e,h.prev,h.next),Sr(e,h,c===null?e.effect.first:c.next),Sr(e,c,h),c=h;continue}for(v=[],p=[];u!==null&&u!==h;)(f??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(h.f&Er)===0&&v.push(h),c=h,u=h.next}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(Cu(Du(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||f!==void 0){var q=[];if(f!==void 0)for(h of f)(h.f&on)===0&&q.push(h);for(;u!==null;)(u.f&on)===0&&u!==e.fallback&&q.push(u),u=u.next;var S=q.length;if(S>0){var O=(a&hp)!==0&&o===0?t:null;if(i){for(y=0;y<S;y+=1)q[y].nodes?.a?.measure();for(y=0;y<S;y+=1)q[y].nodes?.a?.fix()}R_(e,q,O)}}i&&Dt(()=>{if(l!==void 0)for(h of l)h.nodes?.a?.apply()})}function A_(e,r,t,a,n,i,o,s){var u=(o&Wg)!==0?(o&Yg)===0?J(t,!1,!1):xc(t):null,f=(o&Kg)!==0?xc(n):null;return{v:u,i:f,e:ht(()=>(i(r,u??t,f??n,s),()=>{e.delete(a)}))}}function at(e,r,t){if(e.nodes)for(var a=e.nodes.start,n=e.nodes.end,i=r&&(r.f&Er)===0?r.nodes.start:t;a!==null;){var o=Xg(a);if(i.before(a),a===n)return;a=o}}function Sr(e,r,t){r===null?e.effect.first=t:r.next=t,t===null?e.effect.last=r:t.prev=r}function Hr(e,r,...t){var a=new xp(e);ju(()=>{const n=r()??null;a.ensure(n,n&&(i=>n(i,...t)))},Gu)}const I_=()=>performance.now(),qr={tick:e=>requestAnimationFrame(e),now:()=>I_(),tasks:new Set};function Ep(){const e=qr.now();qr.tasks.forEach(r=>{r.c(e)||(qr.tasks.delete(r),r.f())}),qr.tasks.size!==0&&qr.tick(Ep)}function C_(e){let r;return qr.tasks.size===0&&qr.tick(Ep),{promise:new Promise(t=>{qr.tasks.add(r={c:e,f:t})}),abort(){qr.tasks.delete(r)}}}function Ct(e,r){gp(()=>{e.dispatchEvent(new CustomEvent(r))})}function T_(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Rc(e){const r={},t=e.split(";");for(const a of t){const[n,i]=a.split(":");if(!n||i===void 0)break;const o=T_(n.trim());r[o]=i.trim()}return r}const O_=e=>e;function it(e,r,t,a){var n=(e&r_)!==0,i="both",o,s=r.inert,u=r.style.overflow,f,c;function l(){return gp(()=>o??=t()(r,a?.()??{},{direction:i}))}var v={is_global:n,in(){r.inert=s,Ct(r,"introstart"),f=Tu(r,l(),c,1,()=>{Ct(r,"introend"),f?.abort(),f=o=void 0,r.style.overflow=u})},out(h){r.inert=!0,Ct(r,"outrostart"),c=Tu(r,l(),f,0,()=>{Ct(r,"outroend"),h?.()})},stop:()=>{f?.abort(),c?.abort()}},p=pp;if((p.nodes.t??=[]).push(v),p_){var _=n;if(!_){for(var g=p.parent;g&&(g.f&Gu)!==0;)for(;(g=g.parent)&&(g.f&Qg)===0;);_=!g||(g.f&e_)!==0}_&&Gt(()=>{M(()=>v.in())})}}function Tu(e,r,t,a,n){var i=a===1;if(t_(r)){var o,s=!1;return Dt(()=>{if(!s){var h=r({direction:i?"in":"out"});o=Tu(e,h,t,a,n)}}),{abort:()=>{s=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!r?.duration)return n(),{abort:Ir,deactivate:Ir,reset:Ir,t:()=>a};const{delay:u=0,css:f,tick:c,easing:l=O_}=r;var v=[];if(i&&t===void 0&&(c&&c(0,1),f)){var p=Rc(f(0,1));v.push(p,p)}var _=()=>1-a,g=e.animate(v,{duration:u,fill:"forwards"});return g.onfinish=()=>{g.cancel();var h=t?.t()??1-a;t?.abort();var y=a-h,m=r.duration*Math.abs(y),x=[];if(m>0){var w=!1;if(f)for(var E=Math.ceil(m/16.666666666666668),b=0;b<=E;b+=1){var q=h+y*l(b/E),S=Rc(f(q,1-q));x.push(S),w||=S.overflow==="hidden"}w&&(e.style.overflow="hidden"),_=()=>{var O=g.currentTime;return h+y*l(O/m)},c&&C_(()=>{if(g.playState!=="running")return!1;var O=_();return c(O,1-O),!0})}g=e.animate(x,{duration:m,fill:"forwards"}),g.onfinish=()=>{_=()=>a,c?.(a,1-a),n()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=Ir)},deactivate:()=>{n=Ir},reset:()=>{a===0&&c?.(1,0)},t:()=>_()}}function N_(e,r,t,a,n,i){let o=Be;Be&&Su();var s=null;Be&&Nr.nodeType===n_&&(s=Nr,Su());var u=Be?Nr:e,f=new xp(u,!1);ju(()=>{const c=r()||null;var l=a_;if(c===null){f.ensure(null,null),It(!0);return}return f.ensure(c,v=>{if(c){if(s=Be?s:document.createElementNS(l,c),jg(s,s),a){Be&&g_(c)&&s.append(document.createComment(""));var p=Be?vp(s):s.appendChild(Nt());Be&&(p===null?Pr(!1):Gr(p)),a(s,p)}pp.nodes.end=s,v.before(s)}Be&&Gr(v)}),It(!0),()=>{c&&It(!1)}},Gu),_p(()=>{It(!0)}),o&&(Pr(!0),Gr(u))}function P_(e,r){var t=void 0,a;yp(()=>{t!==(t=r())&&(a&&(Mt(a),a=null),t&&(a=ht(()=>{Gt(()=>t(e))})))})}function kp(e){var r,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(r=0;r<n;r++)e[r]&&(t=kp(e[r]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Pt(){for(var e,r,t=0,a="",n=arguments.length;t<n;t++)(e=arguments[t])&&(r=kp(e))&&(a&&(a+=" "),a+=r);return a}function Mr(e){return typeof e=="object"?Pt(e):e??""}const Sc=[...` 	
\r\fÂ \v\uFEFF`];function M_(e,r,t){var a=e==null?"":""+e;if(r&&(a=a?a+" "+r:r),t){for(var n in t)if(t[n])a=a?a+" "+n:n;else if(a.length)for(var i=n.length,o=0;(o=a.indexOf(n,o))>=0;){var s=o+i;(o===0||Sc.includes(a[o-1]))&&(s===a.length||Sc.includes(a[s]))?a=(o===0?"":a.substring(0,o))+a.substring(s+1):o=s}}return a===""?null:a}function Ac(e,r=!1){var t=r?" !important;":";",a="";for(var n in e){var i=e[n];i!=null&&i!==""&&(a+=" "+n+": "+i+t)}return a}function sn(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function $_(e,r){if(r){var t="",a,n;if(Array.isArray(r)?(a=r[0],n=r[1]):a=r,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,s=!1,u=[];a&&u.push(...Object.keys(a).map(sn)),n&&u.push(...Object.keys(n).map(sn));var f=0,c=-1;const g=e.length;for(var l=0;l<g;l++){var v=e[l];if(s?v==="/"&&e[l-1]==="*"&&(s=!1):i?i===v&&(i=!1):v==="/"&&e[l+1]==="*"?s=!0:v==='"'||v==="'"?i=v:v==="("?o++:v===")"&&o--,!s&&i===!1&&o===0){if(v===":"&&c===-1)c=l;else if(v===";"||l===g-1){if(c!==-1){var p=sn(e.substring(f,c).trim());if(!u.includes(p)){v!==";"&&l++;var _=e.substring(f,l).trim();t+=" "+_+";"}}f=l+1,c=-1}}}}return a&&(t+=Ac(a)),n&&(t+=Ac(n,!0)),t=t.trim(),t===""?null:t}return e==null?null:String(e)}function Ye(e,r,t,a,n,i){var o=e.__className;if(Be||o!==t||o===void 0){var s=M_(t,a,i);(!Be||s!==e.getAttribute("class"))&&(s==null?e.removeAttribute("class"):r?e.className=s:e.setAttribute("class",s)),e.__className=t}else if(i&&n!==i)for(var u in i){var f=!!i[u];(n==null||f!==!!n[u])&&e.classList.toggle(u,f)}return i}function un(e,r={},t,a){for(var n in t){var i=t[n];r[n]!==i&&(t[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,a))}}function mr(e,r,t,a){var n=e.__style;if(Be||n!==r){var i=$_(r,a);(!Be||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=r}else a&&(Array.isArray(a)?(un(e,t?.[0],a[0]),un(e,t?.[1],a[1],"important")):un(e,t,a));return a}function Ou(e,r,t=!1){if(e.multiple){if(r==null)return;if(!fp(r))return i_();for(var a of e.options)a.selected=r.includes(Ic(a));return}for(a of e.options){var n=Ic(a);if(o_(n,r)){a.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function L_(e){var r=new MutationObserver(()=>{Ou(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),_p(()=>{r.disconnect()})}function Ic(e){return"__value"in e?e.__value:e.value}const tt=Symbol("class"),nt=Symbol("style"),Rp=Symbol("is custom element"),Sp=Symbol("is html");function F_(e){if(Be){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;Ve(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var n=e.checked;Ve(e,"checked",null),e.checked=n}}};e.__on_r=t,Dt(t),E_()}}function j_(e,r){r?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Ve(e,r,t,a){var n=Ap(e);Be&&(n[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||n[r]!==(n[r]=t)&&(r==="loading"&&(e[u_]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Ip(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function D_(e,r,t,a,n=!1,i=!1){if(Be&&n&&e.tagName==="INPUT"){var o=e,s=o.type==="checkbox"?"defaultChecked":"defaultValue";s in t||F_(o)}var u=Ap(e),f=u[Rp],c=!u[Sp];let l=Be&&f;l&&Pr(!1);var v=r||{},p=e.tagName==="OPTION";for(var _ in r)_ in t||(t[_]=null);t.class?t.class=Mr(t.class):t[tt]&&(t.class=null),t[nt]&&(t.style??=null);var g=Ip(e);for(const b in t){let q=t[b];if(p&&b==="value"&&q==null){e.value=e.__value="",v[b]=q;continue}if(b==="class"){var h=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ye(e,h,q,a,r?.[tt],t[tt]),v[b]=q,v[tt]=t[tt];continue}if(b==="style"){mr(e,q,r?.[nt],t[nt]),v[b]=q,v[nt]=t[nt];continue}var y=v[b];if(!(q===y&&!(q===void 0&&e.hasAttribute(b)))){v[b]=q;var m=b[0]+b[1];if(m!=="$$")if(m==="on"){const S={},O="$$"+b;let C=b.slice(2);var x=w_(C);if(__(C)&&(C=C.slice(0,-7),S.capture=!0),!x&&y){if(q!=null)continue;e.removeEventListener(C,v[O],S),v[O]=null}if(q!=null)if(x)e[`__${C}`]=q,b_([C]);else{let k=function(N){v[b].call(this,N)};v[O]=y_(C,e,k,S)}else x&&(e[`__${C}`]=void 0)}else if(b==="style")Ve(e,b,q);else if(b==="autofocus")q_(e,!!q);else if(!f&&(b==="__value"||b==="value"&&q!=null))e.value=e.__value=q;else if(b==="selected"&&p)j_(e,q);else{var w=b;c||(w=m_(w));var E=w==="defaultValue"||w==="defaultChecked";if(q==null&&!f&&!E)if(u[b]=null,w==="value"||w==="checked"){let S=e;const O=r===void 0;if(w==="value"){let C=S.defaultValue;S.removeAttribute(w),S.defaultValue=C,S.value=S.__value=O?C:null}else{let C=S.defaultChecked;S.removeAttribute(w),S.defaultChecked=C,S.checked=O?C:!1}}else e.removeAttribute(b);else E||g.includes(w)&&(f||typeof q!="string")?(e[w]=q,w in u&&(u[w]=c_)):typeof q!="function"&&Ve(e,w,q)}}}return l&&Pr(!0),v}function pt(e,r,t=[],a=[],n=[],i,o=!1,s=!1){s_(n,t,a,u=>{var f=void 0,c={},l=e.nodeName==="SELECT",v=!1;if(yp(()=>{var _=r(...u.map(d)),g=D_(e,f,_,i,o,s);v&&l&&"value"in _&&Ou(e,_.value);for(let y of Object.getOwnPropertySymbols(c))_[y]||Mt(c[y]);for(let y of Object.getOwnPropertySymbols(_)){var h=_[y];y.description===cp&&(!f||h!==f[y])&&(c[y]&&Mt(c[y]),c[y]=ht(()=>P_(e,()=>h))),g[y]=h}f=g}),l){var p=e;Gt(()=>{Ou(p,f.value,!0),L_(p)})}v=!0})}function Ap(e){return e.__attributes??={[Rp]:e.nodeName.includes("-"),[Sp]:e.namespaceURI===f_}}var Cc=new Map;function Ip(e){var r=e.getAttribute("is")||e.nodeName,t=Cc.get(r);if(t)return t;Cc.set(r,t=[]);for(var a,n=e,i=Element.prototype;i!==n;){a=d_(n);for(var o in a)a[o].set&&t.push(o);n=l_(n)}return t}class zu{#e=new WeakMap;#r;#t;static entries=new WeakMap;constructor(r){this.#t=r}observe(r,t){var a=this.#e.get(r)||new Set;return a.add(t),this.#e.set(r,a),this.#n().observe(r,this.#t),()=>{var n=this.#e.get(r);n.delete(t),n.size===0&&(this.#e.delete(r),this.#r.unobserve(r))}}#n(){return this.#r??(this.#r=new ResizeObserver(r=>{for(var t of r){zu.entries.set(t.target,t);for(var a of this.#e.get(t.target)||[])a(t)}}))}}var G_=new zu({box:"border-box"});function Tc(e,r,t){var a=G_.observe(e,()=>t(e[r]));Gt(()=>(M(()=>t(e[r])),a))}function $t(e){return function(...r){var t=r[0];return t.stopPropagation(),e?.apply(this,r)}}function B_(e){return function(...r){var t=r[0];return t.preventDefault(),e?.apply(this,r)}}const Lx=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class U_{parseLogs(r){const t={},a=[];for(const i of r){const o=i.run_id;if(!o)continue;t[o]||(t[o]={id:o,parentId:i.parent_run_id,name:"Unknown",type:"unknown",status:"running",timestamp:i.timestamp||0,metadata:{},events:[],children:[]});const s=t[o];if(s.events.push(i),i.metadata&&Object.assign(s.metadata,i.metadata),i.tags){s.tags||(s.tags=[]);for(const c of i.tags)s.tags.includes(c)||s.tags.push(c)}const u=i.event||"",f=i.data||{};if(i.observation_type&&i.observation_type!=="unknown"&&(s.type=i.observation_type),i.name&&i.name!=="Unknown"&&(s.name=i.name),s.type==="unknown"&&(u.includes("chat_model")||u.includes("llm")?s.type="generation":u.includes("tool")?s.type="tool":u.includes("chain")&&(s.type="chain")),u.endsWith("_start")){if(s.timestamp=i.timestamp||s.timestamp,f.inputs?s.inputs=f.inputs:f.messages?s.inputs={messages:f.messages}:f.input&&(s.inputs={input:f.input}),s.name==="Unknown"){const c=f.serialized||{};c.name?s.name=c.name:s.metadata?.langgraph_node&&(s.name=s.metadata.langgraph_node)}}else u.endsWith("_end")?(s.status="success",s.endTime=i.timestamp,f.outputs?s.outputs=f.outputs:f.generations?s.outputs={generations:f.generations}:f.output&&(s.outputs={output:f.output})):u.endsWith("_error")&&(s.status="error",s.endTime=i.timestamp,s.errorMessage=f.error,s.outputs={error:f.error})}for(const i of Object.values(t))i.endTime&&i.timestamp&&(i.duration=i.endTime-i.timestamp),i.parentId&&t[i.parentId]?t[i.parentId].children.push(i):a.push(i);const n=i=>{i.sort((o,s)=>o.timestamp-s.timestamp);for(const o of i)n(o.children)};return n(a),a}extractMessages(r){let t=[];if(Array.isArray(r))t=r;else if(typeof r=="object"&&r!==null){if(r.messages){const n=r.messages;Array.isArray(n)&&(n.length>0&&Array.isArray(n[0])?t=n[0]:t=n)}else if(r.generations){const n=r.generations;if(Array.isArray(n)&&n.length>0&&Array.isArray(n[0]))for(const i of n[0])typeof i=="object"&&i!==null&&(i.message?t.push(i.message):i.text&&t.push({role:"assistant",content:i.text}))}}const a=[];for(const n of t){if(typeof n!="object"||n===null)continue;const i=n.type||n.role||"unknown",o=n.content||n.text||"",s=n.tool_calls||n.additional_kwargs?.tool_calls;a.push({role:i,content:o,tool_calls:s,raw:n})}return a}}const z_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var V_=jt("<svg><!><!></svg>");function ir(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]),a=Ze(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ne(r,!1);let n=ne(r,"name",8,void 0),i=ne(r,"color",8,"currentColor"),o=ne(r,"size",8,24),s=ne(r,"strokeWidth",8,2),u=ne(r,"absoluteStrokeWidth",8,!1),f=ne(r,"iconNode",24,()=>[]);const c=(..._)=>_.filter((g,h,y)=>!!g&&y.indexOf(g)===h).join(" ");Ue();var l=V_();pt(l,(_,g)=>({...z_,...a,width:o(),height:o(),stroke:i(),"stroke-width":_,class:g}),[()=>(D(u()),D(s()),D(o()),M(()=>u()?Number(s())*24/Number(o()):s())),()=>(D(n()),D(t),M(()=>c("lucide-icon","lucide",n()?`lucide-${n()}`:"",t.class)))]);var v=T(l);gr(v,1,f,pr,(_,g)=>{var h=ur(()=>Bu(d(g),2));let y=()=>d(h)[0],m=()=>d(h)[1];var x=ve(),w=ie(x);N_(w,y,!0,(E,b)=>{pt(E,()=>({...m()}))}),I(_,x)});var p=z(v);He(p,r,"default",{}),A(l),I(e,l),Pe()}function H_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];ir(e,tr({name:"brain"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function ot(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m9 18 6-6-6-6"}]];ir(e,tr({name:"chevron-right"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Nu(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];ir(e,tr({name:"circle-check-big"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Pu(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z"}],["circle",{cx:"12",cy:"12",r:"10"}]];ir(e,tr({name:"circle-play"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function K_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];ir(e,tr({name:"circle-x"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function W_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];ir(e,tr({name:"file-text"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Y_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];ir(e,tr({name:"info"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Cp(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}]];ir(e,tr({name:"link"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function X_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"}]];ir(e,tr({name:"maximize"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Tp(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"}]];ir(e,tr({name:"message-square"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function J_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];ir(e,tr({name:"refresh-cw"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Lt(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];ir(e,tr({name:"wrench"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Z_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];ir(e,tr({name:"zoom-in"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function Q_(e,r){const t=Ze(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];ir(e,tr({name:"zoom-out"},()=>t,{get iconNode(){return a},children:(n,i)=>{var o=ve(),s=ie(o);He(s,r,"default",{}),I(n,o)},$$slots:{default:!0}}))}function ey(e){const r=e-1;return r*r*r+1}function st(e,{delay:r=0,duration:t=400,easing:a=ey,axis:n="y"}={}){const i=getComputedStyle(e),o=+i.opacity,s=n==="y"?"height":"width",u=parseFloat(i[s]),f=n==="y"?["top","bottom"]:["left","right"],c=f.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),l=parseFloat(i[`padding${c[0]}`]),v=parseFloat(i[`padding${c[1]}`]),p=parseFloat(i[`margin${c[0]}`]),_=parseFloat(i[`margin${c[1]}`]),g=parseFloat(i[`border${c[0]}Width`]),h=parseFloat(i[`border${c[1]}Width`]);return{delay:r,duration:t,easing:a,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*o};${s}: ${y*u}px;padding-${f[0]}: ${y*l}px;padding-${f[1]}: ${y*v}px;margin-${f[0]}: ${y*p}px;margin-${f[1]}: ${y*_}px;border-${f[0]}-width: ${y*g}px;border-${f[1]}-width: ${y*h}px;min-${s}: 0`}}function ry(e){return e!==null&&typeof e=="object"}const ty=["string","number","bigint","boolean"];function Mu(e){return e==null||ty.includes(typeof e)?!0:Array.isArray(e)?e.every(r=>Mu(r)):typeof e=="object"?Object.getPrototypeOf(e)===Object.prototype:!1}const $u=Symbol("box"),ny=Symbol("is-writable");function sr(e,r){const t=ur(e);return r?{[$u]:!0,[ny]:!0,get current(){return d(t)},set current(a){r(a)}}:{[$u]:!0,get current(){return e()}}}function ay(e){return ry(e)&&$u in e}function iy(...e){return function(r){for(const t of e)if(t){if(r.defaultPrevented)return;typeof t=="function"?t.call(this,r):t.current?.call(this,r)}}}var Oc=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,oy=/\n/g,sy=/^\s*/,uy=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,cy=/^:\s*/,fy=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ly=/^[;\s]*/,dy=/^\s+|\s+$/g,vy=`
`,Nc="/",Pc="*",Or="",hy="comment",py="declaration";function gy(e,r){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];r=r||{};var t=1,a=1;function n(_){var g=_.match(oy);g&&(t+=g.length);var h=_.lastIndexOf(vy);a=~h?_.length-h:a+_.length}function i(){var _={line:t,column:a};return function(g){return g.position=new o(_),f(),g}}function o(_){this.start=_,this.end={line:t,column:a},this.source=r.source}o.prototype.content=e;function s(_){var g=new Error(r.source+":"+t+":"+a+": "+_);if(g.reason=_,g.filename=r.source,g.line=t,g.column=a,g.source=e,!r.silent)throw g}function u(_){var g=_.exec(e);if(g){var h=g[0];return n(h),e=e.slice(h.length),g}}function f(){u(sy)}function c(_){var g;for(_=_||[];g=l();)g!==!1&&_.push(g);return _}function l(){var _=i();if(!(Nc!=e.charAt(0)||Pc!=e.charAt(1))){for(var g=2;Or!=e.charAt(g)&&(Pc!=e.charAt(g)||Nc!=e.charAt(g+1));)++g;if(g+=2,Or===e.charAt(g-1))return s("End of comment missing");var h=e.slice(2,g-2);return a+=2,n(h),e=e.slice(g),a+=2,_({type:hy,comment:h})}}function v(){var _=i(),g=u(uy);if(g){if(l(),!u(cy))return s("property missing ':'");var h=u(fy),y=_({type:py,property:Mc(g[0].replace(Oc,Or)),value:h?Mc(h[0].replace(Oc,Or)):Or});return u(ly),y}}function p(){var _=[];c(_);for(var g;g=v();)g!==!1&&(_.push(g),c(_));return _}return f(),p()}function Mc(e){return e?e.replace(dy,Or):Or}function _y(e,r){let t=null;if(!e||typeof e!="string")return t;const a=gy(e),n=typeof r=="function";return a.forEach(i=>{if(i.type!=="declaration")return;const{property:o,value:s}=i;n?r(o,s,i):s&&(t=t||{},t[o]=s)}),t}const yy=/\d/,by=["-","_","/","."];function my(e=""){if(!yy.test(e))return e!==e.toLowerCase()}function wy(e){const r=[];let t="",a,n;for(const i of e){const o=by.includes(i);if(o===!0){r.push(t),t="",a=void 0;continue}const s=my(i);if(n===!1){if(a===!1&&s===!0){r.push(t),t=i,a=s;continue}if(a===!0&&s===!1&&t.length>1){const u=t.at(-1);r.push(t.slice(0,Math.max(0,t.length-1))),t=u+i,a=s;continue}}t+=i,a=s,n=o}return r.push(t),r}function Op(e){return e?wy(e).map(r=>qy(r)).join(""):""}function xy(e){return Ey(Op(e||""))}function qy(e){return e?e[0].toUpperCase()+e.slice(1):""}function Ey(e){return e?e[0].toLowerCase()+e.slice(1):""}function Tt(e){if(!e)return{};const r={};function t(a,n){if(a.startsWith("-moz-")||a.startsWith("-webkit-")||a.startsWith("-ms-")||a.startsWith("-o-")){r[Op(a)]=n;return}if(a.startsWith("--")){r[a]=n;return}r[xy(a)]=n}return _y(e,t),r}function ky(...e){return(...r)=>{for(const t of e)typeof t=="function"&&t(...r)}}function Ry(e,r){const t=RegExp(e,"g");return a=>{if(typeof a!="string")throw new TypeError(`expected an argument of type string, but got ${typeof a}`);return a.match(t)?a.replace(t,r):a}}const Sy=Ry(/[A-Z]/,e=>`-${e.toLowerCase()}`);function Ay(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected an argument of type object, but got ${typeof e}`);return Object.keys(e).map(r=>`${Sy(r)}: ${e[r]};`).join(`
`)}function Iy(e={}){return Ay(e).replace(`
`," ")}const Cy=["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"],Ty=new Set(Cy);function Oy(e){return Ty.has(e)}function Vu(...e){const r={...e[0]};for(let t=1;t<e.length;t++){const a=e[t];if(a){for(const n of Object.keys(a)){const i=r[n],o=a[n],s=typeof i=="function",u=typeof o=="function";if(s&&Oy(n)){const f=i,c=o;r[n]=iy(f,c)}else if(s&&u)r[n]=ky(i,o);else if(n==="class"){const f=Mu(i),c=Mu(o);f&&c?r[n]=Pt(i,o):f?r[n]=Pt(i):c&&(r[n]=Pt(o))}else if(n==="style"){const f=typeof i=="object",c=typeof o=="object",l=typeof i=="string",v=typeof o=="string";if(f&&c)r[n]={...i,...o};else if(f&&v){const p=Tt(o);r[n]={...i,...p}}else if(l&&c){const p=Tt(i);r[n]={...p,...o}}else if(l&&v){const p=Tt(i),_=Tt(o);r[n]={...p,..._}}else f?r[n]=i:c?r[n]=o:l?r[n]=i:v&&(r[n]=o)}else r[n]=o!==void 0?o:i}for(const n of Object.getOwnPropertySymbols(a)){const i=r[n],o=a[n];r[n]=o!==void 0?o:i}}}return typeof r.style=="object"&&(r.style=Iy(r.style).replaceAll(`
`," ")),r.hidden===!1&&(r.hidden=void 0,delete r.hidden),r.disabled===!1&&(r.disabled=void 0,delete r.disabled),r}const Ny=typeof window<"u"?window:void 0;function Py(e){let r=e.activeElement;for(;r?.shadowRoot;){const t=r.shadowRoot.activeElement;if(t===r)break;r=t}return r}class My{#e;#r;constructor(r={}){const{window:t=Ny,document:a=t?.document}=r;t!==void 0&&(this.#e=a,this.#r=x_(n=>{const i=Iu(t,"focusin",n),o=Iu(t,"focusout",n);return()=>{i(),o()}}))}get current(){return this.#r?.(),this.#e?Py(this.#e):null}}new My;class $y{#e;#r;constructor(r){this.#e=r,this.#r=Symbol(r)}get key(){return this.#r}exists(){return v_(this.#r)}get(){const r=Au(this.#r);if(r===void 0)throw new Error(`Context "${this.#e}" not found`);return r}getOr(r){const t=Au(this.#r);return t===void 0?r:t}set(r){return bp(this.#r,r)}}function Ly(e,r){switch(e){case"post":wp(r);break;case"pre":mp(r);break}}function Np(e,r,t,a={}){const{lazy:n=!1}=a;let i=!n,o=Array.isArray(e)?[]:void 0;Ly(r,()=>{const s=Array.isArray(e)?e.map(f=>f()):e();if(!i){i=!0,o=s;return}const u=M(()=>t(s,o));return o=s,u})}function lt(e,r,t){Np(e,"post",r,t)}function Fy(e,r,t){Np(e,"pre",r,t)}lt.pre=Fy;function jy(e){wp(()=>()=>{e()})}function Pp(e){h_().then(e)}function Hu(e,r){return{[k_()]:t=>ay(e)?(e.current=t,M(()=>r?.(t)),()=>{"isConnected"in t&&t.isConnected||(e.current=null,r?.(null))}):(e(t),M(()=>r?.(t)),()=>{"isConnected"in t&&t.isConnected||(e(null),r?.(null))})}}function Dy(e){return e?"true":"false"}function Ku(e){return e?"":void 0}function Wu(e){return e?"open":"closed"}class Gy{#e;#r;attrs;constructor(r){this.#e=r.getVariant?r.getVariant():null,this.#r=this.#e?`data-${this.#e}-`:`data-${r.component}-`,this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(r.parts.map(t=>[t,this.getAttr(t)]))}getAttr(r,t){return t?`data-${t}-${r}`:`${this.#r}${r}`}selector(r,t){return`[${this.getAttr(r,t)}]`}}function By(e){const r=new Gy(e);return{...r.attrs,selector:r.selector,getAttr:r.getAttr}}const Uy="Enter",zy=" ";class Vy{#e;#r=null;constructor(r){this.#e=r,jy(()=>this.#t())}#t(){this.#r&&(window.cancelAnimationFrame(this.#r),this.#r=null)}run(r){this.#t();const t=this.#e.ref.current;if(t){if(typeof t.getAnimations!="function"){this.#n(r);return}this.#r=window.requestAnimationFrame(()=>{const a=t.getAnimations();if(a.length===0){this.#n(r);return}Promise.allSettled(a.map(n=>n.finished)).then(()=>{this.#n(r)})})}}#n(r){const t=()=>{r()};this.#e.afterTick?Pp(t):t()}}class Hy{#e;#r;#t;#n=Br(!1);constructor(r){this.#e=r,G(this.#n,r.open.current,!0),this.#r=r.enabled??!0,this.#t=new Vy({ref:this.#e.ref,afterTick:this.#e.open}),lt(()=>this.#e.open.current,t=>{t&&G(this.#n,!0),this.#r&&this.#t.run(()=>{t===this.#e.open.current&&(this.#e.open.current||G(this.#n,!1),this.#e.onComplete?.())})})}get shouldRender(){return d(this.#n)}}function $c(){}function Yu(e,r){return`bits-${e}`}const Xu=By({component:"collapsible",parts:["root","content","trigger"]}),Ju=new $y("Collapsible.Root");class Zu{static create(r){return Ju.set(new Zu(r))}opts;attachment;#e=Br(null);get contentNode(){return d(this.#e)}set contentNode(r){G(this.#e,r,!0)}contentPresence;#r=Br(void 0);get contentId(){return d(this.#r)}set contentId(r){G(this.#r,r,!0)}constructor(r){this.opts=r,this.toggleOpen=this.toggleOpen.bind(this),this.attachment=Hu(this.opts.ref),this.contentPresence=new Hy({ref:sr(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}toggleOpen(){this.opts.open.current=!this.opts.open.current}#t=ur(()=>({id:this.opts.id.current,"data-state":Wu(this.opts.open.current),"data-disabled":Ku(this.opts.disabled.current),[Xu.root]:"",...this.attachment}));get props(){return d(this.#t)}set props(r){G(this.#t,r)}}class Qu{static create(r){return new Qu(r,Ju.get())}opts;root;attachment;#e=ur(()=>this.opts.hiddenUntilFound.current?this.root.opts.open.current:this.opts.forceMount.current||this.root.opts.open.current);get present(){return d(this.#e)}set present(r){G(this.#e,r)}#r;#t=Br(!1);#n=Br(0);#a=Br(0);constructor(r,t){this.opts=r,this.root=t,G(this.#t,t.opts.open.current,!0),this.root.contentId=this.opts.id.current,this.attachment=Hu(this.opts.ref,a=>this.root.contentNode=a),lt.pre(()=>this.opts.id.current,a=>{this.root.contentId=a}),mp(()=>{const a=requestAnimationFrame(()=>{G(this.#t,!1)});return()=>{cancelAnimationFrame(a)}}),lt.pre([()=>this.opts.ref.current,()=>this.opts.hiddenUntilFound.current],([a,n])=>!a||!n?void 0:Iu(a,"beforematch",()=>{this.root.opts.open.current||requestAnimationFrame(()=>{this.root.opts.open.current=!0})})),lt([()=>this.opts.ref.current,()=>this.present],([a])=>{a&&Pp(()=>{if(!this.opts.ref.current)return;this.#r=this.#r||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";const n=a.getBoundingClientRect();if(G(this.#a,n.height,!0),G(this.#n,n.width,!0),!d(this.#t)){const{animationName:i,transitionDuration:o}=this.#r;a.style.transitionDuration=o,a.style.animationName=i}})})}get shouldRender(){return this.root.contentPresence.shouldRender}#i=ur(()=>({open:this.root.opts.open.current}));get snippetProps(){return d(this.#i)}set snippetProps(r){G(this.#i,r)}#o=ur(()=>({id:this.opts.id.current,style:{"--bits-collapsible-content-height":d(this.#a)?`${d(this.#a)}px`:void 0,"--bits-collapsible-content-width":d(this.#n)?`${d(this.#n)}px`:void 0},hidden:this.opts.hiddenUntilFound.current&&!this.root.opts.open.current?"until-found":void 0,"data-state":Wu(this.root.opts.open.current),"data-disabled":Ku(this.root.opts.disabled.current),[Xu.content]:"",...this.opts.hiddenUntilFound.current&&!this.shouldRender?{}:{hidden:this.opts.hiddenUntilFound.current?!this.shouldRender:this.opts.forceMount.current?void 0:!this.shouldRender},...this.attachment}));get props(){return d(this.#o)}set props(r){G(this.#o,r)}}class ec{static create(r){return new ec(r,Ju.get())}opts;root;attachment;#e=ur(()=>this.opts.disabled.current||this.root.opts.disabled.current);constructor(r,t){this.opts=r,this.root=t,this.attachment=Hu(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(r){if(!d(this.#e)){if(r.button!==0)return r.preventDefault();this.root.toggleOpen()}}onkeydown(r){d(this.#e)||(r.key===zy||r.key===Uy)&&(r.preventDefault(),this.root.toggleOpen())}#r=ur(()=>({id:this.opts.id.current,type:"button",disabled:d(this.#e),"aria-controls":this.root.contentId,"aria-expanded":Dy(this.root.opts.open.current),"data-state":Wu(this.root.opts.open.current),"data-disabled":Ku(d(this.#e)),[Xu.trigger]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return d(this.#r)}set props(r){G(this.#r,r)}}var Ky=j("<div><!></div>");function Wy(e,r){const t=Fu();Ne(r,!0);let a=ne(r,"id",19,()=>Yu(t)),n=ne(r,"ref",15,null),i=ne(r,"open",15,!1),o=ne(r,"disabled",3,!1),s=ne(r,"onOpenChange",3,$c),u=ne(r,"onOpenChangeComplete",3,$c),f=Uu(r,["$$slots","$$events","$$legacy","children","child","id","ref","open","disabled","onOpenChange","onOpenChangeComplete"]);const c=Zu.create({open:sr(()=>i(),h=>{i(h),s()(h)}),disabled:sr(()=>o()),id:sr(()=>a()),ref:sr(()=>n(),h=>n(h)),onOpenChangeComplete:sr(()=>u())}),l=ur(()=>Vu(f,c.props));var v=ve(),p=ie(v);{var _=h=>{var y=ve(),m=ie(y);Hr(m,()=>r.child,()=>({props:d(l)})),I(h,y)},g=h=>{var y=Ky();pt(y,()=>({...d(l)}));var m=T(y);Hr(m,()=>r.children??Ir),A(y),I(h,y)};ee(p,h=>{r.child?h(_):h(g,!1)})}I(e,v),Pe()}var Yy=j("<div><!></div>");function Xy(e,r){const t=Fu();Ne(r,!0);let a=ne(r,"ref",15,null),n=ne(r,"forceMount",3,!1),i=ne(r,"hiddenUntilFound",3,!1),o=ne(r,"id",19,()=>Yu(t)),s=Uu(r,["$$slots","$$events","$$legacy","child","ref","forceMount","hiddenUntilFound","children","id"]);const u=Qu.create({id:sr(()=>o()),forceMount:sr(()=>n()),hiddenUntilFound:sr(()=>i()),ref:sr(()=>a(),_=>a(_))}),f=ur(()=>Vu(s,u.props));var c=ve(),l=ie(c);{var v=_=>{var g=ve(),h=ie(g);{let y=ur(()=>({...u.snippetProps,props:d(f)}));Hr(h,()=>r.child,()=>d(y))}I(_,g)},p=_=>{var g=Yy();pt(g,()=>({...d(f)}));var h=T(g);Hr(h,()=>r.children??Ir),A(g),I(_,g)};ee(l,_=>{r.child?_(v):_(p,!1)})}I(e,c),Pe()}var Jy=j("<button><!></button>");function Zy(e,r){const t=Fu();Ne(r,!0);let a=ne(r,"ref",15,null),n=ne(r,"id",19,()=>Yu(t)),i=ne(r,"disabled",3,!1),o=Uu(r,["$$slots","$$events","$$legacy","children","child","ref","id","disabled"]);const s=ec.create({id:sr(()=>n()),ref:sr(()=>a(),p=>a(p)),disabled:sr(()=>i())}),u=ur(()=>Vu(o,s.props));var f=ve(),c=ie(f);{var l=p=>{var _=ve(),g=ie(_);Hr(g,()=>r.child,()=>({props:d(u)})),I(p,_)},v=p=>{var _=Jy();pt(_,()=>({...d(u)}));var g=T(_);Hr(g,()=>r.children??Ir),A(_),I(p,_)};ee(c,p=>{r.child?p(l):p(v,!1)})}I(e,f),Pe()}var Qy=j('<div style="color: var(--vscode-secondary-fg);" role="button" tabindex="0"><!></div>'),eb=j('<div class="w-[14px]"></div>'),rb=j("<span> </span>"),tb=j('<div class="flex items-center gap-1.5 py-1.5 rounded-sm px-2 cursor-pointer transition-colors" role="button" tabindex="0"><!> <!> <span class="font-medium text-xs truncate flex-1 block"> </span> <span class="text-[10px] font-mono px-1 rounded border opacity-60" style="border-color: var(--vscode-border);"> </span> <div class="flex items-center gap-2 text-[10px] ml-2" style="color: var(--vscode-secondary-fg);"><!> <!></div></div>'),nb=j('<div class="pt-0.5"></div>'),ab=j('<div class="pl-2 ml-[11px] border-l" style="border-color: var(--vscode-border);"><!></div>'),ib=j("<!> <!>",1),ob=j('<div class="ml-2"><!></div>');function Mp(e,r){Ne(r,!1);const t=J(),a=J(),n=J(),i=J(),o=J(),s=J();let u=ne(r,"span",8),f=ne(r,"level",8,0),c=ne(r,"selectedId",8,void 0);const l=sp();let v=J(!1);function p(w,E){return w.id===E?!0:w.children.some(b=>p(b,E))}function _(){l("select",u())}function g(w){l("select",w.detail)}function h(w){return w==null?"":`${(w*1e3).toFixed(2)}ms`}function y(w){switch(w){case"generation":return Tp;case"tool":return Lt;case"chain":return Cp;case"retriever":return W_;default:return Pu}}pe(()=>(D(c()),D(u())),()=>{c()&&u().children.some(w=>w.id===c()||p(w,c()))&&G(v,!0)}),pe(()=>D(u()),()=>{G(t,u().children&&u().children.length>0)}),pe(()=>D(u()),()=>{G(a,u().status==="error"?"text-red-500":"text-green-500")}),pe(()=>(D(u()),Nu),()=>{G(n,u().status==="error"?K_:Nu)}),pe(()=>D(u()),()=>{G(i,y(u().type))}),pe(()=>(D(c()),D(u())),()=>{G(o,c()===u().id?"background-color: var(--vscode-selection-bg); color: var(--vscode-link);":"")}),pe(()=>(D(c()),D(u())),()=>{G(s,c()===u().id?"var(--vscode-link)":"var(--vscode-secondary-fg)")}),Je(),Ue();var m=ob(),x=T(m);Wy(x,{get open(){return d(v)},set open(w){G(v,w)},children:(w,E)=>{var b=ib(),q=ie(b);Zy(q,{class:"w-full text-left relative group/row",children:(O,C)=>{var k=tb(),N=T(k);{var $=R=>{var P=Qy();let L;var F=T(P);ot(F,{size:14}),A(P),Z(()=>L=Ye(P,1,"transition-transform duration-200",null,L,{"rotate-90":d(v)})),ye("click",P,$t(()=>G(v,!d(v)))),ye("keydown",P,Y=>Y.key==="Enter"&&G(v,!d(v))),I(R,P)},B=R=>{var P=eb();I(R,P)};ee(N,R=>{d(t)?R($):R(B,!1)})}var V=z(N,2);d(i)(V,{size:14,get style(){return`color: ${d(s)??""};`}});var X=z(V,2),le=T(X,!0);A(X);var se=z(X,2),Ee=T(se,!0);A(se);var Oe=z(se,2),ke=T(Oe);{var Se=R=>{var P=rb(),L=T(P,!0);A(P),Z(F=>re(L,F),[()=>(D(u()),M(()=>h(u().duration)))]),I(R,P)};ee(ke,R=>{D(u()),M(()=>u().duration)&&R(Se)})}var Re=z(ke,2);{let R=te(()=>(D(u()),M(()=>u().status==="error"?"var(--vscode-error)":"var(--vscode-success)")));d(n)(Re,{size:12,get style(){return`color: ${d(R)??""};`}})}A(Oe),A(k),Z(()=>{mr(k,`${d(o)??""} ${D(c()),D(u()),M(()=>c()!==u().id?"color: var(--vscode-fg);":"")??""}`),Ve(X,"title",(D(u()),M(()=>u().name))),re(le,(D(u()),M(()=>u().name))),re(Ee,(D(u()),M(()=>u().type)))}),ye("mouseenter",k,R=>R.currentTarget.style.backgroundColor=c()!==u().id?"var(--vscode-hover-bg)":""),ye("mouseleave",k,R=>R.currentTarget.style.backgroundColor=(c()!==u().id,"")),ye("click",k,$t(_)),ye("keydown",k,R=>R.key==="Enter"&&_()),I(O,k)},$$slots:{default:!0}});var S=z(q,2);Xy(S,{children:(O,C)=>{var k=ab(),N=T(k);{var $=B=>{var V=nb();gr(V,5,()=>(D(u()),M(()=>u().children)),pr,(X,le)=>{var se=ve(),Ee=ie(se);{let Oe=te(()=>f()+1);Mp(Ee,{get span(){return d(le)},get level(){return d(Oe)},get selectedId(){return c()},$$events:{select:g}})}I(X,se)}),A(V),I(B,V)};ee(N,B=>{d(t)&&B($)})}A(k),it(3,k,()=>st),I(O,k)},$$slots:{default:!0}}),I(w,b)},$$slots:{default:!0},$$legacy:!0}),A(m),I(e,m),Pe()}var sb=j('<span class="mr-2" style="color: var(--vscode-link);"> </span>'),ub=j('<div class="flex items-start"><!> <span> </span></div>'),cb=j('<span class="text-purple-600 dark:text-purple-400 text-[10px] font-mono border border-purple-200 dark:border-purple-800 px-1 rounded bg-purple-50 dark:bg-purple-900/20"> </span>'),fb=j('<span class="text-gray-400 text-[10px] ml-auto"> </span>'),lb=j('<div class="flex items-center gap-1 text-[10px] text-amber-600 dark:text-amber-500 font-mono bg-amber-50 dark:bg-amber-900/20 px-1.5 py-0.5 rounded w-fit border border-amber-100 dark:border-amber-800/50"><span>Reasoning</span></div>'),db=j('<div class="flex items-center gap-1 text-[10px] text-purple-600 dark:text-purple-400 font-mono bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded w-fit border border-purple-100 dark:border-purple-800/50"><!> <span> </span></div>'),vb=j('<div class="truncate"> </div>'),hb=j('<div class="italic text-gray-400">Empty message</div>'),pb=j('<div class="px-3 py-2 text-gray-600 dark:text-gray-400 cursor-pointer" role="button" tabindex="0"><div class="flex flex-wrap gap-2 mb-1"><!> <!></div> <!></div>'),gb=j('<div class="px-3 pb-3"><div class="whitespace-pre-wrap text-gray-700 dark:text-gray-300 text-[11px] leading-relaxed border-l-2 border-amber-200 dark:border-amber-800 pl-2 ml-1"> </div></div>'),_b=j('<div class="mb-3 bg-amber-50 dark:bg-amber-900/10 rounded-md border border-amber-100 dark:border-amber-800/30 overflow-hidden"><div class="flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-amber-100/50 dark:hover:bg-amber-900/20 transition-colors select-none" role="button" tabindex="0"><div><!></div> <div class="text-[10px] uppercase text-amber-600 dark:text-amber-500 font-bold flex items-center gap-1"><!> Reasoning</div></div> <!></div>'),yb=j('<div class="font-bold text-purple-700 dark:text-purple-300 mb-1 flex items-center gap-2"><span> </span></div> <div class="text-gray-600 dark:text-gray-400 whitespace-pre-wrap break-all"> </div>',1),bb=j('<div class="bg-purple-50 dark:bg-purple-900/10 border border-purple-100 dark:border-purple-800/30 rounded p-2 text-xs font-mono"><!></div>'),mb=j('<div class="mb-3"><div class="text-[10px] uppercase text-purple-600 dark:text-purple-400 mb-1 font-bold flex items-center gap-1"><!> Tool Calls</div> <div class="space-y-2"></div></div>'),wb=j('<div class="whitespace-pre-wrap text-gray-800 dark:text-gray-200 mb-2 font-sans"> </div>'),xb=j('<div class="mt-3 pt-2 border-t border-gray-100 dark:border-gray-800 border-dashed"><div class="text-[10px] uppercase text-gray-400 mb-1 font-bold flex items-center gap-1"><!> Metadata</div> <!></div>'),qb=j('<div class="p-3 border-t border-gray-100 dark:border-gray-800"><!> <!> <!> <!></div>'),Eb=j('<div class="border border-gray-200 dark:border-gray-700 rounded my-1 bg-white dark:bg-gray-800"><div class="flex items-center gap-2 px-3 py-2 cursor-pointer bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-t border-b border-gray-100 dark:border-gray-800" role="button" tabindex="0"><div><!></div> <span> </span> <!> <!></div> <!> <!></div>'),kb=j('<span class="font-medium" style="color: var(--vscode-link);"> </span>'),Rb=j('<span class="bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 px-1.5 rounded text-[10px] ml-2">Messages</span>'),Sb=j('<div class="pl-4 border-l border-gray-200 dark:border-gray-800 ml-1 mt-1 space-y-1"></div>'),Ab=j('<div><div class="flex items-center gap-1 cursor-pointer w-fit" style="color: var(--vscode-link);" role="button" tabindex="0"><div style="color: var(--vscode-secondary-fg);"><!></div> <!> <span style="color: var(--vscode-secondary-fg);"> </span> <!></div> <!></div>'),Ib=j('<span class="font-medium" style="color: var(--vscode-link);"> </span>'),Cb=j('<div class="text-gray-400 italic">Empty</div>'),Tb=j('<div class="pl-4 border-l border-gray-200 dark:border-gray-800 ml-1 mt-1 space-y-1"><!> <!></div>'),Ob=j('<div><div class="flex items-center gap-1 cursor-pointer w-fit" style="color: var(--vscode-link);" role="button" tabindex="0"><div style="color: var(--vscode-secondary-fg);"><!></div> <!> <span style="color: var(--vscode-secondary-fg);"></span></div> <!></div>'),Nb=j("<div> </div>"),Pb=j('<div class="font-mono text-xs leading-relaxed"><!></div>');function dt(e,r){Ne(r,!1);const t=J(),a=J(),n=J(),i=J(),o=J();let s=ne(r,"keyName",8,void 0),u=ne(r,"value",8),f=ne(r,"level",8,0),c=ne(r,"expand",8,!1),l=J(c()),v=J(!0);function p(){G(l,!d(l))}function _(){G(v,!d(v))}function g(b){return b==null||typeof b=="string"||typeof b=="number"||typeof b=="boolean"}function h(b){return b===null?"null":b===void 0?"undefined":typeof b=="string"?`"${b}"`:String(b)}function y(b){if(!b||typeof b!="object")return null;if(b.lc===1&&b.type==="constructor"&&Array.isArray(b.id)&&b.kwargs){let S=b.id[b.id.length-1].replace("Message","");S==="Human"&&(S="User"),S==="AI"&&(S="Assistant");const O=b.kwargs.content||"",{content:C,type:k,...N}=b.kwargs;let $;N.additional_kwargs?.reasoning_content&&($=N.additional_kwargs.reasoning_content);let B;return N.additional_kwargs?.tool_calls?B=N.additional_kwargs.tool_calls:N.tool_calls&&(B=N.tool_calls),{role:S,content:O,reasoning:$,tool_calls:B,metadata:N}}if(typeof b.content=="string"){let q=b.role||b.type||"unknown";q==="human"&&(q="User"),q==="ai"&&(q="Assistant"),q==="tool"&&(q="Tool");const{content:S,role:O,type:C,...k}=b;let N;b.additional_kwargs?.reasoning_content&&(N=b.additional_kwargs.reasoning_content);let $;return b.additional_kwargs?.tool_calls?$=b.additional_kwargs.tool_calls:b.tool_calls&&($=b.tool_calls),{role:q,content:b.content,reasoning:N,tool_calls:$,metadata:k}}if(b.type==="tool"&&b.name&&b.inputs){let q="";return typeof b.inputs=="string"?q=b.inputs:q=JSON.stringify(b.inputs,null,2),{role:"Tool",content:q,metadata:{name:b.name,...b}}}return null}pe(()=>D(u()),()=>{G(t,y(u()))}),pe(()=>d(t),()=>{G(a,!!d(t))}),pe(()=>D(u()),()=>{G(n,Array.isArray(u()))}),pe(()=>(D(u()),d(n),d(a)),()=>{G(i,u()&&typeof u()=="object"&&!d(n)&&!d(a))}),pe(()=>(d(n),D(u())),()=>{G(o,d(n)&&u().length>0&&u().every(b=>!!y(b)))}),Je(),Ue();var m=Pb(),x=T(m);{var w=b=>{var q=ub(),S=T(q);{var O=N=>{var $=sb(),B=T($);A($),Z(()=>re(B,`${s()??""}:`)),I(N,$)};ee(S,N=>{s()&&N(O)})}var C=z(S,2),k=T(C,!0);A(C),A(q),Z(N=>{mr(C,`color: ${typeof u()=="string"?"var(--vscode-success)":typeof u()=="number"?"var(--vscode-link)":typeof u()=="boolean"?"#c586c0":"var(--vscode-secondary-fg)"}`),re(k,N)},[()=>(D(u()),M(()=>h(u())))]),I(b,q)},E=b=>{var q=ve(),S=ie(q);{var O=k=>{var N=Eb(),$=T(N),B=T($);let V;var X=T(B);ot(X,{size:12}),A(B);var le=z(B,2),se=T(le,!0);A(le);var Ee=z(le,2);{var Oe=F=>{var Y=cb(),ce=T(Y,!0);A(Y),Z(()=>re(ce,(d(t),M(()=>d(t).metadata.name)))),I(F,Y)};ee(Ee,F=>{d(t),M(()=>d(t).role==="Tool"&&d(t).metadata?.name)&&F(Oe)})}var ke=z(Ee,2);{var Se=F=>{var Y=fb(),ce=T(Y);A(Y),Z(()=>re(ce,`(${s()??""})`)),I(F,Y)};ee(ke,F=>{s()&&F(Se)})}A($);var Re=z($,2);{var R=F=>{var Y=pb(),ce=T(Y),oe=T(ce);{var ge=K=>{var ue=lb();I(K,ue)};ee(oe,K=>{d(t),M(()=>d(t).reasoning)&&K(ge)})}var be=z(oe,2);{var he=K=>{var ue=db(),we=T(ue);Lt(we,{size:10});var Me=z(we,2),$e=T(Me);A(Me),A(ue),Z(()=>re($e,`${d(t),M(()=>d(t).tool_calls.length)??""} Tool Call${d(t),M(()=>d(t).tool_calls.length>1?"s":"")??""}`)),I(K,ue)};ee(be,K=>{d(t),M(()=>d(t).tool_calls&&d(t).tool_calls.length>0)&&K(he)})}A(ce);var _e=z(ce,2);{var de=K=>{var ue=vb(),we=T(ue);A(ue),Z(Me=>re(we,`${Me??""}${d(t),M(()=>d(t).content.length>100?"...":"")??""}`),[()=>(d(t),M(()=>d(t).content.substring(0,100)))]),I(K,ue)},De=K=>{var ue=ve(),we=ie(ue);{var Me=$e=>{var Le=hb();I($e,Le)};ee(we,$e=>{d(t),M(()=>!d(t).reasoning&&(!d(t).tool_calls||d(t).tool_calls.length===0))&&$e(Me)},!0)}I(K,ue)};ee(_e,K=>{d(t),M(()=>d(t).content)?K(de):K(De,!1)})}A(Y),ye("click",Y,p),ye("keydown",Y,K=>K.key==="Enter"&&p()),I(F,Y)};ee(Re,F=>{d(l)||F(R)})}var P=z(Re,2);{var L=F=>{var Y=qb(),ce=T(Y);{var oe=K=>{var ue=_b(),we=T(ue),Me=T(we);let $e;var Le=T(Me);ot(Le,{size:12}),A(Me);var xe=z(Me,2),W=T(xe);H_(W,{size:10}),Ur(),A(xe),A(we);var H=z(we,2);{var fe=me=>{var Ae=gb(),ze=T(Ae),We=T(ze,!0);A(ze),A(Ae),Z(()=>re(We,(d(t),M(()=>d(t).reasoning)))),it(3,Ae,()=>st),I(me,Ae)};ee(H,me=>{d(v)&&me(fe)})}A(ue),Z(()=>$e=Ye(Me,1,"transition-transform text-amber-500",null,$e,{"rotate-90":d(v)})),ye("click",we,_),ye("keydown",we,me=>me.key==="Enter"&&_()),I(K,ue)};ee(ce,K=>{d(t),M(()=>d(t).reasoning)&&K(oe)})}var ge=z(ce,2);{var be=K=>{var ue=mb(),we=T(ue),Me=T(we);Lt(Me,{size:10}),Ur(),A(we);var $e=z(we,2);gr($e,5,()=>(d(t),M(()=>d(t).tool_calls)),pr,(Le,xe)=>{var W=bb(),H=T(W);{var fe=me=>{var Ae=yb(),ze=ie(Ae),We=T(ze),Qe=T(We,!0);A(We),A(ze);var qe=z(ze,2),ae=T(qe,!0);A(qe),Z(U=>{re(Qe,(d(xe),M(()=>d(xe).function.name))),re(ae,U)},[()=>(d(xe),M(()=>typeof d(xe).function.arguments=="string"?d(xe).function.arguments:JSON.stringify(d(xe).function.arguments)))]),I(me,Ae)};ee(H,me=>{d(xe),M(()=>d(xe).function)&&me(fe)})}A(W),I(Le,W)}),A($e),A(ue),I(K,ue)};ee(ge,K=>{d(t),M(()=>d(t).tool_calls&&d(t).tool_calls.length>0)&&K(be)})}var he=z(ge,2);{var _e=K=>{var ue=wb(),we=T(ue,!0);A(ue),Z(()=>re(we,(d(t),M(()=>d(t).content)))),I(K,ue)};ee(he,K=>{d(t),M(()=>d(t).content)&&K(_e)})}var de=z(he,2);{var De=K=>{var ue=xb(),we=T(ue),Me=T(we);Y_(Me,{size:10}),Ur(),A(we);var $e=z(we,2);{let Le=te(()=>f()+1);dt($e,{get value(){return d(t),M(()=>d(t).metadata)},get level(){return d(Le)}})}A(ue),I(K,ue)};ee(de,K=>{d(t),M(()=>d(t).metadata&&Object.keys(d(t).metadata).length>0)&&K(De)})}A(Y),it(3,Y,()=>st),I(F,Y)};ee(P,F=>{d(l)&&F(L)})}A(N),Z(F=>{V=Ye(B,1,"transition-transform text-gray-400",null,V,{"rotate-90":d(l)}),Ye(le,1,`font-bold text-xs uppercase tracking-wider px-1.5 py-0.5 rounded
                    ${d(t),M(()=>d(t).role==="User"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"")??""}
                    ${d(t),M(()=>d(t).role==="Assistant"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"")??""}
                    ${d(t),M(()=>d(t).role==="System"?"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300":"")??""}
                    ${d(t),M(()=>d(t).role==="Tool"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"")??""}
                    ${F??""}
                `),re(se,(d(t),M(()=>d(t).role)))},[()=>(d(t),M(()=>["User","Assistant","System","Tool"].includes(d(t).role)?"":"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300"))]),ye("click",$,p),ye("keydown",$,F=>F.key==="Enter"&&p()),I(k,N)},C=k=>{var N=ve(),$=ie(N);{var B=X=>{var le=Ab(),se=T(le),Ee=T(se);let Oe;var ke=T(Ee);ot(ke,{size:12}),A(Ee);var Se=z(Ee,2);{var Re=oe=>{var ge=kb(),be=T(ge);A(ge),Z(()=>re(be,`${s()??""}:`)),I(oe,ge)};ee(Se,oe=>{s()&&oe(Re)})}var R=z(Se,2),P=T(R);A(R);var L=z(R,2);{var F=oe=>{var ge=Rb();I(oe,ge)};ee(L,oe=>{d(o)&&oe(F)})}A(se);var Y=z(se,2);{var ce=oe=>{var ge=Sb();gr(ge,5,u,pr,(be,he,_e)=>{var de=ve(),De=ie(de);{let K=te(()=>d(o)?void 0:`${_e}`),ue=te(()=>f()+1);dt(De,{get value(){return d(he)},get keyName(){return d(K)},get level(){return d(ue)}})}I(be,de)}),A(ge),it(3,ge,()=>st),I(oe,ge)};ee(Y,oe=>{d(l)&&oe(ce)})}A(le),Z(()=>{Oe=Ye(Ee,1,"transition-transform",null,Oe,{"rotate-90":d(l)}),re(P,`Array(${D(u()),M(()=>u().length)??""})`)}),ye("mouseenter",se,oe=>oe.currentTarget.style.opacity="0.8"),ye("mouseleave",se,oe=>oe.currentTarget.style.opacity="1"),ye("click",se,p),ye("keydown",se,oe=>oe.key==="Enter"&&p()),I(X,le)},V=X=>{var le=ve(),se=ie(le);{var Ee=ke=>{var Se=Ob(),Re=T(Se),R=T(Re);let P;var L=T(R);ot(L,{size:12}),A(R);var F=z(R,2);{var Y=be=>{var he=Ib(),_e=T(he,!0);A(he),Z(()=>re(_e,s())),I(be,he)};ee(F,be=>{s()&&be(Y)})}var ce=z(F,2);ce.textContent="{}",A(Re);var oe=z(Re,2);{var ge=be=>{var he=Tb(),_e=T(he);{var de=K=>{var ue=Cb();I(K,ue)};ee(_e,K=>{D(u()),M(()=>Object.keys(u()).length===0)&&K(de)})}var De=z(_e,2);gr(De,1,()=>(D(u()),M(()=>Object.entries(u()))),pr,(K,ue)=>{var we=ur(()=>Bu(d(ue),2));let Me=()=>d(we)[0],$e=()=>d(we)[1];var Le=ve(),xe=ie(Le);{let W=te(()=>f()+1);dt(xe,{get keyName(){return Me()},get value(){return $e()},get level(){return d(W)}})}I(K,Le)}),A(he),it(3,he,()=>st),I(be,he)};ee(oe,be=>{d(l)&&be(ge)})}A(Se),Z(()=>P=Ye(R,1,"transition-transform",null,P,{"rotate-90":d(l)})),ye("mouseenter",Re,be=>be.currentTarget.style.opacity="0.8"),ye("mouseleave",Re,be=>be.currentTarget.style.opacity="1"),ye("click",Re,p),ye("keydown",Re,be=>be.key==="Enter"&&p()),I(ke,Se)},Oe=ke=>{var Se=Nb(),Re=T(Se,!0);A(Se),Z(R=>re(Re,R),[()=>(D(u()),M(()=>String(u())))]),I(ke,Se)};ee(se,ke=>{d(i)?ke(Ee):ke(Oe,!1)},!0)}I(X,le)};ee($,X=>{d(n)?X(B):X(V,!1)},!0)}I(k,N)};ee(S,k=>{d(a)&&d(t)?k(O):k(C,!1)},!0)}I(b,q)};ee(x,b=>{D(u()),M(()=>g(u()))?b(w):b(E,!1)})}A(m),I(e,m),Pe()}var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cn,Lc;function $b(){if(Lc)return cn;Lc=1;function e(){this.__data__=[],this.size=0}return cn=e,cn}var fn,Fc;function Kr(){if(Fc)return fn;Fc=1;function e(r,t){return r===t||r!==r&&t!==t}return fn=e,fn}var ln,jc;function Bt(){if(jc)return ln;jc=1;var e=Kr();function r(t,a){for(var n=t.length;n--;)if(e(t[n][0],a))return n;return-1}return ln=r,ln}var dn,Dc;function Lb(){if(Dc)return dn;Dc=1;var e=Bt(),r=Array.prototype,t=r.splice;function a(n){var i=this.__data__,o=e(i,n);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():t.call(i,o,1),--this.size,!0}return dn=a,dn}var vn,Gc;function Fb(){if(Gc)return vn;Gc=1;var e=Bt();function r(t){var a=this.__data__,n=e(a,t);return n<0?void 0:a[n][1]}return vn=r,vn}var hn,Bc;function jb(){if(Bc)return hn;Bc=1;var e=Bt();function r(t){return e(this.__data__,t)>-1}return hn=r,hn}var pn,Uc;function Db(){if(Uc)return pn;Uc=1;var e=Bt();function r(t,a){var n=this.__data__,i=e(n,t);return i<0?(++this.size,n.push([t,a])):n[i][1]=a,this}return pn=r,pn}var gn,zc;function Ut(){if(zc)return gn;zc=1;var e=$b(),r=Lb(),t=Fb(),a=jb(),n=Db();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=t,i.prototype.has=a,i.prototype.set=n,gn=i,gn}var _n,Vc;function Gb(){if(Vc)return _n;Vc=1;var e=Ut();function r(){this.__data__=new e,this.size=0}return _n=r,_n}var yn,Hc;function Bb(){if(Hc)return yn;Hc=1;function e(r){var t=this.__data__,a=t.delete(r);return this.size=t.size,a}return yn=e,yn}var bn,Kc;function Ub(){if(Kc)return bn;Kc=1;function e(r){return this.__data__.get(r)}return bn=e,bn}var mn,Wc;function zb(){if(Wc)return mn;Wc=1;function e(r){return this.__data__.has(r)}return mn=e,mn}var wn,Yc;function $p(){if(Yc)return wn;Yc=1;var e=typeof Ot=="object"&&Ot&&Ot.Object===Object&&Ot;return wn=e,wn}var xn,Xc;function yr(){if(Xc)return xn;Xc=1;var e=$p(),r=typeof self=="object"&&self&&self.Object===Object&&self,t=e||r||Function("return this")();return xn=t,xn}var qn,Jc;function Wr(){if(Jc)return qn;Jc=1;var e=yr(),r=e.Symbol;return qn=r,qn}var En,Zc;function Vb(){if(Zc)return En;Zc=1;var e=Wr(),r=Object.prototype,t=r.hasOwnProperty,a=r.toString,n=e?e.toStringTag:void 0;function i(o){var s=t.call(o,n),u=o[n];try{o[n]=void 0;var f=!0}catch{}var c=a.call(o);return f&&(s?o[n]=u:delete o[n]),c}return En=i,En}var kn,Qc;function Hb(){if(Qc)return kn;Qc=1;var e=Object.prototype,r=e.toString;function t(a){return r.call(a)}return kn=t,kn}var Rn,ef;function $r(){if(ef)return Rn;ef=1;var e=Wr(),r=Vb(),t=Hb(),a="[object Null]",n="[object Undefined]",i=e?e.toStringTag:void 0;function o(s){return s==null?s===void 0?n:a:i&&i in Object(s)?r(s):t(s)}return Rn=o,Rn}var Sn,rf;function dr(){if(rf)return Sn;rf=1;function e(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}return Sn=e,Sn}var An,tf;function _t(){if(tf)return An;tf=1;var e=$r(),r=dr(),t="[object AsyncFunction]",a="[object Function]",n="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!r(s))return!1;var u=e(s);return u==a||u==n||u==t||u==i}return An=o,An}var In,nf;function Kb(){if(nf)return In;nf=1;var e=yr(),r=e["__core-js_shared__"];return In=r,In}var Cn,af;function Wb(){if(af)return Cn;af=1;var e=Kb(),r=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function t(a){return!!r&&r in a}return Cn=t,Cn}var Tn,of;function Lp(){if(of)return Tn;of=1;var e=Function.prototype,r=e.toString;function t(a){if(a!=null){try{return r.call(a)}catch{}try{return a+""}catch{}}return""}return Tn=t,Tn}var On,sf;function Yb(){if(sf)return On;sf=1;var e=_t(),r=Wb(),t=dr(),a=Lp(),n=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,f=s.hasOwnProperty,c=RegExp("^"+u.call(f).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(v){if(!t(v)||r(v))return!1;var p=e(v)?c:i;return p.test(a(v))}return On=l,On}var Nn,uf;function Xb(){if(uf)return Nn;uf=1;function e(r,t){return r?.[t]}return Nn=e,Nn}var Pn,cf;function Lr(){if(cf)return Pn;cf=1;var e=Yb(),r=Xb();function t(a,n){var i=r(a,n);return e(i)?i:void 0}return Pn=t,Pn}var Mn,ff;function tc(){if(ff)return Mn;ff=1;var e=Lr(),r=yr(),t=e(r,"Map");return Mn=t,Mn}var $n,lf;function zt(){if(lf)return $n;lf=1;var e=Lr(),r=e(Object,"create");return $n=r,$n}var Ln,df;function Jb(){if(df)return Ln;df=1;var e=zt();function r(){this.__data__=e?e(null):{},this.size=0}return Ln=r,Ln}var Fn,vf;function Zb(){if(vf)return Fn;vf=1;function e(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}return Fn=e,Fn}var jn,hf;function Qb(){if(hf)return jn;hf=1;var e=zt(),r="__lodash_hash_undefined__",t=Object.prototype,a=t.hasOwnProperty;function n(i){var o=this.__data__;if(e){var s=o[i];return s===r?void 0:s}return a.call(o,i)?o[i]:void 0}return jn=n,jn}var Dn,pf;function em(){if(pf)return Dn;pf=1;var e=zt(),r=Object.prototype,t=r.hasOwnProperty;function a(n){var i=this.__data__;return e?i[n]!==void 0:t.call(i,n)}return Dn=a,Dn}var Gn,gf;function rm(){if(gf)return Gn;gf=1;var e=zt(),r="__lodash_hash_undefined__";function t(a,n){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&n===void 0?r:n,this}return Gn=t,Gn}var Bn,_f;function tm(){if(_f)return Bn;_f=1;var e=Jb(),r=Zb(),t=Qb(),a=em(),n=rm();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=t,i.prototype.has=a,i.prototype.set=n,Bn=i,Bn}var Un,yf;function nm(){if(yf)return Un;yf=1;var e=tm(),r=Ut(),t=tc();function a(){this.size=0,this.__data__={hash:new e,map:new(t||r),string:new e}}return Un=a,Un}var zn,bf;function am(){if(bf)return zn;bf=1;function e(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}return zn=e,zn}var Vn,mf;function Vt(){if(mf)return Vn;mf=1;var e=am();function r(t,a){var n=t.__data__;return e(a)?n[typeof a=="string"?"string":"hash"]:n.map}return Vn=r,Vn}var Hn,wf;function im(){if(wf)return Hn;wf=1;var e=Vt();function r(t){var a=e(this,t).delete(t);return this.size-=a?1:0,a}return Hn=r,Hn}var Kn,xf;function om(){if(xf)return Kn;xf=1;var e=Vt();function r(t){return e(this,t).get(t)}return Kn=r,Kn}var Wn,qf;function sm(){if(qf)return Wn;qf=1;var e=Vt();function r(t){return e(this,t).has(t)}return Wn=r,Wn}var Yn,Ef;function um(){if(Ef)return Yn;Ef=1;var e=Vt();function r(t,a){var n=e(this,t),i=n.size;return n.set(t,a),this.size+=n.size==i?0:1,this}return Yn=r,Yn}var Xn,kf;function nc(){if(kf)return Xn;kf=1;var e=nm(),r=im(),t=om(),a=sm(),n=um();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=t,i.prototype.has=a,i.prototype.set=n,Xn=i,Xn}var Jn,Rf;function cm(){if(Rf)return Jn;Rf=1;var e=Ut(),r=tc(),t=nc(),a=200;function n(i,o){var s=this.__data__;if(s instanceof e){var u=s.__data__;if(!r||u.length<a-1)return u.push([i,o]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(i,o),this.size=s.size,this}return Jn=n,Jn}var Zn,Sf;function Ht(){if(Sf)return Zn;Sf=1;var e=Ut(),r=Gb(),t=Bb(),a=Ub(),n=zb(),i=cm();function o(s){var u=this.__data__=new e(s);this.size=u.size}return o.prototype.clear=r,o.prototype.delete=t,o.prototype.get=a,o.prototype.has=n,o.prototype.set=i,Zn=o,Zn}var Qn,Af;function ac(){if(Af)return Qn;Af=1;function e(r,t){for(var a=-1,n=r==null?0:r.length;++a<n&&t(r[a],a,r)!==!1;);return r}return Qn=e,Qn}var ea,If;function Fp(){if(If)return ea;If=1;var e=Lr(),r=(function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch{}})();return ea=r,ea}var ra,Cf;function Kt(){if(Cf)return ra;Cf=1;var e=Fp();function r(t,a,n){a=="__proto__"&&e?e(t,a,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[a]=n}return ra=r,ra}var ta,Tf;function Wt(){if(Tf)return ta;Tf=1;var e=Kt(),r=Kr(),t=Object.prototype,a=t.hasOwnProperty;function n(i,o,s){var u=i[o];(!(a.call(i,o)&&r(u,s))||s===void 0&&!(o in i))&&e(i,o,s)}return ta=n,ta}var na,Of;function yt(){if(Of)return na;Of=1;var e=Wt(),r=Kt();function t(a,n,i,o){var s=!i;i||(i={});for(var u=-1,f=n.length;++u<f;){var c=n[u],l=o?o(i[c],a[c],c,i,a):void 0;l===void 0&&(l=a[c]),s?r(i,c,l):e(i,c,l)}return i}return na=t,na}var aa,Nf;function fm(){if(Nf)return aa;Nf=1;function e(r,t){for(var a=-1,n=Array(r);++a<r;)n[a]=t(a);return n}return aa=e,aa}var ia,Pf;function wr(){if(Pf)return ia;Pf=1;function e(r){return r!=null&&typeof r=="object"}return ia=e,ia}var oa,Mf;function lm(){if(Mf)return oa;Mf=1;var e=$r(),r=wr(),t="[object Arguments]";function a(n){return r(n)&&e(n)==t}return oa=a,oa}var sa,$f;function bt(){if($f)return sa;$f=1;var e=lm(),r=wr(),t=Object.prototype,a=t.hasOwnProperty,n=t.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return r(o)&&a.call(o,"callee")&&!n.call(o,"callee")};return sa=i,sa}var ua,Lf;function Ke(){if(Lf)return ua;Lf=1;var e=Array.isArray;return ua=e,ua}var ut={exports:{}},ca,Ff;function dm(){if(Ff)return ca;Ff=1;function e(){return!1}return ca=e,ca}ut.exports;var jf;function Yr(){return jf||(jf=1,(function(e,r){var t=yr(),a=dm(),n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,s=o?t.Buffer:void 0,u=s?s.isBuffer:void 0,f=u||a;e.exports=f})(ut,ut.exports)),ut.exports}var fa,Df;function Yt(){if(Df)return fa;Df=1;var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function t(a,n){var i=typeof a;return n=n??e,!!n&&(i=="number"||i!="symbol"&&r.test(a))&&a>-1&&a%1==0&&a<n}return fa=t,fa}var la,Gf;function ic(){if(Gf)return la;Gf=1;var e=9007199254740991;function r(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=e}return la=r,la}var da,Bf;function vm(){if(Bf)return da;Bf=1;var e=$r(),r=ic(),t=wr(),a="[object Arguments]",n="[object Array]",i="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",f="[object Map]",c="[object Number]",l="[object Object]",v="[object RegExp]",p="[object Set]",_="[object String]",g="[object WeakMap]",h="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",x="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",b="[object Int32Array]",q="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",C="[object Uint32Array]",k={};k[m]=k[x]=k[w]=k[E]=k[b]=k[q]=k[S]=k[O]=k[C]=!0,k[a]=k[n]=k[h]=k[i]=k[y]=k[o]=k[s]=k[u]=k[f]=k[c]=k[l]=k[v]=k[p]=k[_]=k[g]=!1;function N($){return t($)&&r($.length)&&!!k[e($)]}return da=N,da}var va,Uf;function Xt(){if(Uf)return va;Uf=1;function e(r){return function(t){return r(t)}}return va=e,va}var ct={exports:{}};ct.exports;var zf;function oc(){return zf||(zf=1,(function(e,r){var t=$p(),a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,o=i&&t.process,s=(function(){try{var u=n&&n.require&&n.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=s})(ct,ct.exports)),ct.exports}var ha,Vf;function mt(){if(Vf)return ha;Vf=1;var e=vm(),r=Xt(),t=oc(),a=t&&t.isTypedArray,n=a?r(a):e;return ha=n,ha}var pa,Hf;function jp(){if(Hf)return pa;Hf=1;var e=fm(),r=bt(),t=Ke(),a=Yr(),n=Yt(),i=mt(),o=Object.prototype,s=o.hasOwnProperty;function u(f,c){var l=t(f),v=!l&&r(f),p=!l&&!v&&a(f),_=!l&&!v&&!p&&i(f),g=l||v||p||_,h=g?e(f.length,String):[],y=h.length;for(var m in f)(c||s.call(f,m))&&!(g&&(m=="length"||p&&(m=="offset"||m=="parent")||_&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||n(m,y)))&&h.push(m);return h}return pa=u,pa}var ga,Kf;function Jt(){if(Kf)return ga;Kf=1;var e=Object.prototype;function r(t){var a=t&&t.constructor,n=typeof a=="function"&&a.prototype||e;return t===n}return ga=r,ga}var _a,Wf;function Dp(){if(Wf)return _a;Wf=1;function e(r,t){return function(a){return r(t(a))}}return _a=e,_a}var ya,Yf;function hm(){if(Yf)return ya;Yf=1;var e=Dp(),r=e(Object.keys,Object);return ya=r,ya}var ba,Xf;function sc(){if(Xf)return ba;Xf=1;var e=Jt(),r=hm(),t=Object.prototype,a=t.hasOwnProperty;function n(i){if(!e(i))return r(i);var o=[];for(var s in Object(i))a.call(i,s)&&s!="constructor"&&o.push(s);return o}return ba=n,ba}var ma,Jf;function kr(){if(Jf)return ma;Jf=1;var e=_t(),r=ic();function t(a){return a!=null&&r(a.length)&&!e(a)}return ma=t,ma}var wa,Zf;function Cr(){if(Zf)return wa;Zf=1;var e=jp(),r=sc(),t=kr();function a(n){return t(n)?e(n):r(n)}return wa=a,wa}var xa,Qf;function pm(){if(Qf)return xa;Qf=1;var e=yt(),r=Cr();function t(a,n){return a&&e(n,r(n),a)}return xa=t,xa}var qa,el;function gm(){if(el)return qa;el=1;function e(r){var t=[];if(r!=null)for(var a in Object(r))t.push(a);return t}return qa=e,qa}var Ea,rl;function _m(){if(rl)return Ea;rl=1;var e=dr(),r=Jt(),t=gm(),a=Object.prototype,n=a.hasOwnProperty;function i(o){if(!e(o))return t(o);var s=r(o),u=[];for(var f in o)f=="constructor"&&(s||!n.call(o,f))||u.push(f);return u}return Ea=i,Ea}var ka,tl;function Fr(){if(tl)return ka;tl=1;var e=jp(),r=_m(),t=kr();function a(n){return t(n)?e(n,!0):r(n)}return ka=a,ka}var Ra,nl;function ym(){if(nl)return Ra;nl=1;var e=yt(),r=Fr();function t(a,n){return a&&e(n,r(n),a)}return Ra=t,Ra}var ft={exports:{}};ft.exports;var al;function Gp(){return al||(al=1,(function(e,r){var t=yr(),a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,o=i?t.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(f,c){if(c)return f.slice();var l=f.length,v=s?s(l):new f.constructor(l);return f.copy(v),v}e.exports=u})(ft,ft.exports)),ft.exports}var Sa,il;function Bp(){if(il)return Sa;il=1;function e(r,t){var a=-1,n=r.length;for(t||(t=Array(n));++a<n;)t[a]=r[a];return t}return Sa=e,Sa}var Aa,ol;function Up(){if(ol)return Aa;ol=1;function e(r,t){for(var a=-1,n=r==null?0:r.length,i=0,o=[];++a<n;){var s=r[a];t(s,a,r)&&(o[i++]=s)}return o}return Aa=e,Aa}var Ia,sl;function zp(){if(sl)return Ia;sl=1;function e(){return[]}return Ia=e,Ia}var Ca,ul;function uc(){if(ul)return Ca;ul=1;var e=Up(),r=zp(),t=Object.prototype,a=t.propertyIsEnumerable,n=Object.getOwnPropertySymbols,i=n?function(o){return o==null?[]:(o=Object(o),e(n(o),function(s){return a.call(o,s)}))}:r;return Ca=i,Ca}var Ta,cl;function bm(){if(cl)return Ta;cl=1;var e=yt(),r=uc();function t(a,n){return e(a,r(a),n)}return Ta=t,Ta}var Oa,fl;function cc(){if(fl)return Oa;fl=1;function e(r,t){for(var a=-1,n=t.length,i=r.length;++a<n;)r[i+a]=t[a];return r}return Oa=e,Oa}var Na,ll;function Zt(){if(ll)return Na;ll=1;var e=Dp(),r=e(Object.getPrototypeOf,Object);return Na=r,Na}var Pa,dl;function Vp(){if(dl)return Pa;dl=1;var e=cc(),r=Zt(),t=uc(),a=zp(),n=Object.getOwnPropertySymbols,i=n?function(o){for(var s=[];o;)e(s,t(o)),o=r(o);return s}:a;return Pa=i,Pa}var Ma,vl;function mm(){if(vl)return Ma;vl=1;var e=yt(),r=Vp();function t(a,n){return e(a,r(a),n)}return Ma=t,Ma}var $a,hl;function Hp(){if(hl)return $a;hl=1;var e=cc(),r=Ke();function t(a,n,i){var o=n(a);return r(a)?o:e(o,i(a))}return $a=t,$a}var La,pl;function Kp(){if(pl)return La;pl=1;var e=Hp(),r=uc(),t=Cr();function a(n){return e(n,t,r)}return La=a,La}var Fa,gl;function wm(){if(gl)return Fa;gl=1;var e=Hp(),r=Vp(),t=Fr();function a(n){return e(n,t,r)}return Fa=a,Fa}var ja,_l;function xm(){if(_l)return ja;_l=1;var e=Lr(),r=yr(),t=e(r,"DataView");return ja=t,ja}var Da,yl;function qm(){if(yl)return Da;yl=1;var e=Lr(),r=yr(),t=e(r,"Promise");return Da=t,Da}var Ga,bl;function Wp(){if(bl)return Ga;bl=1;var e=Lr(),r=yr(),t=e(r,"Set");return Ga=t,Ga}var Ba,ml;function Em(){if(ml)return Ba;ml=1;var e=Lr(),r=yr(),t=e(r,"WeakMap");return Ba=t,Ba}var Ua,wl;function Xr(){if(wl)return Ua;wl=1;var e=xm(),r=tc(),t=qm(),a=Wp(),n=Em(),i=$r(),o=Lp(),s="[object Map]",u="[object Object]",f="[object Promise]",c="[object Set]",l="[object WeakMap]",v="[object DataView]",p=o(e),_=o(r),g=o(t),h=o(a),y=o(n),m=i;return(e&&m(new e(new ArrayBuffer(1)))!=v||r&&m(new r)!=s||t&&m(t.resolve())!=f||a&&m(new a)!=c||n&&m(new n)!=l)&&(m=function(x){var w=i(x),E=w==u?x.constructor:void 0,b=E?o(E):"";if(b)switch(b){case p:return v;case _:return s;case g:return f;case h:return c;case y:return l}return w}),Ua=m,Ua}var za,xl;function km(){if(xl)return za;xl=1;var e=Object.prototype,r=e.hasOwnProperty;function t(a){var n=a.length,i=new a.constructor(n);return n&&typeof a[0]=="string"&&r.call(a,"index")&&(i.index=a.index,i.input=a.input),i}return za=t,za}var Va,ql;function Yp(){if(ql)return Va;ql=1;var e=yr(),r=e.Uint8Array;return Va=r,Va}var Ha,El;function fc(){if(El)return Ha;El=1;var e=Yp();function r(t){var a=new t.constructor(t.byteLength);return new e(a).set(new e(t)),a}return Ha=r,Ha}var Ka,kl;function Rm(){if(kl)return Ka;kl=1;var e=fc();function r(t,a){var n=a?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}return Ka=r,Ka}var Wa,Rl;function Sm(){if(Rl)return Wa;Rl=1;var e=/\w*$/;function r(t){var a=new t.constructor(t.source,e.exec(t));return a.lastIndex=t.lastIndex,a}return Wa=r,Wa}var Ya,Sl;function Am(){if(Sl)return Ya;Sl=1;var e=Wr(),r=e?e.prototype:void 0,t=r?r.valueOf:void 0;function a(n){return t?Object(t.call(n)):{}}return Ya=a,Ya}var Xa,Al;function Xp(){if(Al)return Xa;Al=1;var e=fc();function r(t,a){var n=a?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}return Xa=r,Xa}var Ja,Il;function Im(){if(Il)return Ja;Il=1;var e=fc(),r=Rm(),t=Sm(),a=Am(),n=Xp(),i="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",f="[object RegExp]",c="[object Set]",l="[object String]",v="[object Symbol]",p="[object ArrayBuffer]",_="[object DataView]",g="[object Float32Array]",h="[object Float64Array]",y="[object Int8Array]",m="[object Int16Array]",x="[object Int32Array]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",b="[object Uint16Array]",q="[object Uint32Array]";function S(O,C,k){var N=O.constructor;switch(C){case p:return e(O);case i:case o:return new N(+O);case _:return r(O,k);case g:case h:case y:case m:case x:case w:case E:case b:case q:return n(O,k);case s:return new N;case u:case l:return new N(O);case f:return t(O);case c:return new N;case v:return a(O)}}return Ja=S,Ja}var Za,Cl;function Jp(){if(Cl)return Za;Cl=1;var e=dr(),r=Object.create,t=(function(){function a(){}return function(n){if(!e(n))return{};if(r)return r(n);a.prototype=n;var i=new a;return a.prototype=void 0,i}})();return Za=t,Za}var Qa,Tl;function Zp(){if(Tl)return Qa;Tl=1;var e=Jp(),r=Zt(),t=Jt();function a(n){return typeof n.constructor=="function"&&!t(n)?e(r(n)):{}}return Qa=a,Qa}var ei,Ol;function Cm(){if(Ol)return ei;Ol=1;var e=Xr(),r=wr(),t="[object Map]";function a(n){return r(n)&&e(n)==t}return ei=a,ei}var ri,Nl;function Tm(){if(Nl)return ri;Nl=1;var e=Cm(),r=Xt(),t=oc(),a=t&&t.isMap,n=a?r(a):e;return ri=n,ri}var ti,Pl;function Om(){if(Pl)return ti;Pl=1;var e=Xr(),r=wr(),t="[object Set]";function a(n){return r(n)&&e(n)==t}return ti=a,ti}var ni,Ml;function Nm(){if(Ml)return ni;Ml=1;var e=Om(),r=Xt(),t=oc(),a=t&&t.isSet,n=a?r(a):e;return ni=n,ni}var ai,$l;function Qp(){if($l)return ai;$l=1;var e=Ht(),r=ac(),t=Wt(),a=pm(),n=ym(),i=Gp(),o=Bp(),s=bm(),u=mm(),f=Kp(),c=wm(),l=Xr(),v=km(),p=Im(),_=Zp(),g=Ke(),h=Yr(),y=Tm(),m=dr(),x=Nm(),w=Cr(),E=Fr(),b=1,q=2,S=4,O="[object Arguments]",C="[object Array]",k="[object Boolean]",N="[object Date]",$="[object Error]",B="[object Function]",V="[object GeneratorFunction]",X="[object Map]",le="[object Number]",se="[object Object]",Ee="[object RegExp]",Oe="[object Set]",ke="[object String]",Se="[object Symbol]",Re="[object WeakMap]",R="[object ArrayBuffer]",P="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",Y="[object Int8Array]",ce="[object Int16Array]",oe="[object Int32Array]",ge="[object Uint8Array]",be="[object Uint8ClampedArray]",he="[object Uint16Array]",_e="[object Uint32Array]",de={};de[O]=de[C]=de[R]=de[P]=de[k]=de[N]=de[L]=de[F]=de[Y]=de[ce]=de[oe]=de[X]=de[le]=de[se]=de[Ee]=de[Oe]=de[ke]=de[Se]=de[ge]=de[be]=de[he]=de[_e]=!0,de[$]=de[B]=de[Re]=!1;function De(K,ue,we,Me,$e,Le){var xe,W=ue&b,H=ue&q,fe=ue&S;if(we&&(xe=$e?we(K,Me,$e,Le):we(K)),xe!==void 0)return xe;if(!m(K))return K;var me=g(K);if(me){if(xe=v(K),!W)return o(K,xe)}else{var Ae=l(K),ze=Ae==B||Ae==V;if(h(K))return i(K,W);if(Ae==se||Ae==O||ze&&!$e){if(xe=H||ze?{}:_(K),!W)return H?u(K,n(xe,K)):s(K,a(xe,K))}else{if(!de[Ae])return $e?K:{};xe=p(K,Ae,W)}}Le||(Le=new e);var We=Le.get(K);if(We)return We;Le.set(K,xe),x(K)?K.forEach(function(ae){xe.add(De(ae,ue,we,ae,K,Le))}):y(K)&&K.forEach(function(ae,U){xe.set(U,De(ae,ue,we,U,K,Le))});var Qe=fe?H?c:f:H?E:w,qe=me?void 0:Qe(K);return r(qe||K,function(ae,U){qe&&(U=ae,ae=K[U]),t(xe,U,De(ae,ue,we,U,K,Le))}),xe}return ai=De,ai}var ii,Ll;function Pm(){if(Ll)return ii;Ll=1;var e=Qp(),r=4;function t(a){return e(a,r)}return ii=t,ii}var oi,Fl;function lc(){if(Fl)return oi;Fl=1;function e(r){return function(){return r}}return oi=e,oi}var si,jl;function Mm(){if(jl)return si;jl=1;function e(r){return function(t,a,n){for(var i=-1,o=Object(t),s=n(t),u=s.length;u--;){var f=s[r?u:++i];if(a(o[f],f,o)===!1)break}return t}}return si=e,si}var ui,Dl;function dc(){if(Dl)return ui;Dl=1;var e=Mm(),r=e();return ui=r,ui}var ci,Gl;function vc(){if(Gl)return ci;Gl=1;var e=dc(),r=Cr();function t(a,n){return a&&e(a,n,r)}return ci=t,ci}var fi,Bl;function $m(){if(Bl)return fi;Bl=1;var e=kr();function r(t,a){return function(n,i){if(n==null)return n;if(!e(n))return t(n,i);for(var o=n.length,s=a?o:-1,u=Object(n);(a?s--:++s<o)&&i(u[s],s,u)!==!1;);return n}}return fi=r,fi}var li,Ul;function Qt(){if(Ul)return li;Ul=1;var e=vc(),r=$m(),t=r(e);return li=t,li}var di,zl;function jr(){if(zl)return di;zl=1;function e(r){return r}return di=e,di}var vi,Vl;function eg(){if(Vl)return vi;Vl=1;var e=jr();function r(t){return typeof t=="function"?t:e}return vi=r,vi}var hi,Hl;function rg(){if(Hl)return hi;Hl=1;var e=ac(),r=Qt(),t=eg(),a=Ke();function n(i,o){var s=a(i)?e:r;return s(i,t(o))}return hi=n,hi}var pi,Kl;function tg(){return Kl||(Kl=1,pi=rg()),pi}var gi,Wl;function Lm(){if(Wl)return gi;Wl=1;var e=Qt();function r(t,a){var n=[];return e(t,function(i,o,s){a(i,o,s)&&n.push(i)}),n}return gi=r,gi}var _i,Yl;function Fm(){if(Yl)return _i;Yl=1;var e="__lodash_hash_undefined__";function r(t){return this.__data__.set(t,e),this}return _i=r,_i}var yi,Xl;function jm(){if(Xl)return yi;Xl=1;function e(r){return this.__data__.has(r)}return yi=e,yi}var bi,Jl;function ng(){if(Jl)return bi;Jl=1;var e=nc(),r=Fm(),t=jm();function a(n){var i=-1,o=n==null?0:n.length;for(this.__data__=new e;++i<o;)this.add(n[i])}return a.prototype.add=a.prototype.push=r,a.prototype.has=t,bi=a,bi}var mi,Zl;function Dm(){if(Zl)return mi;Zl=1;function e(r,t){for(var a=-1,n=r==null?0:r.length;++a<n;)if(t(r[a],a,r))return!0;return!1}return mi=e,mi}var wi,Ql;function ag(){if(Ql)return wi;Ql=1;function e(r,t){return r.has(t)}return wi=e,wi}var xi,ed;function ig(){if(ed)return xi;ed=1;var e=ng(),r=Dm(),t=ag(),a=1,n=2;function i(o,s,u,f,c,l){var v=u&a,p=o.length,_=s.length;if(p!=_&&!(v&&_>p))return!1;var g=l.get(o),h=l.get(s);if(g&&h)return g==s&&h==o;var y=-1,m=!0,x=u&n?new e:void 0;for(l.set(o,s),l.set(s,o);++y<p;){var w=o[y],E=s[y];if(f)var b=v?f(E,w,y,s,o,l):f(w,E,y,o,s,l);if(b!==void 0){if(b)continue;m=!1;break}if(x){if(!r(s,function(q,S){if(!t(x,S)&&(w===q||c(w,q,u,f,l)))return x.push(S)})){m=!1;break}}else if(!(w===E||c(w,E,u,f,l))){m=!1;break}}return l.delete(o),l.delete(s),m}return xi=i,xi}var qi,rd;function Gm(){if(rd)return qi;rd=1;function e(r){var t=-1,a=Array(r.size);return r.forEach(function(n,i){a[++t]=[i,n]}),a}return qi=e,qi}var Ei,td;function hc(){if(td)return Ei;td=1;function e(r){var t=-1,a=Array(r.size);return r.forEach(function(n){a[++t]=n}),a}return Ei=e,Ei}var ki,nd;function Bm(){if(nd)return ki;nd=1;var e=Wr(),r=Yp(),t=Kr(),a=ig(),n=Gm(),i=hc(),o=1,s=2,u="[object Boolean]",f="[object Date]",c="[object Error]",l="[object Map]",v="[object Number]",p="[object RegExp]",_="[object Set]",g="[object String]",h="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",x=e?e.prototype:void 0,w=x?x.valueOf:void 0;function E(b,q,S,O,C,k,N){switch(S){case m:if(b.byteLength!=q.byteLength||b.byteOffset!=q.byteOffset)return!1;b=b.buffer,q=q.buffer;case y:return!(b.byteLength!=q.byteLength||!k(new r(b),new r(q)));case u:case f:case v:return t(+b,+q);case c:return b.name==q.name&&b.message==q.message;case p:case g:return b==q+"";case l:var $=n;case _:var B=O&o;if($||($=i),b.size!=q.size&&!B)return!1;var V=N.get(b);if(V)return V==q;O|=s,N.set(b,q);var X=a($(b),$(q),O,C,k,N);return N.delete(b),X;case h:if(w)return w.call(b)==w.call(q)}return!1}return ki=E,ki}var Ri,ad;function Um(){if(ad)return Ri;ad=1;var e=Kp(),r=1,t=Object.prototype,a=t.hasOwnProperty;function n(i,o,s,u,f,c){var l=s&r,v=e(i),p=v.length,_=e(o),g=_.length;if(p!=g&&!l)return!1;for(var h=p;h--;){var y=v[h];if(!(l?y in o:a.call(o,y)))return!1}var m=c.get(i),x=c.get(o);if(m&&x)return m==o&&x==i;var w=!0;c.set(i,o),c.set(o,i);for(var E=l;++h<p;){y=v[h];var b=i[y],q=o[y];if(u)var S=l?u(q,b,y,o,i,c):u(b,q,y,i,o,c);if(!(S===void 0?b===q||f(b,q,s,u,c):S)){w=!1;break}E||(E=y=="constructor")}if(w&&!E){var O=i.constructor,C=o.constructor;O!=C&&"constructor"in i&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof C=="function"&&C instanceof C)&&(w=!1)}return c.delete(i),c.delete(o),w}return Ri=n,Ri}var Si,id;function zm(){if(id)return Si;id=1;var e=Ht(),r=ig(),t=Bm(),a=Um(),n=Xr(),i=Ke(),o=Yr(),s=mt(),u=1,f="[object Arguments]",c="[object Array]",l="[object Object]",v=Object.prototype,p=v.hasOwnProperty;function _(g,h,y,m,x,w){var E=i(g),b=i(h),q=E?c:n(g),S=b?c:n(h);q=q==f?l:q,S=S==f?l:S;var O=q==l,C=S==l,k=q==S;if(k&&o(g)){if(!o(h))return!1;E=!0,O=!1}if(k&&!O)return w||(w=new e),E||s(g)?r(g,h,y,m,x,w):t(g,h,q,y,m,x,w);if(!(y&u)){var N=O&&p.call(g,"__wrapped__"),$=C&&p.call(h,"__wrapped__");if(N||$){var B=N?g.value():g,V=$?h.value():h;return w||(w=new e),x(B,V,y,m,w)}}return k?(w||(w=new e),a(g,h,y,m,x,w)):!1}return Si=_,Si}var Ai,od;function og(){if(od)return Ai;od=1;var e=zm(),r=wr();function t(a,n,i,o,s){return a===n?!0:a==null||n==null||!r(a)&&!r(n)?a!==a&&n!==n:e(a,n,i,o,t,s)}return Ai=t,Ai}var Ii,sd;function Vm(){if(sd)return Ii;sd=1;var e=Ht(),r=og(),t=1,a=2;function n(i,o,s,u){var f=s.length,c=f,l=!u;if(i==null)return!c;for(i=Object(i);f--;){var v=s[f];if(l&&v[2]?v[1]!==i[v[0]]:!(v[0]in i))return!1}for(;++f<c;){v=s[f];var p=v[0],_=i[p],g=v[1];if(l&&v[2]){if(_===void 0&&!(p in i))return!1}else{var h=new e;if(u)var y=u(_,g,p,i,o,h);if(!(y===void 0?r(g,_,t|a,u,h):y))return!1}}return!0}return Ii=n,Ii}var Ci,ud;function sg(){if(ud)return Ci;ud=1;var e=dr();function r(t){return t===t&&!e(t)}return Ci=r,Ci}var Ti,cd;function Hm(){if(cd)return Ti;cd=1;var e=sg(),r=Cr();function t(a){for(var n=r(a),i=n.length;i--;){var o=n[i],s=a[o];n[i]=[o,s,e(s)]}return n}return Ti=t,Ti}var Oi,fd;function ug(){if(fd)return Oi;fd=1;function e(r,t){return function(a){return a==null?!1:a[r]===t&&(t!==void 0||r in Object(a))}}return Oi=e,Oi}var Ni,ld;function Km(){if(ld)return Ni;ld=1;var e=Vm(),r=Hm(),t=ug();function a(n){var i=r(n);return i.length==1&&i[0][2]?t(i[0][0],i[0][1]):function(o){return o===n||e(o,n,i)}}return Ni=a,Ni}var Pi,dd;function Jr(){if(dd)return Pi;dd=1;var e=$r(),r=wr(),t="[object Symbol]";function a(n){return typeof n=="symbol"||r(n)&&e(n)==t}return Pi=a,Pi}var Mi,vd;function pc(){if(vd)return Mi;vd=1;var e=Ke(),r=Jr(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(i,o){if(e(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||r(i)?!0:a.test(i)||!t.test(i)||o!=null&&i in Object(o)}return Mi=n,Mi}var $i,hd;function Wm(){if(hd)return $i;hd=1;var e=nc(),r="Expected a function";function t(a,n){if(typeof a!="function"||n!=null&&typeof n!="function")throw new TypeError(r);var i=function(){var o=arguments,s=n?n.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var f=a.apply(this,o);return i.cache=u.set(s,f)||u,f};return i.cache=new(t.Cache||e),i}return t.Cache=e,$i=t,$i}var Li,pd;function Ym(){if(pd)return Li;pd=1;var e=Wm(),r=500;function t(a){var n=e(a,function(o){return i.size===r&&i.clear(),o}),i=n.cache;return n}return Li=t,Li}var Fi,gd;function Xm(){if(gd)return Fi;gd=1;var e=Ym(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,a=e(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(r,function(o,s,u,f){i.push(u?f.replace(t,"$1"):s||o)}),i});return Fi=a,Fi}var ji,_d;function en(){if(_d)return ji;_d=1;function e(r,t){for(var a=-1,n=r==null?0:r.length,i=Array(n);++a<n;)i[a]=t(r[a],a,r);return i}return ji=e,ji}var Di,yd;function Jm(){if(yd)return Di;yd=1;var e=Wr(),r=en(),t=Ke(),a=Jr(),n=e?e.prototype:void 0,i=n?n.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return r(s,o)+"";if(a(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return Di=o,Di}var Gi,bd;function cg(){if(bd)return Gi;bd=1;var e=Jm();function r(t){return t==null?"":e(t)}return Gi=r,Gi}var Bi,md;function rn(){if(md)return Bi;md=1;var e=Ke(),r=pc(),t=Xm(),a=cg();function n(i,o){return e(i)?i:r(i,o)?[i]:t(a(i))}return Bi=n,Bi}var Ui,wd;function wt(){if(wd)return Ui;wd=1;var e=Jr();function r(t){if(typeof t=="string"||e(t))return t;var a=t+"";return a=="0"&&1/t==-1/0?"-0":a}return Ui=r,Ui}var zi,xd;function tn(){if(xd)return zi;xd=1;var e=rn(),r=wt();function t(a,n){n=e(n,a);for(var i=0,o=n.length;a!=null&&i<o;)a=a[r(n[i++])];return i&&i==o?a:void 0}return zi=t,zi}var Vi,qd;function Zm(){if(qd)return Vi;qd=1;var e=tn();function r(t,a,n){var i=t==null?void 0:e(t,a);return i===void 0?n:i}return Vi=r,Vi}var Hi,Ed;function Qm(){if(Ed)return Hi;Ed=1;function e(r,t){return r!=null&&t in Object(r)}return Hi=e,Hi}var Ki,kd;function fg(){if(kd)return Ki;kd=1;var e=rn(),r=bt(),t=Ke(),a=Yt(),n=ic(),i=wt();function o(s,u,f){u=e(u,s);for(var c=-1,l=u.length,v=!1;++c<l;){var p=i(u[c]);if(!(v=s!=null&&f(s,p)))break;s=s[p]}return v||++c!=l?v:(l=s==null?0:s.length,!!l&&n(l)&&a(p,l)&&(t(s)||r(s)))}return Ki=o,Ki}var Wi,Rd;function lg(){if(Rd)return Wi;Rd=1;var e=Qm(),r=fg();function t(a,n){return a!=null&&r(a,n,e)}return Wi=t,Wi}var Yi,Sd;function e1(){if(Sd)return Yi;Sd=1;var e=og(),r=Zm(),t=lg(),a=pc(),n=sg(),i=ug(),o=wt(),s=1,u=2;function f(c,l){return a(c)&&n(l)?i(o(c),l):function(v){var p=r(v,c);return p===void 0&&p===l?t(v,c):e(l,p,s|u)}}return Yi=f,Yi}var Xi,Ad;function dg(){if(Ad)return Xi;Ad=1;function e(r){return function(t){return t?.[r]}}return Xi=e,Xi}var Ji,Id;function r1(){if(Id)return Ji;Id=1;var e=tn();function r(t){return function(a){return e(a,t)}}return Ji=r,Ji}var Zi,Cd;function t1(){if(Cd)return Zi;Cd=1;var e=dg(),r=r1(),t=pc(),a=wt();function n(i){return t(i)?e(a(i)):r(i)}return Zi=n,Zi}var Qi,Td;function Rr(){if(Td)return Qi;Td=1;var e=Km(),r=e1(),t=jr(),a=Ke(),n=t1();function i(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?a(o)?r(o[0],o[1]):e(o):n(o)}return Qi=i,Qi}var eo,Od;function vg(){if(Od)return eo;Od=1;var e=Up(),r=Lm(),t=Rr(),a=Ke();function n(i,o){var s=a(i)?e:r;return s(i,t(o,3))}return eo=n,eo}var ro,Nd;function n1(){if(Nd)return ro;Nd=1;var e=Object.prototype,r=e.hasOwnProperty;function t(a,n){return a!=null&&r.call(a,n)}return ro=t,ro}var to,Pd;function hg(){if(Pd)return to;Pd=1;var e=n1(),r=fg();function t(a,n){return a!=null&&r(a,n,e)}return to=t,to}var no,Md;function a1(){if(Md)return no;Md=1;var e=sc(),r=Xr(),t=bt(),a=Ke(),n=kr(),i=Yr(),o=Jt(),s=mt(),u="[object Map]",f="[object Set]",c=Object.prototype,l=c.hasOwnProperty;function v(p){if(p==null)return!0;if(n(p)&&(a(p)||typeof p=="string"||typeof p.splice=="function"||i(p)||s(p)||t(p)))return!p.length;var _=r(p);if(_==u||_==f)return!p.size;if(o(p))return!e(p).length;for(var g in p)if(l.call(p,g))return!1;return!0}return no=v,no}var ao,$d;function pg(){if($d)return ao;$d=1;function e(r){return r===void 0}return ao=e,ao}var io,Ld;function gg(){if(Ld)return io;Ld=1;var e=Qt(),r=kr();function t(a,n){var i=-1,o=r(a)?Array(a.length):[];return e(a,function(s,u,f){o[++i]=n(s,u,f)}),o}return io=t,io}var oo,Fd;function _g(){if(Fd)return oo;Fd=1;var e=en(),r=Rr(),t=gg(),a=Ke();function n(i,o){var s=a(i)?e:t;return s(i,r(o,3))}return oo=n,oo}var so,jd;function i1(){if(jd)return so;jd=1;function e(r,t,a,n){var i=-1,o=r==null?0:r.length;for(n&&o&&(a=r[++i]);++i<o;)a=t(a,r[i],i,r);return a}return so=e,so}var uo,Dd;function o1(){if(Dd)return uo;Dd=1;function e(r,t,a,n,i){return i(r,function(o,s,u){a=n?(n=!1,o):t(a,o,s,u)}),a}return uo=e,uo}var co,Gd;function yg(){if(Gd)return co;Gd=1;var e=i1(),r=Qt(),t=Rr(),a=o1(),n=Ke();function i(o,s,u){var f=n(o)?e:a,c=arguments.length<3;return f(o,t(s,4),u,c,r)}return co=i,co}var fo,Bd;function s1(){if(Bd)return fo;Bd=1;var e=$r(),r=Ke(),t=wr(),a="[object String]";function n(i){return typeof i=="string"||!r(i)&&t(i)&&e(i)==a}return fo=n,fo}var lo,Ud;function u1(){if(Ud)return lo;Ud=1;var e=dg(),r=e("length");return lo=r,lo}var vo,zd;function c1(){if(zd)return vo;zd=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",n=r+t+a,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+e+n+i+"]");function u(f){return s.test(f)}return vo=u,vo}var ho,Vd;function f1(){if(Vd)return ho;Vd=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",n=r+t+a,i="\\ufe0e\\ufe0f",o="["+e+"]",s="["+n+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+s+"|"+u+")",c="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",_=f+"?",g="["+i+"]?",h="(?:"+p+"(?:"+[c,l,v].join("|")+")"+g+_+")*",y=g+_+h,m="(?:"+[c+s+"?",s,l,v,o].join("|")+")",x=RegExp(u+"(?="+u+")|"+m+y,"g");function w(E){for(var b=x.lastIndex=0;x.test(E);)++b;return b}return ho=w,ho}var po,Hd;function l1(){if(Hd)return po;Hd=1;var e=u1(),r=c1(),t=f1();function a(n){return r(n)?t(n):e(n)}return po=a,po}var go,Kd;function d1(){if(Kd)return go;Kd=1;var e=sc(),r=Xr(),t=kr(),a=s1(),n=l1(),i="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(t(u))return a(u)?n(u):u.length;var f=r(u);return f==i||f==o?u.size:e(u).length}return go=s,go}var _o,Wd;function v1(){if(Wd)return _o;Wd=1;var e=ac(),r=Jp(),t=vc(),a=Rr(),n=Zt(),i=Ke(),o=Yr(),s=_t(),u=dr(),f=mt();function c(l,v,p){var _=i(l),g=_||o(l)||f(l);if(v=a(v,4),p==null){var h=l&&l.constructor;g?p=_?new h:[]:u(l)?p=s(h)?r(n(l)):{}:p={}}return(g?e:t)(l,function(y,m,x){return v(p,y,m,x)}),p}return _o=c,_o}var yo,Yd;function h1(){if(Yd)return yo;Yd=1;var e=Wr(),r=bt(),t=Ke(),a=e?e.isConcatSpreadable:void 0;function n(i){return t(i)||r(i)||!!(a&&i&&i[a])}return yo=n,yo}var bo,Xd;function gc(){if(Xd)return bo;Xd=1;var e=cc(),r=h1();function t(a,n,i,o,s){var u=-1,f=a.length;for(i||(i=r),s||(s=[]);++u<f;){var c=a[u];n>0&&i(c)?n>1?t(c,n-1,i,o,s):e(s,c):o||(s[s.length]=c)}return s}return bo=t,bo}var mo,Jd;function p1(){if(Jd)return mo;Jd=1;function e(r,t,a){switch(a.length){case 0:return r.call(t);case 1:return r.call(t,a[0]);case 2:return r.call(t,a[0],a[1]);case 3:return r.call(t,a[0],a[1],a[2])}return r.apply(t,a)}return mo=e,mo}var wo,Zd;function bg(){if(Zd)return wo;Zd=1;var e=p1(),r=Math.max;function t(a,n,i){return n=r(n===void 0?a.length-1:n,0),function(){for(var o=arguments,s=-1,u=r(o.length-n,0),f=Array(u);++s<u;)f[s]=o[n+s];s=-1;for(var c=Array(n+1);++s<n;)c[s]=o[s];return c[n]=i(f),e(a,this,c)}}return wo=t,wo}var xo,Qd;function g1(){if(Qd)return xo;Qd=1;var e=lc(),r=Fp(),t=jr(),a=r?function(n,i){return r(n,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:t;return xo=a,xo}var qo,ev;function _1(){if(ev)return qo;ev=1;var e=800,r=16,t=Date.now;function a(n){var i=0,o=0;return function(){var s=t(),u=r-(s-o);if(o=s,u>0){if(++i>=e)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}return qo=a,qo}var Eo,rv;function mg(){if(rv)return Eo;rv=1;var e=g1(),r=_1(),t=r(e);return Eo=t,Eo}var ko,tv;function nn(){if(tv)return ko;tv=1;var e=jr(),r=bg(),t=mg();function a(n,i){return t(r(n,i,e),n+"")}return ko=a,ko}var Ro,nv;function wg(){if(nv)return Ro;nv=1;function e(r,t,a,n){for(var i=r.length,o=a+(n?1:-1);n?o--:++o<i;)if(t(r[o],o,r))return o;return-1}return Ro=e,Ro}var So,av;function y1(){if(av)return So;av=1;function e(r){return r!==r}return So=e,So}var Ao,iv;function b1(){if(iv)return Ao;iv=1;function e(r,t,a){for(var n=a-1,i=r.length;++n<i;)if(r[n]===t)return n;return-1}return Ao=e,Ao}var Io,ov;function m1(){if(ov)return Io;ov=1;var e=wg(),r=y1(),t=b1();function a(n,i,o){return i===i?t(n,i,o):e(n,r,o)}return Io=a,Io}var Co,sv;function w1(){if(sv)return Co;sv=1;var e=m1();function r(t,a){var n=t==null?0:t.length;return!!n&&e(t,a,0)>-1}return Co=r,Co}var To,uv;function x1(){if(uv)return To;uv=1;function e(r,t,a){for(var n=-1,i=r==null?0:r.length;++n<i;)if(a(t,r[n]))return!0;return!1}return To=e,To}var Oo,cv;function q1(){if(cv)return Oo;cv=1;function e(){}return Oo=e,Oo}var No,fv;function E1(){if(fv)return No;fv=1;var e=Wp(),r=q1(),t=hc(),a=1/0,n=e&&1/t(new e([,-0]))[1]==a?function(i){return new e(i)}:r;return No=n,No}var Po,lv;function k1(){if(lv)return Po;lv=1;var e=ng(),r=w1(),t=x1(),a=ag(),n=E1(),i=hc(),o=200;function s(u,f,c){var l=-1,v=r,p=u.length,_=!0,g=[],h=g;if(c)_=!1,v=t;else if(p>=o){var y=f?null:n(u);if(y)return i(y);_=!1,v=a,h=new e}else h=f?[]:g;e:for(;++l<p;){var m=u[l],x=f?f(m):m;if(m=c||m!==0?m:0,_&&x===x){for(var w=h.length;w--;)if(h[w]===x)continue e;f&&h.push(x),g.push(m)}else v(h,x,c)||(h!==g&&h.push(x),g.push(m))}return g}return Po=s,Po}var Mo,dv;function xg(){if(dv)return Mo;dv=1;var e=kr(),r=wr();function t(a){return r(a)&&e(a)}return Mo=t,Mo}var $o,vv;function R1(){if(vv)return $o;vv=1;var e=gc(),r=nn(),t=k1(),a=xg(),n=r(function(i){return t(e(i,1,a,!0))});return $o=n,$o}var Lo,hv;function S1(){if(hv)return Lo;hv=1;var e=en();function r(t,a){return e(a,function(n){return t[n]})}return Lo=r,Lo}var Fo,pv;function qg(){if(pv)return Fo;pv=1;var e=S1(),r=Cr();function t(a){return a==null?[]:e(a,r(a))}return Fo=t,Fo}var jo,gv;function vr(){if(gv)return jo;gv=1;var e;if(typeof rc=="function")try{e={clone:Pm(),constant:lc(),each:tg(),filter:vg(),has:hg(),isArray:Ke(),isEmpty:a1(),isFunction:_t(),isUndefined:pg(),keys:Cr(),map:_g(),reduce:yg(),size:d1(),transform:v1(),union:R1(),values:qg()}}catch{}return e||(e=window._),jo=e,jo}var Do,_v;function _c(){if(_v)return Do;_v=1;var e=vr();Do=n;var r="\0",t="\0",a="";function n(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}n.prototype._nodeCount=0,n.prototype._edgeCount=0,n.prototype.isDirected=function(){return this._isDirected},n.prototype.isMultigraph=function(){return this._isMultigraph},n.prototype.isCompound=function(){return this._isCompound},n.prototype.setGraph=function(c){return this._label=c,this},n.prototype.graph=function(){return this._label},n.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},n.prototype.nodeCount=function(){return this._nodeCount},n.prototype.nodes=function(){return e.keys(this._nodes)},n.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(l){return e.isEmpty(c._in[l])})},n.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(l){return e.isEmpty(c._out[l])})},n.prototype.setNodes=function(c,l){var v=arguments,p=this;return e.each(c,function(_){v.length>1?p.setNode(_,l):p.setNode(_)}),this},n.prototype.setNode=function(c,l){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=l),this):(this._nodes[c]=arguments.length>1?l:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},n.prototype.node=function(c){return this._nodes[c]},n.prototype.hasNode=function(c){return e.has(this._nodes,c)},n.prototype.removeNode=function(c){var l=this;if(e.has(this._nodes,c)){var v=function(p){l.removeEdge(l._edgeObjs[p])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(p){l.setParent(p)}),delete this._children[c]),e.each(e.keys(this._in[c]),v),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),v),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},n.prototype.setParent=function(c,l){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(l))l=t;else{l+="";for(var v=l;!e.isUndefined(v);v=this.parent(v))if(v===c)throw new Error("Setting "+l+" as parent of "+c+" would create a cycle");this.setNode(l)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=l,this._children[l][c]=!0,this},n.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},n.prototype.parent=function(c){if(this._isCompound){var l=this._parent[c];if(l!==t)return l}},n.prototype.children=function(c){if(e.isUndefined(c)&&(c=t),this._isCompound){var l=this._children[c];if(l)return e.keys(l)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},n.prototype.predecessors=function(c){var l=this._preds[c];if(l)return e.keys(l)},n.prototype.successors=function(c){var l=this._sucs[c];if(l)return e.keys(l)},n.prototype.neighbors=function(c){var l=this.predecessors(c);if(l)return e.union(l,this.successors(c))},n.prototype.isLeaf=function(c){var l;return this.isDirected()?l=this.successors(c):l=this.neighbors(c),l.length===0},n.prototype.filterNodes=function(c){var l=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});l.setGraph(this.graph());var v=this;e.each(this._nodes,function(g,h){c(h)&&l.setNode(h,g)}),e.each(this._edgeObjs,function(g){l.hasNode(g.v)&&l.hasNode(g.w)&&l.setEdge(g,v.edge(g))});var p={};function _(g){var h=v.parent(g);return h===void 0||l.hasNode(h)?(p[g]=h,h):h in p?p[h]:_(h)}return this._isCompound&&e.each(l.nodes(),function(g){l.setParent(g,_(g))}),l},n.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},n.prototype.edgeCount=function(){return this._edgeCount},n.prototype.edges=function(){return e.values(this._edgeObjs)},n.prototype.setPath=function(c,l){var v=this,p=arguments;return e.reduce(c,function(_,g){return p.length>1?v.setEdge(_,g,l):v.setEdge(_,g),g}),this},n.prototype.setEdge=function(){var c,l,v,p,_=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,l=g.w,v=g.name,arguments.length===2&&(p=arguments[1],_=!0)):(c=g,l=arguments[1],v=arguments[3],arguments.length>2&&(p=arguments[2],_=!0)),c=""+c,l=""+l,e.isUndefined(v)||(v=""+v);var h=s(this._isDirected,c,l,v);if(e.has(this._edgeLabels,h))return _&&(this._edgeLabels[h]=p),this;if(!e.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(l),this._edgeLabels[h]=_?p:this._defaultEdgeLabelFn(c,l,v);var y=u(this._isDirected,c,l,v);return c=y.v,l=y.w,Object.freeze(y),this._edgeObjs[h]=y,i(this._preds[l],c),i(this._sucs[c],l),this._in[l][h]=y,this._out[c][h]=y,this._edgeCount++,this},n.prototype.edge=function(c,l,v){var p=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,l,v);return this._edgeLabels[p]},n.prototype.hasEdge=function(c,l,v){var p=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,l,v);return e.has(this._edgeLabels,p)},n.prototype.removeEdge=function(c,l,v){var p=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,l,v),_=this._edgeObjs[p];return _&&(c=_.v,l=_.w,delete this._edgeLabels[p],delete this._edgeObjs[p],o(this._preds[l],c),o(this._sucs[c],l),delete this._in[l][p],delete this._out[c][p],this._edgeCount--),this},n.prototype.inEdges=function(c,l){var v=this._in[c];if(v){var p=e.values(v);return l?e.filter(p,function(_){return _.v===l}):p}},n.prototype.outEdges=function(c,l){var v=this._out[c];if(v){var p=e.values(v);return l?e.filter(p,function(_){return _.w===l}):p}},n.prototype.nodeEdges=function(c,l){var v=this.inEdges(c,l);if(v)return v.concat(this.outEdges(c,l))};function i(c,l){c[l]?c[l]++:c[l]=1}function o(c,l){--c[l]||delete c[l]}function s(c,l,v,p){var _=""+l,g=""+v;if(!c&&_>g){var h=_;_=g,g=h}return _+a+g+a+(e.isUndefined(p)?r:p)}function u(c,l,v,p){var _=""+l,g=""+v;if(!c&&_>g){var h=_;_=g,g=h}var y={v:_,w:g};return p&&(y.name=p),y}function f(c,l){return s(c,l.v,l.w,l.name)}return Do}var Go,yv;function A1(){return yv||(yv=1,Go="2.1.8"),Go}var Bo,bv;function I1(){return bv||(bv=1,Bo={Graph:_c(),version:A1()}),Bo}var Uo,mv;function C1(){if(mv)return Uo;mv=1;var e=vr(),r=_c();Uo={write:t,read:i};function t(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:a(o),edges:n(o)};return e.isUndefined(o.graph())||(s.value=e.clone(o.graph())),s}function a(o){return e.map(o.nodes(),function(s){var u=o.node(s),f=o.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(f)||(c.parent=f),c})}function n(o){return e.map(o.edges(),function(s){var u=o.edge(s),f={v:s.v,w:s.w};return e.isUndefined(s.name)||(f.name=s.name),e.isUndefined(u)||(f.value=u),f})}function i(o){var s=new r(o.options).setGraph(o.value);return e.each(o.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(o.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Uo}var zo,wv;function T1(){if(wv)return zo;wv=1;var e=vr();zo=r;function r(t){var a={},n=[],i;function o(s){e.has(a,s)||(a[s]=!0,i.push(s),e.each(t.successors(s),o),e.each(t.predecessors(s),o))}return e.each(t.nodes(),function(s){i=[],o(s),i.length&&n.push(i)}),n}return zo}var Vo,xv;function Eg(){if(xv)return Vo;xv=1;var e=vr();Vo=r;function r(){this._arr=[],this._keyIndices={}}return r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return e.has(this._keyIndices,t)},r.prototype.priority=function(t){var a=this._keyIndices[t];if(a!==void 0)return this._arr[a].priority},r.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,a){var n=this._keyIndices;if(t=String(t),!e.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:a}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,a){var n=this._keyIndices[t];if(a>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+a);this._arr[n].priority=a,this._decrease(n)},r.prototype._heapify=function(t){var a=this._arr,n=2*t,i=n+1,o=t;n<a.length&&(o=a[n].priority<a[o].priority?n:o,i<a.length&&(o=a[i].priority<a[o].priority?i:o),o!==t&&(this._swap(t,o),this._heapify(o)))},r.prototype._decrease=function(t){for(var a=this._arr,n=a[t].priority,i;t!==0&&(i=t>>1,!(a[i].priority<n));)this._swap(t,i),t=i},r.prototype._swap=function(t,a){var n=this._arr,i=this._keyIndices,o=n[t],s=n[a];n[t]=s,n[a]=o,i[s.key]=t,i[o.key]=a},Vo}var Ho,qv;function kg(){if(qv)return Ho;qv=1;var e=vr(),r=Eg();Ho=a;var t=e.constant(1);function a(i,o,s,u){return n(i,String(o),s||t,u||function(f){return i.outEdges(f)})}function n(i,o,s,u){var f={},c=new r,l,v,p=function(_){var g=_.v!==l?_.v:_.w,h=f[g],y=s(_),m=v.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+_+" Weight: "+y);m<h.distance&&(h.distance=m,h.predecessor=l,c.decrease(g,m))};for(i.nodes().forEach(function(_){var g=_===o?0:Number.POSITIVE_INFINITY;f[_]={distance:g},c.add(_,g)});c.size()>0&&(l=c.removeMin(),v=f[l],v.distance!==Number.POSITIVE_INFINITY);)u(l).forEach(p);return f}return Ho}var Ko,Ev;function O1(){if(Ev)return Ko;Ev=1;var e=kg(),r=vr();Ko=t;function t(a,n,i){return r.transform(a.nodes(),function(o,s){o[s]=e(a,s,n,i)},{})}return Ko}var Wo,kv;function Rg(){if(kv)return Wo;kv=1;var e=vr();Wo=r;function r(t){var a=0,n=[],i={},o=[];function s(u){var f=i[u]={onStack:!0,lowlink:a,index:a++};if(n.push(u),t.successors(u).forEach(function(v){e.has(i,v)?i[v].onStack&&(f.lowlink=Math.min(f.lowlink,i[v].index)):(s(v),f.lowlink=Math.min(f.lowlink,i[v].lowlink))}),f.lowlink===f.index){var c=[],l;do l=n.pop(),i[l].onStack=!1,c.push(l);while(u!==l);o.push(c)}}return t.nodes().forEach(function(u){e.has(i,u)||s(u)}),o}return Wo}var Yo,Rv;function N1(){if(Rv)return Yo;Rv=1;var e=vr(),r=Rg();Yo=t;function t(a){return e.filter(r(a),function(n){return n.length>1||n.length===1&&a.hasEdge(n[0],n[0])})}return Yo}var Xo,Sv;function P1(){if(Sv)return Xo;Sv=1;var e=vr();Xo=t;var r=e.constant(1);function t(n,i,o){return a(n,i||r,o||function(s){return n.outEdges(s)})}function a(n,i,o){var s={},u=n.nodes();return u.forEach(function(f){s[f]={},s[f][f]={distance:0},u.forEach(function(c){f!==c&&(s[f][c]={distance:Number.POSITIVE_INFINITY})}),o(f).forEach(function(c){var l=c.v===f?c.w:c.v,v=i(c);s[f][l]={distance:v,predecessor:f}})}),u.forEach(function(f){var c=s[f];u.forEach(function(l){var v=s[l];u.forEach(function(p){var _=v[f],g=c[p],h=v[p],y=_.distance+g.distance;y<h.distance&&(h.distance=y,h.predecessor=g.predecessor)})})}),s}return Xo}var Jo,Av;function Sg(){if(Av)return Jo;Av=1;var e=vr();Jo=r,r.CycleException=t;function r(a){var n={},i={},o=[];function s(u){if(e.has(i,u))throw new t;e.has(n,u)||(i[u]=!0,n[u]=!0,e.each(a.predecessors(u),s),delete i[u],o.push(u))}if(e.each(a.sinks(),s),e.size(n)!==a.nodeCount())throw new t;return o}function t(){}return t.prototype=new Error,Jo}var Zo,Iv;function M1(){if(Iv)return Zo;Iv=1;var e=Sg();Zo=r;function r(t){try{e(t)}catch(a){if(a instanceof e.CycleException)return!1;throw a}return!0}return Zo}var Qo,Cv;function Ag(){if(Cv)return Qo;Cv=1;var e=vr();Qo=r;function r(a,n,i){e.isArray(n)||(n=[n]);var o=(a.isDirected()?a.successors:a.neighbors).bind(a),s=[],u={};return e.each(n,function(f){if(!a.hasNode(f))throw new Error("Graph does not have node: "+f);t(a,f,i==="post",u,o,s)}),s}function t(a,n,i,o,s,u){e.has(o,n)||(o[n]=!0,i||u.push(n),e.each(s(n),function(f){t(a,f,i,o,s,u)}),i&&u.push(n))}return Qo}var es,Tv;function $1(){if(Tv)return es;Tv=1;var e=Ag();es=r;function r(t,a){return e(t,a,"post")}return es}var rs,Ov;function L1(){if(Ov)return rs;Ov=1;var e=Ag();rs=r;function r(t,a){return e(t,a,"pre")}return rs}var ts,Nv;function F1(){if(Nv)return ts;Nv=1;var e=vr(),r=_c(),t=Eg();ts=a;function a(n,i){var o=new r,s={},u=new t,f;function c(v){var p=v.v===f?v.w:v.v,_=u.priority(p);if(_!==void 0){var g=i(v);g<_&&(s[p]=f,u.decrease(p,g))}}if(n.nodeCount()===0)return o;e.each(n.nodes(),function(v){u.add(v,Number.POSITIVE_INFINITY),o.setNode(v)}),u.decrease(n.nodes()[0],0);for(var l=!1;u.size()>0;){if(f=u.removeMin(),e.has(s,f))o.setEdge(f,s[f]);else{if(l)throw new Error("Input graph is not connected: "+n);l=!0}n.nodeEdges(f).forEach(c)}return o}return ts}var ns,Pv;function j1(){return Pv||(Pv=1,ns={components:T1(),dijkstra:kg(),dijkstraAll:O1(),findCycles:N1(),floydWarshall:P1(),isAcyclic:M1(),postorder:$1(),preorder:L1(),prim:F1(),tarjan:Rg(),topsort:Sg()}),ns}var as,Mv;function D1(){if(Mv)return as;Mv=1;var e=I1();return as={Graph:e.Graph,json:C1(),alg:j1(),version:e.version},as}var is,$v;function _r(){if($v)return is;$v=1;var e;if(typeof rc=="function")try{e=D1()}catch{}return e||(e=window.graphlib),is=e,is}var os,Lv;function G1(){if(Lv)return os;Lv=1;var e=Qp(),r=1,t=4;function a(n){return e(n,r|t)}return os=a,os}var ss,Fv;function an(){if(Fv)return ss;Fv=1;var e=Kr(),r=kr(),t=Yt(),a=dr();function n(i,o,s){if(!a(s))return!1;var u=typeof o;return(u=="number"?r(s)&&t(o,s.length):u=="string"&&o in s)?e(s[o],i):!1}return ss=n,ss}var us,jv;function B1(){if(jv)return us;jv=1;var e=nn(),r=Kr(),t=an(),a=Fr(),n=Object.prototype,i=n.hasOwnProperty,o=e(function(s,u){s=Object(s);var f=-1,c=u.length,l=c>2?u[2]:void 0;for(l&&t(u[0],u[1],l)&&(c=1);++f<c;)for(var v=u[f],p=a(v),_=-1,g=p.length;++_<g;){var h=p[_],y=s[h];(y===void 0||r(y,n[h])&&!i.call(s,h))&&(s[h]=v[h])}return s});return us=o,us}var cs,Dv;function U1(){if(Dv)return cs;Dv=1;var e=Rr(),r=kr(),t=Cr();function a(n){return function(i,o,s){var u=Object(i);if(!r(i)){var f=e(o,3);i=t(i),o=function(l){return f(u[l],l,u)}}var c=n(i,o,s);return c>-1?u[f?i[c]:c]:void 0}}return cs=a,cs}var fs,Gv;function z1(){if(Gv)return fs;Gv=1;var e=/\s/;function r(t){for(var a=t.length;a--&&e.test(t.charAt(a)););return a}return fs=r,fs}var ls,Bv;function V1(){if(Bv)return ls;Bv=1;var e=z1(),r=/^\s+/;function t(a){return a&&a.slice(0,e(a)+1).replace(r,"")}return ls=t,ls}var ds,Uv;function H1(){if(Uv)return ds;Uv=1;var e=V1(),r=dr(),t=Jr(),a=NaN,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(f){if(typeof f=="number")return f;if(t(f))return a;if(r(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=r(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=e(f);var l=i.test(f);return l||o.test(f)?s(f.slice(2),l?2:8):n.test(f)?a:+f}return ds=u,ds}var vs,zv;function Ig(){if(zv)return vs;zv=1;var e=H1(),r=1/0,t=17976931348623157e292;function a(n){if(!n)return n===0?n:0;if(n=e(n),n===r||n===-r){var i=n<0?-1:1;return i*t}return n===n?n:0}return vs=a,vs}var hs,Vv;function K1(){if(Vv)return hs;Vv=1;var e=Ig();function r(t){var a=e(t),n=a%1;return a===a?n?a-n:a:0}return hs=r,hs}var ps,Hv;function W1(){if(Hv)return ps;Hv=1;var e=wg(),r=Rr(),t=K1(),a=Math.max;function n(i,o,s){var u=i==null?0:i.length;if(!u)return-1;var f=s==null?0:t(s);return f<0&&(f=a(u+f,0)),e(i,r(o,3),f)}return ps=n,ps}var gs,Kv;function Y1(){if(Kv)return gs;Kv=1;var e=U1(),r=W1(),t=e(r);return gs=t,gs}var _s,Wv;function Cg(){if(Wv)return _s;Wv=1;var e=gc();function r(t){var a=t==null?0:t.length;return a?e(t,1):[]}return _s=r,_s}var ys,Yv;function X1(){if(Yv)return ys;Yv=1;var e=dc(),r=eg(),t=Fr();function a(n,i){return n==null?n:e(n,r(i),t)}return ys=a,ys}var bs,Xv;function J1(){if(Xv)return bs;Xv=1;function e(r){var t=r==null?0:r.length;return t?r[t-1]:void 0}return bs=e,bs}var ms,Jv;function Z1(){if(Jv)return ms;Jv=1;var e=Kt(),r=vc(),t=Rr();function a(n,i){var o={};return i=t(i,3),r(n,function(s,u,f){e(o,u,i(s,u,f))}),o}return ms=a,ms}var ws,Zv;function yc(){if(Zv)return ws;Zv=1;var e=Jr();function r(t,a,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],u=a(s);if(u!=null&&(f===void 0?u===u&&!e(u):n(u,f)))var f=u,c=s}return c}return ws=r,ws}var xs,Qv;function Q1(){if(Qv)return xs;Qv=1;function e(r,t){return r>t}return xs=e,xs}var qs,eh;function e0(){if(eh)return qs;eh=1;var e=yc(),r=Q1(),t=jr();function a(n){return n&&n.length?e(n,t,r):void 0}return qs=a,qs}var Es,rh;function Tg(){if(rh)return Es;rh=1;var e=Kt(),r=Kr();function t(a,n,i){(i!==void 0&&!r(a[n],i)||i===void 0&&!(n in a))&&e(a,n,i)}return Es=t,Es}var ks,th;function r0(){if(th)return ks;th=1;var e=$r(),r=Zt(),t=wr(),a="[object Object]",n=Function.prototype,i=Object.prototype,o=n.toString,s=i.hasOwnProperty,u=o.call(Object);function f(c){if(!t(c)||e(c)!=a)return!1;var l=r(c);if(l===null)return!0;var v=s.call(l,"constructor")&&l.constructor;return typeof v=="function"&&v instanceof v&&o.call(v)==u}return ks=f,ks}var Rs,nh;function Og(){if(nh)return Rs;nh=1;function e(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}return Rs=e,Rs}var Ss,ah;function t0(){if(ah)return Ss;ah=1;var e=yt(),r=Fr();function t(a){return e(a,r(a))}return Ss=t,Ss}var As,ih;function n0(){if(ih)return As;ih=1;var e=Tg(),r=Gp(),t=Xp(),a=Bp(),n=Zp(),i=bt(),o=Ke(),s=xg(),u=Yr(),f=_t(),c=dr(),l=r0(),v=mt(),p=Og(),_=t0();function g(h,y,m,x,w,E,b){var q=p(h,m),S=p(y,m),O=b.get(S);if(O){e(h,m,O);return}var C=E?E(q,S,m+"",h,y,b):void 0,k=C===void 0;if(k){var N=o(S),$=!N&&u(S),B=!N&&!$&&v(S);C=S,N||$||B?o(q)?C=q:s(q)?C=a(q):$?(k=!1,C=r(S,!0)):B?(k=!1,C=t(S,!0)):C=[]:l(S)||i(S)?(C=q,i(q)?C=_(q):(!c(q)||f(q))&&(C=n(S))):k=!1}k&&(b.set(S,C),w(C,S,x,E,b),b.delete(S)),e(h,m,C)}return As=g,As}var Is,oh;function a0(){if(oh)return Is;oh=1;var e=Ht(),r=Tg(),t=dc(),a=n0(),n=dr(),i=Fr(),o=Og();function s(u,f,c,l,v){u!==f&&t(f,function(p,_){if(v||(v=new e),n(p))a(u,f,_,c,s,l,v);else{var g=l?l(o(u,_),p,_+"",u,f,v):void 0;g===void 0&&(g=p),r(u,_,g)}},i)}return Is=s,Is}var Cs,sh;function i0(){if(sh)return Cs;sh=1;var e=nn(),r=an();function t(a){return e(function(n,i){var o=-1,s=i.length,u=s>1?i[s-1]:void 0,f=s>2?i[2]:void 0;for(u=a.length>3&&typeof u=="function"?(s--,u):void 0,f&&r(i[0],i[1],f)&&(u=s<3?void 0:u,s=1),n=Object(n);++o<s;){var c=i[o];c&&a(n,c,o,u)}return n})}return Cs=t,Cs}var Ts,uh;function o0(){if(uh)return Ts;uh=1;var e=a0(),r=i0(),t=r(function(a,n,i){e(a,n,i)});return Ts=t,Ts}var Os,ch;function Ng(){if(ch)return Os;ch=1;function e(r,t){return r<t}return Os=e,Os}var Ns,fh;function s0(){if(fh)return Ns;fh=1;var e=yc(),r=Ng(),t=jr();function a(n){return n&&n.length?e(n,t,r):void 0}return Ns=a,Ns}var Ps,lh;function u0(){if(lh)return Ps;lh=1;var e=yc(),r=Rr(),t=Ng();function a(n,i){return n&&n.length?e(n,r(i,2),t):void 0}return Ps=a,Ps}var Ms,dh;function c0(){if(dh)return Ms;dh=1;var e=yr(),r=function(){return e.Date.now()};return Ms=r,Ms}var $s,vh;function f0(){if(vh)return $s;vh=1;var e=Wt(),r=rn(),t=Yt(),a=dr(),n=wt();function i(o,s,u,f){if(!a(o))return o;s=r(s,o);for(var c=-1,l=s.length,v=l-1,p=o;p!=null&&++c<l;){var _=n(s[c]),g=u;if(_==="__proto__"||_==="constructor"||_==="prototype")return o;if(c!=v){var h=p[_];g=f?f(h,_,p):void 0,g===void 0&&(g=a(h)?h:t(s[c+1])?[]:{})}e(p,_,g),p=p[_]}return o}return $s=i,$s}var Ls,hh;function l0(){if(hh)return Ls;hh=1;var e=tn(),r=f0(),t=rn();function a(n,i,o){for(var s=-1,u=i.length,f={};++s<u;){var c=i[s],l=e(n,c);o(l,c)&&r(f,t(c,n),l)}return f}return Ls=a,Ls}var Fs,ph;function d0(){if(ph)return Fs;ph=1;var e=l0(),r=lg();function t(a,n){return e(a,n,function(i,o){return r(a,o)})}return Fs=t,Fs}var js,gh;function v0(){if(gh)return js;gh=1;var e=Cg(),r=bg(),t=mg();function a(n){return t(r(n,void 0,e),n+"")}return js=a,js}var Ds,_h;function h0(){if(_h)return Ds;_h=1;var e=d0(),r=v0(),t=r(function(a,n){return a==null?{}:e(a,n)});return Ds=t,Ds}var Gs,yh;function p0(){if(yh)return Gs;yh=1;var e=Math.ceil,r=Math.max;function t(a,n,i,o){for(var s=-1,u=r(e((n-a)/(i||1)),0),f=Array(u);u--;)f[o?u:++s]=a,a+=i;return f}return Gs=t,Gs}var Bs,bh;function g0(){if(bh)return Bs;bh=1;var e=p0(),r=an(),t=Ig();function a(n){return function(i,o,s){return s&&typeof s!="number"&&r(i,o,s)&&(o=s=void 0),i=t(i),o===void 0?(o=i,i=0):o=t(o),s=s===void 0?i<o?1:-1:t(s),e(i,o,s,n)}}return Bs=a,Bs}var Us,mh;function _0(){if(mh)return Us;mh=1;var e=g0(),r=e();return Us=r,Us}var zs,wh;function y0(){if(wh)return zs;wh=1;function e(r,t){var a=r.length;for(r.sort(t);a--;)r[a]=r[a].value;return r}return zs=e,zs}var Vs,xh;function b0(){if(xh)return Vs;xh=1;var e=Jr();function r(t,a){if(t!==a){var n=t!==void 0,i=t===null,o=t===t,s=e(t),u=a!==void 0,f=a===null,c=a===a,l=e(a);if(!f&&!l&&!s&&t>a||s&&u&&c&&!f&&!l||i&&u&&c||!n&&c||!o)return 1;if(!i&&!s&&!l&&t<a||l&&n&&o&&!i&&!s||f&&n&&o||!u&&o||!c)return-1}return 0}return Vs=r,Vs}var Hs,qh;function m0(){if(qh)return Hs;qh=1;var e=b0();function r(t,a,n){for(var i=-1,o=t.criteria,s=a.criteria,u=o.length,f=n.length;++i<u;){var c=e(o[i],s[i]);if(c){if(i>=f)return c;var l=n[i];return c*(l=="desc"?-1:1)}}return t.index-a.index}return Hs=r,Hs}var Ks,Eh;function w0(){if(Eh)return Ks;Eh=1;var e=en(),r=tn(),t=Rr(),a=gg(),n=y0(),i=Xt(),o=m0(),s=jr(),u=Ke();function f(c,l,v){l.length?l=e(l,function(g){return u(g)?function(h){return r(h,g.length===1?g[0]:g)}:g}):l=[s];var p=-1;l=e(l,i(t));var _=a(c,function(g,h,y){var m=e(l,function(x){return x(g)});return{criteria:m,index:++p,value:g}});return n(_,function(g,h){return o(g,h,v)})}return Ks=f,Ks}var Ws,kh;function x0(){if(kh)return Ws;kh=1;var e=gc(),r=w0(),t=nn(),a=an(),n=t(function(i,o){if(i==null)return[];var s=o.length;return s>1&&a(i,o[0],o[1])?o=[]:s>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),r(i,e(o,1),[])});return Ws=n,Ws}var Ys,Rh;function q0(){if(Rh)return Ys;Rh=1;var e=cg(),r=0;function t(a){var n=++r;return e(a)+n}return Ys=t,Ys}var Xs,Sh;function E0(){if(Sh)return Xs;Sh=1;function e(r,t,a){for(var n=-1,i=r.length,o=t.length,s={};++n<i;){var u=n<o?t[n]:void 0;a(s,r[n],u)}return s}return Xs=e,Xs}var Js,Ah;function k0(){if(Ah)return Js;Ah=1;var e=Wt(),r=E0();function t(a,n){return r(a||[],n||[],e)}return Js=t,Js}var Zs,Ih;function Ge(){if(Ih)return Zs;Ih=1;var e;if(typeof rc=="function")try{e={cloneDeep:G1(),constant:lc(),defaults:B1(),each:tg(),filter:vg(),find:Y1(),flatten:Cg(),forEach:rg(),forIn:X1(),has:hg(),isUndefined:pg(),last:J1(),map:_g(),mapValues:Z1(),max:e0(),merge:o0(),min:s0(),minBy:u0(),now:c0(),pick:h0(),range:_0(),reduce:yg(),sortBy:x0(),uniqueId:q0(),values:qg(),zipObject:k0()}}catch{}return e||(e=window._),Zs=e,Zs}var Qs,Ch;function R0(){if(Ch)return Qs;Ch=1,Qs=e;function e(){var a={};a._next=a._prev=a,this._sentinel=a}e.prototype.dequeue=function(){var a=this._sentinel,n=a._prev;if(n!==a)return r(n),n},e.prototype.enqueue=function(a){var n=this._sentinel;a._prev&&a._next&&r(a),a._next=n._next,n._next._prev=a,n._next=a,a._prev=n},e.prototype.toString=function(){for(var a=[],n=this._sentinel,i=n._prev;i!==n;)a.push(JSON.stringify(i,t)),i=i._prev;return"["+a.join(", ")+"]"};function r(a){a._prev._next=a._next,a._next._prev=a._prev,delete a._next,delete a._prev}function t(a,n){if(a!=="_next"&&a!=="_prev")return n}return Qs}var eu,Th;function S0(){if(Th)return eu;Th=1;var e=Ge(),r=_r().Graph,t=R0();eu=n;var a=e.constant(1);function n(f,c){if(f.nodeCount()<=1)return[];var l=s(f,c||a),v=i(l.graph,l.buckets,l.zeroIdx);return e.flatten(e.map(v,function(p){return f.outEdges(p.v,p.w)}),!0)}function i(f,c,l){for(var v=[],p=c[c.length-1],_=c[0],g;f.nodeCount();){for(;g=_.dequeue();)o(f,c,l,g);for(;g=p.dequeue();)o(f,c,l,g);if(f.nodeCount()){for(var h=c.length-2;h>0;--h)if(g=c[h].dequeue(),g){v=v.concat(o(f,c,l,g,!0));break}}}return v}function o(f,c,l,v,p){var _=p?[]:void 0;return e.forEach(f.inEdges(v.v),function(g){var h=f.edge(g),y=f.node(g.v);p&&_.push({v:g.v,w:g.w}),y.out-=h,u(c,l,y)}),e.forEach(f.outEdges(v.v),function(g){var h=f.edge(g),y=g.w,m=f.node(y);m.in-=h,u(c,l,m)}),f.removeNode(v.v),_}function s(f,c){var l=new r,v=0,p=0;e.forEach(f.nodes(),function(h){l.setNode(h,{v:h,in:0,out:0})}),e.forEach(f.edges(),function(h){var y=l.edge(h.v,h.w)||0,m=c(h),x=y+m;l.setEdge(h.v,h.w,x),p=Math.max(p,l.node(h.v).out+=m),v=Math.max(v,l.node(h.w).in+=m)});var _=e.range(p+v+3).map(function(){return new t}),g=v+1;return e.forEach(l.nodes(),function(h){u(_,g,l.node(h))}),{graph:l,buckets:_,zeroIdx:g}}function u(f,c,l){l.out?l.in?f[l.out-l.in+c].enqueue(l):f[f.length-1].enqueue(l):f[0].enqueue(l)}return eu}var ru,Oh;function A0(){if(Oh)return ru;Oh=1;var e=Ge(),r=S0();ru={run:t,undo:n};function t(i){var o=i.graph().acyclicer==="greedy"?r(i,s(i)):a(i);e.forEach(o,function(u){var f=i.edge(u);i.removeEdge(u),f.forwardName=u.name,f.reversed=!0,i.setEdge(u.w,u.v,f,e.uniqueId("rev"))});function s(u){return function(f){return u.edge(f).weight}}}function a(i){var o=[],s={},u={};function f(c){e.has(u,c)||(u[c]=!0,s[c]=!0,e.forEach(i.outEdges(c),function(l){e.has(s,l.w)?o.push(l):f(l.w)}),delete s[c])}return e.forEach(i.nodes(),f),o}function n(i){e.forEach(i.edges(),function(o){var s=i.edge(o);if(s.reversed){i.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(o.w,o.v,s,u)}})}return ru}var tu,Nh;function ar(){if(Nh)return tu;Nh=1;var e=Ge(),r=_r().Graph;tu={addDummyNode:t,simplify:a,asNonCompoundGraph:n,successorWeights:i,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:f,removeEmptyRanks:c,addBorderNode:l,maxRank:v,partition:p,time:_,notime:g};function t(h,y,m,x){var w;do w=e.uniqueId(x);while(h.hasNode(w));return m.dummy=y,h.setNode(w,m),w}function a(h){var y=new r().setGraph(h.graph());return e.forEach(h.nodes(),function(m){y.setNode(m,h.node(m))}),e.forEach(h.edges(),function(m){var x=y.edge(m.v,m.w)||{weight:0,minlen:1},w=h.edge(m);y.setEdge(m.v,m.w,{weight:x.weight+w.weight,minlen:Math.max(x.minlen,w.minlen)})}),y}function n(h){var y=new r({multigraph:h.isMultigraph()}).setGraph(h.graph());return e.forEach(h.nodes(),function(m){h.children(m).length||y.setNode(m,h.node(m))}),e.forEach(h.edges(),function(m){y.setEdge(m,h.edge(m))}),y}function i(h){var y=e.map(h.nodes(),function(m){var x={};return e.forEach(h.outEdges(m),function(w){x[w.w]=(x[w.w]||0)+h.edge(w).weight}),x});return e.zipObject(h.nodes(),y)}function o(h){var y=e.map(h.nodes(),function(m){var x={};return e.forEach(h.inEdges(m),function(w){x[w.v]=(x[w.v]||0)+h.edge(w).weight}),x});return e.zipObject(h.nodes(),y)}function s(h,y){var m=h.x,x=h.y,w=y.x-m,E=y.y-x,b=h.width/2,q=h.height/2;if(!w&&!E)throw new Error("Not possible to find intersection inside of the rectangle");var S,O;return Math.abs(E)*b>Math.abs(w)*q?(E<0&&(q=-q),S=q*w/E,O=q):(w<0&&(b=-b),S=b,O=b*E/w),{x:m+S,y:x+O}}function u(h){var y=e.map(e.range(v(h)+1),function(){return[]});return e.forEach(h.nodes(),function(m){var x=h.node(m),w=x.rank;e.isUndefined(w)||(y[w][x.order]=m)}),y}function f(h){var y=e.min(e.map(h.nodes(),function(m){return h.node(m).rank}));e.forEach(h.nodes(),function(m){var x=h.node(m);e.has(x,"rank")&&(x.rank-=y)})}function c(h){var y=e.min(e.map(h.nodes(),function(E){return h.node(E).rank})),m=[];e.forEach(h.nodes(),function(E){var b=h.node(E).rank-y;m[b]||(m[b]=[]),m[b].push(E)});var x=0,w=h.graph().nodeRankFactor;e.forEach(m,function(E,b){e.isUndefined(E)&&b%w!==0?--x:x&&e.forEach(E,function(q){h.node(q).rank+=x})})}function l(h,y,m,x){var w={width:0,height:0};return arguments.length>=4&&(w.rank=m,w.order=x),t(h,"border",w,y)}function v(h){return e.max(e.map(h.nodes(),function(y){var m=h.node(y).rank;if(!e.isUndefined(m))return m}))}function p(h,y){var m={lhs:[],rhs:[]};return e.forEach(h,function(x){y(x)?m.lhs.push(x):m.rhs.push(x)}),m}function _(h,y){var m=e.now();try{return y()}finally{console.log(h+" time: "+(e.now()-m)+"ms")}}function g(h,y){return y()}return tu}var nu,Ph;function I0(){if(Ph)return nu;Ph=1;var e=Ge(),r=ar();nu={run:t,undo:n};function t(i){i.graph().dummyChains=[],e.forEach(i.edges(),function(o){a(i,o)})}function a(i,o){var s=o.v,u=i.node(s).rank,f=o.w,c=i.node(f).rank,l=o.name,v=i.edge(o),p=v.labelRank;if(c!==u+1){i.removeEdge(o);var _,g,h;for(h=0,++u;u<c;++h,++u)v.points=[],g={width:0,height:0,edgeLabel:v,edgeObj:o,rank:u},_=r.addDummyNode(i,"edge",g,"_d"),u===p&&(g.width=v.width,g.height=v.height,g.dummy="edge-label",g.labelpos=v.labelpos),i.setEdge(s,_,{weight:v.weight},l),h===0&&i.graph().dummyChains.push(_),s=_;i.setEdge(s,f,{weight:v.weight},l)}}function n(i){e.forEach(i.graph().dummyChains,function(o){var s=i.node(o),u=s.edgeLabel,f;for(i.setEdge(s.edgeObj,u);s.dummy;)f=i.successors(o)[0],i.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=f,s=i.node(o)})}return nu}var au,Mh;function Ft(){if(Mh)return au;Mh=1;var e=Ge();au={longestPath:r,slack:t};function r(a){var n={};function i(o){var s=a.node(o);if(e.has(n,o))return s.rank;n[o]=!0;var u=e.min(e.map(a.outEdges(o),function(f){return i(f.w)-a.edge(f).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}e.forEach(a.sources(),i)}function t(a,n){return a.node(n.w).rank-a.node(n.v).rank-a.edge(n).minlen}return au}var iu,$h;function Pg(){if($h)return iu;$h=1;var e=Ge(),r=_r().Graph,t=Ft().slack;iu=a;function a(s){var u=new r({directed:!1}),f=s.nodes()[0],c=s.nodeCount();u.setNode(f,{});for(var l,v;n(u,s)<c;)l=i(u,s),v=u.hasNode(l.v)?t(s,l):-t(s,l),o(u,s,v);return u}function n(s,u){function f(c){e.forEach(u.nodeEdges(c),function(l){var v=l.v,p=c===v?l.w:v;!s.hasNode(p)&&!t(u,l)&&(s.setNode(p,{}),s.setEdge(c,p,{}),f(p))})}return e.forEach(s.nodes(),f),s.nodeCount()}function i(s,u){return e.minBy(u.edges(),function(f){if(s.hasNode(f.v)!==s.hasNode(f.w))return t(u,f)})}function o(s,u,f){e.forEach(s.nodes(),function(c){u.node(c).rank+=f})}return iu}var ou,Lh;function C0(){if(Lh)return ou;Lh=1;var e=Ge(),r=Pg(),t=Ft().slack,a=Ft().longestPath,n=_r().alg.preorder,i=_r().alg.postorder,o=ar().simplify;ou=s,s.initLowLimValues=l,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=p,s.enterEdge=_,s.exchangeEdges=g;function s(x){x=o(x),a(x);var w=r(x);l(w),u(w,x);for(var E,b;E=p(w);)b=_(w,x,E),g(w,x,E,b)}function u(x,w){var E=i(x,x.nodes());E=E.slice(0,E.length-1),e.forEach(E,function(b){f(x,w,b)})}function f(x,w,E){var b=x.node(E),q=b.parent;x.edge(E,q).cutvalue=c(x,w,E)}function c(x,w,E){var b=x.node(E),q=b.parent,S=!0,O=w.edge(E,q),C=0;return O||(S=!1,O=w.edge(q,E)),C=O.weight,e.forEach(w.nodeEdges(E),function(k){var N=k.v===E,$=N?k.w:k.v;if($!==q){var B=N===S,V=w.edge(k).weight;if(C+=B?V:-V,y(x,E,$)){var X=x.edge(E,$).cutvalue;C+=B?-X:X}}}),C}function l(x,w){arguments.length<2&&(w=x.nodes()[0]),v(x,{},1,w)}function v(x,w,E,b,q){var S=E,O=x.node(b);return w[b]=!0,e.forEach(x.neighbors(b),function(C){e.has(w,C)||(E=v(x,w,E,C,b))}),O.low=S,O.lim=E++,q?O.parent=q:delete O.parent,E}function p(x){return e.find(x.edges(),function(w){return x.edge(w).cutvalue<0})}function _(x,w,E){var b=E.v,q=E.w;w.hasEdge(b,q)||(b=E.w,q=E.v);var S=x.node(b),O=x.node(q),C=S,k=!1;S.lim>O.lim&&(C=O,k=!0);var N=e.filter(w.edges(),function($){return k===m(x,x.node($.v),C)&&k!==m(x,x.node($.w),C)});return e.minBy(N,function($){return t(w,$)})}function g(x,w,E,b){var q=E.v,S=E.w;x.removeEdge(q,S),x.setEdge(b.v,b.w,{}),l(x),u(x,w),h(x,w)}function h(x,w){var E=e.find(x.nodes(),function(q){return!w.node(q).parent}),b=n(x,E);b=b.slice(1),e.forEach(b,function(q){var S=x.node(q).parent,O=w.edge(q,S),C=!1;O||(O=w.edge(S,q),C=!0),w.node(q).rank=w.node(S).rank+(C?O.minlen:-O.minlen)})}function y(x,w,E){return x.hasEdge(w,E)}function m(x,w,E){return E.low<=w.lim&&w.lim<=E.lim}return ou}var su,Fh;function T0(){if(Fh)return su;Fh=1;var e=Ft(),r=e.longestPath,t=Pg(),a=C0();su=n;function n(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":i(u);break;default:s(u)}}var i=r;function o(u){r(u),t(u)}function s(u){a(u)}return su}var uu,jh;function O0(){if(jh)return uu;jh=1;var e=Ge();uu=r;function r(n){var i=a(n);e.forEach(n.graph().dummyChains,function(o){for(var s=n.node(o),u=s.edgeObj,f=t(n,i,u.v,u.w),c=f.path,l=f.lca,v=0,p=c[v],_=!0;o!==u.w;){if(s=n.node(o),_){for(;(p=c[v])!==l&&n.node(p).maxRank<s.rank;)v++;p===l&&(_=!1)}if(!_){for(;v<c.length-1&&n.node(p=c[v+1]).minRank<=s.rank;)v++;p=c[v]}n.setParent(o,p),o=n.successors(o)[0]}})}function t(n,i,o,s){var u=[],f=[],c=Math.min(i[o].low,i[s].low),l=Math.max(i[o].lim,i[s].lim),v,p;v=o;do v=n.parent(v),u.push(v);while(v&&(i[v].low>c||l>i[v].lim));for(p=v,v=s;(v=n.parent(v))!==p;)f.push(v);return{path:u.concat(f.reverse()),lca:p}}function a(n){var i={},o=0;function s(u){var f=o;e.forEach(n.children(u),s),i[u]={low:f,lim:o++}}return e.forEach(n.children(),s),i}return uu}var cu,Dh;function N0(){if(Dh)return cu;Dh=1;var e=Ge(),r=ar();cu={run:t,cleanup:o};function t(s){var u=r.addDummyNode(s,"root",{},"_root"),f=n(s),c=e.max(e.values(f))-1,l=2*c+1;s.graph().nestingRoot=u,e.forEach(s.edges(),function(p){s.edge(p).minlen*=l});var v=i(s)+1;e.forEach(s.children(),function(p){a(s,u,l,v,c,f,p)}),s.graph().nodeRankFactor=l}function a(s,u,f,c,l,v,p){var _=s.children(p);if(!_.length){p!==u&&s.setEdge(u,p,{weight:0,minlen:f});return}var g=r.addBorderNode(s,"_bt"),h=r.addBorderNode(s,"_bb"),y=s.node(p);s.setParent(g,p),y.borderTop=g,s.setParent(h,p),y.borderBottom=h,e.forEach(_,function(m){a(s,u,f,c,l,v,m);var x=s.node(m),w=x.borderTop?x.borderTop:m,E=x.borderBottom?x.borderBottom:m,b=x.borderTop?c:2*c,q=w!==E?1:l-v[p]+1;s.setEdge(g,w,{weight:b,minlen:q,nestingEdge:!0}),s.setEdge(E,h,{weight:b,minlen:q,nestingEdge:!0})}),s.parent(p)||s.setEdge(u,g,{weight:0,minlen:l+v[p]})}function n(s){var u={};function f(c,l){var v=s.children(c);v&&v.length&&e.forEach(v,function(p){f(p,l+1)}),u[c]=l}return e.forEach(s.children(),function(c){f(c,1)}),u}function i(s){return e.reduce(s.edges(),function(u,f){return u+s.edge(f).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(s.edges(),function(f){var c=s.edge(f);c.nestingEdge&&s.removeEdge(f)})}return cu}var fu,Gh;function P0(){if(Gh)return fu;Gh=1;var e=Ge(),r=ar();fu=t;function t(n){function i(o){var s=n.children(o),u=n.node(o);if(s.length&&e.forEach(s,i),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var f=u.minRank,c=u.maxRank+1;f<c;++f)a(n,"borderLeft","_bl",o,u,f),a(n,"borderRight","_br",o,u,f)}}e.forEach(n.children(),i)}function a(n,i,o,s,u,f){var c={width:0,height:0,rank:f,borderType:i},l=u[i][f-1],v=r.addDummyNode(n,"border",c,o);u[i][f]=v,n.setParent(v,s),l&&n.setEdge(l,v,{weight:1})}return fu}var lu,Bh;function M0(){if(Bh)return lu;Bh=1;var e=Ge();lu={adjust:r,undo:t};function r(f){var c=f.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&a(f)}function t(f){var c=f.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(f),(c==="lr"||c==="rl")&&(s(f),a(f))}function a(f){e.forEach(f.nodes(),function(c){n(f.node(c))}),e.forEach(f.edges(),function(c){n(f.edge(c))})}function n(f){var c=f.width;f.width=f.height,f.height=c}function i(f){e.forEach(f.nodes(),function(c){o(f.node(c))}),e.forEach(f.edges(),function(c){var l=f.edge(c);e.forEach(l.points,o),e.has(l,"y")&&o(l)})}function o(f){f.y=-f.y}function s(f){e.forEach(f.nodes(),function(c){u(f.node(c))}),e.forEach(f.edges(),function(c){var l=f.edge(c);e.forEach(l.points,u),e.has(l,"x")&&u(l)})}function u(f){var c=f.x;f.x=f.y,f.y=c}return lu}var du,Uh;function $0(){if(Uh)return du;Uh=1;var e=Ge();du=r;function r(t){var a={},n=e.filter(t.nodes(),function(f){return!t.children(f).length}),i=e.max(e.map(n,function(f){return t.node(f).rank})),o=e.map(e.range(i+1),function(){return[]});function s(f){if(!e.has(a,f)){a[f]=!0;var c=t.node(f);o[c.rank].push(f),e.forEach(t.successors(f),s)}}var u=e.sortBy(n,function(f){return t.node(f).rank});return e.forEach(u,s),o}return du}var vu,zh;function L0(){if(zh)return vu;zh=1;var e=Ge();vu=r;function r(a,n){for(var i=0,o=1;o<n.length;++o)i+=t(a,n[o-1],n[o]);return i}function t(a,n,i){for(var o=e.zipObject(i,e.map(i,function(v,p){return p})),s=e.flatten(e.map(n,function(v){return e.sortBy(e.map(a.outEdges(v),function(p){return{pos:o[p.w],weight:a.edge(p).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var f=2*u-1;u-=1;var c=e.map(new Array(f),function(){return 0}),l=0;return e.forEach(s.forEach(function(v){var p=v.pos+u;c[p]+=v.weight;for(var _=0;p>0;)p%2&&(_+=c[p+1]),p=p-1>>1,c[p]+=v.weight;l+=v.weight*_})),l}return vu}var hu,Vh;function F0(){if(Vh)return hu;Vh=1;var e=Ge();hu=r;function r(t,a){return e.map(a,function(n){var i=t.inEdges(n);if(i.length){var o=e.reduce(i,function(s,u){var f=t.edge(u),c=t.node(u.v);return{sum:s.sum+f.weight*c.order,weight:s.weight+f.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}return hu}var pu,Hh;function j0(){if(Hh)return pu;Hh=1;var e=Ge();pu=r;function r(n,i){var o={};e.forEach(n,function(u,f){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(i.edges(),function(u){var f=o[u.v],c=o[u.w];!e.isUndefined(f)&&!e.isUndefined(c)&&(c.indegree++,f.out.push(o[u.w]))});var s=e.filter(o,function(u){return!u.indegree});return t(s)}function t(n){var i=[];function o(f){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(f.barycenter)||c.barycenter>=f.barycenter)&&a(f,c)}}function s(f){return function(c){c.in.push(f),--c.indegree===0&&n.push(c)}}for(;n.length;){var u=n.pop();i.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,s(u))}return e.map(e.filter(i,function(f){return!f.merged}),function(f){return e.pick(f,["vs","i","barycenter","weight"])})}function a(n,i){var o=0,s=0;n.weight&&(o+=n.barycenter*n.weight,s+=n.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0}return pu}var gu,Kh;function D0(){if(Kh)return gu;Kh=1;var e=Ge(),r=ar();gu=t;function t(i,o){var s=r.partition(i,function(g){return e.has(g,"barycenter")}),u=s.lhs,f=e.sortBy(s.rhs,function(g){return-g.i}),c=[],l=0,v=0,p=0;u.sort(n(!!o)),p=a(c,f,p),e.forEach(u,function(g){p+=g.vs.length,c.push(g.vs),l+=g.barycenter*g.weight,v+=g.weight,p=a(c,f,p)});var _={vs:e.flatten(c,!0)};return v&&(_.barycenter=l/v,_.weight=v),_}function a(i,o,s){for(var u;o.length&&(u=e.last(o)).i<=s;)o.pop(),i.push(u.vs),s++;return s}function n(i){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:i?s.i-o.i:o.i-s.i}}return gu}var _u,Wh;function G0(){if(Wh)return _u;Wh=1;var e=Ge(),r=F0(),t=j0(),a=D0();_u=n;function n(s,u,f,c){var l=s.children(u),v=s.node(u),p=v?v.borderLeft:void 0,_=v?v.borderRight:void 0,g={};p&&(l=e.filter(l,function(E){return E!==p&&E!==_}));var h=r(s,l);e.forEach(h,function(E){if(s.children(E.v).length){var b=n(s,E.v,f,c);g[E.v]=b,e.has(b,"barycenter")&&o(E,b)}});var y=t(h,f);i(y,g);var m=a(y,c);if(p&&(m.vs=e.flatten([p,m.vs,_],!0),s.predecessors(p).length)){var x=s.node(s.predecessors(p)[0]),w=s.node(s.predecessors(_)[0]);e.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+x.order+w.order)/(m.weight+2),m.weight+=2}return m}function i(s,u){e.forEach(s,function(f){f.vs=e.flatten(f.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(s,u){e.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return _u}var yu,Yh;function B0(){if(Yh)return yu;Yh=1;var e=Ge(),r=_r().Graph;yu=t;function t(n,i,o){var s=a(n),u=new r({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(f){return n.node(f)});return e.forEach(n.nodes(),function(f){var c=n.node(f),l=n.parent(f);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(u.setNode(f),u.setParent(f,l||s),e.forEach(n[o](f),function(v){var p=v.v===f?v.w:v.v,_=u.edge(p,f),g=e.isUndefined(_)?0:_.weight;u.setEdge(p,f,{weight:n.edge(v).weight+g})}),e.has(c,"minRank")&&u.setNode(f,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),u}function a(n){for(var i;n.hasNode(i=e.uniqueId("_root")););return i}return yu}var bu,Xh;function U0(){if(Xh)return bu;Xh=1;var e=Ge();bu=r;function r(t,a,n){var i={},o;e.forEach(n,function(s){for(var u=t.parent(s),f,c;u;){if(f=t.parent(u),f?(c=i[f],i[f]=u):(c=o,o=u),c&&c!==u){a.setEdge(c,u);return}u=f}})}return bu}var mu,Jh;function z0(){if(Jh)return mu;Jh=1;var e=Ge(),r=$0(),t=L0(),a=G0(),n=B0(),i=U0(),o=_r().Graph,s=ar();mu=u;function u(v){var p=s.maxRank(v),_=f(v,e.range(1,p+1),"inEdges"),g=f(v,e.range(p-1,-1,-1),"outEdges"),h=r(v);l(v,h);for(var y=Number.POSITIVE_INFINITY,m,x=0,w=0;w<4;++x,++w){c(x%2?_:g,x%4>=2),h=s.buildLayerMatrix(v);var E=t(v,h);E<y&&(w=0,m=e.cloneDeep(h),y=E)}l(v,m)}function f(v,p,_){return e.map(p,function(g){return n(v,g,_)})}function c(v,p){var _=new o;e.forEach(v,function(g){var h=g.graph().root,y=a(g,h,_,p);e.forEach(y.vs,function(m,x){g.node(m).order=x}),i(g,_,y.vs)})}function l(v,p){e.forEach(p,function(_){e.forEach(_,function(g,h){v.node(g).order=h})})}return mu}var wu,Zh;function V0(){if(Zh)return wu;Zh=1;var e=Ge(),r=_r().Graph,t=ar();wu={positionX:_,findType1Conflicts:a,findType2Conflicts:n,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:f,alignCoordinates:v,findSmallestWidthAlignment:l,balance:p};function a(y,m){var x={};function w(E,b){var q=0,S=0,O=E.length,C=e.last(b);return e.forEach(b,function(k,N){var $=i(y,k),B=$?y.node($).order:O;($||k===C)&&(e.forEach(b.slice(S,N+1),function(V){e.forEach(y.predecessors(V),function(X){var le=y.node(X),se=le.order;(se<q||B<se)&&!(le.dummy&&y.node(V).dummy)&&o(x,X,V)})}),S=N+1,q=B)}),b}return e.reduce(m,w),x}function n(y,m){var x={};function w(b,q,S,O,C){var k;e.forEach(e.range(q,S),function(N){k=b[N],y.node(k).dummy&&e.forEach(y.predecessors(k),function($){var B=y.node($);B.dummy&&(B.order<O||B.order>C)&&o(x,$,k)})})}function E(b,q){var S=-1,O,C=0;return e.forEach(q,function(k,N){if(y.node(k).dummy==="border"){var $=y.predecessors(k);$.length&&(O=y.node($[0]).order,w(q,C,N,S,O),C=N,S=O)}w(q,C,q.length,O,b.length)}),q}return e.reduce(m,E),x}function i(y,m){if(y.node(m).dummy)return e.find(y.predecessors(m),function(x){return y.node(x).dummy})}function o(y,m,x){if(m>x){var w=m;m=x,x=w}var E=y[m];E||(y[m]=E={}),E[x]=!0}function s(y,m,x){if(m>x){var w=m;m=x,x=w}return e.has(y[m],x)}function u(y,m,x,w){var E={},b={},q={};return e.forEach(m,function(S){e.forEach(S,function(O,C){E[O]=O,b[O]=O,q[O]=C})}),e.forEach(m,function(S){var O=-1;e.forEach(S,function(C){var k=w(C);if(k.length){k=e.sortBy(k,function(X){return q[X]});for(var N=(k.length-1)/2,$=Math.floor(N),B=Math.ceil(N);$<=B;++$){var V=k[$];b[C]===C&&O<q[V]&&!s(x,C,V)&&(b[V]=C,b[C]=E[C]=E[V],O=q[V])}}})}),{root:E,align:b}}function f(y,m,x,w,E){var b={},q=c(y,m,x,E),S=E?"borderLeft":"borderRight";function O(N,$){for(var B=q.nodes(),V=B.pop(),X={};V;)X[V]?N(V):(X[V]=!0,B.push(V),B=B.concat($(V))),V=B.pop()}function C(N){b[N]=q.inEdges(N).reduce(function($,B){return Math.max($,b[B.v]+q.edge(B))},0)}function k(N){var $=q.outEdges(N).reduce(function(V,X){return Math.min(V,b[X.w]-q.edge(X))},Number.POSITIVE_INFINITY),B=y.node(N);$!==Number.POSITIVE_INFINITY&&B.borderType!==S&&(b[N]=Math.max(b[N],$))}return O(C,q.predecessors.bind(q)),O(k,q.successors.bind(q)),e.forEach(w,function(N){b[N]=b[x[N]]}),b}function c(y,m,x,w){var E=new r,b=y.graph(),q=g(b.nodesep,b.edgesep,w);return e.forEach(m,function(S){var O;e.forEach(S,function(C){var k=x[C];if(E.setNode(k),O){var N=x[O],$=E.edge(N,k);E.setEdge(N,k,Math.max(q(y,C,O),$||0))}O=C})}),E}function l(y,m){return e.minBy(e.values(m),function(x){var w=Number.NEGATIVE_INFINITY,E=Number.POSITIVE_INFINITY;return e.forIn(x,function(b,q){var S=h(y,q)/2;w=Math.max(b+S,w),E=Math.min(b-S,E)}),w-E})}function v(y,m){var x=e.values(m),w=e.min(x),E=e.max(x);e.forEach(["u","d"],function(b){e.forEach(["l","r"],function(q){var S=b+q,O=y[S],C;if(O!==m){var k=e.values(O);C=q==="l"?w-e.min(k):E-e.max(k),C&&(y[S]=e.mapValues(O,function(N){return N+C}))}})})}function p(y,m){return e.mapValues(y.ul,function(x,w){if(m)return y[m.toLowerCase()][w];var E=e.sortBy(e.map(y,w));return(E[1]+E[2])/2})}function _(y){var m=t.buildLayerMatrix(y),x=e.merge(a(y,m),n(y,m)),w={},E;e.forEach(["u","d"],function(q){E=q==="u"?m:e.values(m).reverse(),e.forEach(["l","r"],function(S){S==="r"&&(E=e.map(E,function(N){return e.values(N).reverse()}));var O=(q==="u"?y.predecessors:y.successors).bind(y),C=u(y,E,x,O),k=f(y,E,C.root,C.align,S==="r");S==="r"&&(k=e.mapValues(k,function(N){return-N})),w[q+S]=k})});var b=l(y,w);return v(w,b),p(w,y.graph().align)}function g(y,m,x){return function(w,E,b){var q=w.node(E),S=w.node(b),O=0,C;if(O+=q.width/2,e.has(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":C=-q.width/2;break;case"r":C=q.width/2;break}if(C&&(O+=x?C:-C),C=0,O+=(q.dummy?m:y)/2,O+=(S.dummy?m:y)/2,O+=S.width/2,e.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":C=S.width/2;break;case"r":C=-S.width/2;break}return C&&(O+=x?C:-C),C=0,O}}function h(y,m){return y.node(m).width}return wu}var xu,Qh;function H0(){if(Qh)return xu;Qh=1;var e=Ge(),r=ar(),t=V0().positionX;xu=a;function a(i){i=r.asNonCompoundGraph(i),n(i),e.forEach(t(i),function(o,s){i.node(s).x=o})}function n(i){var o=r.buildLayerMatrix(i),s=i.graph().ranksep,u=0;e.forEach(o,function(f){var c=e.max(e.map(f,function(l){return i.node(l).height}));e.forEach(f,function(l){i.node(l).y=u+c/2}),u+=c+s})}return xu}var qu,ep;function K0(){if(ep)return qu;ep=1;var e=Ge(),r=A0(),t=I0(),a=T0(),n=ar().normalizeRanks,i=O0(),o=ar().removeEmptyRanks,s=N0(),u=P0(),f=M0(),c=z0(),l=H0(),v=ar(),p=_r().Graph;qu=_;function _(R,P){var L=P&&P.debugTiming?v.time:v.notime;L("layout",function(){var F=L("  buildLayoutGraph",function(){return O(R)});L("  runLayout",function(){g(F,L)}),L("  updateInputGraph",function(){h(R,F)})})}function g(R,P){P("    makeSpaceForEdgeLabels",function(){C(R)}),P("    removeSelfEdges",function(){Ee(R)}),P("    acyclic",function(){r.run(R)}),P("    nestingGraph.run",function(){s.run(R)}),P("    rank",function(){a(v.asNonCompoundGraph(R))}),P("    injectEdgeLabelProxies",function(){k(R)}),P("    removeEmptyRanks",function(){o(R)}),P("    nestingGraph.cleanup",function(){s.cleanup(R)}),P("    normalizeRanks",function(){n(R)}),P("    assignRankMinMax",function(){N(R)}),P("    removeEdgeLabelProxies",function(){$(R)}),P("    normalize.run",function(){t.run(R)}),P("    parentDummyChains",function(){i(R)}),P("    addBorderSegments",function(){u(R)}),P("    order",function(){c(R)}),P("    insertSelfEdges",function(){Oe(R)}),P("    adjustCoordinateSystem",function(){f.adjust(R)}),P("    position",function(){l(R)}),P("    positionSelfEdges",function(){ke(R)}),P("    removeBorderNodes",function(){se(R)}),P("    normalize.undo",function(){t.undo(R)}),P("    fixupEdgeLabelCoords",function(){X(R)}),P("    undoCoordinateSystem",function(){f.undo(R)}),P("    translateGraph",function(){B(R)}),P("    assignNodeIntersects",function(){V(R)}),P("    reversePoints",function(){le(R)}),P("    acyclic.undo",function(){r.undo(R)})}function h(R,P){e.forEach(R.nodes(),function(L){var F=R.node(L),Y=P.node(L);F&&(F.x=Y.x,F.y=Y.y,P.children(L).length&&(F.width=Y.width,F.height=Y.height))}),e.forEach(R.edges(),function(L){var F=R.edge(L),Y=P.edge(L);F.points=Y.points,e.has(Y,"x")&&(F.x=Y.x,F.y=Y.y)}),R.graph().width=P.graph().width,R.graph().height=P.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],w=["width","height"],E={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function O(R){var P=new p({multigraph:!0,compound:!0}),L=Re(R.graph());return P.setGraph(e.merge({},m,Se(L,y),e.pick(L,x))),e.forEach(R.nodes(),function(F){var Y=Re(R.node(F));P.setNode(F,e.defaults(Se(Y,w),E)),P.setParent(F,R.parent(F))}),e.forEach(R.edges(),function(F){var Y=Re(R.edge(F));P.setEdge(F,e.merge({},q,Se(Y,b),e.pick(Y,S)))}),P}function C(R){var P=R.graph();P.ranksep/=2,e.forEach(R.edges(),function(L){var F=R.edge(L);F.minlen*=2,F.labelpos.toLowerCase()!=="c"&&(P.rankdir==="TB"||P.rankdir==="BT"?F.width+=F.labeloffset:F.height+=F.labeloffset)})}function k(R){e.forEach(R.edges(),function(P){var L=R.edge(P);if(L.width&&L.height){var F=R.node(P.v),Y=R.node(P.w),ce={rank:(Y.rank-F.rank)/2+F.rank,e:P};v.addDummyNode(R,"edge-proxy",ce,"_ep")}})}function N(R){var P=0;e.forEach(R.nodes(),function(L){var F=R.node(L);F.borderTop&&(F.minRank=R.node(F.borderTop).rank,F.maxRank=R.node(F.borderBottom).rank,P=e.max(P,F.maxRank))}),R.graph().maxRank=P}function $(R){e.forEach(R.nodes(),function(P){var L=R.node(P);L.dummy==="edge-proxy"&&(R.edge(L.e).labelRank=L.rank,R.removeNode(P))})}function B(R){var P=Number.POSITIVE_INFINITY,L=0,F=Number.POSITIVE_INFINITY,Y=0,ce=R.graph(),oe=ce.marginx||0,ge=ce.marginy||0;function be(he){var _e=he.x,de=he.y,De=he.width,K=he.height;P=Math.min(P,_e-De/2),L=Math.max(L,_e+De/2),F=Math.min(F,de-K/2),Y=Math.max(Y,de+K/2)}e.forEach(R.nodes(),function(he){be(R.node(he))}),e.forEach(R.edges(),function(he){var _e=R.edge(he);e.has(_e,"x")&&be(_e)}),P-=oe,F-=ge,e.forEach(R.nodes(),function(he){var _e=R.node(he);_e.x-=P,_e.y-=F}),e.forEach(R.edges(),function(he){var _e=R.edge(he);e.forEach(_e.points,function(de){de.x-=P,de.y-=F}),e.has(_e,"x")&&(_e.x-=P),e.has(_e,"y")&&(_e.y-=F)}),ce.width=L-P+oe,ce.height=Y-F+ge}function V(R){e.forEach(R.edges(),function(P){var L=R.edge(P),F=R.node(P.v),Y=R.node(P.w),ce,oe;L.points?(ce=L.points[0],oe=L.points[L.points.length-1]):(L.points=[],ce=Y,oe=F),L.points.unshift(v.intersectRect(F,ce)),L.points.push(v.intersectRect(Y,oe))})}function X(R){e.forEach(R.edges(),function(P){var L=R.edge(P);if(e.has(L,"x"))switch((L.labelpos==="l"||L.labelpos==="r")&&(L.width-=L.labeloffset),L.labelpos){case"l":L.x-=L.width/2+L.labeloffset;break;case"r":L.x+=L.width/2+L.labeloffset;break}})}function le(R){e.forEach(R.edges(),function(P){var L=R.edge(P);L.reversed&&L.points.reverse()})}function se(R){e.forEach(R.nodes(),function(P){if(R.children(P).length){var L=R.node(P),F=R.node(L.borderTop),Y=R.node(L.borderBottom),ce=R.node(e.last(L.borderLeft)),oe=R.node(e.last(L.borderRight));L.width=Math.abs(oe.x-ce.x),L.height=Math.abs(Y.y-F.y),L.x=ce.x+L.width/2,L.y=F.y+L.height/2}}),e.forEach(R.nodes(),function(P){R.node(P).dummy==="border"&&R.removeNode(P)})}function Ee(R){e.forEach(R.edges(),function(P){if(P.v===P.w){var L=R.node(P.v);L.selfEdges||(L.selfEdges=[]),L.selfEdges.push({e:P,label:R.edge(P)}),R.removeEdge(P)}})}function Oe(R){var P=v.buildLayerMatrix(R);e.forEach(P,function(L){var F=0;e.forEach(L,function(Y,ce){var oe=R.node(Y);oe.order=ce+F,e.forEach(oe.selfEdges,function(ge){v.addDummyNode(R,"selfedge",{width:ge.label.width,height:ge.label.height,rank:oe.rank,order:ce+ ++F,e:ge.e,label:ge.label},"_se")}),delete oe.selfEdges})})}function ke(R){e.forEach(R.nodes(),function(P){var L=R.node(P);if(L.dummy==="selfedge"){var F=R.node(L.e.v),Y=F.x+F.width/2,ce=F.y,oe=L.x-Y,ge=F.height/2;R.setEdge(L.e,L.label),R.removeNode(P),L.label.points=[{x:Y+2*oe/3,y:ce-ge},{x:Y+5*oe/6,y:ce-ge},{x:Y+oe,y:ce},{x:Y+5*oe/6,y:ce+ge},{x:Y+2*oe/3,y:ce+ge}],L.label.x=L.x,L.label.y=L.y}})}function Se(R,P){return e.mapValues(e.pick(R,P),Number)}function Re(R){var P={};return e.forEach(R,function(L,F){P[F.toLowerCase()]=L}),P}return qu}var Eu,rp;function W0(){if(rp)return Eu;rp=1;var e=Ge(),r=ar(),t=_r().Graph;Eu={debugOrdering:a};function a(n){var i=r.buildLayerMatrix(n),o=new t({compound:!0,multigraph:!0}).setGraph({});return e.forEach(n.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+n.node(s).rank)}),e.forEach(n.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),e.forEach(i,function(s,u){var f="layer"+u;o.setNode(f,{rank:"same"}),e.reduce(s,function(c,l){return o.setEdge(c,l,{style:"invis"}),l})}),o}return Eu}var ku,tp;function Y0(){return tp||(tp=1,ku="0.8.5"),ku}var Ru,np;function X0(){return np||(np=1,Ru={graphlib:_r(),layout:K0(),debug:W0(),util:{time:ar().time,notime:ar().notime},version:Y0()}),Ru}var J0=X0();const ap=Mb(J0);var Z0=jt('<path fill="none" style="stroke: var(--vscode-link);" stroke-width="1.5" marker-end="url(#arrowhead)"></path>'),Q0=j('<span class="px-1.5 py-0.5 rounded-full text-[9px] font-bold leading-none border" style="background-color: var(--vscode-input-bg); color: var(--vscode-secondary-fg); border-color: var(--vscode-border);"> </span>'),ew=jt('<g role="button" tabindex="0"><rect rx="6"></rect><foreignObject><div class="w-full h-full flex items-center px-3 space-x-2 overflow-hidden noselect svelte-1juzf7s"><div><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><div class="flex items-center gap-1.5"><div class="text-xs font-medium truncate" style="color: var(--vscode-fg);"> </div> <!></div> <div class="text-[10px] truncate flex justify-between gap-1 text-right" style="color: var(--vscode-secondary-fg);"><span class="truncate opacity-75"> </span> <span class="font-mono tabular-nums"> </span></div></div></div></foreignObject></g>'),rw=jt('<svg class="block touch-none" role="presentation"><defs><pattern id="dot-grid" patternUnits="userSpaceOnUse"><circle fill="var(--vscode-border)"></circle></pattern><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" style="fill: var(--vscode-link);"></polygon></marker></defs><rect width="100%" height="100%" fill="url(#dot-grid)"></rect><g><g><!><!></g></g></svg>'),tw=j('<div class="absolute inset-0 overflow-hidden" style="background-color: var(--vscode-panel-bg);" role="presentation"><div class="absolute bottom-4 left-4 z-10 flex items-center space-x-1 p-1 backdrop-blur border rounded-lg shadow-sm" style="background-color: var(--vscode-input-bg); border-color: var(--vscode-border);"><button class="p-1.5 rounded transition-colors" style="color: var(--vscode-fg);" title="Zoom In"><!></button> <button class="p-1.5 rounded transition-colors" style="color: var(--vscode-fg);" title="Zoom Out"><!></button> <div class="w-px h-4 mx-1" style="background-color: var(--vscode-border);"></div> <button class="p-1.5 rounded transition-colors" style="color: var(--vscode-fg);" title="Reset Zoom"><!></button> <button class="p-1.5 rounded transition-colors" style="color: var(--vscode-fg);" title="Auto Layout"><!></button></div> <!></div>');function nw(e,r){Ne(r,!1);const t=J(),a=J();let n=ne(r,"rootSpan",8),i=ne(r,"selectedId",8,null),o=ne(r,"viewMode",8,"compact");const s=sp();let u=J(0),f=J(0),c=J(0),l=J(0),v=J([]),p=J([]);function _(W){return Math.max(120,W.length*8+50)}const g=50;let h=J(null),y=0,m=0,x=0,w=0,E=J(!1),b=!1,q=J(null),S=J(null),O=!1,C=0,k=0;const N=60;let $=J(1),B=J(0),V=J(0),X=J(!1);function le(){const W=(d(u)-40)/d(t),H=(d(f)-40)/d(a);G($,Math.min(1,W,H)),G(B,(d(u)-d(t)*d($))/2),G(V,(d(f)-d(a)*d($))/2),G(X,!1)}function se(W){G(X,!0);const H=d($);G($,Math.min(5,Math.max(.1,d($)+W)));const fe=d(u)/2,me=d(f)/2;G(B,fe-(fe-d(B))*(d($)/H)),G(V,me-(me-d(V))*(d($)/H))}function Ee(){le()}function Oe(W){W.preventDefault(),se(W.deltaY>0?-.1:.1)}function ke(W,H=[]){return H.push(W),W.children&&W.children.forEach(fe=>ke(fe,H)),H}function Se(){const W=ke(n()).filter(ae=>ae.type==="chain");if(W.length===0)return;const H=new ap.graphlib.Graph;H.setGraph({rankdir:(o()==="flow","TB"),nodesep:50,ranksep:70,marginx:20,marginy:20}),H.setDefaultEdgeLabel(()=>({}));const fe=new Map;if(o()==="compact"){fe.set("Input",{id:"logical-Input",name:"Input",spans:[n()]}),W.forEach(U=>{if(U.id===n().id)return;const Q=U.metadata?.langgraph_node||U.name;fe.has(Q)||fe.set(Q,{id:`logical-${Q}`,name:Q,spans:[]}),fe.get(Q).spans.push(U)}),fe.set("Output",{id:"logical-Output",name:"Output",spans:[n()]}),fe.forEach(U=>{const Q=_(U.name);H.setNode(U.id,{width:Q,height:g,label:U.name})});const ae=W.filter(U=>U.id!==n().id&&U.metadata?.langgraph_step!==void 0).sort((U,Q)=>U.metadata.langgraph_step-Q.metadata.langgraph_step);if(ae.length>0){const U=ae[0].metadata.langgraph_node||ae[0].name;H.setEdge("logical-Input",`logical-${U}`);for(let Ce=0;Ce<ae.length-1;Ce++){const nr=ae[Ce].metadata.langgraph_node||ae[Ce].name,cr=ae[Ce+1].metadata.langgraph_node||ae[Ce+1].name;nr!==cr&&H.setEdge(`logical-${nr}`,`logical-${cr}`)}const Q=ae[ae.length-1].metadata.langgraph_node||ae[ae.length-1].name;H.setEdge(`logical-${Q}`,"logical-Output")}else H.setEdge("logical-Input","logical-Output")}else{H.setNode("marker-input",{width:_("Input"),height:g,label:"Input"});const ae=W.filter(U=>U.id!==n().id).sort((U,Q)=>(F(U)||0)-(F(Q)||0));if(ae.forEach(U=>{H.setNode(U.id,{width:_(U.name),height:g,label:U.name})}),H.setNode("marker-output",{width:_("Output"),height:g,label:"Output"}),ae.length>0){H.setEdge("marker-input",ae[0].id);for(let U=0;U<ae.length-1;U++)H.setEdge(ae[U].id,ae[U+1].id);H.setEdge(ae[ae.length-1].id,"marker-output")}else H.setEdge("marker-input","marker-output")}ap.layout(H);const me=[];let Ae=1/0,ze=1/0,We=-1/0,Qe=-1/0;H.nodes().forEach(ae=>{const U=H.node(ae);let Q,Ce;if(o()==="compact"){const Ie=fe.get(ae.replace("logical-","")),er=Ie.name==="Input"||Ie.name==="Output",Xe=Ie.spans.find(Tr=>Tr.status==="error")||Ie.spans[Ie.spans.length-1];Ce=Ie.spans,Q={...Xe,name:Ie.name,id:Ie.id,type:er?"marker":Xe.type,metadata:{...Xe.metadata,compact_count:Ie.spans.length>1?Ie.spans.length:void 0}}}else ae==="marker-input"?Q={...n(),name:"Input",type:"marker",id:"marker-input"}:ae==="marker-output"?Q={...n(),name:"Output",type:"marker",id:"marker-output"}:Q=W.find(Ie=>Ie.id===ae);const nr=U.x-U.width/2,cr=U.y-U.height/2;me.push({span:Q,allSpans:Ce,x:nr,y:cr,width:U.width}),Ae=Math.min(Ae,nr),ze=Math.min(ze,cr),We=Math.max(We,nr+U.width),Qe=Math.max(Qe,cr+U.height)}),G(c,We-Ae),G(l,Qe-ze),G(v,me.map(ae=>({...ae,x:ae.x-Ae,y:ae.y-ze})));const qe=[];H.edges().forEach(ae=>{const U=d(v).find(Ce=>Ce.span.id===ae.v),Q=d(v).find(Ce=>Ce.span.id===ae.w);U&&Q&&qe.push({source:U,target:Q,type:o()==="flow"?"horizontal":"vertical"})}),G(p,qe),G(X,!1)}function Re(W,H=null){W.stopPropagation(),H?(G(h,H),y=W.clientX,m=W.clientY,x=H.x,w=H.y,G(E,!0),b=!1):(O=!0,C=W.clientX,k=W.clientY,G(X,!0)),window.addEventListener("mousemove",R),window.addEventListener("mouseup",P)}function R(W){if(d(E)&&d(h)){const H=W.clientX-y,fe=W.clientY-m;(Math.abs(H)>2||Math.abs(fe)>2)&&(b=!0),qc(h,d(h).x=x+H),qc(h,d(h).y=w+fe),G(v,d(v)),G(p,d(p))}else O&&(G(B,d(B)+(W.clientX-C)),G(V,d(V)+(W.clientY-k)),C=W.clientX,k=W.clientY)}function P(){G(E,!1),O=!1,G(h,null),window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",P)}function L(W,H){if(W.stopPropagation(),!b)if(o()==="compact"&&H.allSpans&&H.allSpans.length>0){const me=(H.allSpans.findIndex(Ae=>Ae.id===i())+1)%H.allSpans.length;s("select",H.allSpans[me])}else s("select",H.span)}function F(W){if(W.metadata&&typeof W.metadata.langgraph_step=="number")return W.metadata.langgraph_step;if(!W.tags)return 1/0;for(const H of W.tags)if(H.startsWith("graph:step:")){const fe=H.split(":");if(fe.length===3){const me=parseInt(fe[2],10);if(!isNaN(me))return me}}for(const H of W.tags)if(H.startsWith("seq:step:")){const fe=H.split(":");if(fe.length===3){const me=parseInt(fe[2],10);if(!isNaN(me))return me}}return 1/0}function Y(W,H=""){const fe=W.toLowerCase();return H==="Input"?Pu:H==="Output"?Nu:fe.includes("tool")?Lt:fe.includes("llm")||fe.includes("generation")?Tp:fe.includes("chain")?Cp:Pu}function ce(W,H){(W.key==="Enter"||W.key===" ")&&L(W,H)}function oe(W,H){return H?W.span.id===H?!0:W.allSpans?W.allSpans.some(fe=>fe.id===H):!1:!1}function ge(W){const{source:H,target:fe}=W,me=H.x+H.width/2,Ae=H.y+g/2,ze=fe.x+fe.width/2,We=fe.y+g/2;if(H===fe){const Te=H.x+H.width,or=H.y+g/4,rr=H.x+H.width,br=H.y+3*g/4;return`M ${Te} ${or} C ${Te+40} ${or-20}, ${rr+40} ${br+20}, ${rr} ${br}`}const Qe=ze-me,qe=We-Ae,ae=15,U=(Te,or)=>{const rr=Te.x,br=Te.y,Qr=Te.width,et=or?Qe:-Qe,Et=or?qe:-qe;let Fe;Math.abs(et)/Qr>Math.abs(Et)/g?Fe=et>0?"right":"left":Fe=Et>0?"bottom":"top";const hr=d(p).filter(fr=>{const rt=fr.source.x+fr.source.width/2,kt=fr.source.y+g/2,Rt=fr.target.x+fr.target.width/2,Lg=fr.target.y+g/2,St=Rt-rt,At=Lg-kt;return fr.source.span.id===Te.span.id?(Math.abs(St)/Te.width>Math.abs(At)/g?St>0?"right":"left":At>0?"bottom":"top")===Fe:fr.target.span.id===Te.span.id?(Math.abs(-St)/Te.width>Math.abs(-At)/g?-St>0?"right":"left":-At>0?"bottom":"top")===Fe:!1});hr.sort((fr,rt)=>{const kt=fr.source.span.id===Te.span.id?fr.target:fr.source,Rt=rt.source.span.id===Te.span.id?rt.target:rt.source;return Fe==="top"||Fe==="bottom"?kt.x-Rt.x:kt.y-Rt.y});const Dr=hr.indexOf(W),$g=hr.length,bc=(Dr-($g-1)/2)*ae;return{x:Fe==="right"?rr+Qr:Fe==="left"?rr:rr+Qr/2+bc,y:Fe==="bottom"?br+g:Fe==="top"?br:br+g/2+bc,side:Fe,index:Dr}},Q=U(H,!0),Ce=U(fe,!1),nr=Math.sqrt(Math.pow(Ce.x-Q.x,2)+Math.pow(Ce.y-Q.y,2)),cr=2,Ie=Ce.x-(Ce.x-Q.x)/(nr||1)*cr,er=Ce.y-(Ce.y-Q.y)/(nr||1)*cr,Xe=12,Tr=Q.side==="left"||Q.side==="right",qt=((Q.index||0)+(Ce.index||0))*(8/2);if(Tr){const Te=(Q.x+Ie)/2+qt,or=Ie>Q.x?1:-1,rr=er>Q.y?1:-1;return Math.abs(er-Q.y)<Xe*2?`M ${Q.x} ${Q.y} L ${Ie} ${er}`:`M ${Q.x} ${Q.y} L ${Te-Xe*or} ${Q.y} Q ${Te} ${Q.y} ${Te} ${Q.y+Xe*rr} L ${Te} ${er-Xe*rr} Q ${Te} ${er} ${Te+Xe*or} ${er} L ${Ie} ${er}`}else{const Te=(Q.y+er)/2+qt/2,or=Ie>Q.x?1:-1,rr=er>Q.y?1:-1;return Math.abs(Ie-Q.x)<Xe*2?`M ${Q.x} ${Q.y} L ${Ie} ${er}`:`M ${Q.x} ${Q.y} L ${Q.x} ${Te-Xe*rr} Q ${Q.x} ${Te} ${Q.x+Xe*or} ${Te} L ${Ie-Xe*or} ${Te} Q ${Ie} ${Te} ${Ie} ${Te+Xe*rr} L ${Ie} ${er}`}}pe(()=>(D(n()),d(q),D(o()),d(S)),()=>{n()&&(n().id!==d(q)||o()!==d(S))&&(G(q,n().id),G(S,o()),Se())}),pe(()=>d(c),()=>{G(t,d(c)+N*2)}),pe(()=>d(l),()=>{G(a,d(l)+N*2)}),pe(()=>(d(c),d(l),d(u),d(f),d(X)),()=>{d(c)&&d(l)&&d(u)&&d(f)&&!d(X)&&le()}),Je(),Ue();var be=tw(),he=T(be),_e=T(he),de=T(_e);Z_(de,{size:18}),A(_e);var De=z(_e,2),K=T(De);Q_(K,{size:18}),A(De);var ue=z(De,4),we=T(ue);X_(we,{size:18}),A(ue);var Me=z(ue,2),$e=T(Me);J_($e,{size:18}),A(Me),A(he);var Le=z(he,2);{var xe=W=>{var H=rw(),fe=T(H),me=T(fe),Ae=T(me);A(me),Ur(),A(fe);var ze=z(fe,2),We=T(ze);Ve(We,"transform","translate(60, 60)");var Qe=T(We);gr(Qe,1,()=>d(p),pr,(ae,U)=>{var Q=Z0();Z(Ce=>Ve(Q,"d",Ce),[()=>(d(U),M(()=>ge(d(U))))]),I(ae,Q)});var qe=z(Qe);gr(qe,1,()=>d(v),pr,(ae,U)=>{var Q=ew(),Ce=T(Q);Ve(Ce,"height",g);var nr=z(Ce);Ve(nr,"height",g);var cr=T(nr),Ie=T(cr),er=T(Ie);qp(er,()=>Y(d(U).span.type,d(U).span.name),(Fe,hr)=>{hr(Fe,{size:16})}),A(Ie);var Xe=z(Ie,2),Tr=T(Xe),xt=T(Tr),qt=T(xt,!0);A(xt);var Te=z(xt,2);{var or=Fe=>{var hr=Q0(),Dr=T(hr,!0);A(hr),Z(()=>re(Dr,(d(U),M(()=>d(U).span.metadata.compact_count)))),I(Fe,hr)};ee(Te,Fe=>{d(U),M(()=>d(U).span.metadata?.compact_count)&&Fe(or)})}A(Tr);var rr=z(Tr,2),br=T(rr),Qr=T(br,!0);A(br);var et=z(br,2),Et=T(et,!0);A(et),A(rr),A(Xe),A(cr),A(nr),A(Q),Z((Fe,hr,Dr)=>{Ve(Q,"transform",`translate(${d(U),M(()=>d(U).x)??""}, ${d(U),M(()=>d(U).y)??""})`),Ye(Q,0,`cursor-pointer transition-opacity hover:opacity-90 outline-none ${d(E)&&d(h)===d(U)?"cursor-grabbing":"cursor-grab"}`),Ve(Ce,"width",(d(U),M(()=>d(U).width))),mr(Ce,`fill: var(--vscode-bg); stroke: ${Fe??""}; stroke-width: ${hr??""};`),Ve(nr,"width",(d(U),M(()=>d(U).width))),mr(Ie,`color: ${d(U),M(()=>d(U).span.status==="error"?"var(--vscode-error)":"var(--vscode-link)")??""};`),re(qt,(d(U),M(()=>d(U).span.name))),re(Qr,(d(U),M(()=>d(U).span.type))),re(Et,Dr)},[()=>(d(U),D(i()),M(()=>oe(d(U),i())?"var(--vscode-selection-bg)":"var(--vscode-border)")),()=>(d(U),D(i()),M(()=>oe(d(U),i())?"2":"1")),()=>(d(U),M(()=>d(U).span.duration?(d(U).span.duration*1e3).toFixed(0)+"ms":""))]),ye("mousedown",Q,Fe=>Re(Fe,d(U))),ye("click",Q,Fe=>L(Fe,d(U))),ye("keydown",Q,Fe=>ce(Fe,d(U))),I(ae,Q)}),A(We),A(ze),A(H),Z(()=>{Ve(H,"width",d(u)),Ve(H,"height",d(f)),Ve(me,"x",d(B)),Ve(me,"y",d(V)),Ve(me,"width",20*d($)),Ve(me,"height",20*d($)),Ve(Ae,"cx",1*d($)),Ve(Ae,"cy",1*d($)),Ve(Ae,"r",1*d($)),Ve(ze,"transform",`translate(${d(B)??""}, ${d(V)??""}) scale(${d($)??""})`)}),I(W,H)};ee(Le,W=>{d(c)>0&&W(xe)})}A(be),ye("click",_e,()=>se(.1)),ye("click",De,()=>se(-.1)),ye("click",ue,Ee),ye("click",Me,Se),Tc(be,"clientWidth",W=>G(u,W)),Tc(be,"clientHeight",W=>G(f,W)),ye("wheel",be,B_(Oe)),ye("mousedown",be,W=>Re(W)),I(e,be),Pe()}const ip={};function xr(e,r){const t=Au(ip),a=typeof e=="function"?e(t):e,n={...t,...a};return r?.expandable&&(n.isParentExpanded=n.expanded),bp(ip,n),t}var aw=j('<span class="container svelte-vunjc7"><span></span></span>');function op(e,r){Ne(r,!1);const t=()=>zr(s,"$expandable",n),a=()=>zr(u(),"$expanded",n),[n,i]=gt(),{expanded:o,expandable:s}=xr();let u=ne(r,"expanded",8,o);Ue();var f=ve(),c=ie(f);{var l=v=>{var p=aw(),_=T(p);let g;_.textContent="â¶",A(p),Z(()=>g=Ye(_,1,"arrow svelte-vunjc7",null,g,{expanded:a()})),ye("click",p,h=>{h.stopPropagation(),Vr(u(),!a())}),I(v,p)};ee(c,v=>{t()&&v(l)})}I(e,f),Pe(),i()}function iw(e,r){Ne(r,!1),xr({displayMode:"summary"}),Ue();var t=ve(),a=ie(t);He(a,r,"default",{}),I(e,t),Pe()}function Mg(e,r){Ne(r,!1);let t=ne(r,"expanded",8),a=ne(r,"key",8);const n=vt(!1);xr(({keyPath:s,level:u})=>(a()!=="[[Entries]]"&&(s=[...s,a()],u=u+1),{keyPath:s,level:u,expanded:t(),expandable:n})),Ue();var i=ve(),o=ie(i);He(o,r,"default",{}),I(e,i),Pe()}var ow=j('<span class="operator"></span>'),sw=j('<span class="label svelte-1cs7qon"><!><!><!></span><!>',1),uw=j("<li><!></li>"),cw=j("<ul></ul>"),fw=j('<span class="root svelte-1cs7qon"><!> <!></span> <!>',1);function lr(e,r){Ne(r,!1);const t=()=>zr(p,"$expanded",a),[a,n]=gt(),i=J();let o=ne(r,"keys",8),s=ne(r,"shouldShowColon",24,()=>{}),u=ne(r,"expandKey",8,q=>q),f=ne(r,"defaultExpanded",12,!1);const{isParentExpanded:c,displayMode:l,root:v,expanded:p,expandable:_,keyPath:g,level:h,shouldExpandNode:y}=xr({root:!1},{expandable:!0});if(Vr(_,!0),l!=="summary"){if(!f()){const q=y({keyPath:g,level:h});q!==void 0&&f(q)}up(()=>c.subscribe(q=>{q?p.set(f()):p.set(!1)}))}function m(){Vr(p,!t())}pe(()=>(D(o()),vt),()=>{G(i,o().map(()=>vt(!1)))}),Je(),Ue();var x=ve(),w=ie(x);{var E=q=>{var S=ve(),O=ie(S);He(O,r,"summary",{}),I(q,S)},b=q=>{var S=fw(),O=ie(S),C=T(O);{var k=V=>{op(V,{get expanded(){return p}})};ee(C,V=>{v&&V(k)})}var N=z(C,2);iw(N,{children:(V,X)=>{var le=ve(),se=ie(le);He(se,r,"preview",{get root(){return v}}),I(V,le)},$$slots:{default:!0}}),A(O);var $=z(O,2);{var B=V=>{var X=cw();gr(X,5,o,pr,(le,se,Ee)=>{var Oe=uw();let ke;var Se=T(Oe);{let Re=te(()=>(D(u()),d(se),M(()=>u()(d(se)))));Mg(Se,{get key(){return d(Re)},get expanded(){return d(i),M(()=>d(i)[Ee])},children:(R,P)=>{var L=sw(),F=ie(L),Y=T(F);op(Y,{});var ce=z(Y);He(ce,r,"item_key",{get key(){return d(se)},index:Ee});var oe=z(ce);{var ge=he=>{var _e=ow();_e.textContent=": ",I(he,_e)};ee(oe,he=>{D(s()),d(se),M(()=>!s()||s()(d(se)))&&he(ge)})}A(F);var be=z(F);He(be,r,"item_value",{get key(){return d(se)},index:Ee}),ye("click",F,()=>d(i)[Ee].update(he=>!he)),I(R,L)},$$slots:{default:!0}})}A(Oe),Z(()=>ke=Ye(Oe,1,"svelte-1cs7qon",null,ke,{indent:t()})),ye("click",Oe,$t(()=>{})),I(le,Oe)}),A(X),ye("click",X,$t(m)),I(V,X)};ee($,V=>{t()&&V(B)})}ye("click",O,m),I(q,S)};ee(w,q=>{l==="summary"?q(E):q(b,!1)})}I(e,x),Pe(),n()}var lw=j('<span class="label"> </span>'),dw=j('<!><span class="operator"> </span>',1),vw=j('<span class="comma operator svelte-n33r32">,</span>'),hw=j("<!> <!>",1),pw=j('<span class="comma operator svelte-n33r32">,</span> <span class="operator">â¦</span>',1),gw=j('<span class="operator"> </span>'),_w=j("<!> <!> <!> <!>",1);function Zr(e,r){Ne(r,!1);let t=ne(r,"list",8),a=ne(r,"hasMore",8),n=ne(r,"label",24,()=>{}),i=ne(r,"prefix",24,()=>{}),o=ne(r,"postfix",24,()=>{}),s=ne(r,"root",8,!1);const{showPreview:u}=xr();Ue();var f=ve(),c=ie(f);{var l=v=>{var p=_w(),_=ie(p);{var g=E=>{var b=dw(),q=ie(b);{var S=k=>{var N=lw(),$=T(N,!0);A(N),Z(()=>re($,n())),I(k,N)};ee(q,k=>{n()&&k(S)})}var O=z(q),C=T(O,!0);A(O),Z(()=>re(C,i())),I(E,b)};ee(_,E=>{i()&&E(g)})}var h=z(_,2);gr(h,1,t,pr,(E,b,q)=>{var S=hw(),O=ie(S);He(O,r,"item",{get item(){return d(b)},index:q});var C=z(O,2);{var k=N=>{var $=vw();I(N,$)};ee(C,N=>{D(t()),M(()=>q<t().length-1)&&N(k)})}I(E,S)});var y=z(h,2);{var m=E=>{var b=pw();Ur(2),I(E,b)};ee(y,E=>{a()&&E(m)})}var x=z(y,2);{var w=E=>{var b=gw(),q=T(b,!0);A(b),Z(()=>re(q,o())),I(E,b)};ee(x,E=>{o()&&E(w)})}I(v,p)};ee(c,v=>{(s()||u)&&v(l)})}I(e,f),Pe()}var yw=j('<span class="label"> </span>'),bw=j('<span class="property"> </span><span class="operator"></span><!>',1),mw=j('<span class="property"> </span>');function Lu(e,r){Ne(r,!1);const t=J(),a=J();let n=ne(r,"value",8),i=ne(r,"summary",8);pe(()=>D(n()),()=>{G(t,Object.getOwnPropertyNames(n()))}),pe(()=>d(t),()=>{G(a,d(t).slice(0,5))}),Je(),Ue(),lr(e,{get keys(){return d(t)},$$slots:{summary:(o,s)=>{var u=yw(),f=T(u,!0);A(u),Z(()=>re(f,i()??"{â¦}")),I(o,u)},preview:(o,s)=>{const u=te(()=>s.root);{let f=te(()=>(d(a),d(t),M(()=>d(a).length<d(t).length))),c=te(()=>i()?`${i()} {`:"{");Zr(o,{get list(){return d(a)},get hasMore(){return d(f)},get prefix(){return d(c)},postfix:"}",get root(){return d(u)},$$slots:{item:(l,v)=>{const p=te(()=>v.item);var _=bw(),g=ie(_),h=T(g,!0);A(g);var y=z(g);y.textContent=": ";var m=z(y);je(m,{get value(){return D(n()),D(d(p)),M(()=>n()[d(p)])}}),Z(()=>re(h,d(p))),I(l,_)}}})}},item_key:(o,s)=>{const u=te(()=>s.key);var f=mw(),c=T(f,!0);A(f),Z(()=>re(c,d(u))),I(o,f)},item_value:(o,s)=>{const u=te(()=>s.key);je(o,{get value(){return D(n()),D(d(u)),M(()=>n()[d(u)])}})}}}),Pe()}var ww=j('<span class="label"> </span>'),xw=j('<span class="property"> </span>');function qw(e,r){Ne(r,!1);const t=J(),a=J();let n=ne(r,"value",8);pe(()=>D(n()),()=>{G(t,Object.getOwnPropertyNames(n()))}),pe(()=>D(n()),()=>{G(a,n().slice(0,5))}),Je(),Ue(),lr(e,{get keys(){return d(t)},$$slots:{summary:(i,o)=>{var s=ww(),u=T(s);A(s),Z(()=>re(u,`Array(${D(n()),M(()=>n().length)??""})`)),I(i,s)},preview:(i,o)=>{const s=te(()=>o.root);{let u=te(()=>(d(a),D(n()),M(()=>d(a).length<n().length)));Zr(i,{get list(){return d(a)},get hasMore(){return d(u)},get label(){return`(${D(n()),M(()=>n().length)??""}) `},prefix:"[",postfix:"]",get root(){return d(s)},$$slots:{item:(f,c)=>{const l=te(()=>c.item);je(f,{get value(){return d(l)}})}}})}},item_key:(i,o)=>{const s=te(()=>o.key);var u=xw(),f=T(u,!0);A(u),Z(c=>re(f,c),[()=>(D(d(s)),M(()=>String(d(s))))]),I(i,u)},item_value:(i,o)=>{const s=te(()=>o.key);je(i,{get value(){return D(n()),D(d(s)),M(()=>n()[d(s)])}})}}}),Pe()}var Ew=j('<span class="label"> </span>'),kw=j("<span> </span>"),Rw=j('<span class="property"> </span>');function Sw(e,r){Ne(r,!1);const t=J();let a=ne(r,"value",8),n=ne(r,"nodeType",8),i=J([]),o=J([]);const s="[[Entries]]";pe(()=>D(a()),()=>{let u=[],f=[],c=0;for(const l of a())u.push(c++),f.push(l);G(i,u),G(o,f)}),pe(()=>d(o),()=>{G(t,d(o).slice(0,5))}),Je(),Ue(),lr(e,{keys:[s,"size"],shouldShowColon:u=>u!==s,$$slots:{summary:(u,f)=>{var c=Ew(),l=T(c);A(c),Z(()=>re(l,`${n()??""}(${d(i),M(()=>d(i).length)??""})`)),I(u,c)},preview:(u,f)=>{const c=te(()=>f.root);{let l=te(()=>(d(t),d(o),M(()=>d(t).length<d(o).length))),v=te(()=>(D(n()),d(i),M(()=>`${n()}(${d(i).length}) `)));Zr(u,{get list(){return d(t)},get hasMore(){return d(l)},get label(){return d(v)},prefix:"{",postfix:"}",get root(){return d(c)},$$slots:{item:(p,_)=>{const g=te(()=>_.item);je(p,{get value(){return d(g)}})}}})}},item_key:(u,f)=>{const c=te(()=>f.key);var l=kw(),v=T(l,!0);A(l),Z(()=>{Ye(l,1,Mr(d(c)===s?"internal":"property")),re(v,d(c))}),I(u,l)},item_value:(u,f)=>{const c=te(()=>f.key);var l=ve(),v=ie(l);{var p=g=>{lr(g,{get keys(){return d(i)},defaultExpanded:!0,$$slots:{item_key:(h,y)=>{const m=te(()=>y.key);var x=Rw(),w=T(x,!0);A(x),Z(()=>re(w,d(m))),I(h,x)},item_value:(h,y)=>{const m=te(()=>y.key);je(h,{get value(){return d(o),D(d(m)),M(()=>d(o)[d(m)])}})}}})},_=g=>{je(g,{get value(){return D(a()),D(d(c)),M(()=>a()[d(c)])}})};ee(v,g=>{d(c)===s?g(p):g(_,!1)})}I(u,l)}}}),Pe()}var Aw=j('<span color="label"> </span>'),Iw=j('<!><span class="operator"></span><!>',1),Cw=j("<span> </span>"),Tw=j('<span class="property"> </span>'),Ow=j('<span class="operator"></span><!><span class="operator"></span><!><span class="operator"></span>',1),Nw=j('<span class="property"> </span>');function Pw(e,r){Ne(r,!1);const t=J();let a=ne(r,"value",8);xr();let n=J([]),i=J([]),o=J([]);const s="[[Entries]]";pe(()=>D(a()),()=>{let u=[],f=[],c=[],l=0;for(const v of a())u.push(l++),f.push(v[0]),c.push(v[1]);G(n,u),G(i,f),G(o,c)}),pe(()=>D(a()),()=>{G(t,Array.from(a().keys()).slice(0,5))}),Je(),Ue(),lr(e,{keys:[s,"size"],shouldShowColon:u=>u!==s,$$slots:{summary:(u,f)=>{var c=Aw(),l=T(c);A(c),Z(()=>re(l,`Map(${d(i),M(()=>d(i).length)??""})`)),I(u,c)},preview:(u,f)=>{const c=te(()=>f.root);{let l=te(()=>(d(t),D(a()),M(()=>d(t).length<a().size))),v=te(()=>(d(i),M(()=>`Map(${d(i).length}) `)));Zr(u,{get list(){return d(t)},get hasMore(){return d(l)},get label(){return d(v)},prefix:"{",postfix:"}",get root(){return d(c)},$$slots:{item:(p,_)=>{const g=te(()=>_.item);var h=Iw(),y=ie(h);je(y,{get value(){return d(g)}});var m=z(y);m.textContent=" => ";var x=z(m);{let w=te(()=>(D(a()),D(d(g)),M(()=>a().get(d(g)))));je(x,{get value(){return d(w)}})}I(p,h)}}})}},item_key:(u,f)=>{const c=te(()=>f.key);var l=Cw(),v=T(l,!0);A(l),Z(()=>{Ye(l,1,Mr(d(c)===s?"internal":"property")),re(v,d(c))}),I(u,l)},item_value:(u,f)=>{const c=te(()=>f.key);var l=ve(),v=ie(l);{var p=g=>{lr(g,{get keys(){return d(n)},expandKey:h=>d(i)[h],defaultExpanded:!0,$$slots:{item_key:(h,y)=>{const m=te(()=>y.key);var x=Tw(),w=T(x,!0);A(x),Z(()=>re(w,d(m))),I(h,x)},item_value:(h,y)=>{const m=te(()=>y.key);lr(h,{keys:["key","value"],$$slots:{preview:(x,w)=>{var E=Ow(),b=ie(E);b.textContent="{ ";var q=z(b);je(q,{get value(){return d(i),D(d(m)),M(()=>d(i)[d(m)])}});var S=z(q);S.textContent=" => ";var O=z(S);je(O,{get value(){return d(o),D(d(m)),M(()=>d(o)[d(m)])}});var C=z(O);C.textContent=" }",I(x,E)},item_key:(x,w)=>{const E=te(()=>w.key);var b=Nw(),q=T(b,!0);A(b),Z(()=>re(q,d(E))),I(x,b)},item_value:(x,w)=>{const E=te(()=>w.key);{let b=te(()=>(D(d(E)),d(i),D(d(m)),d(o),M(()=>d(E)==="key"?d(i)[d(m)]:d(o)[d(m)])));je(x,{get value(){return d(b)}})}}}})}}})},_=g=>{je(g,{get value(){return D(a()),D(d(c)),M(()=>a()[d(c)])}})};ee(v,g=>{d(c)===s?g(p):g(_,!1)})}I(u,l)}}}),Pe()}var Mw=j("<span> </span>");function Ar(e,r){let t=ne(r,"value",8),a=ne(r,"nodeType",8);var n=Mw(),i=T(n,!0);A(n),Z(()=>{Ye(n,1,Mr(a()),"svelte-1hiktm7"),re(i,t())}),I(e,n)}var $w=j('<span><!><span class="operator"> </span></span><br/>',1),Lw=j("<span><!></span>"),Fw=j("<span><!></span>");function jw(e,r){Ne(r,!1);const t=()=>zr(o,"$expanded",a),[a,n]=gt();let i=ne(r,"stack",8);const{expanded:o,expandable:s}=xr();Vr(s,!0),Ue();var u=Fw(),f=T(u);{var c=v=>{var p=ve(),_=ie(p);gr(_,1,i,pr,(g,h,y)=>{const m=te(()=>(D(i()),M(()=>y<i().length-1)));var x=$w(),w=ie(x);Ye(w,1,"svelte-64r5jo",null,{},{indent:y>0});var E=T(w);{let S=te(()=>d(h)+(d(m)?"\\n":""));je(E,{get value(){return d(S)}})}var b=z(E),q=T(b,!0);A(b),A(w),Ur(),Z(()=>re(q,d(m)?" +":"")),I(g,x)}),I(v,p)},l=v=>{var p=Lw(),_=T(p);{let g=te(()=>(D(i()),M(()=>i()[0]+"â¦")));je(_,{get value(){return d(g)}})}A(p),I(v,p)};ee(f,v=>{t()?v(c):v(l,!1)})}A(u),ye("click",u,()=>Vr(o,!t())),I(e,u),Pe(),n()}var Dw=j('<span class="label"> </span>'),Gw=j('<span class="label"> </span>'),Bw=j('<span class="property"> </span>');function Uw(e,r){Ne(r,!1);const t=J();let a=ne(r,"value",8);pe(()=>D(a()),()=>{G(t,a().stack.split(`
`))}),Je(),Ue(),lr(e,{keys:["message","stack"],$$slots:{summary:(n,i)=>{var o=Dw(),s=T(o);A(o),Z(u=>re(s,`Error: ${u??""}`),[()=>(D(a()),M(()=>String(a().message)))]),I(n,o)},preview:(n,i)=>{var o=Gw(),s=T(o);A(o),Z(u=>re(s,`Error: ${u??""}`),[()=>(D(a()),M(()=>String(a().message)))]),I(n,o)},item_key:(n,i)=>{const o=te(()=>i.key);var s=Bw(),u=T(s,!0);A(s),Z(()=>re(u,d(o))),I(n,s)},item_value:(n,i)=>{const o=te(()=>i.key);var s=ve(),u=ie(s);{var f=l=>{jw(l,{get stack(){return d(t)}})},c=l=>{je(l,{get value(){return D(a()),D(d(o)),M(()=>a()[d(o)])}})};ee(u,l=>{d(o)==="stack"?l(f):l(c,!1)})}I(n,s)}}}),Pe()}function zw(e,r){const t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"?!r&&typeof e[Symbol.iterator]=="function"?"Iterable":e.constructor.name:t}var Vw=j('<span class="svelte-10nkjh9"> </span>'),Hw=j('<span class="svelte-10nkjh9"> </span>');function Kw(e,r){Ne(r,!1);const t=J();let a=ne(r,"value",8);const n={"\n":"\\n","	":"\\t","\r":"\\r"},{displayMode:i}=xr();pe(()=>D(a()),()=>{G(t,a().replace(/[\n\t\r]/g,c=>n[c]))}),Je(),Ue();var o=ve(),s=ie(o);{var u=c=>{var l=Vw(),v=T(l);A(l),Z(p=>re(v,`"${p??""}"`),[()=>(d(t),M(()=>d(t).slice(0,30)+(d(t).length>30?"â¦":"")))]),I(c,l)},f=c=>{var l=Hw(),v=T(l);A(l),Z(()=>re(v,`"${d(t)??""}"`)),I(c,l)};ee(s,c=>{i==="summary"?c(u):c(f,!1)})}I(e,o),Pe()}var Ww=j('<span class="i svelte-cdp23s">Æ</span>'),Yw=j('<span class="fn i svelte-cdp23s"> </span>'),Xw=j('<span class="i svelte-cdp23s"> </span>'),Jw=j("<!><!>",1),Zw=j("<span> </span>"),Qw=j('<span class="i svelte-cdp23s"> </span>');function ex(e,r){Ne(r,!1);const t=J(),a=J(),n=J();let i=ne(r,"value",8);function o(_){const g=_.match(/^(?:(async)\s+)?(?:function)?(\*)?\s*([^(]+)?(\([^)]*\))\s*(=>)?/),h=g?.[1],y=g?.[2],m=g?.[3],x=g?.[4],w=g?.[5],b=_.match(/^class\s+([^\s]+)/)?.[1];return{args:x,isAsync:h,isGenerator:y,fnName:m,isArrow:w,isClass:b}}function s({isGenerator:_,isAsync:g,isClass:h}){return h?`class ${h}`:(g?"async ":"")+"Æ"+(_?"*":"")}function u({isAsync:_,isArrow:g,fnName:h,args:y}){return(g&&_?"async":"")+" "+(h??"")+y+(g?" => â¦":"")}const f="[[Function]]",c="[[Prototype]]";function l(_){return _===c?i().__proto__:i()[_]}function v(_){return _===f?!0:l(_)}function p(_){try{return _.toString()}catch{switch(_.constructor.name){case"AsyncFunction":return"async function () {}";case"AsyncGeneratorFunction":return"async function * () {}";case"GeneratorFunction:":return"function * () {}";default:return"function () {}"}}}pe(()=>D(i()),()=>{G(t,p(i()))}),pe(()=>d(t),()=>{G(a,o(d(t)))}),pe(()=>{},()=>{G(n,["length","name","prototype",f,c].filter(v))}),Je(),Ue(),lr(e,{get keys(){return d(n)},$$slots:{summary:(_,g)=>{var h=Ww();I(_,h)},preview:(_,g)=>{var h=Jw(),y=ie(h);{var m=E=>{var b=Yw(),q=T(b,!0);A(b),Z(S=>re(q,S),[()=>(d(a),M(()=>s(d(a))))]),I(E,b)};ee(y,E=>{d(a),M(()=>!d(a).isArrow)&&E(m)})}var x=z(y);{var w=E=>{var b=Xw(),q=T(b,!0);A(b),Z(S=>re(q,S),[()=>(d(a),M(()=>u(d(a))))]),I(E,b)};ee(x,E=>{d(a),M(()=>!d(a).isClass)&&E(w)})}I(_,h)},item_key:(_,g)=>{const h=te(()=>g.key);var y=Zw(),m=T(y,!0);A(y),Z(()=>{Ye(y,1,Mr(d(h)===f||d(h)===c?"internal":"property")),re(m,d(h))}),I(_,y)},item_value:(_,g)=>{const h=te(()=>g.key);var y=ve(),m=ie(y);{var x=E=>{var b=Qw(),q=T(b,!0);A(b),Z(()=>re(q,d(t))),I(E,b)},w=E=>{var b=ve(),q=ie(b);{var S=C=>{{let k=te(()=>(D(d(h)),M(()=>l(d(h)))));Lu(C,{get value(){return d(k)}})}},O=C=>{{let k=te(()=>(D(d(h)),M(()=>l(d(h)))));je(C,{get value(){return d(k)}})}};ee(q,C=>{d(h)==="prototype"?C(S):C(O,!1)},!0)}I(E,b)};ee(m,E=>{d(h)===f?E(x):E(w,!1)})}I(_,y)}}}),Pe()}var rx=j('<span class="label"> <!> </span>'),tx=j('<span class="property"> </span><span class="operator"></span><!>',1),nx=j("<span> </span>");function ax(e,r){Ne(r,!1);const t=()=>zr(c(),"$value",a),[a,n]=gt(),i=J(),o=J(),s=J(),u=J(),f=J();let c=ne(r,"value",8);const l="$value";function v(p){return p===l?d(u):c()[p]}pe(()=>D(c()),()=>{G(i,Object.getOwnPropertyNames(c()))}),pe(()=>d(i),()=>{G(o,[l,...d(i)])}),pe(()=>d(i),()=>{G(s,d(i).slice(0,5))}),pe(()=>t(),()=>{G(u,t())}),pe(()=>D(c()),()=>{G(f,typeof c().set=="function")}),Je(),Ue(),lr(e,{get keys(){return d(o)},$$slots:{summary:(p,_)=>{var g=rx(),h=T(g,!0),y=z(h);je(y,{get value(){return d(u)}});var m=z(y,1,!0);m.nodeValue=")",A(g),Z(()=>re(h,d(f)?"writable(":"readable(")),I(p,g)},preview:(p,_)=>{const g=te(()=>_.root);{let h=te(()=>(d(s),d(i),M(()=>d(s).length<d(i).length)));Zr(p,{get list(){return d(s)},get hasMore(){return d(h)},prefix:"{",postfix:"}",get root(){return d(g)},$$slots:{item:(y,m)=>{const x=te(()=>m.item);var w=tx(),E=ie(w),b=T(E,!0);A(E);var q=z(E);q.textContent=": ";var S=z(q);je(S,{get value(){return D(c()),D(d(x)),M(()=>c()[d(x)])}}),Z(()=>re(b,d(x))),I(y,w)}}})}},item_key:(p,_)=>{const g=te(()=>_.key);var h=nx(),y=T(h,!0);A(h),Z(()=>{Ye(h,1,Mr(d(g)===l?"internal":"property")),re(y,d(g))}),I(p,h)},item_value:(p,_)=>{const g=te(()=>_.key);{let h=te(()=>(D(d(g)),M(()=>v(d(g)))));je(p,{get value(){return d(h)}})}}}}),Pe(),n()}var ix=j('<span class="label"> </span>'),ox=j("<span> </span>");function sx(e,r){Ne(r,!1);const t=J(),a=J();let n=ne(r,"value",8),i=ne(r,"nodeType",8);const o="Symbol(Symbol.toStringTag)",s=["buffer","byteLength","byteOffset","length",o];function u(f){return f===o?n()[Symbol.toStringTag]:n()[f]}pe(()=>D(n()),()=>{G(t,[...Object.getOwnPropertyNames(n()),...s])}),pe(()=>D(n()),()=>{G(a,n().slice(0,5))}),Je(),Ue(),lr(e,{get keys(){return d(t)},$$slots:{summary:(f,c)=>{var l=ix(),v=T(l);A(l),Z(()=>re(v,`${i()??""}(${D(n()),M(()=>n().length)??""})`)),I(f,l)},preview:(f,c)=>{const l=te(()=>c.root);{let v=te(()=>(d(a),D(n()),M(()=>d(a).length<n().length)));Zr(f,{get list(){return d(a)},get hasMore(){return d(v)},get label(){return`${i()??""}(${D(n()),M(()=>n().length)??""}) `},prefix:"[",postfix:"]",get root(){return d(l)},$$slots:{item:(p,_)=>{const g=te(()=>_.item);je(p,{get value(){return d(g)}})}}})}},item_key:(f,c)=>{const l=te(()=>c.key);var v=ox(),p=T(v,!0);A(v),Z((_,g)=>{Ye(v,1,_),re(p,g)},[()=>Mr((D(d(l)),M(()=>s.includes(d(l))?"internal":"property"))),()=>(D(d(l)),M(()=>String(d(l))))]),I(f,v)},item_value:(f,c)=>{const l=te(()=>c.key);{let v=te(()=>(D(d(l)),M(()=>u(d(l)))));je(f,{get value(){return d(v)}})}}}}),Pe()}var ux=j('<span class="regex svelte-1bb4w0z"> </span>'),cx=j('<span class="regex svelte-1bb4w0z"> </span>'),fx=j('<span class="internal"> </span>');function lx(e,r){Ne(r,!1);const t=J();let a=ne(r,"value",8);const n=["lastIndex","dotAll","flags","global","hasIndices","ignoreCase","multiline","source","sticky","unicode"];pe(()=>D(a()),()=>{G(t,a().toString())}),Je(),Ue(),lr(e,{get keys(){return n},$$slots:{summary:(i,o)=>{var s=ux(),u=T(s,!0);A(s),Z(()=>re(u,d(t))),I(i,s)},preview:(i,o)=>{var s=cx(),u=T(s,!0);A(s),Z(()=>re(u,d(t))),I(i,s)},item_key:(i,o)=>{const s=te(()=>o.key);var u=fx(),f=T(u,!0);A(u),Z(c=>re(f,c),[()=>(D(d(s)),M(()=>String(d(s))))]),I(i,u)},item_value:(i,o)=>{const s=te(()=>o.key);je(i,{get value(){return D(a()),D(d(s)),M(()=>a()[d(s)])}})}}}),Pe()}function je(e,r){Ne(r,!1);const t=()=>zr(u,"$nodeType",a),[a,n]=gt(),i=J(),o=J();let s=ne(r,"value",8);const u=vt(),{shouldTreatIterableAsObject:f}=xr();function c(p,_){switch(p){case"Object":return typeof _.subscribe=="function"?[ax]:[Lu];case"Error":return[Uw];case"Array":return[qw];case"Map":return[Pw];case"Iterable":case"Set":return[Sw,{nodeType:p}];case"Number":return[Ar,{nodeType:p}];case"String":return[Kw];case"Boolean":return[Ar,{nodeType:p,value:_?"true":"false"}];case"Date":return[Ar,{nodeType:p,value:_.toISOString()}];case"Null":return[Ar,{nodeType:p,value:"null"}];case"Undefined":return[Ar,{nodeType:p,value:"undefined"}];case"Function":case"AsyncFunction":case"AsyncGeneratorFunction":case"GeneratorFunction":return[ex];case"Symbol":return[Ar,{nodeType:p,value:_.toString()}];case"BigInt":return[Ar,{nodeType:p,value:String(_)+"n"}];case"ArrayBuffer":return[Ar,{nodeType:p,value:`ArrayBuffer(${_.byteLength})`}];case"BigInt64Array":case"BigUint64Array":case"Float32Array":case"Float64Array":case"Int8Array":case"Int16Array":case"Int32Array":case"Uint8Array":case"Uint8ClampedArray":case"Uint16Array":case"Uint32Array":return[sx,{nodeType:p}];case"RegExp":return[lx];default:return[Lu,{summary:p}]}}pe(()=>D(s()),()=>{Vr(u,zw(s(),f))}),pe(()=>(d(i),d(o),t(),D(s())),()=>{(p=>{var _=Bu(p,2);G(i,_[0]),G(o,_[1])})(c(t(),s()))}),Je(),Ue();var l=ve(),v=ie(l);qp(v,()=>d(i),(p,_)=>{_(p,tr({get value(){return s()}},()=>d(o)))}),I(e,l),Pe(),n()}function dx({defaultExpandedPaths:e,defaultExpandedLevel:r}){const t=e.map(n=>n.split("."));function a(n){e:for(const i of t){if(n.length>i.length)continue;const o=Math.min(n.length,i.length);for(let s=0;s<o;s++)if(i[s]!=="*"&&i[s]!==String(n[s]))continue e;return!0}return!1}return function({keyPath:n,level:i}){return i<=r||a(n)}}var vx=j('<span class="svelte-m69a3i"> </span>'),hx=j("<span><!></span>");function px(e,r){Ne(r,!1);const t=J(),a=J();let n=ne(r,"value",8),i=ne(r,"shouldShowPreview",8,!0),o=ne(r,"shouldTreatIterableAsObject",8,!1),s=ne(r,"defaultExpandedPaths",24,()=>[]),u=ne(r,"defaultExpandedLevel",8,0);const f=vt(!0);xr({expanded:f,isParentExpanded:Dg(!0),root:!0,shouldExpandNode:g=>d(a)(g),level:0,keyPath:[],showPreview:i(),shouldTreatIterableAsObject:o()}),pe(()=>D(n()),()=>{G(t,n()&&typeof n()=="object")}),pe(()=>(D(s()),D(u())),()=>{G(a,dx({defaultExpandedPaths:s(),defaultExpandedLevel:u()}))}),Je(),Ue();var c=hx();let l;var v=T(c);{var p=g=>{Mg(g,{key:"$",get expanded(){return f},children:(h,y)=>{je(h,{get value(){return n()}})},$$slots:{default:!0}})},_=g=>{var h=ve(),y=ie(h);{var m=w=>{var E=vx(),b=T(E,!0);A(E),Z(()=>re(b,n())),I(w,E)},x=w=>{je(w,{get value(){return n()}})};ee(y,w=>{typeof n()=="string"?w(m):w(x,!1)},!0)}I(g,h)};ee(v,g=>{d(t)?g(p):g(_,!1)})}A(c),Z(()=>l=Ye(c,1,"svelte-m69a3i",null,l,{expandable:d(t)})),I(e,c),Pe()}var gx=j('<div class="p-4 rounded border" style="background-color: rgba(244, 135, 113, 0.1); color: var(--vscode-error); border-color: var(--vscode-error);"> </div>'),_x=j('<div class="space-y-4 animate-pulse"><div class="h-8 rounded w-full" style="background-color: var(--vscode-input-bg);"></div> <div class="h-8 rounded w-5/6" style="background-color: var(--vscode-input-bg);"></div> <div class="h-8 rounded w-4/6" style="background-color: var(--vscode-input-bg);"></div></div>'),yx=j('<div class="text-center py-20" style="color: var(--vscode-secondary-fg);">No traces found in logs.</div>'),bx=j('<div class="space-y-1"></div> <!>',1),mx=j('<div class="h-1/2 flex flex-col" style="border-top: 1px solid var(--vscode-border); background-color: var(--vscode-panel-bg);"><div class="flex justify-between items-center p-3" style="border-bottom: 1px solid var(--vscode-border); background-color: var(--vscode-bg);"><h3 class="text-[10px] font-bold uppercase tracking-widest" style="color: var(--vscode-secondary-fg);">Trace Flow</h3> <div class="flex rounded p-0.5 scale-90" style="background-color: var(--vscode-input-bg);"><button class="px-2 py-0.5 rounded text-[10px]">Compact</button> <button class="px-2 py-0.5 rounded text-[10px]">Flow</button></div></div> <div class="flex-1 min-h-0 relative"><!></div></div>'),wx=j('<div class="col-span-2" style="color: var(--vscode-error);"><span class="font-bold">Error:</span> </div>'),xx=j('<span class="italic" style="color: var(--vscode-secondary-fg);">No inputs recorded</span>'),qx=j('<span class="italic" style="color: var(--vscode-secondary-fg);">No outputs recorded</span>'),Ex=j('<div class="space-y-6"><div><h3 class="text-sm font-bold uppercase tracking-wider mb-2" style="color: var(--vscode-secondary-fg);">Metadata</h3> <div class="grid grid-cols-2 gap-4 text-sm p-3 rounded border" style="background-color: var(--vscode-input-bg); border-color: var(--vscode-border);"><div><span style="color: var(--vscode-secondary-fg);">Type:</span> <span class="font-mono ml-2"> </span></div> <div><span style="color: var(--vscode-secondary-fg);">Status:</span> <span class="font-mono ml-2"> </span></div> <div><span style="color: var(--vscode-secondary-fg);">Duration:</span> <span class="font-mono ml-2"> </span></div> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 h-full"><div class="flex flex-col h-full"><h3 class="text-sm font-bold uppercase tracking-wider mb-2 sticky top-0 py-1" style="background-color: var(--vscode-bg); color: var(--vscode-secondary-fg);">Inputs</h3> <div class="p-3 rounded border font-mono text-xs overflow-auto flex-1 max-h-[500px]" style="background-color: var(--vscode-input-bg); border-color: var(--vscode-border);"><!></div></div> <div class="flex flex-col h-full"><h3 class="text-sm font-bold uppercase tracking-wider mb-2 sticky top-0 py-1" style="background-color: var(--vscode-bg); color: var(--vscode-secondary-fg);">Outputs</h3> <div class="p-3 rounded border font-mono text-xs overflow-auto flex-1 max-h-[500px]" style="background-color: var(--vscode-input-bg); border-color: var(--vscode-border);"><!></div></div></div></div>'),kx=j(`<div class="p-4 rounded font-mono text-xs overflow-auto h-full border json-tree-container" style="border-color: var(--vscode-border);
                                       background-color: var(--vscode-input-bg);
                                       color: var(--vscode-fg);
                                       --json-tree-label-color: #9cdcfe;
                                       --json-tree-colon-color: var(--vscode-secondary-fg);
                                       --json-tree-string-color: #ce9178;
                                       --json-tree-number-color: #b5cea8;
                                       --json-tree-boolean-color: #569cd6;
                                       --json-tree-null-color: #569cd6;
                                       --json-tree-arrow-color: var(--vscode-secondary-fg);
                                       --json-tree-value-color: var(--vscode-fg);
                                       --json-tree-font-family: 'JetBrains Mono', monospace;"><!></div>`),Rx=j('<div class="h-full flex flex-col" style="background-color: var(--vscode-bg); border-color: var(--vscode-border);"><div class="flex-1 overflow-y-auto p-4"><!></div> <div class="p-4 flex justify-between items-center sticky top-0 z-10" style="border-top: 1px solid var(--vscode-border); background-color: var(--vscode-bg);"><div><h2 class="text-lg font-semibold"> </h2> <div class="text-xs font-mono mt-1" style="color: var(--vscode-secondary-fg);"> </div></div> <div class="flex rounded p-1" style="background-color: var(--vscode-input-bg);"><button class="px-3 py-1 rounded text-sm transition-colors">Pretty</button> <button class="px-3 py-1 rounded text-sm transition-colors">Raw</button></div></div></div>'),Sx=j('<div class="h-full flex items-center justify-center" style="color: var(--vscode-secondary-fg);"><div class="text-center"><p class="text-lg font-medium">No Span Selected</p> <p class="text-sm">Select a node from the tree to view details</p></div></div>'),Ax=j('<div class="h-screen text-gray-900 dark:text-gray-100 font-sans flex flex-col" style="background-color: var(--vscode-bg); color: var(--vscode-fg);"><div class="flex flex-1 overflow-hidden"><aside class="w-1/3 flex flex-col overflow-hidden" style="border-right: 1px solid var(--vscode-border); background-color: var(--vscode-bg);"><div class="flex-1 overflow-y-auto p-4"><!></div> <!></aside> <main class="flex-1 overflow-y-auto" style="background-color: var(--vscode-panel-bg);"><!></main></div></div>');function Fx(e,r){Ne(r,!1);const t=J();let a=J([]),n=J(!0),i=J(null),o=J(null),s=J("pretty"),u=J("compact");const f=typeof window<"u"&&typeof window.acquireVsCodeApi=="function"?window.acquireVsCodeApi():null;function c(k){return d(a).find(N=>N.id===k||l(N,k))}function l(k,N){return k.id===N?!0:k.children.some($=>l($,N))}function v(k){G(o,k.detail)}function p(k){let N;if(console.log("Parsing data, type:",typeof k,"isArray:",Array.isArray(k)),Array.isArray(k))N=k.map(B=>{const V={};B.inputs&&(V.inputs=B.inputs),B.input&&(V.input=B.input),B.messages&&(V.messages=B.messages),B.outputs&&(V.outputs=B.outputs),B.output&&(V.output=B.output),B.response&&(V.response=B.response,B.response.generations&&(V.generations=B.response.generations)),B.error&&(V.error=B.error);let X=B.observation_type||"unknown";return B.event&&(B.event.includes("llm")?X="generation":B.event.includes("tool")?X="tool":B.event.includes("chain")&&(X="chain")),{...B,timestamp:typeof B.timestamp=="string"?new Date(B.timestamp).getTime():B.timestamp,data:V,observation_type:X}});else if(k&&typeof k=="object")k.logs&&Array.isArray(k.logs)?(console.log("Object with logs array detected, extracting logs"),N=k.logs):(console.log("Single object detected, wrapping in array"),N=[k]);else{console.warn("Unexpected JSON format:",k),G(i,"Invalid file format. Expected JSON array or object."),G(n,!1);return}console.log("Parsed",N.length,"log events");const $=new U_;G(a,$.parseLogs(N)),console.log("Generated",d(a).length,"spans")}up(async()=>{if(console.log("Component mounted, vscode API available:",!!f),f)console.log("Using VS Code webview mode"),window.addEventListener("message",k=>{console.log("Received message:",k.data.type);const N=k.data;switch(N.type){case"update":const $=N.text;console.log("Received file content, length:",$.length);try{const B=JSON.parse($);p(B)}catch{console.log("JSON parse failed, trying JSONL format");try{const V=$.trim().split(`
`).filter(le=>le.trim());console.log("Found",V.length,"lines in JSONL");const X=V.map(le=>JSON.parse(le));p(X)}catch(V){console.error("Parse error:",V),G(i,"Failed to parse .langlens file. Ensure it is valid JSON or JSONL."),G(n,!1)}}G(n,!1);break}}),console.log("Sending ready message to extension"),f.postMessage({type:"ready"});else{console.log("Using standalone mode, fetching from server");try{const k=await fetch("/data");if(!k.ok)throw new Error("Failed to load data");const N=await k.text();try{const $=JSON.parse(N);p($)}catch{try{const V=N.trim().split(`
`).filter(X=>X.trim()).map(X=>JSON.parse(X));p(V)}catch(B){console.error("Parse error:",B),G(i,"Failed to parse data. Ensure it is valid JSON or JSONL.")}}}catch(k){G(i,k.message)}finally{G(n,!1)}}}),pe(()=>d(o),()=>{G(t,d(o)?c(d(o).id):null)}),Je(),Ue();var _=Ax(),g=T(_),h=T(g),y=T(h),m=T(y);{var x=k=>{var N=gx(),$=T(N,!0);A(N),Z(()=>re($,d(i))),I(k,N)},w=k=>{var N=ve(),$=ie(N);{var B=X=>{var le=_x();I(X,le)},V=X=>{var le=bx(),se=ie(le);gr(se,5,()=>d(a),pr,(ke,Se)=>{{let Re=te(()=>(d(o),M(()=>d(o)?.id)));Mp(ke,{get span(){return d(Se)},get selectedId(){return d(Re)},$$events:{select:v}})}}),A(se);var Ee=z(se,2);{var Oe=ke=>{var Se=yx();I(ke,Se)};ee(Ee,ke=>{d(a),M(()=>d(a).length===0)&&ke(Oe)})}I(X,le)};ee($,X=>{d(n)?X(B):X(V,!1)},!0)}I(k,N)};ee(m,k=>{d(i)?k(x):k(w,!1)})}A(y);var E=z(y,2);{var b=k=>{var N=mx(),$=T(N),B=z(T($),2),V=T(B),X=z(V,2);A(B),A($);var le=z($,2),se=T(le);{let Ee=te(()=>(d(o),M(()=>d(o)?.id)));nw(se,{get rootSpan(){return d(t)},get selectedId(){return d(Ee)},get viewMode(){return d(u)},$$events:{select:v}})}A(le),A(N),Z(()=>{mr(V,d(u)==="compact"?"background-color: var(--vscode-selection-bg); color: var(--vscode-link); font-weight: bold;":"color: var(--vscode-secondary-fg);"),mr(X,d(u)==="flow"?"background-color: var(--vscode-selection-bg); color: var(--vscode-link); font-weight: bold;":"color: var(--vscode-secondary-fg);")}),ye("click",V,()=>G(u,"compact")),ye("click",X,()=>G(u,"flow")),I(k,N)};ee(E,k=>{d(t)&&k(b)})}A(h);var q=z(h,2),S=T(q);{var O=k=>{var N=Rx(),$=T(N),B=T($);{var V=L=>{var F=Ex(),Y=T(F),ce=z(T(Y),2),oe=T(ce),ge=z(T(oe),2),be=T(ge,!0);A(ge),A(oe);var he=z(oe,2),_e=z(T(he),2),de=T(_e,!0);A(_e),A(he);var De=z(he,2),K=z(T(De),2),ue=T(K,!0);A(K),A(De);var we=z(De,2);{var Me=qe=>{var ae=wx(),U=z(T(ae));A(ae),Z(()=>re(U,` ${d(o),M(()=>d(o).errorMessage)??""}`)),I(qe,ae)};ee(we,qe=>{d(o),M(()=>d(o).errorMessage)&&qe(Me)})}A(ce),A(Y);var $e=z(Y,2),Le=T($e),xe=z(T(Le),2),W=T(xe);{var H=qe=>{dt(qe,{get value(){return d(o),M(()=>d(o).inputs)},expand:!0})},fe=qe=>{var ae=xx();I(qe,ae)};ee(W,qe=>{d(o),M(()=>d(o).inputs)?qe(H):qe(fe,!1)})}A(xe),A(Le);var me=z(Le,2),Ae=z(T(me),2),ze=T(Ae);{var We=qe=>{dt(qe,{get value(){return d(o),M(()=>d(o).outputs)},expand:!0})},Qe=qe=>{var ae=qx();I(qe,ae)};ee(ze,qe=>{d(o),M(()=>d(o).outputs)?qe(We):qe(Qe,!1)})}A(Ae),A(me),A($e),A(F),Z(qe=>{re(be,(d(o),M(()=>d(o).type))),mr(_e,`color: ${d(o),M(()=>d(o).status==="error"?"var(--vscode-error)":"var(--vscode-success)")??""};`),re(de,(d(o),M(()=>d(o).status))),re(ue,qe)},[()=>(d(o),M(()=>d(o).duration?(d(o).duration*1e3).toFixed(2)+"ms":"-"))]),I(L,F)},X=L=>{var F=kx(),Y=T(F);px(Y,{get value(){return d(o)},defaultExpandedLevel:1}),A(F),I(L,F)};ee(B,L=>{d(s)==="pretty"?L(V):L(X,!1)})}A($);var le=z($,2),se=T(le),Ee=T(se),Oe=T(Ee,!0);A(Ee);var ke=z(Ee,2),Se=T(ke,!0);A(ke),A(se);var Re=z(se,2),R=T(Re),P=z(R,2);A(Re),A(le),A(N),Z(()=>{re(Oe,(d(o),M(()=>d(o).name))),re(Se,(d(o),M(()=>d(o).id))),mr(R,d(s)==="pretty"?"background-color: var(--vscode-selection-bg); color: var(--vscode-link); font-weight: 500;":"color: var(--vscode-secondary-fg);"),mr(P,d(s)==="raw"?"background-color: var(--vscode-selection-bg); color: var(--vscode-link); font-weight: 500;":"color: var(--vscode-secondary-fg);")}),ye("click",R,()=>G(s,"pretty")),ye("click",P,()=>G(s,"raw")),I(k,N)},C=k=>{var N=Sx();I(k,N)};ee(S,k=>{d(o)?k(O):k(C,!1)})}A(q),A(g),A(_),I(e,_),Pe()}export{Fx as component,Lx as universal};
