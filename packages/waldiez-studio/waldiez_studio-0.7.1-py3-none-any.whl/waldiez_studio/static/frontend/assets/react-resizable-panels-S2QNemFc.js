import{r as e,j as t}from"./react-OZnHQ5N4.js";function n(e,t="Assertion error"){if(!e)throw Error(t)}function o({group:e}){const{orientation:t,panels:n}=e;return n.reduce((e,n)=>e+="horizontal"===t?n.element.offsetWidth:n.element.offsetHeight,0)}function r(e,t){return t.sort("horizontal"===e?a:i)}function a(e,t){const n=e.element.offsetLeft-t.element.offsetLeft;return 0!==n?n:e.element.offsetWidth-t.element.offsetWidth}function i(e,t){const n=e.element.offsetTop-t.element.offsetTop;return 0!==n?n:e.element.offsetHeight-t.element.offsetHeight}function s(e){return null!==e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function l(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function u({orientation:e,rects:t,targetRect:o}){const r={x:o.x+o.width/2,y:o.y+o.height/2};let a,i=Number.MAX_VALUE;for(const n of t){const{x:t,y:o}=l(r,n),s="horizontal"===e?t:o;s<i&&(i=s,a=n)}return n(a,"No rect found"),a}function c(e){const{element:t,orientation:n,panels:a,separators:i}=e,l=r(n,Array.from(t.children).filter(s).map(e=>({element:e}))).map(({element:e})=>e),c=[];let d,f=!1,p=[];for(const r of l)if(r.hasAttribute("data-panel")){const t=a.find(e=>e.element===r);if(t){if(d){const a=d.element.getBoundingClientRect(),i=r.getBoundingClientRect();let s;if(f){const e="horizontal"===n?new DOMRect(a.right,a.top,0,a.height):new DOMRect(a.left,a.bottom,a.width,0),t="horizontal"===n?new DOMRect(i.left,i.top,0,i.height):new DOMRect(i.left,i.top,i.width,0);switch(p.length){case 0:s=[e,t];break;case 1:{const o=p[0],r=u({orientation:n,rects:[a,i],targetRect:o.element.getBoundingClientRect()});s=[o,r===a?t:e];break}default:s=p}}else s=p.length?p:["horizontal"===n?new DOMRect(a.right,i.top,i.left-a.right,i.height):new DOMRect(i.left,a.bottom,i.width,i.top-a.bottom)];for(const n of s)c.push({group:e,groupSize:o({group:e}),panels:[d,t],separator:"width"in n?void 0:n,rect:"width"in n?n:n.element.getBoundingClientRect()})}f=!1,d=t,p=[]}}else if(r.hasAttribute("data-separator")){const e=i.find(e=>e.element===r);e?p.push(e):(d=void 0,p=[])}else f=!0;return c}function d({groupSize:e,panelElement:t,styleProp:n}){let o;const[r,a]=function(e){switch(typeof e){case"number":return[e,"px"];case"string":{const t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}(n);switch(a){case"%":o=r/100*e;break;case"px":o=r;break;case"rem":o=function(e,t){const n=getComputedStyle(e.ownerDocument.body);return t*parseFloat(n.fontSize)}(t,r);break;case"em":o=function(e,t){const n=getComputedStyle(e);return t*parseFloat(n.fontSize)}(t,r);break;case"vh":o=function(e){return e/100*window.innerHeight}(r);break;case"vw":o=function(e){return e/100*window.innerWidth}(r)}return o}function f(e){return parseFloat(e.toFixed(3))}function p(e){const{panels:t}=e,n=o({group:e});return 0===n?t.map(e=>({collapsedSize:0,collapsible:!0===e.panelConstraints.collapsible,defaultSize:void 0,minSize:0,maxSize:100,panelId:e.id})):t.map(e=>{const{element:t,panelConstraints:o}=e;let r,a=0;if(o.collapsedSize){a=f(d({groupSize:n,panelElement:t,styleProp:o.collapsedSize})/n*100)}if(o.defaultSize){r=f(d({groupSize:n,panelElement:t,styleProp:o.defaultSize})/n*100)}let i=0;if(o.minSize){i=f(d({groupSize:n,panelElement:t,styleProp:o.minSize})/n*100)}let s=100;if(o.maxSize){s=f(d({groupSize:n,panelElement:t,styleProp:o.maxSize})/n*100)}return{collapsedSize:a,collapsible:!0===o.collapsible,defaultSize:r,minSize:i,maxSize:s,panelId:e.id}})}function h(e,t,n=0){return Math.abs(f(e)-f(t))<=n}let m={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const g=new class{#e={};addListener(e,t){const n=this.#e[e];return void 0===n?this.#e[e]=[t]:n.includes(t)||n.push(t),()=>{this.removeListener(e,t)}}emit(e,t){const n=this.#e[e];if(void 0!==n)if(1===n.length)n[0].call(null,t);else{let e=!1,r=null;const a=Array.from(n);for(let n=0;n<a.length;n++){const i=a[n];try{i.call(null,t)}catch(o){null===r&&(e=!0,r=o)}}if(e)throw r}}removeAllListeners(){this.#e={}}removeListener(e,t){const n=this.#e[e];if(void 0!==n){const e=n.indexOf(t);e>=0&&n.splice(e,1)}}};function y(){return m}function v(e){const t="function"==typeof e?e(m):e;if(m===t)return m;const n=m;return m={...m,...t},void 0!==t.cursorFlags&&g.emit("cursorFlagsChange",m.cursorFlags),void 0!==t.interactionState&&g.emit("interactionStateChange",m.interactionState),void 0!==t.mountedGroups&&(m.mountedGroups.forEach((e,t)=>{e.derivedPanelConstraints.forEach(o=>{if(o.collapsible){const{layout:r}=n.mountedGroups.get(t)??{};if(r){const n=h(o.collapsedSize,e.layout[o.panelId]),a=h(o.collapsedSize,r[o.panelId]);n&&!a&&(t.inMemoryLastExpandedPanelSizes[o.panelId]=r[o.panelId])}}})}),g.emit("mountedGroupsChange",m.mountedGroups)),m}function b(e,t){return h(e,t)?0:e>t?1:-1}function S({panelConstraints:e,size:t}){const{collapsedSize:n=0,collapsible:o,maxSize:r=100,minSize:a=0}=e;if(b(t,a)<0)if(o){t=b(t,(n+a)/2)<0?n:a}else t=a;return t=f(t=Math.min(r,t))}function w({delta:e,initialLayout:t,panelConstraints:o,pivotIndices:r,prevLayout:a,trigger:i}){if(h(e,0))return t;const s=Object.values(t),l=Object.values(a),u=[...s],[c,d]=r;n(null!=c,"Invalid first pivot index"),n(null!=d,"Invalid second pivot index");let f=0;if("keyboard"===i){{const t=e<0?d:c,r=o[t];n(r,`Panel constraints not found for index ${t}`);const{collapsedSize:a=0,collapsible:i,minSize:l=0}=r;if(i){const o=s[t];if(n(null!=o,`Previous layout not found for panel index ${t}`),h(o,a)){const t=l-o;b(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{const t=e<0?c:d,r=o[t];n(r,`No panel constraints found for index ${t}`);const{collapsedSize:a=0,collapsible:i,minSize:l=0}=r;if(i){const o=s[t];if(n(null!=o,`Previous layout not found for panel index ${t}`),h(o,l)){const t=o-a;b(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{const t=e<0?1:-1;let r=e<0?d:c,a=0;for(;;){const e=s[r];n(null!=e,`Previous layout not found for panel index ${r}`);if(a+=S({panelConstraints:o[r],size:100})-e,r+=t,r<0||r>=o.length)break}const i=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-i:i}{let t=e<0?c:d;for(;t>=0&&t<o.length;){const r=Math.abs(e)-Math.abs(f),a=s[t];n(null!=a,`Previous layout not found for panel index ${t}`);const i=a-r,l=S({panelConstraints:o[t],size:i});if(!h(a,l)&&(f+=a-l,u[t]=l,f.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?t--:t++}}if(function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}(l,u))return a;{const t=e<0?d:c,r=s[t];n(null!=r,`Previous layout not found for panel index ${t}`);const a=r+f,i=S({panelConstraints:o[t],size:a});if(u[t]=i,!h(i,a)){let t=a-i,r=e<0?d:c;for(;r>=0&&r<o.length;){const a=u[r];n(null!=a,`Previous layout not found for panel index ${r}`);const i=a+t,s=S({panelConstraints:o[r],size:i});if(h(a,s)||(t-=s-a,u[r]=s),h(t,0))break;e>0?r--:r++}}}if(!h(Object.values(u).reduce((e,t)=>t+e,0),100,.1))return a;const p=Object.keys(a);return u.reduce((e,t,n)=>(e[p[n]]=t,e),{})}function z(e){const{mountedGroups:t}=y();for(const[n]of t)if(n.separators.some(t=>t.element===e))return n;throw Error("Could not find parent Group for separator element")}function x(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(void 0===t[n]||0!==b(e[n],t[n]))return!1;return!0}function C({layout:e,panelConstraints:t}){const o=[...Object.values(e)],r=o.reduce((e,t)=>e+t,0);if(o.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${o.map(e=>`${e}%`).join(", ")}`);if(!h(r,100)&&o.length>0)for(let s=0;s<t.length;s++){const e=o[s];n(null!=e,`No layout data found for index ${s}`);const t=100/r*e;o[s]=t}let a=0;for(let s=0;s<t.length;s++){const e=o[s];n(null!=e,`No layout data found for index ${s}`);const r=S({panelConstraints:t[s],size:e});e!=r&&(a+=e-r,o[s]=r)}if(!h(a,0))for(let s=0;s<t.length;s++){const e=o[s];n(null!=e,`No layout data found for index ${s}`);const r=e+a,i=S({panelConstraints:t[s],size:r});if(e!==i&&(a-=i-e,o[s]=i,h(a,0)))break}const i=Object.keys(e);return o.reduce((e,t,n)=>(e[i[n]]=t,e),{})}function L({groupId:e}){const t=()=>{const{mountedGroups:t}=y();for(const[n,o]of t)if(n.id===e)return{group:n,...o};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){const{defaultLayoutDeferred:e,layout:n}=t();return e?{}:n},setLayout(e){const{defaultLayoutDeferred:n,derivedPanelConstraints:o,group:r,layout:a,separatorToPanels:i}=t(),s=C({layout:e,panelConstraints:o});return n?a:(x(a,s)||v(e=>({mountedGroups:new Map(e.mountedGroups).set(r,{defaultLayoutDeferred:n,derivedPanelConstraints:o,layout:s,separatorToPanels:i})})),s)}}}function P(e){const{mountedGroups:t}=y(),o=t.get(e);return n(o,`Mounted Group ${e.id} not found`),o}function M(e,t){const o=z(e),r=P(o),a=o.separators.find(t=>t.element===e);n(a,"Matching separator not found");const i=r.separatorToPanels.get(a);n(i,"Matching panels not found");const s=i.map(e=>o.panels.indexOf(e)),l=L({groupId:o.id}).getLayout(),u=C({layout:w({delta:t,initialLayout:l,panelConstraints:r.derivedPanelConstraints,pivotIndices:s,prevLayout:l,trigger:"keyboard"}),panelConstraints:r.derivedPanelConstraints});x(l,u)||v(e=>({mountedGroups:new Map(e.mountedGroups).set(o,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:u,separatorToPanels:r.separatorToPanels})}))}function E(e){if(e.defaultPrevented)return;const t=e.currentTarget,o=z(t);if(!o.disabled)switch(e.key){case"ArrowDown":e.preventDefault(),"vertical"===o.orientation&&M(t,5);break;case"ArrowLeft":e.preventDefault(),"horizontal"===o.orientation&&M(t,-5);break;case"ArrowRight":e.preventDefault(),"horizontal"===o.orientation&&M(t,5);break;case"ArrowUp":e.preventDefault(),"vertical"===o.orientation&&M(t,-5);break;case"End":e.preventDefault(),M(t,100);break;case"Enter":{e.preventDefault();const o=z(t),{derivedPanelConstraints:r,layout:a,separatorToPanels:i}=P(o),s=o.separators.find(e=>e.element===t);n(s,"Matching separator not found");const l=i.get(s);n(l,"Matching panels not found");const u=l[0],c=r.find(e=>e.panelId===u.id);if(n(c,"Panel metadata not found"),c.collapsible){const e=a[u.id],n=c.collapsedSize===e?o.inMemoryLastExpandedPanelSizes[u.id]??c.minSize:c.collapsedSize;M(t,n-e)}break}case"F6":{e.preventDefault();const o=z(t).separators.map(e=>e.element),r=Array.from(o).findIndex(t=>t===e.currentTarget);n(null!==r,"Index not found");o[e.shiftKey?r>0?r-1:o.length-1:r+1<o.length?r+1:0].focus();break}case"Home":e.preventDefault(),M(t,-100)}}const k=e=>e,R=()=>{},G=10,D=5;let I;const T=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function O(e){const t=getComputedStyle(e);return!!("fixed"===t.position||"auto"!==t.zIndex&&("static"!==t.position||function(e){const t=getComputedStyle(F(e)??e).display;return"flex"===t||"inline-flex"===t}(e))||+t.opacity<1||"transform"in t&&"none"!==t.transform||"webkitTransform"in t&&"none"!==t.webkitTransform||"mixBlendMode"in t&&"normal"!==t.mixBlendMode||"filter"in t&&"none"!==t.filter||"webkitFilter"in t&&"none"!==t.webkitFilter||"isolation"in t&&"isolate"===t.isolation||T.test(t.willChange)||"touch"===t.webkitOverflowScrolling)}function N(e){let t=e.length;for(;t--;){const o=e[t];if(n(o,"Missing node"),O(o))return o}return null}function j(e){return e&&Number(getComputedStyle(e).zIndex)||0}function $(e){const t=[];for(;e;)t.push(e),e=F(e);return t}function F(e){const{parentNode:t}=e;return function(e){return null!==e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(t)?t.host:t}function A(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function W({groupElement:e,hitRegion:t,pointerEventTarget:o}){if(!s(o)||o.contains(e)||e.contains(o))return!0;if(function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const o={a:$(e),b:$(t)};let r;for(;o.a.at(-1)===o.b.at(-1);)e=o.a.pop(),t=o.b.pop(),r=e;n(r,"Stacking order can only be calculated for elements with a common ancestor");const a=j(N(o.a)),i=j(N(o.b));if(a===i){const e=r.childNodes,t={a:o.a.at(-1),b:o.b.at(-1)};let n=e.length;for(;n--;){const o=e[n];if(o===t.a)return 1;if(o===t.b)return-1}}return Math.sign(a-i)}(o,e)>0){let n=o;for(;n;){if(n.contains(e))return!0;if(A(n.getBoundingClientRect(),t))return!1;n=n.parentElement}}return!0}function B(e,t){const n=[];return t.forEach((t,o)=>{if(o.disabled)return;const r=(void 0===I&&(I="function"==typeof matchMedia&&!!matchMedia("(pointer:coarse)").matches),I?G:D),a=c(o),i=function(e,t,n){let o,r={x:1/0,y:1/0};for(const a of t){const t=l(n,a.rect);switch(e){case"horizontal":t.x<=r.x&&(o=a,r=t);break;case"vertical":t.y<=r.y&&(o=a,r=t)}}return o?{distance:r,hitRegion:o}:void 0}(o.orientation,a,{x:e.clientX,y:e.clientY});i&&i.distance.x<=r&&i.distance.y<=r&&W({groupElement:o.element,hitRegion:i.hitRegion.rect,pointerEventTarget:e.target})&&n.push(i.hitRegion)}),n}function H(e){if(e.defaultPrevented)return;if("mouse"===e.pointerType&&e.button>0)return;const{mountedGroups:t}=y(),n=B(e,t),o=new Set,r=new Set,a=new Set,i=new Map;let s=!1;n.forEach(e=>{o.add(e.group),e.panels.forEach(e=>{r.add(e)}),e.separator&&(a.add(e.separator),s||(s=!0,e.separator.element.focus()));const n=t.get(e.group);n&&i.set(e.group,n.layout)}),v({interactionState:{hitRegions:n,initialLayoutMap:i,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),n.length&&e.preventDefault()}const V=new WeakMap;function U(e){if(null===e.defaultView||void 0===e.defaultView)return;let{prevStyle:t,styleSheet:n}=V.get(e)??{};void 0===n&&(n=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[n]);const{cursorFlags:o,interactionState:r}=y();switch(r.state){case"active":case"hover":{const e=function({cursorFlags:e,groups:t,state:n}){let o=0,r=0;switch(n){case"active":case"hover":t.forEach(e=>{if(!e.disableCursor)switch(e.orientation){case"horizontal":o++;break;case"vertical":r++}})}if(0===o&&0===r)return null;switch(n){case"active":{const t=!!(4&e),n=!!(8&e);if(e){if(1&e)return t?"se-resize":n?"ne-resize":"e-resize";if(2&e)return t?"sw-resize":n?"nw-resize":"w-resize";if(t)return"s-resize";if(n)return"n-resize"}break}}return o>0&&r>0?"move":o>0?"ew-resize":"ns-resize"}({cursorFlags:o,groups:r.hitRegions.map(e=>e.group),state:r.state}),a=`*{cursor: ${e} !important; ${"active"===r.state?"touch-action: none;":""} }`;if(t===a)return;t=a,e?0===n.cssRules.length?n.insertRule(a):n.replaceSync(a):1===n.cssRules.length&&n.deleteRule(0);break}case"inactive":t=void 0,1===n.cssRules.length&&n.deleteRule(0)}V.set(e,{prevStyle:t,styleSheet:n})}function X({document:e,event:t,hitRegions:n,initialLayoutMap:o,mountedGroups:r,pointerDownAtPoint:a}){let i=0;const s=new Map(r);n.forEach(e=>{const{group:n,groupSize:l}=e,{disableCursor:u,orientation:c,panels:d}=n;let f=0;f=a?"horizontal"===c?(t.clientX-a.x)/l*100:(t.clientY-a.y)/l*100:"horizontal"===c?t.clientX<0?-100:100:t.clientY<0?-100:100;const p=o.get(n),{defaultLayoutDeferred:h,derivedPanelConstraints:m,layout:g,separatorToPanels:y}=r.get(n)??{defaultLayoutDeferred:!1};if(m&&p&&g&&y){const t=w({delta:f,initialLayout:p,panelConstraints:m,pivotIndices:e.panels.map(e=>d.indexOf(e)),prevLayout:g,trigger:"mouse-or-touch"});if(x(t,g)){if(0!==f&&!u)switch(c){case"horizontal":i|=f<0?1:2;break;case"vertical":i|=f<0?4:8}}else{s.set(e.group,{defaultLayoutDeferred:h,derivedPanelConstraints:m,layout:t,separatorToPanels:y});const n=e.group.panels.map(({id:e})=>e).join(",");e.group.inMemoryLayouts[n]=t}}}),v({cursorFlags:i,mountedGroups:s}),U(e)}function Y(e){const{interactionState:t,mountedGroups:n}=y();if("active"===t.state)X({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n})}function _(e){if(e.defaultPrevented)return;const{interactionState:t,mountedGroups:n}=y();switch(t.state){case"active":if(0===e.buttons)return v(e=>"inactive"===e.interactionState.state?e:{cursorFlags:0,interactionState:{state:"inactive"}}),void v(e=>({mountedGroups:new Map(e.mountedGroups)}));X({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:t.pointerDownAtPoint});break;default:{const o=B(e,n);0===o.length?"inactive"!==t.state&&v({interactionState:{state:"inactive"}}):v({interactionState:{hitRegions:o,state:"hover"}}),U(e.currentTarget);break}}}function q(e){if(e.defaultPrevented)return;if("mouse"===e.pointerType&&e.button>0)return;const{interactionState:t}=y();if("active"===t.state)v({cursorFlags:0,interactionState:{state:"inactive"}}),t.hitRegions.length>0&&(U(e.currentTarget),v(e=>({mountedGroups:new Map(e.mountedGroups)})),e.preventDefault())}function J(e){let t=0,n=0;const o={};for(const a of e)if(void 0!==a.defaultSize){t++;const e=f(a.defaultSize);n+=e,o[a.panelId]=e}else o[a.panelId]=void 0;const r=e.length-t;if(0!==r){const t=f((100-n)/r);for(const n of e)void 0===n.defaultSize&&(o[n.panelId]=t)}return o}function K(e,t,n){if(!n[0])return;const r=e.panels.find(e=>e.element===t);if(!r||!r.onResize)return;const a=o({group:e}),i="horizontal"===e.orientation?r.element.offsetWidth:r.element.offsetHeight,s=r.mutableValues.prevSize,l={asPercentage:f(i/a*100),inPixels:i};r.mutableValues.prevSize=l,r.onResize(l,r.id,s)}function Q(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}const Z=new Map;function ee(e){let t=!0;n(e.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const r=e.element.ownerDocument.defaultView.ResizeObserver,a=new Set,i=new Set,s=new r(n=>{for(const r of n){const{borderBoxSize:n,target:a}=r;if(a===e.element){if(t){if(0===o({group:e}))return;v(t=>{const n=t.mountedGroups.get(e);if(n){const o=p(e),r=n.defaultLayoutDeferred?J(o):n.layout,a=C({layout:r,panelConstraints:o});return!n.defaultLayoutDeferred&&x(r,a)&&Q(n.derivedPanelConstraints,o)?t:{mountedGroups:new Map(t.mountedGroups).set(e,{defaultLayoutDeferred:!1,derivedPanelConstraints:o,layout:a,separatorToPanels:n.separatorToPanels})}}return t})}}else K(e,a,n)}});s.observe(e.element),e.panels.forEach(e=>{n(!a.has(e.id),`Panel ids must be unique; id "${e.id}" was used more than once`),a.add(e.id),e.onResize&&s.observe(e.element)});const l=o({group:e}),u=p(e),d=e.panels.map(({id:e})=>e).join(",");let f=e.defaultLayout;f&&(function(e,t){const n=e.map(e=>e.id),o=Object.keys(t);if(n.length!==o.length)return!1;for(const r of n)if(!o.includes(r))return!1;return!0}(e.panels,f)||(f=void 0));const h=C({layout:e.inMemoryLayouts[d]??f??J(u),panelConstraints:u}),m=c(e),g=e.element.ownerDocument;return v(t=>{const n=new Map;return Z.set(g,(Z.get(g)??0)+1),m.forEach(e=>{e.separator&&n.set(e.separator,e.panels)}),{mountedGroups:new Map(t.mountedGroups).set(e,{defaultLayoutDeferred:0===l,derivedPanelConstraints:u,layout:h,separatorToPanels:n})}}),e.separators.forEach(e=>{n(!i.has(e.id),`Separator ids must be unique; id "${e.id}" was used more than once`),i.add(e.id),e.element.addEventListener("keydown",E)}),1===Z.get(g)&&(g.addEventListener("pointerdown",H,!0),g.addEventListener("pointerleave",Y),g.addEventListener("pointermove",_),g.addEventListener("pointerup",q,!0)),function(){t=!1,Z.set(g,Math.max(0,(Z.get(g)??0)-1)),v(t=>{const n=new Map(t.mountedGroups);return n.delete(e),{mountedGroups:n}}),e.separators.forEach(e=>{e.element.removeEventListener("keydown",E)}),Z.get(g)||(g.removeEventListener("pointerdown",H,!0),g.removeEventListener("pointerleave",Y),g.removeEventListener("pointermove",_),g.removeEventListener("pointerup",q,!0)),s.disconnect()}}function te(){const[t,n]=e.useState({});return[t,e.useCallback(()=>n({}),[])]}function ne(t){const n=e.useId();return`${t??n}`}const oe=typeof window<"u"?e.useLayoutEffect:e.useEffect;function re(t){const n=e.useRef(t);return oe(()=>{n.current=t},[t]),e.useCallback((...e)=>n.current?.(...e),[n])}function ae(...e){return re(t=>{e.forEach(e=>{if(e)switch(typeof e){case"function":e(t);break;case"object":e.current=t}})})}const ie=e.createContext(null);function se({children:n,className:o,defaultLayout:a,disableCursor:i,disabled:s,elementRef:l,groupRef:u,id:c,onLayoutChange:d,onLayoutChanged:f,orientation:p="horizontal",style:h,...m}){const v=e.useRef({onLayoutChange:{},onLayoutChanged:{}}),b=re(e=>{x(v.current.onLayoutChange,e)||(v.current.onLayoutChange=e,d?.(e))}),S=re(e=>{x(v.current.onLayoutChanged,e)||(v.current.onLayoutChanged=e,f?.(e))}),w=ne(c),z=e.useRef(null),[C,P]=te(),M=e.useRef({lastExpandedPanelSizes:{},layouts:{},panels:[],separators:[]}),E=ae(z,l);!function(t,n){const o=e.useRef({getLayout:()=>({}),setLayout:k});e.useImperativeHandle(n,()=>o.current,[]),oe(()=>{Object.assign(o.current,L({groupId:t}))})}(w,u);const R=re((e,t)=>{const{interactionState:n,mountedGroups:o}=y();for(const r of o.keys())if(r.id===e){const e=o.get(r);if(e){let o=!1;if("active"===n.state)o=n.hitRegions.some(e=>e.group===r);return{flexGrow:e.layout[t]??1,pointerEvents:o?"none":void 0}}}return{flexGrow:a?.[t]??1}}),G=e.useMemo(()=>({getPanelStyles:R,id:w,orientation:p,registerPanel:e=>{const t=M.current;return t.panels=r(p,[...t.panels,e]),P(),()=>{t.panels=t.panels.filter(t=>t!==e),P()}},registerSeparator:e=>{const t=M.current;return t.separators=r(p,[...t.separators,e]),P(),()=>{t.separators=t.separators.filter(t=>t!==e),P()}}}),[R,w,P,p]),D=function(t){const n=e.useRef({...t});return oe(()=>{for(const e in t)n.current[e]=t[e]},[t]),n.current}({defaultLayout:a,disableCursor:i}),I=e.useRef(null);return oe(()=>{const e=z.current;if(null===e)return;const t=M.current,n={defaultLayout:D.defaultLayout,disableCursor:!!D.disableCursor,disabled:!!s,element:e,id:w,inMemoryLastExpandedPanelSizes:M.current.lastExpandedPanelSizes,inMemoryLayouts:M.current.layouts,orientation:p,panels:t.panels,separators:t.separators};I.current=n;const o=ee(n),r=y().mountedGroups.get(n);if(r){const{defaultLayoutDeferred:e,derivedPanelConstraints:n,layout:o}=r;!e&&n.length>0&&(b(o),S(o),t.panels.forEach(e=>{e.scheduleUpdate()}))}const a=g.addListener("interactionStateChange",()=>{t.panels.forEach(e=>{e.scheduleUpdate()})}),i=g.addListener("mountedGroupsChange",e=>{const o=e.get(n);if(o){const{defaultLayoutDeferred:e,derivedPanelConstraints:n,layout:r}=o;if(e||0===n.length)return;const{interactionState:a}=y(),i="active"!==a.state;b(r),i&&S(r),t.panels.forEach(e=>{e.scheduleUpdate()})}});return()=>{I.current=null,o(),a(),i()}},[s,w,S,b,p,C,D]),e.useEffect(()=>{const e=I.current;e&&(e.defaultLayout=a,e.disableCursor=!!i)}),t.jsx(ie.Provider,{value:G,children:t.jsx("div",{...m,"aria-orientation":p,className:o,"data-group":!0,"data-testid":w,id:w,ref:E,style:{height:"100%",width:"100%",overflow:"hidden",...h,display:"flex",flexDirection:"horizontal"===p?"row":"column",flexWrap:"nowrap"},children:n})})}function le(e,t){return`react-resizable-panels:${[e,...t].join(":")}`}function ue({debounceSaveMs:t=100,panelIds:n,storage:o=localStorage,...r}){const a=void 0!==n,i="id"in r?r.id:r.groupId,s=le(i,n??[]),l=e.useSyncExternalStore(ce,()=>o.getItem(s),()=>o.getItem(s)),u=e.useMemo(()=>l?JSON.parse(l):void 0,[l]),c=e.useRef(null),d=e.useCallback(()=>{const e=c.current;e&&(c.current=null,clearTimeout(e))},[]);e.useLayoutEffect(()=>()=>{d()},[d]);const f=e.useCallback(e=>{let t;d(),t=le(i,a?Object.keys(e):[]);try{o.setItem(t,JSON.stringify(e))}catch(n){}},[d,a,i,o]);return{defaultLayout:u,onLayoutChange:e.useCallback(e=>{d(),0===t?f(e):c.current=setTimeout(()=>{f(e)},t)},[d,t,f]),onLayoutChanged:f}}function ce(){return function(){}}function de(){const t=e.useContext(ie);return n(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function fe(t,n){const{id:r}=de(),a=e.useRef({collapse:R,expand:R,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:R});e.useImperativeHandle(n,()=>a.current,[]),oe(()=>{Object.assign(a.current,function({groupId:e,panelId:t}){const n=()=>{const{mountedGroups:t}=y();for(const[n,{defaultLayoutDeferred:o,derivedPanelConstraints:r,layout:a,separatorToPanels:i}]of t)if(n.id===e)return{defaultLayoutDeferred:o,derivedPanelConstraints:r,group:n,layout:a,separatorToPanels:i};throw Error(`Group ${e} not found`)},r=()=>{const e=n().derivedPanelConstraints.find(e=>e.panelId===t);if(void 0!==e)return e;throw Error(`Panel constraints not found for Panel ${t}`)},a=()=>{const e=n().group.panels.find(e=>e.id===t);if(void 0!==e)return e;throw Error(`Layout not found for Panel ${t}`)},i=()=>{const e=n().layout[t];if(void 0!==e)return e;throw Error(`Layout not found for Panel ${t}`)},s=e=>{const o=i();if(e===o)return;const{defaultLayoutDeferred:r,derivedPanelConstraints:a,group:s,layout:l,separatorToPanels:u}=n(),c=s.panels.findIndex(e=>e.id===t),d=c===s.panels.length-1,f=C({layout:w({delta:d?o-e:e-o,initialLayout:l,panelConstraints:a,pivotIndices:d?[c-1,c]:[c,c+1],prevLayout:l,trigger:"imperative-api"}),panelConstraints:a});x(l,f)||v(e=>({mountedGroups:new Map(e.mountedGroups).set(s,{defaultLayoutDeferred:r,derivedPanelConstraints:a,layout:f,separatorToPanels:u})}))};return{collapse:()=>{const{collapsible:e,collapsedSize:t}=r(),{mutableValues:n}=a(),o=i();e&&o!==t&&(n.expandToSize=o,s(t))},expand:()=>{const{collapsible:e,collapsedSize:t,minSize:n}=r(),{mutableValues:o}=a(),l=i();if(e&&l===t){let e=o.expandToSize??n;0===e&&(e=1),s(e)}},getSize:()=>{const{group:e}=n(),t=i(),{element:o}=a();return{asPercentage:t,inPixels:"horizontal"===e.orientation?o.offsetWidth:o.offsetHeight}},isCollapsed:()=>{const{collapsible:e,collapsedSize:t}=r(),n=i();return e&&h(t,n)},resize:e=>{if(i()!==e){let t;switch(typeof e){case"number":{const{group:r}=n();t=f(e/o({group:r})*100);break}case"string":t=parseFloat(e)}s(t)}}}}({groupId:r,panelId:t}))})}function pe({children:n,className:o,collapsedSize:r="0%",collapsible:a=!1,defaultSize:i,elementRef:s,id:l,maxSize:u="100%",minSize:c="0%",onResize:d,panelRef:f,style:p,...h}){const m=!!l,g=ne(l),y=e.useRef(null),v=ae(y,s),[,b]=te(),{getPanelStyles:S,id:w,registerPanel:z}=de(),x=null!==d,C=re((e,t,n)=>{d?.(e,l,n)});oe(()=>{const e=y.current;if(null!==e)return z({element:e,id:g,idIsStable:m,mutableValues:{expandToSize:void 0,prevSize:void 0},onResize:x?C:void 0,panelConstraints:{collapsedSize:r,collapsible:a,defaultSize:i,maxSize:u,minSize:c},scheduleUpdate:b})},[r,a,i,b,x,g,m,u,c,C,z]),fe(g,f);const L=S(w,g);return t.jsx("div",{...h,"data-panel":!0,"data-testid":g,id:g,ref:v,style:{...he,flexBasis:0,flexShrink:1,overflow:"hidden",...L},children:t.jsx("div",{className:o,style:{width:"100%",height:"100%",...p},children:n})})}se.displayName="Group",pe.displayName="Panel";const he={minHeight:0,maxHeight:"100%",height:"auto",minWidth:0,maxWidth:"100%",width:"auto",border:"none",borderWidth:0,padding:0,margin:0};function me(){return e.useRef(null)}function ge({children:n,className:o,elementRef:r,id:a,style:i,...s}){const l=ne(a),[u,c]=e.useState({}),[d,f]=e.useState("inactive"),p=e.useRef(null),h=ae(p,r),{id:m,orientation:y,registerSeparator:v}=de(),b="horizontal"===y?"vertical":"horizontal";return oe(()=>{const e=p.current;if(null!==e){const t={element:e,id:l},n=v(t),o=g.addListener("interactionStateChange",e=>{f("inactive"!==e.state&&e.hitRegions.some(e=>e.separator===t)?e.state:"inactive")}),r=g.addListener("mountedGroupsChange",e=>{e.forEach(({derivedPanelConstraints:e,layout:n,separatorToPanels:o},r)=>{if(r.id===m){const a=o.get(t);if(a){const t=a[0],o=r.panels.indexOf(t);c(function({layout:e,panelConstraints:t,panelId:n,panelIndex:o}){let r,a;const i=e[n],s=t.find(e=>e.panelId===n);if(s){const l=s.maxSize,u=a=s.collapsible?s.collapsedSize:s.minSize,c=[o,o+1];a=C({layout:w({delta:u-i,initialLayout:e,panelConstraints:t,pivotIndices:c,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n],r=C({layout:w({delta:l-i,initialLayout:e,panelConstraints:t,pivotIndices:c,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n]}return{valueControls:n,valueMax:r,valueMin:a,valueNow:i}}({layout:n,panelConstraints:e,panelId:t.id,panelIndex:o}))}}})});return()=>{o(),r(),n()}}},[m,l,v]),t.jsx("div",{...s,"aria-controls":u.valueControls,"aria-orientation":b,"aria-valuemax":u.valueMax,"aria-valuemin":u.valueMin,"aria-valuenow":u.valueNow,children:n,className:o,"data-separator":d,"data-testid":l,id:l,ref:h,role:"separator",style:{flexBasis:"auto",...i,flexGrow:0,flexShrink:0},tabIndex:0})}ge.displayName="Separator";export{me as $,se as C,ge as D,ue as N,pe as k};
