function t(t){return t.charCodeAt(0)}function e(t,e){Array.isArray(t)?t.forEach(function(t){e.push(t)}):e.push(t)}function r(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e],t[e]=!0}function n(t){if(void 0===t)throw Error("Internal Error - Should never get here!");return!0}function i(t){return"Character"===t.type}const a=[];for(let Kr=t("0");Kr<=t("9");Kr++)a.push(Kr);const o=[t("_")].concat(a);for(let Kr=t("a");Kr<=t("z");Kr++)o.push(Kr);for(let Kr=t("A");Kr<=t("Z");Kr++)o.push(Kr);const s=[t(" "),t("\f"),t("\n"),t("\r"),t("\t"),t("\v"),t("\t"),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t(" "),t("\u2028"),t("\u2029"),t(" "),t(" "),t("　"),t("\ufeff")],c=/[0-9a-fA-F]/,u=/[0-9]/,h=/[1-9]/;class f{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");const e=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":r(n,"global");break;case"i":r(n,"ignoreCase");break;case"m":r(n,"multiLine");break;case"u":r(n,"unicode");break;case"y":r(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e,loc:this.loc(0)}}disjunction(){const t=[],e=this.idx;for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(e)}}alternative(){const t=[],e=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(e)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":let e;switch(this.consumeChar("?"),this.popChar()){case"=":e="Lookahead";break;case"!":e="NegativeLookahead"}n(e);const r=this.disjunction();return this.consumeChar(")"),{type:e,value:r,loc:this.loc(t)}}return function(){throw Error("Internal Error - Should never get here!")}()}quantifier(t=!1){let e;const r=this.idx;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":const r=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:r,atMost:r};break;case",":let t;this.isDigit()?(t=this.integerIncludingZero(),e={atLeast:r,atMost:t}):e={atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;n(e)}if(!0!==t||void 0!==e)return n(e)?("?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e.loc=this.loc(r),e):void 0}atom(){let t;const e=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}if(void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),n(t))return t.loc=this.loc(e),this.isQuantifier()&&(t.quantifier=this.quantifier()),t}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[t("\n"),t("\r"),t("\u2028"),t("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,e=!1;switch(this.popChar()){case"d":t=a;break;case"D":t=a,e=!0;break;case"s":t=s;break;case"S":t=s,e=!0;break;case"w":t=o;break;case"W":t=o,e=!0}if(n(t))return{type:"Set",value:t,complement:e}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=t("\f");break;case"n":e=t("\n");break;case"r":e=t("\r");break;case"t":e=t("\t");break;case"v":e=t("\v")}if(n(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:t("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:t(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:t(this.popChar())}}}characterClass(){const r=[];let n=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const n=this.classAtom();if(n.type,i(n)&&this.isRangeDash()){this.consumeChar("-");const a=this.classAtom();if(a.type,i(a)){if(a.value<n.value)throw Error("Range out of order in character class");r.push({from:n.value,to:a.value})}else e(n.value,r),r.push(t("-")),e(a.value,r)}else e(n.value,r)}return this.consumeChar("]"),{type:"Set",complement:n,value:r}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:t("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;if(this.consumeChar("("),"?"===this.peekChar(0))this.consumeChar("?"),this.consumeChar(":"),t=!1;else this.groupIdx++;const e=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:t,value:e};return t&&(r.idx=this.groupIdx),r}positiveInteger(){let t=this.popChar();if(!1===h.test(t))throw Error("Expecting a positive integer");for(;u.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(!1===u.test(t))throw Error("Expecting an integer");for(;u.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){const e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:t(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return u.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){const t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(e){return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let e="";for(let r=0;r<t;r++){const t=this.popChar();if(!1===c.test(t))throw Error("Expecting a HexDecimal digits");e+=t}return{type:"Character",value:parseInt(e,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){const t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}}class l{visitChildren(t){for(const e in t){const r=t[e];t.hasOwnProperty(e)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach(t=>{this.visit(t)},this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}}function p(t){console&&console.error}function v(t){console&&console.warn}function d(t){const e=(new Date).getTime(),r=t();return{time:(new Date).getTime()-e,value:r}}function y(t){function e(){}e.prototype=t;const r=new e;function n(){return typeof r.bar}return n(),n(),t}var b="object"==typeof global&&global&&global.Object===Object&&global,g="object"==typeof self&&self&&self.Object===Object&&self,m=b||g||Function("return this")(),_=m.Symbol,j=Object.prototype,x=j.hasOwnProperty,C=j.toString,A=_?_.toStringTag:void 0;var w=Object.prototype.toString;var k=_?_.toStringTag:void 0;function E(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in Object(t)?function(t){var e=x.call(t,A),r=t[A];try{t[A]=void 0;var n=!0}catch(a){}var i=C.call(t);return n&&(e?t[A]=r:delete t[A]),i}(t):function(t){return w.call(t)}(t)}function O(t){return null!=t&&"object"==typeof t}function S(t){return"symbol"==typeof t||O(t)&&"[object Symbol]"==E(t)}function T(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var P=Array.isArray,R=_?_.prototype:void 0,L=R?R.toString:void 0;function B(t){if("string"==typeof t)return t;if(P(t))return T(t,B)+"";if(S(t))return L?L.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}var I=/\s/;var N=/^\s+/;function z(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&I.test(t.charAt(e)););return e}(t)+1).replace(N,""):t}function D(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var M=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,$=/^0o[0-7]+$/i,F=parseInt;var U=1/0;function q(t){return t?(t=function(t){if("number"==typeof t)return t;if(S(t))return NaN;if(D(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=D(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=z(t);var r=W.test(t);return r||$.test(t)?F(t.slice(2),r?2:8):M.test(t)?NaN:+t}(t))===U||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function G(t){return t}function Q(t){if(!D(t))return!1;var e=E(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Z,H=m["__core-js_shared__"],V=(Z=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var Y=Function.prototype.toString;function J(t){if(null!=t){try{return Y.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var K=/^\[object .+?Constructor\]$/,X=Function.prototype,tt=Object.prototype,et=X.toString,rt=tt.hasOwnProperty,nt=RegExp("^"+et.call(rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function it(t){return!(!D(t)||(e=t,V&&V in e))&&(Q(t)?nt:K).test(J(t));var e}function at(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return it(r)?r:void 0}var ot=at(m,"WeakMap");var st=Date.now;var ct,ut,ht,ft=function(){try{var t=at(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),lt=ft?function(t,e){return ft(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:G,pt=(ct=lt,ut=0,ht=0,function(){var t=st(),e=16-(t-ht);if(ht=t,e>0){if(++ut>=800)return arguments[0]}else ut=0;return ct.apply(void 0,arguments)});function vt(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function dt(t){return t!=t}var yt=/^(?:0|[1-9]\d*)$/;function bt(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&yt.test(t))&&t>-1&&t%1==0&&t<e}function gt(t,e,r){"__proto__"==e&&ft?ft(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function mt(t,e){return t===e||t!=t&&e!=e}var _t=Object.prototype.hasOwnProperty;function jt(t,e,r){var n=t[e];_t.call(t,e)&&mt(n,r)&&(void 0!==r||e in t)||gt(t,e,r)}var xt=Math.max;function Ct(t,e){return pt(function(t,e,r){return e=xt(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=xt(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,s)}}(t,e,G),t+"")}function At(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function wt(t){return null!=t&&At(t.length)&&!Q(t)}var kt=Object.prototype;function Et(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function Ot(t){return O(t)&&"[object Arguments]"==E(t)}var St=Object.prototype,Tt=St.hasOwnProperty,Pt=St.propertyIsEnumerable,Rt=Ot(function(){return arguments}())?Ot:function(t){return O(t)&&Tt.call(t,"callee")&&!Pt.call(t,"callee")};var Lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bt=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,It=Bt&&Bt.exports===Lt?m.Buffer:void 0,Nt=(It?It.isBuffer:void 0)||function(){return!1},zt={};function Dt(t){return function(e){return t(e)}}zt["[object Float32Array]"]=zt["[object Float64Array]"]=zt["[object Int8Array]"]=zt["[object Int16Array]"]=zt["[object Int32Array]"]=zt["[object Uint8Array]"]=zt["[object Uint8ClampedArray]"]=zt["[object Uint16Array]"]=zt["[object Uint32Array]"]=!0,zt["[object Arguments]"]=zt["[object Array]"]=zt["[object ArrayBuffer]"]=zt["[object Boolean]"]=zt["[object DataView]"]=zt["[object Date]"]=zt["[object Error]"]=zt["[object Function]"]=zt["[object Map]"]=zt["[object Number]"]=zt["[object Object]"]=zt["[object RegExp]"]=zt["[object Set]"]=zt["[object String]"]=zt["[object WeakMap]"]=!1;var Mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wt=Mt&&"object"==typeof module&&module&&!module.nodeType&&module,$t=Wt&&Wt.exports===Mt&&b.process,Ft=function(){try{var t=Wt&&Wt.require&&Wt.require("util").types;return t||$t&&$t.binding&&$t.binding("util")}catch(e){}}(),Ut=Ft&&Ft.isTypedArray,qt=Ut?Dt(Ut):function(t){return O(t)&&At(t.length)&&!!zt[E(t)]},Gt=Object.prototype.hasOwnProperty;function Qt(t,e){var r=P(t),n=!r&&Rt(t),i=!r&&!n&&Nt(t),a=!r&&!n&&!i&&qt(t),o=r||n||i||a,s=o?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=s.length;for(var u in t)!e&&!Gt.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bt(u,c))||s.push(u);return s}function Zt(t,e){return function(r){return t(e(r))}}var Ht=Zt(Object.keys,Object),Vt=Object.prototype.hasOwnProperty;function Yt(t){return wt(t)?Qt(t):function(t){if(!Et(t))return Ht(t);var e=[];for(var r in Object(t))Vt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var Jt,Kt=Object.prototype.hasOwnProperty,Xt=(Jt=function(t,e){if(Et(e)||wt(e))!function(t,e,r){var n=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var o=e[i],s=void 0;void 0===s&&(s=t[o]),n?gt(r,o,s):jt(r,o,s)}}(e,Yt(e),t);else for(var r in e)Kt.call(e,r)&&jt(t,r,e[r])},Ct(function(t,e){var r=-1,n=e.length,i=n>1?e[n-1]:void 0,a=n>2?e[2]:void 0;for(i=Jt.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(t,e,r){if(!D(r))return!1;var n=typeof e;return!!("number"==n?wt(r)&&bt(e,r.length):"string"==n&&e in r)&&mt(r[e],t)}(e[0],e[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var o=e[r];o&&Jt(t,o,r,i)}return t}));var te=Object.prototype.hasOwnProperty;function ee(t){if(!D(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=Et(t),r=[];for(var n in t)("constructor"!=n||!e&&te.call(t,n))&&r.push(n);return r}function re(t){return wt(t)?Qt(t,!0):ee(t)}var ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ie=/^\w*$/;function ae(t,e){if(P(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!S(t))||(ie.test(t)||!ne.test(t)||null!=e&&t in Object(e))}var oe=at(Object,"create");var se=Object.prototype.hasOwnProperty;var ce=Object.prototype.hasOwnProperty;function ue(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function he(t,e){for(var r=t.length;r--;)if(mt(t[r][0],e))return r;return-1}ue.prototype.clear=function(){this.__data__=oe?oe(null):{},this.size=0},ue.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ue.prototype.get=function(t){var e=this.__data__;if(oe){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return se.call(e,t)?e[t]:void 0},ue.prototype.has=function(t){var e=this.__data__;return oe?void 0!==e[t]:ce.call(e,t)},ue.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=oe&&void 0===e?"__lodash_hash_undefined__":e,this};var fe=Array.prototype.splice;function le(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}le.prototype.clear=function(){this.__data__=[],this.size=0},le.prototype.delete=function(t){var e=this.__data__,r=he(e,t);return!(r<0)&&(r==e.length-1?e.pop():fe.call(e,r,1),--this.size,!0)},le.prototype.get=function(t){var e=this.__data__,r=he(e,t);return r<0?void 0:e[r][1]},le.prototype.has=function(t){return he(this.__data__,t)>-1},le.prototype.set=function(t,e){var r=this.__data__,n=he(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var pe=at(m,"Map");function ve(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function de(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}de.prototype.clear=function(){this.size=0,this.__data__={hash:new ue,map:new(pe||le),string:new ue}},de.prototype.delete=function(t){var e=ve(this,t).delete(t);return this.size-=e?1:0,e},de.prototype.get=function(t){return ve(this,t).get(t)},de.prototype.has=function(t){return ve(this,t).has(t)},de.prototype.set=function(t,e){var r=ve(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ye(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(ye.Cache||de),r}ye.Cache=de;var be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,me=function(t){var e=ye(t,function(t){return 500===r.size&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(be,function(t,r,n,i){e.push(n?i.replace(ge,"$1"):r||t)}),e});function _e(t,e){return P(t)?t:ae(t,e)?[t]:me(function(t){return null==t?"":B(t)}(t))}function je(t){if("string"==typeof t||S(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function xe(t,e){for(var r=0,n=(e=_e(e,t)).length;null!=t&&r<n;)t=t[je(e[r++])];return r&&r==n?t:void 0}function Ce(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Ae=Zt(Object.getPrototypeOf,Object);function we(t){var e=this.__data__=new le(t);this.size=e.size}function ke(){return[]}we.prototype.clear=function(){this.__data__=new le,this.size=0},we.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},we.prototype.get=function(t){return this.__data__.get(t)},we.prototype.has=function(t){return this.__data__.has(t)},we.prototype.set=function(t,e){var r=this.__data__;if(r instanceof le){var n=r.__data__;if(!pe||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new de(n)}return r.set(t,e),this.size=r.size,this};var Ee=Object.prototype.propertyIsEnumerable,Oe=Object.getOwnPropertySymbols,Se=Oe?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}(Oe(t),function(e){return Ee.call(t,e)}))}:ke,Te=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ce(e,Se(t)),t=Ae(t);return e}:ke;function Pe(t,e,r){var n=e(t);return P(t)?n:Ce(n,r(t))}function Re(t){return Pe(t,Yt,Se)}var Le=at(m,"DataView"),Be=at(m,"Promise"),Ie=at(m,"Set"),Ne="[object Map]",ze="[object Promise]",De="[object Set]",Me="[object WeakMap]",We="[object DataView]",$e=J(Le),Fe=J(pe),Ue=J(Be),qe=J(Ie),Ge=J(ot),Qe=E;(Le&&Qe(new Le(new ArrayBuffer(1)))!=We||pe&&Qe(new pe)!=Ne||Be&&Qe(Be.resolve())!=ze||Ie&&Qe(new Ie)!=De||ot&&Qe(new ot)!=Me)&&(Qe=function(t){var e=E(t),r="[object Object]"==e?t.constructor:void 0,n=r?J(r):"";if(n)switch(n){case $e:return We;case Fe:return Ne;case Ue:return ze;case qe:return De;case Ge:return Me}return e});var Ze=m.Uint8Array;function He(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new de;++e<r;)this.add(t[e])}function Ve(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}He.prototype.add=He.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},He.prototype.has=function(t){return this.__data__.has(t)};function Ye(t,e,r,n,i,a){var o=1&r,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var f=-1,l=!0,p=2&r?new He:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var v=t[f],d=e[f];if(n)var y=o?n(d,v,f,e,t,a):n(v,d,f,t,e,a);if(void 0!==y){if(y)continue;l=!1;break}if(p){if(!Ve(e,function(t,e){if(o=e,!p.has(o)&&(v===t||i(v,t,r,n,a)))return p.push(e);var o})){l=!1;break}}else if(v!==d&&!i(v,d,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l}function Je(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Ke(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Xe=_?_.prototype:void 0,tr=Xe?Xe.valueOf:void 0;var er=Object.prototype.hasOwnProperty;var rr="[object Arguments]",nr="[object Array]",ir="[object Object]",ar=Object.prototype.hasOwnProperty;function or(t,e,r,n,i,a){var o=P(t),s=P(e),c=o?nr:Qe(t),u=s?nr:Qe(e),h=(c=c==rr?ir:c)==ir,f=(u=u==rr?ir:u)==ir,l=c==u;if(l&&Nt(t)){if(!Nt(e))return!1;o=!0,h=!1}if(l&&!h)return a||(a=new we),o||qt(t)?Ye(t,e,r,n,i,a):function(t,e,r,n,i,a,o){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new Ze(t),new Ze(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return mt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Je;case"[object Set]":var c=1&n;if(s||(s=Ke),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=2,o.set(t,e);var h=Ye(s(t),s(e),n,i,a,o);return o.delete(t),h;case"[object Symbol]":if(tr)return tr.call(t)==tr.call(e)}return!1}(t,e,c,r,n,i,a);if(!(1&r)){var p=h&&ar.call(t,"__wrapped__"),v=f&&ar.call(e,"__wrapped__");if(p||v){var d=p?t.value():t,y=v?e.value():e;return a||(a=new we),i(d,y,r,n,a)}}return!!l&&(a||(a=new we),function(t,e,r,n,i,a){var o=1&r,s=Re(t),c=s.length;if(c!=Re(e).length&&!o)return!1;for(var u=c;u--;){var h=s[u];if(!(o?h in e:er.call(e,h)))return!1}var f=a.get(t),l=a.get(e);if(f&&l)return f==e&&l==t;var p=!0;a.set(t,e),a.set(e,t);for(var v=o;++u<c;){var d=t[h=s[u]],y=e[h];if(n)var b=o?n(y,d,h,e,t,a):n(d,y,h,t,e,a);if(!(void 0===b?d===y||i(d,y,r,n,a):b)){p=!1;break}v||(v="constructor"==h)}if(p&&!v){var g=t.constructor,m=e.constructor;g==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,r,n,i,a))}function sr(t,e,r,n,i){return t===e||(null==t||null==e||!O(t)&&!O(e)?t!=t&&e!=e:or(t,e,r,n,sr,i))}function cr(t){return t==t&&!D(t)}function ur(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function hr(t){var e=function(t){for(var e=Yt(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,cr(i)]}return e}(t);return 1==e.length&&e[0][2]?ur(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var i=r.length,a=i;if(null==t)return!a;for(t=Object(t);i--;){var o=r[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){var s=(o=r[i])[0],c=t[s],u=o[1];if(o[2]){if(void 0===c&&!(s in t))return!1}else if(!sr(u,c,3,n,new we))return!1}return!0}(r,0,e)}}function fr(t,e){return null!=t&&e in Object(t)}function lr(t,e){return null!=t&&function(t,e,r){for(var n=-1,i=(e=_e(e,t)).length,a=!1;++n<i;){var o=je(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&At(i)&&bt(o,i)&&(P(t)||Rt(t))}(t,e,fr)}function pr(t,e){return ae(t)&&cr(e)?ur(je(t),e):function(r){var n=function(t,e,r){var n=null==t?void 0:xe(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?lr(r,t):sr(e,n,3)}}function vr(t){return ae(t)?(e=je(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return xe(e,t)}}(t);var e}function dr(t){return"function"==typeof t?t:null==t?G:"object"==typeof t?P(t)?pr(t[0],t[1]):hr(t):vr(t)}var yr=function(t,e,r){for(var n=-1,i=Object(t),a=r(t),o=a.length;o--;){var s=a[++n];if(!1===e(i[s],s,i))break}return t};var br,gr=(br=function(t,e){return t&&yr(t,e,Yt)},function(t,e){if(null==t)return t;if(!wt(t))return br(t,e);for(var r=t.length,n=-1,i=Object(t);++n<r&&!1!==e(i[n],n,i););return t});function mr(t,e){var r;return(P(t)?vt:gr)(t,"function"==typeof(r=e)?r:G)}function _r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function jr(t,e){var r=!0;return gr(t,function(t,n,i){return r=!!e(t,n,i)}),r}function xr(t,e){var r=-1,n=wt(t)?Array(t.length):[];return gr(t,function(t,i,a){n[++r]=e(t,i,a)}),n}function Cr(t,e){return(P(t)?T:xr)(t,dr(e))}function Ar(t){return"string"==typeof t||!P(t)&&O(t)&&"[object String]"==E(t)}function wr(t){return null==t?[]:function(t,e){return T(e,function(e){return t[e]})}(t,Yt(t))}var kr=Math.max;function Er(t,e,r,n){t=wt(t)?t:wr(t),r=r?function(t){var e=q(t),r=e%1;return e==e?r?e-r:e:0}(r):0;var i=t.length;return r<0&&(r=kr(i+r,0)),Ar(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&function(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r){for(var n=t.length,i=r+-1;++i<n;)if(e(t[i],i,t))return i;return-1}(t,dt,r)}(t,e,r)>-1}var Or=Ft&&Ft.isRegExp,Sr=Or?Dt(Or):function(t){return O(t)&&"[object RegExp]"==E(t)};function Tr(t,e,r,n){if(!D(t))return t;for(var i=-1,a=(e=_e(e,t)).length,o=a-1,s=t;null!=s&&++i<a;){var c=je(e[i]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=o){var h=s[c];void 0===(u=void 0)&&(u=D(h)?h:bt(e[i+1])?[]:{})}jt(s,c,u),s=s[c]}return t}function Pr(t,e){if(null==t)return{};var r=T(function(t){return Pe(t,re,Te)}(t),function(t){return[t]});return e=dr(e),function(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=xe(t,o);r(s,o)&&Tr(a,_e(o,t),s)}return a}(t,r,function(t,r){return e(t,r[0])})}function Rr(t,e){var r;return gr(t,function(t,n,i){return!(r=e(t,n,i))}),!!r}function Lr(t){return Ar((e=t).LABEL)&&""!==e.LABEL?t.LABEL:t.name;var e}class Br{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),mr(this.definition,e=>{e.accept(t)})}}class Ir extends Br{constructor(t){super([]),this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}set definition(t){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(t){t.visit(this)}}class Nr extends Br{constructor(t){super(t.definition),this.orgText="",Xt(this,Pr(t,t=>void 0!==t))}}class zr extends Br{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,Xt(this,Pr(t,t=>void 0!==t))}}class Dr extends Br{constructor(t){super(t.definition),this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}}class Mr extends Br{constructor(t){super(t.definition),this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}}class Wr extends Br{constructor(t){super(t.definition),this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}}class $r extends Br{constructor(t){super(t.definition),this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}}class Fr extends Br{constructor(t){super(t.definition),this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}}class Ur extends Br{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Xt(this,Pr(t,t=>void 0!==t))}}class qr{constructor(t){this.idx=1,Xt(this,Pr(t,t=>void 0!==t))}accept(t){t.visit(this)}}function Gr(t){return Cr(t,Qr)}function Qr(t){function e(t){return Cr(t,Qr)}if(t instanceof Ir){const e={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return Ar(t.label)&&(e.label=t.label),e}if(t instanceof zr)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Dr)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Mr)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Wr)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Qr(new qr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Fr)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Qr(new qr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof $r)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Ur)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof qr){const e={type:"Terminal",name:t.terminalType.name,label:Lr(t.terminalType),idx:t.idx};Ar(t.label)&&(e.terminalLabel=t.label);const r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(e.pattern=Sr(r)?r.source:r),e}if(t instanceof Nr)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}class Zr{visit(t){const e=t;switch(e.constructor){case Ir:return this.visitNonTerminal(e);case zr:return this.visitAlternative(e);case Dr:return this.visitOption(e);case Mr:return this.visitRepetitionMandatory(e);case Wr:return this.visitRepetitionMandatoryWithSeparator(e);case Fr:return this.visitRepetitionWithSeparator(e);case $r:return this.visitRepetition(e);case Ur:return this.visitAlternation(e);case qr:return this.visitTerminal(e);case Nr:return this.visitRule(e);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}}function Hr(t){return t instanceof zr||t instanceof Dr||t instanceof $r||t instanceof Mr||t instanceof Wr||t instanceof Fr||t instanceof qr||t instanceof Nr}function Vr(t,e=[]){return!!(t instanceof Dr||t instanceof $r||t instanceof Fr)||(t instanceof Ur?(r=t.definition,n=t=>Vr(t,e),(P(r)?Ve:Rr)(r,dr(n))):!(t instanceof Ir&&Er(e,t))&&(t instanceof Br&&(t instanceof Ir&&e.push(t),function(t,e){return(P(t)?_r:jr)(t,dr(e))}(t.definition,t=>Vr(t,e)))));var r,n}function Yr(t){return t instanceof Ur}function Jr(t){if(t instanceof Ir)return"SUBRULE";if(t instanceof Dr)return"OPTION";if(t instanceof Ur)return"OR";if(t instanceof Mr)return"AT_LEAST_ONE";if(t instanceof Wr)return"AT_LEAST_ONE_SEP";if(t instanceof Fr)return"MANY_SEP";if(t instanceof $r)return"MANY";if(t instanceof qr)return"CONSUME";throw Error("non exhaustive match")}export{zr as A,l as B,Zr as G,Ir as N,Dr as O,v as P,Mr as R,qr as T,Wr as a,Fr as b,$r as c,Ur as d,Yr as e,Vr as f,f as g,p as h,Hr as i,y as j,Nr as k,Jr as l,Gr as s,d as t};
