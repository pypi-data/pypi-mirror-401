contracts:
  id: ADRI_failed_validations
  name: ADRI Failed Validations Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Standard for validating ADRI failed validation audit log JSONL structure
record_identification:
  primary_key_fields:
  - assessment_id
  - validation_id
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 95.0
  field_requirements:
    assessment_id:
      type: string
      nullable: false
      pattern: ^adri_\d{8}_\d{6}_[a-f0-9]+$
      description: Assessment identifier linking to main log
      validation_rules:
      - name: assessment_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: assessment_id must not be empty
      - name: assessment_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: assessment_id must be of type string
      - name: assessment_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^adri_\d{8}_\d{6}_[a-f0-9]+$')
        error_message: 'assessment_id must match pattern: ^adri_\d{8}_\d{6}_[a-f0-9]+$'
    validation_id:
      type: string
      nullable: false
      description: Unique identifier for this validation failure
      validation_rules:
      - name: validation_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: validation_id must not be empty
      - name: validation_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: validation_id must be of type string
    dimension:
      type: string
      nullable: false
      allowed_values:
      - validity
      - completeness
      - consistency
      - freshness
      - plausibility
      description: Quality dimension where validation failed
      validation_rules:
      - name: dimension is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: dimension must not be empty
      - name: dimension type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: dimension must be of type string
      - name: dimension must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['validity', 'completeness', 'consistency', 'freshness', 'plausibility'])
        error_message: 'dimension must be one of: validity, completeness, consistency, freshness, plausibility'
    field_name:
      type: string
      nullable: true
      description: Field that failed validation (may be empty for dataset-level rules)
      validation_rules:
      - name: field_name type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: field_name must be of type string
    issue_type:
      type: string
      nullable: false
      description: Type of validation issue detected
      validation_rules:
      - name: issue_type is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: issue_type must not be empty
      - name: issue_type type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: issue_type must be of type string
    affected_rows:
      type: integer
      nullable: false
      min_value: 0
      description: Number of rows affected by this failure
      validation_rules:
      - name: affected_rows is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: affected_rows must not be empty
      - name: affected_rows type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_INTEGER
        error_message: affected_rows must be of type integer
      - name: affected_rows numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 0
        error_message: affected_rows must be between 0 and None
    affected_percentage:
      type: float
      nullable: false
      min_value: 0.0
      max_value: 100.0
      description: Percentage of dataset affected
      validation_rules:
      - name: affected_percentage is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: affected_percentage must not be empty
      - name: affected_percentage type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: affected_percentage must be of type float
      - name: affected_percentage numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 0.0 AND VALUE <= 100.0
        error_message: affected_percentage must be between 0.0 and 100.0
    sample_failures:
      type: string
      nullable: false
      description: JSON array of sample failure examples
      validation_rules:
      - name: sample_failures is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: sample_failures must not be empty
      - name: sample_failures type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: sample_failures must be of type string
    remediation:
      type: string
      nullable: false
      description: Suggested fix for the validation failure
      validation_rules:
      - name: remediation is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: remediation must not be empty
      - name: remediation type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: remediation must be of type string
  dimension_requirements:
    validity:
      minimum_score: 19.0
      weight: 1.0
      scoring:
        rule_weights:
          data_types: 1.0
          value_ranges: 1.0
        field_overrides: {}
    completeness:
      minimum_score: 19.0
      weight: 1.0
      scoring:
        rule_weights:
          required_fields: 1.0
        field_overrides: {}
    consistency:
      minimum_score: 19.0
      weight: 1.0
      scoring:
        rule_weights:
          field_consistency: 1.0
        field_overrides: {}
    freshness:
      minimum_score: 18.0
      weight: 1.0
      scoring:
        rule_weights:
          assessment_id_format: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 18.0
      weight: 1.0
      scoring:
        rule_weights:
          percentage_ranges: 1.0
          enum_values: 1.0
        field_overrides: {}
metadata:
  purpose: Self-validation of ADRI failed validation audit logs
  usage: 'This standard validates failed validation JSONL logs to ensure:

    1. All validation failures are properly categorized by dimension

    2. Impact metrics are accurate (row counts, percentages)

    3. Sample failures are provided for debugging

    4. Remediation guidance is included

    5. Assessment IDs link to main audit log

    '
  validation_notes: '- assessment_id links to main audit log entry

    - dimension must be one of 5 ADRI dimensions

    - field_name can be null for dataset-level validations

    - affected_percentage must be 0-100

    - sample_failures should be valid JSON array format

    - remediation provides actionable guidance

    '
  created_by: ADRI Framework
  created_date: 2025-10-03
