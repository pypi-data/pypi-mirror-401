contracts:
  id: ecommerce_order_standard
  name: Ecommerce Order ADRI Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Auto-generated standard for ecommerce_order data
record_identification:
  primary_key_fields:
  - shipping_postal_code
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 75.0
  field_requirements:
    order_id:
      type: string
      nullable: false
      min_length: 15
      max_length: 15
      pattern: ^[A-Za-z]+-\d{3,}$
      validation_rules:
      - name: order_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: order_id must not be empty
      - name: order_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: order_id must be of type string
      - name: order_id length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 15 AND LENGTH <= 15
        error_message: order_id length must be between 15 and 15
      - name: order_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z]+-\d{3,}$')
        error_message: 'order_id must match pattern: ^[A-Za-z]+-\d{3,}$'
    customer_id:
      type: string
      nullable: false
      min_length: 9
      max_length: 9
      pattern: ^[A-Za-z]+-\d{3,}$
      validation_rules:
      - name: customer_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: customer_id must not be empty
      - name: customer_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: customer_id must be of type string
      - name: customer_id length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 9 AND LENGTH <= 9
        error_message: customer_id length must be between 9 and 9
      - name: customer_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z]+-\d{3,}$')
        error_message: 'customer_id must match pattern: ^[A-Za-z]+-\d{3,}$'
    order_date:
      type: string
      nullable: false
      validation_rules:
      - name: order_date is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: order_date must not be empty
      - name: order_date type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: order_date must be of type date
      - name: order_date date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2025-01-12' AND DATE <= '2025-01-18'
        error_message: order_date must be within date range
    order_status:
      type: string
      nullable: false
      allowed_values:
      - Shipped
      min_length: 7
      max_length: 7
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: order_status is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: order_status must not be empty
      - name: order_status type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: order_status must be of type string
      - name: order_status must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['Shipped'])
        error_message: 'order_status must be one of: Shipped'
      - name: order_status length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 7 AND LENGTH <= 7
        error_message: order_status length must be between 7 and 7
      - name: order_status pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'order_status must match pattern: ^[A-Za-z0-9\-_]+$'
    subtotal:
      type: float
      nullable: false
      min_value: 99.99
      max_value: 99.99
      validation_rules:
      - name: subtotal is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: subtotal must not be empty
      - name: subtotal type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: subtotal must be of type float
      - name: subtotal numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 99.99 AND VALUE <= 99.99
        error_message: subtotal must be between 99.99 and 99.99
    tax_amount:
      type: float
      nullable: false
      min_value: 8.5
      max_value: 8.5
      validation_rules:
      - name: tax_amount is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: tax_amount must not be empty
      - name: tax_amount type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: tax_amount must be of type float
      - name: tax_amount numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 8.5 AND VALUE <= 8.5
        error_message: tax_amount must be between 8.5 and 8.5
    shipping_cost:
      type: float
      nullable: false
      min_value: 5.0
      max_value: 5.0
      validation_rules:
      - name: shipping_cost is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: shipping_cost must not be empty
      - name: shipping_cost type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: shipping_cost must be of type float
      - name: shipping_cost numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 5.0 AND VALUE <= 5.0
        error_message: shipping_cost must be between 5.0 and 5.0
    total_amount:
      type: float
      nullable: false
      min_value: 113.49
      max_value: 113.49
      validation_rules:
      - name: total_amount is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: total_amount must not be empty
      - name: total_amount type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: total_amount must be of type float
      - name: total_amount numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 113.49 AND VALUE <= 113.49
        error_message: total_amount must be between 113.49 and 113.49
    shipping_address_line1:
      type: string
      nullable: false
      allowed_values:
      - 123 Main St
      min_length: 11
      max_length: 11
      validation_rules:
      - name: shipping_address_line1 is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: shipping_address_line1 must not be empty
      - name: shipping_address_line1 type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: shipping_address_line1 must be of type string
      - name: shipping_address_line1 must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['123 Main St'])
        error_message: 'shipping_address_line1 must be one of: 123 Main St'
      - name: shipping_address_line1 length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 11 AND LENGTH <= 11
        error_message: shipping_address_line1 length must be between 11 and 11
    shipping_city:
      type: string
      nullable: false
      allowed_values:
      - San Francisco
      min_length: 13
      max_length: 13
      validation_rules:
      - name: shipping_city is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: shipping_city must not be empty
      - name: shipping_city type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: shipping_city must be of type string
      - name: shipping_city must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['San Francisco'])
        error_message: 'shipping_city must be one of: San Francisco'
      - name: shipping_city length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 13 AND LENGTH <= 13
        error_message: shipping_city length must be between 13 and 13
    shipping_state:
      type: string
      nullable: false
      allowed_values:
      - CA
      min_length: 2
      max_length: 2
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: shipping_state is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: shipping_state must not be empty
      - name: shipping_state type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: shipping_state must be of type string
      - name: shipping_state must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['CA'])
        error_message: 'shipping_state must be one of: CA'
      - name: shipping_state length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 2 AND LENGTH <= 2
        error_message: shipping_state length must be between 2 and 2
      - name: shipping_state pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'shipping_state must match pattern: ^[A-Za-z0-9\-_]+$'
    shipping_postal_code:
      type: float
      nullable: false
      min_value: 94102.0
      max_value: 94102.0
      validation_rules:
      - name: shipping_postal_code is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: shipping_postal_code must not be empty
      - name: shipping_postal_code type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: shipping_postal_code must be of type float
      - name: shipping_postal_code numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 94102.0 AND VALUE <= 94102.0
        error_message: shipping_postal_code must be between 94102.0 and 94102.0
    shipping_country:
      type: string
      nullable: false
      allowed_values:
      - USA
      min_length: 3
      max_length: 3
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: shipping_country is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: shipping_country must not be empty
      - name: shipping_country type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: shipping_country must be of type string
      - name: shipping_country must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['USA'])
        error_message: 'shipping_country must be one of: USA'
      - name: shipping_country length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 3 AND LENGTH <= 3
        error_message: shipping_country length must be between 3 and 3
      - name: shipping_country pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'shipping_country must match pattern: ^[A-Za-z0-9\-_]+$'
    payment_method:
      type: string
      nullable: false
      allowed_values:
      - Credit Card
      min_length: 11
      max_length: 11
      validation_rules:
      - name: payment_method is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: payment_method must not be empty
      - name: payment_method type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: payment_method must be of type string
      - name: payment_method must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['Credit Card'])
        error_message: 'payment_method must be one of: Credit Card'
      - name: payment_method length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 11 AND LENGTH <= 11
        error_message: payment_method length must be between 11 and 11
    payment_status:
      type: string
      nullable: false
      allowed_values:
      - Completed
      min_length: 9
      max_length: 9
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: payment_status is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: payment_status must not be empty
      - name: payment_status type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: payment_status must be of type string
      - name: payment_status must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['Completed'])
        error_message: 'payment_status must be one of: Completed'
      - name: payment_status length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 9 AND LENGTH <= 9
        error_message: payment_status length must be between 9 and 9
      - name: payment_status pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'payment_status must match pattern: ^[A-Za-z0-9\-_]+$'
  dimension_requirements:
    validity:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          type: 0.3488372093023256
          length_bounds: 0.20930232558139536
          pattern: 0.13953488372093023
          date_bounds: 0.023255813953488372
          allowed_values: 0.16279069767441862
          numeric_bounds: 0.11627906976744186
        field_overrides: {}
    completeness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          missing_required: 0.0625
          not_null: 0.9375
        field_overrides: {}
    consistency:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights:
          primary_key_uniqueness: 0.3333333333333333
          format_consistency: 0.3333333333333333
          cross_field_logic: 0.3333333333333333
        field_overrides: {}
    freshness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          recency_window: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
metadata:
  explanations_note: Explanations are for human review; only requirements.field_requirements
    are enforced.
  explanations_glossary:
    iqr: 'Interquartile Range (Q3 - Q1): a robust measure of spread, less sensitive
      to outliers.'
    q1: 25th percentile of the training values.
    q3: 75th percentile of the training values.
    coverage: Share of non-null training values that satisfy the rule.
    unique_count: Number of distinct non-null values observed in training.
    mad: 'Median Absolute Deviation: robust measure of variability around the median.'
    quantile: Statistical measure dividing data into equal-sized intervals.
    training_pass: Guarantee that generated rules pass on the training data used for
      generation.
    enum_strategy: Method used for allowed values inference (coverage or tolerant).
    margin_days: Buffer added to date ranges to allow for reasonable variations.
  explanations:
    order_id:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      length_bounds:
        active_min: 15
        active_max: 15
        stats:
          observed_min: 15
          observed_max: 15
      pattern:
        regex: ^[A-Za-z]+-\d{3,}$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    customer_id:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      length_bounds:
        active_min: 9
        active_max: 9
        stats:
          observed_min: 9
          observed_max: 9
      pattern:
        regex: ^[A-Za-z]+-\d{3,}$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    order_date:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
    order_status:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - Shipped
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 7
        active_max: 7
        stats:
          observed_min: 7
          observed_max: 7
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    subtotal:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 99.99
        active_max: 99.99
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 99.99
          q3: 99.99
          iqr_k: 1.5
          observed_min: 99.99
          observed_max: 99.99
    tax_amount:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 8.5
        active_max: 8.5
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 8.5
          q3: 8.5
          iqr_k: 1.5
          observed_min: 8.5
          observed_max: 8.5
    shipping_cost:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 5.0
        active_max: 5.0
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 5.0
          q3: 5.0
          iqr_k: 1.5
          observed_min: 5.0
          observed_max: 5.0
    total_amount:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 113.49
        active_max: 113.49
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 113.49
          q3: 113.49
          iqr_k: 1.5
          observed_min: 113.49
          observed_max: 113.49
    shipping_address_line1:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - 123 Main St
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 11
        active_max: 11
        stats:
          observed_min: 11
          observed_max: 11
    shipping_city:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - San Francisco
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 13
        active_max: 13
        stats:
          observed_min: 13
          observed_max: 13
    shipping_state:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - CA
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 2
        active_max: 2
        stats:
          observed_min: 2
          observed_max: 2
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    shipping_postal_code:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 94102.0
        active_max: 94102.0
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 94102.0
          q3: 94102.0
          iqr_k: 1.5
          observed_min: 94102.0
          observed_max: 94102.0
    shipping_country:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - USA
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 3
        active_max: 3
        stats:
          observed_min: 3
          observed_max: 3
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    payment_method:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - Credit Card
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 11
        active_max: 11
        stats:
          observed_min: 11
          observed_max: 11
    payment_status:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - Completed
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 9
        active_max: 9
        stats:
          observed_min: 9
          observed_max: 9
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
  freshness:
    as_of: '2025-01-16T10:30:00Z'
    window_days: 365
    date_field: order_date
  plausibility_templates: '# plausibility:

    #   scoring:

    #     rule_weights:

    #       numeric_sigma: 1.0      # enable if not overlapping with validity numeric_bounds

    #       categorical_tail: 1.0   # enable to flag rare categories

    #   notes: "Disabled by default to avoid overlap with Validity. Review before
    enabling."

    '
