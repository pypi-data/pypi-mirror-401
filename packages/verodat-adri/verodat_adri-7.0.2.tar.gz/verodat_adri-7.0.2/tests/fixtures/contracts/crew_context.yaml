contracts:
  id: crew_context_standard
  name: Crew Context ADRI Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Auto-generated standard for crew_context data
record_identification:
  primary_key_fields:
  - task_id
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 75.0
  field_requirements:
    task_id:
      type: string
      nullable: false
      min_length: 8
      max_length: 8
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: task_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: task_id must not be empty
      - name: task_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: task_id must be of type string
      - name: task_id length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 8 AND LENGTH <= 8
        error_message: task_id length must be between 8 and 8
      - name: task_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'task_id must match pattern: ^[A-Za-z0-9\-_]+$'
    role:
      type: string
      nullable: false
      allowed_values:
      - researcher
      - analyst
      - writer
      min_length: 6
      max_length: 10
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: role is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: role must not be empty
      - name: role type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: role must be of type string
      - name: role must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['researcher', 'analyst', 'writer'])
        error_message: 'role must be one of: researcher, analyst, writer'
      - name: role length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 6 AND LENGTH <= 10
        error_message: role length must be between 6 and 10
      - name: role pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'role must match pattern: ^[A-Za-z0-9\-_]+$'
    agent_name:
      type: string
      nullable: false
      allowed_values:
      - market_researcher
      - data_analyst
      - report_writer
      min_length: 12
      max_length: 17
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: agent_name is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: agent_name must not be empty
      - name: agent_name type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: agent_name must be of type string
      - name: agent_name must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['market_researcher', 'data_analyst', 'report_writer'])
        error_message: 'agent_name must be one of: market_researcher, data_analyst,
          report_writer'
      - name: agent_name length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 12 AND LENGTH <= 17
        error_message: agent_name length must be between 12 and 17
      - name: agent_name pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'agent_name must match pattern: ^[A-Za-z0-9\-_]+$'
    inputs:
      type: string
      nullable: false
      allowed_values:
      - '{"focus_areas": ["adoption_rates", "use_cases", "vendor_landscape"], "query":
        "Analyze Q4 2024 AI agent market trends", "sources": ["web_search", "industry_reports",
        "analyst_data"]}'
      - '{"focus_areas": ["key_insights", "recommendations"], "query": "Synthesize
        market research findings", "sources": ["research_output"]}'
      - '{"focus_areas": ["executive_summary", "charts", "recommendations"], "query":
        "Create executive summary report", "sources": ["analysis_output"]}'
      min_length: 132
      max_length: 182
      validation_rules:
      - name: inputs is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: inputs must not be empty
      - name: inputs type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: inputs must be of type string
      - name: inputs must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: 'VALUE_IN([''{"focus_areas": ["adoption_rates", "use_cases",
          "vendor_landscape"], "query": "Analyze Q4 2024 AI agent market trends",
          "sources": ["web_search", "industry_reports", "analyst_data"]}'', ''{"focus_areas":
          ["key_insights", "recommendations"], "query": "Synthesize market research
          findings", "sources": ["research_output"]}'', ''{"focus_areas": ["executive_summary",
          "charts", "recommendations"], "query": "Create executive summary report",
          "sources": ["analysis_output"]}''])'
        error_message: 'inputs must be one of: {"focus_areas": ["adoption_rates",
          "use_cases", "vendor_landscape"], "query": "Analyze Q4 2024 AI agent market
          trends", "sources": ["web_search", "industry_reports", "analyst_data"]},
          {"focus_areas": ["key_insights", "recommendations"], "query": "Synthesize
          market research findings", "sources": ["research_output"]}, {"focus_areas":
          ["executive_summary", "charts", "recommendations"], "query": "Create executive
          summary report", "sources": ["analysis_output"]}'
      - name: inputs length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 132 AND LENGTH <= 182
        error_message: inputs length must be between 132 and 182
    context:
      type: string
      nullable: false
      allowed_values:
      - '{"dependencies": [], "metadata": {"deadline": "2024-10-20", "priority": "high"},
        "previous_results": []}'
      - '{"dependencies": ["task_001"], "metadata": {"deadline": "2024-10-20", "priority":
        "high"}, "previous_results": ["task_001"]}'
      - '{"dependencies": ["task_002"], "metadata": {"deadline": "2024-10-20", "priority":
        "high"}, "previous_results": ["task_001", "task_002"]}'
      min_length: 104
      max_length: 136
      validation_rules:
      - name: context is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: context must not be empty
      - name: context type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: context must be of type string
      - name: context must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: 'VALUE_IN([''{"dependencies": [], "metadata": {"deadline":
          "2024-10-20", "priority": "high"}, "previous_results": []}'', ''{"dependencies":
          ["task_001"], "metadata": {"deadline": "2024-10-20", "priority": "high"},
          "previous_results": ["task_001"]}'', ''{"dependencies": ["task_002"], "metadata":
          {"deadline": "2024-10-20", "priority": "high"}, "previous_results": ["task_001",
          "task_002"]}''])'
        error_message: 'context must be one of: {"dependencies": [], "metadata": {"deadline":
          "2024-10-20", "priority": "high"}, "previous_results": []}, {"dependencies":
          ["task_001"], "metadata": {"deadline": "2024-10-20", "priority": "high"},
          "previous_results": ["task_001"]}, {"dependencies": ["task_002"], "metadata":
          {"deadline": "2024-10-20", "priority": "high"}, "previous_results": ["task_001",
          "task_002"]}'
      - name: context length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 104 AND LENGTH <= 136
        error_message: context length must be between 104 and 136
    timestamp:
      type: string
      nullable: false
      validation_rules:
      - name: timestamp is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: timestamp must not be empty
      - name: timestamp type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: timestamp must be of type date
      - name: timestamp date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2024-10-14' AND DATE <= '2024-10-20'
        error_message: timestamp must be within date range
  dimension_requirements:
    validity:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          type: 0.3157894736842105
          length_bounds: 0.2631578947368421
          pattern: 0.15789473684210525
          allowed_values: 0.21052631578947367
          date_bounds: 0.05263157894736842
        field_overrides: {}
    completeness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          missing_required: 0.14285714285714285
          not_null: 0.8571428571428571
        field_overrides: {}
    consistency:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
    freshness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          recency_window: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
metadata:
  explanations_note: Explanations are for human review; only requirements.field_requirements
    are enforced.
  explanations_glossary:
    iqr: 'Interquartile Range (Q3 - Q1): a robust measure of spread, less sensitive
      to outliers.'
    q1: 25th percentile of the training values.
    q3: 75th percentile of the training values.
    coverage: Share of non-null training values that satisfy the rule.
    unique_count: Number of distinct non-null values observed in training.
    mad: 'Median Absolute Deviation: robust measure of variability around the median.'
    quantile: Statistical measure dividing data into equal-sized intervals.
    training_pass: Guarantee that generated rules pass on the training data used for
      generation.
    enum_strategy: Method used for allowed values inference (coverage or tolerant).
    margin_days: Buffer added to date ranges to allow for reasonable variations.
  explanations:
    task_id:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 3
      length_bounds:
        active_min: 8
        active_max: 8
        stats:
          observed_min: 8
          observed_max: 8
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    role:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 3
      allowed_values:
        values:
        - researcher
        - analyst
        - writer
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 3
          strategy: coverage
      length_bounds:
        active_min: 6
        active_max: 10
        stats:
          observed_min: 6
          observed_max: 10
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    agent_name:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 3
      allowed_values:
        values:
        - market_researcher
        - data_analyst
        - report_writer
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 3
          strategy: coverage
      length_bounds:
        active_min: 12
        active_max: 17
        stats:
          observed_min: 12
          observed_max: 17
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    inputs:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 3
      allowed_values:
        values:
        - '{"focus_areas": ["adoption_rates", "use_cases", "vendor_landscape"], "query":
          "Analyze Q4 2024 AI agent market trends", "sources": ["web_search", "industry_reports",
          "analyst_data"]}'
        - '{"focus_areas": ["key_insights", "recommendations"], "query": "Synthesize
          market research findings", "sources": ["research_output"]}'
        - '{"focus_areas": ["executive_summary", "charts", "recommendations"], "query":
          "Create executive summary report", "sources": ["analysis_output"]}'
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 3
          strategy: coverage
      length_bounds:
        active_min: 132
        active_max: 182
        stats:
          observed_min: 132
          observed_max: 182
    context:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 3
      allowed_values:
        values:
        - '{"dependencies": [], "metadata": {"deadline": "2024-10-20", "priority":
          "high"}, "previous_results": []}'
        - '{"dependencies": ["task_001"], "metadata": {"deadline": "2024-10-20", "priority":
          "high"}, "previous_results": ["task_001"]}'
        - '{"dependencies": ["task_002"], "metadata": {"deadline": "2024-10-20", "priority":
          "high"}, "previous_results": ["task_001", "task_002"]}'
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 3
          strategy: coverage
      length_bounds:
        active_min: 104
        active_max: 136
        stats:
          observed_min: 104
          observed_max: 136
    timestamp:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 3
  freshness:
    as_of: 2024-10-18T11:00:00+00:00Z
    window_days: 365
    date_field: timestamp
  plausibility_templates: '# plausibility:

    #   scoring:

    #     rule_weights:

    #       numeric_sigma: 1.0      # enable if not overlapping with validity numeric_bounds

    #       categorical_tail: 1.0   # enable to flag rare categories

    #   notes: "Disabled by default to avoid overlap with Validity. Review before
    enabling."

    '
