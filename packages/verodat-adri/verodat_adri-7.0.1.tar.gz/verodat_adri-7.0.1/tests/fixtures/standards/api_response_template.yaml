contracts:
  id: api_response_template_standard
  name: Api Response Template ADRI Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Auto-generated standard for api_response_template data
record_identification:
  primary_key_fields:
  - status_code
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 75.0
  field_requirements:
    request_id:
      type: string
      nullable: false
      min_length: 10
      max_length: 10
      pattern: ^[A-Za-z]+-\d{3,}$
      validation_rules:
      - name: request_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: request_id must not be empty
      - name: request_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: request_id must be of type string
      - name: request_id length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 10 AND LENGTH <= 10
        error_message: request_id length must be between 10 and 10
      - name: request_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z]+-\d{3,}$')
        error_message: 'request_id must match pattern: ^[A-Za-z]+-\d{3,}$'
    status_code:
      type: float
      nullable: false
      min_value: 200.0
      max_value: 200.0
      validation_rules:
      - name: status_code is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: status_code must not be empty
      - name: status_code type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: status_code must be of type float
      - name: status_code numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 200.0 AND VALUE <= 200.0
        error_message: status_code must be between 200.0 and 200.0
    status:
      type: string
      nullable: false
      allowed_values:
      - success
      min_length: 7
      max_length: 7
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: status is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: status must not be empty
      - name: status type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: status must be of type string
      - name: status must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['success'])
        error_message: 'status must be one of: success'
      - name: status length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 7 AND LENGTH <= 7
        error_message: status length must be between 7 and 7
      - name: status pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'status must match pattern: ^[A-Za-z0-9\-_]+$'
    timestamp:
      type: string
      nullable: false
      validation_rules:
      - name: timestamp is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: timestamp must not be empty
      - name: timestamp type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: timestamp must be of type date
      - name: timestamp date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2025-01-14' AND DATE <= '2025-01-20'
        error_message: timestamp must be within date range
    response_time_ms:
      type: float
      nullable: false
      min_value: 150.0
      max_value: 150.0
      validation_rules:
      - name: response_time_ms is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: response_time_ms must not be empty
      - name: response_time_ms type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: response_time_ms must be of type float
      - name: response_time_ms numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 150.0 AND VALUE <= 150.0
        error_message: response_time_ms must be between 150.0 and 150.0
    endpoint:
      type: string
      nullable: false
      allowed_values:
      - /api/v1/users
      min_length: 13
      max_length: 13
      validation_rules:
      - name: endpoint is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: endpoint must not be empty
      - name: endpoint type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: endpoint must be of type string
      - name: endpoint must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['/api/v1/users'])
        error_message: 'endpoint must be one of: /api/v1/users'
      - name: endpoint length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 13 AND LENGTH <= 13
        error_message: endpoint length must be between 13 and 13
    method:
      type: string
      nullable: false
      allowed_values:
      - GET
      min_length: 3
      max_length: 3
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: method is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: method must not be empty
      - name: method type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: method must be of type string
      - name: method must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['GET'])
        error_message: 'method must be one of: GET'
      - name: method length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 3 AND LENGTH <= 3
        error_message: method length must be between 3 and 3
      - name: method pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'method must match pattern: ^[A-Za-z0-9\-_]+$'
    data:
      type: string
      nullable: false
      allowed_values:
      - '{"users": []}'
      min_length: 13
      max_length: 13
      validation_rules:
      - name: data is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: data must not be empty
      - name: data type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: data must be of type string
      - name: data must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: 'VALUE_IN([''{"users": []}''])'
        error_message: 'data must be one of: {"users": []}'
      - name: data length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 13 AND LENGTH <= 13
        error_message: data length must be between 13 and 13
    error_message:
      type: string
      nullable: true
      validation_rules:
      - name: error_message type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: error_message must be of type string
    error_code:
      type: string
      nullable: true
      validation_rules:
      - name: error_code type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: error_code must be of type string
    api_version:
      type: string
      nullable: false
      allowed_values:
      - v1
      min_length: 2
      max_length: 2
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: api_version is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: api_version must not be empty
      - name: api_version type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: api_version must be of type string
      - name: api_version must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['v1'])
        error_message: 'api_version must be one of: v1'
      - name: api_version length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 2 AND LENGTH <= 2
        error_message: api_version length must be between 2 and 2
      - name: api_version pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'api_version must match pattern: ^[A-Za-z0-9\-_]+$'
    request_source:
      type: string
      nullable: false
      allowed_values:
      - web_app
      min_length: 7
      max_length: 7
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: request_source is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: request_source must not be empty
      - name: request_source type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: request_source must be of type string
      - name: request_source must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['web_app'])
        error_message: 'request_source must be one of: web_app'
      - name: request_source length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 7 AND LENGTH <= 7
        error_message: request_source length must be between 7 and 7
      - name: request_source pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'request_source must match pattern: ^[A-Za-z0-9\-_]+$'
  dimension_requirements:
    validity:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          type: 0.36363636363636365
          length_bounds: 0.21212121212121213
          pattern: 0.15151515151515152
          numeric_bounds: 0.06060606060606061
          allowed_values: 0.18181818181818182
          date_bounds: 0.030303030303030304
        field_overrides: {}
    completeness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          missing_required: 0.09090909090909091
          not_null: 0.9090909090909091
        field_overrides: {}
    consistency:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights:
          primary_key_uniqueness: 0.3333333333333333
          format_consistency: 0.3333333333333333
          cross_field_logic: 0.3333333333333333
        field_overrides: {}
    freshness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          recency_window: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
metadata:
  explanations_note: Explanations are for human review; only requirements.field_requirements
    are enforced.
  explanations_glossary:
    iqr: 'Interquartile Range (Q3 - Q1): a robust measure of spread, less sensitive
      to outliers.'
    q1: 25th percentile of the training values.
    q3: 75th percentile of the training values.
    coverage: Share of non-null training values that satisfy the rule.
    unique_count: Number of distinct non-null values observed in training.
    mad: 'Median Absolute Deviation: robust measure of variability around the median.'
    quantile: Statistical measure dividing data into equal-sized intervals.
    training_pass: Guarantee that generated rules pass on the training data used for
      generation.
    enum_strategy: Method used for allowed values inference (coverage or tolerant).
    margin_days: Buffer added to date ranges to allow for reasonable variations.
  explanations:
    request_id:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      length_bounds:
        active_min: 10
        active_max: 10
        stats:
          observed_min: 10
          observed_max: 10
      pattern:
        regex: ^[A-Za-z]+-\d{3,}$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    status_code:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 200.0
        active_max: 200.0
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 200.0
          q3: 200.0
          iqr_k: 1.5
          observed_min: 200.0
          observed_max: 200.0
    status:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - success
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 7
        active_max: 7
        stats:
          observed_min: 7
          observed_max: 7
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    timestamp:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
    response_time_ms:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 150.0
        active_max: 150.0
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 150.0
          q3: 150.0
          iqr_k: 1.5
          observed_min: 150.0
          observed_max: 150.0
    endpoint:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - /api/v1/users
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 13
        active_max: 13
        stats:
          observed_min: 13
          observed_max: 13
    method:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - GET
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 3
        active_max: 3
        stats:
          observed_min: 3
          observed_max: 3
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    data:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - '{"users": []}'
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 13
        active_max: 13
        stats:
          observed_min: 13
          observed_max: 13
    error_message:
      type: string
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 1
          total: 1
    error_code:
      type: string
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 1
          total: 1
    api_version:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - v1
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 2
        active_max: 2
        stats:
          observed_min: 2
          observed_max: 2
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    request_source:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - web_app
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 7
        active_max: 7
        stats:
          observed_min: 7
          observed_max: 7
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
  freshness:
    as_of: 2025-01-18T10:00:00+00:00Z
    window_days: 365
    date_field: timestamp
  plausibility_templates: '# plausibility:

    #   scoring:

    #     rule_weights:

    #       numeric_sigma: 1.0      # enable if not overlapping with validity numeric_bounds

    #       categorical_tail: 1.0   # enable to flag rare categories

    #   notes: "Disabled by default to avoid overlap with Validity. Review before
    enabling."

    '
