contracts:
  id: test_autogen_invoice_standard
  name: Test Autogen Invoice Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Auto-generated standard for test_autogen_invoice data
record_identification:
  primary_key_fields:
  - invoice_id
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 75.0
  field_requirements:
    invoice_id:
      type: string
      nullable: false
      min_length: 7
      max_length: 7
      pattern: ^[A-Za-z]+-\d{3,}$
      validation_rules:
      - name: invoice_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: invoice_id must not be empty
      - name: invoice_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: invoice_id must be of type string
      - name: invoice_id length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 7 AND LENGTH <= 7
        error_message: invoice_id length must be between 7 and 7
      - name: invoice_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z]+-\d{3,}$')
        error_message: 'invoice_id must match pattern: ^[A-Za-z]+-\d{3,}$'
    customer_id:
      type: string
      nullable: false
      min_length: 8
      max_length: 8
      pattern: ^[A-Za-z]+-\d{3,}$
      validation_rules:
      - name: customer_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: customer_id must not be empty
      - name: customer_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: customer_id must be of type string
      - name: customer_id length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 8 AND LENGTH <= 8
        error_message: customer_id length must be between 8 and 8
      - name: customer_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z]+-\d{3,}$')
        error_message: 'customer_id must match pattern: ^[A-Za-z]+-\d{3,}$'
    amount:
      type: float
      nullable: false
      min_value: -71.65625
      max_value: 2253.59375
      validation_rules:
      - name: amount is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: amount must not be empty
      - name: amount type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: amount must be of type float
      - name: amount numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= -71.65625 AND VALUE <= 2253.59375
        error_message: amount must be between -71.65625 and 2253.59375
    date:
      type: date
      nullable: false
      after_date: '2024-01-12'
      before_date: '2024-01-27'
      validation_rules:
      - name: date is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: date must not be empty
      - name: date type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: date must be of type date
      - name: date date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2024-01-12' AND DATE <= '2024-01-27'
        error_message: date must be within date range
    status:
      type: string
      nullable: false
      allowed_values:
      - paid
      - pending
      min_length: 4
      max_length: 7
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: status is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: status must not be empty
      - name: status type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: status must be of type string
      - name: status must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['paid', 'pending'])
        error_message: 'status must be one of: paid, pending'
      - name: status length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 4 AND LENGTH <= 7
        error_message: status length must be between 4 and 7
      - name: status pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'status must match pattern: ^[A-Za-z0-9\-_]+$'
    payment_method:
      type: string
      nullable: false
      allowed_values:
      - credit_card
      - bank_transfer
      - cash
      min_length: 4
      max_length: 13
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: payment_method is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: payment_method must not be empty
      - name: payment_method type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: payment_method must be of type string
      - name: payment_method must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['credit_card', 'bank_transfer', 'cash'])
        error_message: 'payment_method must be one of: credit_card, bank_transfer,
          cash'
      - name: payment_method length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 4 AND LENGTH <= 13
        error_message: payment_method length must be between 4 and 13
      - name: payment_method pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'payment_method must match pattern: ^[A-Za-z0-9\-_]+$'
  dimension_requirements:
    validity:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          type: 0.3333333333333333
          length_bounds: 0.2222222222222222
          pattern: 0.2222222222222222
          numeric_bounds: 0.05555555555555555
          date_bounds: 0.05555555555555555
          allowed_values: 0.1111111111111111
        field_overrides: {}
    completeness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          missing_required: 0.14285714285714285
          not_null: 0.8571428571428571
        field_overrides: {}
    consistency:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
    freshness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          recency_window: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
metadata:
  explanations_note: Explanations are for human review; only requirements.field_requirements
    are enforced.
  explanations_glossary:
    iqr: 'Interquartile Range (Q3 - Q1): a robust measure of spread, less sensitive
      to outliers.'
    q1: 25th percentile of the training values.
    q3: 75th percentile of the training values.
    coverage: Share of non-null training values that satisfy the rule.
    unique_count: Number of distinct non-null values observed in training.
    mad: 'Median Absolute Deviation: robust measure of variability around the median.'
    quantile: Statistical measure dividing data into equal-sized intervals.
    training_pass: Guarantee that generated rules pass on the training data used for
      generation.
    enum_strategy: Method used for allowed values inference (coverage or tolerant).
    margin_days: Buffer added to date ranges to allow for reasonable variations.
  explanations:
    invoice_id:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 10
      length_bounds:
        active_min: 7
        active_max: 7
        stats:
          observed_min: 7
          observed_max: 7
      pattern:
        regex: ^[A-Za-z]+-\d{3,}$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    customer_id:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 10
      length_bounds:
        active_min: 8
        active_max: 8
        stats:
          observed_min: 8
          observed_max: 8
      pattern:
        regex: ^[A-Za-z]+-\d{3,}$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    amount:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 10
      range:
        strategy: iqr
        active_min: -71.65625
        active_max: 2253.59375
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 800.3125
          q3: 1381.625
          iqr_k: 1.5
          observed_min: 450.0
          observed_max: 2100.75
    date:
      type: date
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 10
      date_bounds:
        active_after: '2024-01-12'
        active_before: '2024-01-27'
        reason: Plausible date window widened by margin days
        stats:
          observed_min: '2024-01-15'
          observed_max: '2024-01-24'
          margin_days: 3
    status:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 10
      allowed_values:
        values:
        - paid
        - pending
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 2
          strategy: coverage
      length_bounds:
        active_min: 4
        active_max: 7
        stats:
          observed_min: 4
          observed_max: 7
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    payment_method:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 10
      allowed_values:
        values:
        - credit_card
        - bank_transfer
        - cash
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 3
          strategy: coverage
      length_bounds:
        active_min: 4
        active_max: 13
        stats:
          observed_min: 4
          observed_max: 13
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
  freshness:
    as_of: '2024-01-25T00:00:00Z'
    window_days: 365
    date_field: date
  plausibility_templates: '# plausibility:

    #   scoring:

    #     rule_weights:

    #       numeric_sigma: 1.0      # enable if not overlapping with validity numeric_bounds

    #       categorical_tail: 1.0   # enable to flag rare categories

    #   notes: "Disabled by default to avoid overlap with Validity. Review before
    enabling."

    '
