contracts:
  id: key_value_template_standard
  name: Key Value Template ADRI Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Auto-generated standard for key_value_template data
record_identification:
  primary_key_fields:
  - key
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 75.0
  field_requirements:
    key:
      type: string
      nullable: false
      min_length: 22
      max_length: 22
      validation_rules:
      - name: key is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: key must not be empty
      - name: key type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: key must be of type string
      - name: key length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 22 AND LENGTH <= 22
        error_message: key length must be between 22 and 22
    value:
      type: string
      nullable: false
      allowed_values:
      - 'true'
      min_length: 4
      max_length: 4
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: value is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: value must not be empty
      - name: value type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: value must be of type string
      - name: value must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['true'])
        error_message: 'value must be one of: true'
      - name: value length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 4 AND LENGTH <= 4
        error_message: value length must be between 4 and 4
      - name: value pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'value must match pattern: ^[A-Za-z0-9\-_]+$'
    value_type:
      type: string
      nullable: false
      allowed_values:
      - boolean
      min_length: 7
      max_length: 7
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: value_type is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: value_type must not be empty
      - name: value_type type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: value_type must be of type string
      - name: value_type must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['boolean'])
        error_message: 'value_type must be one of: boolean'
      - name: value_type length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 7 AND LENGTH <= 7
        error_message: value_type length must be between 7 and 7
      - name: value_type pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'value_type must match pattern: ^[A-Za-z0-9\-_]+$'
    namespace:
      type: string
      nullable: false
      allowed_values:
      - features
      min_length: 8
      max_length: 8
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: namespace is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: namespace must not be empty
      - name: namespace type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: namespace must be of type string
      - name: namespace must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['features'])
        error_message: 'namespace must be one of: features'
      - name: namespace length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 8 AND LENGTH <= 8
        error_message: namespace length must be between 8 and 8
      - name: namespace pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'namespace must match pattern: ^[A-Za-z0-9\-_]+$'
    category:
      type: string
      nullable: false
      allowed_values:
      - ui
      min_length: 2
      max_length: 2
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: category is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: category must not be empty
      - name: category type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: category must be of type string
      - name: category must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['ui'])
        error_message: 'category must be one of: ui'
      - name: category length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 2 AND LENGTH <= 2
        error_message: category length must be between 2 and 2
      - name: category pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'category must match pattern: ^[A-Za-z0-9\-_]+$'
    description:
      type: string
      nullable: false
      allowed_values:
      - Enable new UI design
      min_length: 20
      max_length: 20
      validation_rules:
      - name: description is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: description must not be empty
      - name: description type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: description must be of type string
      - name: description must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['Enable new UI design'])
        error_message: 'description must be one of: Enable new UI design'
      - name: description length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 20 AND LENGTH <= 20
        error_message: description length must be between 20 and 20
    version:
      type: float
      nullable: false
      min_value: 1.0
      max_value: 1.0
      validation_rules:
      - name: version is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: version must not be empty
      - name: version type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_FLOAT
        error_message: version must be of type float
      - name: version numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 1.0 AND VALUE <= 1.0
        error_message: version must be between 1.0 and 1.0
    created_at:
      type: string
      nullable: false
      validation_rules:
      - name: created_at is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: created_at must not be empty
      - name: created_at type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: created_at must be of type date
      - name: created_at date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2024-12-29' AND DATE <= '2025-01-04'
        error_message: created_at must be within date range
    updated_at:
      type: string
      nullable: false
      validation_rules:
      - name: updated_at is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: updated_at must not be empty
      - name: updated_at type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: updated_at must be of type date
      - name: updated_at date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2025-01-14' AND DATE <= '2025-01-20'
        error_message: updated_at must be within date range
    is_sensitive:
      type: boolean
      nullable: false
      validation_rules:
      - name: is_sensitive is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: is_sensitive must not be empty
      - name: is_sensitive type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_BOOLEAN
        error_message: is_sensitive must be of type boolean
    access_level:
      type: string
      nullable: false
      allowed_values:
      - public
      min_length: 6
      max_length: 6
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: access_level is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: access_level must not be empty
      - name: access_level type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: access_level must be of type string
      - name: access_level must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['public'])
        error_message: 'access_level must be one of: public'
      - name: access_level length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 6 AND LENGTH <= 6
        error_message: access_level length must be between 6 and 6
      - name: access_level pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'access_level must match pattern: ^[A-Za-z0-9\-_]+$'
    is_active:
      type: boolean
      nullable: false
      validation_rules:
      - name: is_active is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: is_active must not be empty
      - name: is_active type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_BOOLEAN
        error_message: is_active must be of type boolean
    environment:
      type: string
      nullable: false
      allowed_values:
      - production
      min_length: 10
      max_length: 10
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: environment is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: environment must not be empty
      - name: environment type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: environment must be of type string
      - name: environment must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['production'])
        error_message: 'environment must be one of: production'
      - name: environment length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 10 AND LENGTH <= 10
        error_message: environment length must be between 10 and 10
      - name: environment pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'environment must match pattern: ^[A-Za-z0-9\-_]+$'
  dimension_requirements:
    validity:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          type: 0.35135135135135137
          length_bounds: 0.21621621621621623
          allowed_values: 0.1891891891891892
          pattern: 0.16216216216216217
          numeric_bounds: 0.02702702702702703
          date_bounds: 0.05405405405405406
        field_overrides: {}
    completeness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          missing_required: 0.07142857142857142
          not_null: 0.9285714285714286
        field_overrides: {}
    consistency:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights:
          primary_key_uniqueness: 0.3333333333333333
          format_consistency: 0.3333333333333333
          cross_field_logic: 0.3333333333333333
        field_overrides: {}
    freshness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          recency_window: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
metadata:
  explanations_note: Explanations are for human review; only requirements.field_requirements
    are enforced.
  explanations_glossary:
    iqr: 'Interquartile Range (Q3 - Q1): a robust measure of spread, less sensitive
      to outliers.'
    q1: 25th percentile of the training values.
    q3: 75th percentile of the training values.
    coverage: Share of non-null training values that satisfy the rule.
    unique_count: Number of distinct non-null values observed in training.
    mad: 'Median Absolute Deviation: robust measure of variability around the median.'
    quantile: Statistical measure dividing data into equal-sized intervals.
    training_pass: Guarantee that generated rules pass on the training data used for
      generation.
    enum_strategy: Method used for allowed values inference (coverage or tolerant).
    margin_days: Buffer added to date ranges to allow for reasonable variations.
  explanations:
    key:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      length_bounds:
        active_min: 22
        active_max: 22
        stats:
          observed_min: 22
          observed_max: 22
    value:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - 'true'
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 4
        active_max: 4
        stats:
          observed_min: 4
          observed_max: 4
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    value_type:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - boolean
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 7
        active_max: 7
        stats:
          observed_min: 7
          observed_max: 7
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    namespace:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - features
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 8
        active_max: 8
        stats:
          observed_min: 8
          observed_max: 8
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    category:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - ui
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 2
        active_max: 2
        stats:
          observed_min: 2
          observed_max: 2
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    description:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - Enable new UI design
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 20
        active_max: 20
        stats:
          observed_min: 20
          observed_max: 20
    version:
      type: float
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      range:
        strategy: iqr
        active_min: 1.0
        active_max: 1.0
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 1.0
          q3: 1.0
          iqr_k: 1.5
          observed_min: 1.0
          observed_max: 1.0
    created_at:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
    updated_at:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
    is_sensitive:
      type: boolean
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
    access_level:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - public
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 6
        active_max: 6
        stats:
          observed_min: 6
          observed_max: 6
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
    is_active:
      type: boolean
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
    environment:
      type: string
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 1
      allowed_values:
        values:
        - production
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 1
          strategy: coverage
      length_bounds:
        active_min: 10
        active_max: 10
        stats:
          observed_min: 10
          observed_max: 10
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
  freshness:
    as_of: '2025-01-02T00:00:00Z'
    window_days: 365
    date_field: created_at
  plausibility_templates: '# plausibility:

    #   scoring:

    #     rule_weights:

    #       numeric_sigma: 1.0      # enable if not overlapping with validity numeric_bounds

    #       categorical_tail: 1.0   # enable to flag rare categories

    #   notes: "Disabled by default to avoid overlap with Validity. Review before
    enabling."

    '
