contracts:
  id: adri_reasoning_responses
  name: ADRI Reasoning Responses Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Standard for validating ADRI reasoning responses JSONL structure and content
record_identification:
  primary_key_fields:
  - response_id
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 95.0
  field_requirements:
    response_id:
      type: string
      nullable: false
      pattern: ^response_\d{8}_\d{6}_[a-f0-9]+$
      description: Unique response identifier
      validation_rules:
      - name: response_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: response_id must not be empty
      - name: response_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: response_id must be of type string
      - name: response_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^response_\d{8}_\d{6}_[a-f0-9]+$')
        error_message: 'response_id must match pattern: ^response_\d{8}_\d{6}_[a-f0-9]+$'
    assessment_id:
      type: string
      nullable: false
      pattern: ^adri_\d{8}_\d{6}_[a-f0-9]+$
      description: Associated assessment identifier
      validation_rules:
      - name: assessment_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: assessment_id must not be empty
      - name: assessment_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: assessment_id must be of type string
      - name: assessment_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^adri_\d{8}_\d{6}_[a-f0-9]+$')
        error_message: 'assessment_id must match pattern: ^adri_\d{8}_\d{6}_[a-f0-9]+$'
    prompt_id:
      type: string
      nullable: false
      pattern: ^prompt_\d{8}_\d{6}_[a-f0-9]+$
      description: Reference to prompt that generated this response
      validation_rules:
      - name: prompt_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: prompt_id must not be empty
      - name: prompt_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: prompt_id must be of type string
      - name: prompt_id pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^prompt_\d{8}_\d{6}_[a-f0-9]+$')
        error_message: 'prompt_id must match pattern: ^prompt_\d{8}_\d{6}_[a-f0-9]+$'
    response_hash:
      type: string
      nullable: false
      pattern: ^[a-f0-9]{16}$
      description: SHA-256 hash (first 16 chars) of response content
      validation_rules:
      - name: response_hash is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: response_hash must not be empty
      - name: response_hash type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: response_hash must be of type string
      - name: response_hash pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[a-f0-9]{16}$')
        error_message: 'response_hash must match pattern: ^[a-f0-9]{16}$'
    response_text:
      type: string
      nullable: false
      description: AI-generated response text
      validation_rules:
      - name: response_text is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: response_text must not be empty
      - name: response_text type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: response_text must be of type string
    processing_time_ms:
      type: integer
      nullable: false
      min_value: 0
      description: Processing time in milliseconds
      validation_rules:
      - name: processing_time_ms is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: processing_time_ms must not be empty
      - name: processing_time_ms type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_INTEGER
        error_message: processing_time_ms must be of type integer
      - name: processing_time_ms numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 0
        error_message: processing_time_ms must be between 0 and None
    token_count:
      type: integer
      nullable: true
      min_value: 0
      description: Number of tokens in response (optional)
      validation_rules:
      - name: token_count type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_INTEGER
        error_message: token_count must be of type integer
      - name: token_count numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= 0
        error_message: token_count must be between 0 and None
    timestamp:
      type: string
      nullable: false
      pattern: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$
      description: ISO 8601 timestamp of response creation
      validation_rules:
      - name: timestamp is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: timestamp must not be empty
      - name: timestamp type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: timestamp must be of type string
      - name: timestamp pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$')
        error_message: 'timestamp must match pattern: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$'
  dimension_requirements:
    validity:
      minimum_score: 19.0
      weight: 1.0
      scoring:
        rule_weights:
          data_types: 1.0
          value_ranges: 1.0
        field_overrides: {}
    completeness:
      minimum_score: 19.0
      weight: 1.0
      scoring:
        rule_weights:
          required_fields: 1.0
        field_overrides: {}
    consistency:
      minimum_score: 19.0
      weight: 1.0
      scoring:
        rule_weights:
          field_consistency: 1.0
        field_overrides: {}
    freshness:
      minimum_score: 18.0
      weight: 1.0
      scoring:
        rule_weights:
          timestamp_validity: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 18.0
      weight: 1.0
      scoring:
        rule_weights:
          hash_format: 1.0
          id_patterns: 1.0
          performance_metrics: 1.0
        field_overrides: {}
metadata:
  purpose: Validation of ADRI reasoning response logging
  usage: 'This standard validates that ADRI reasoning responses JSONL files contain:

    1. All required response tracking fields with correct types

    2. Valid identifiers and timestamps

    3. Proper performance metrics

    4. Complete response content

    5. Cryptographic hashes for content verification

    6. Proper linkage to prompts and assessments

    '
  validation_notes: '- response_id must follow pattern: response_YYYYMMDD_HHMMSS_hexhash

    - assessment_id links to main ADRI assessment log

    - prompt_id links to the prompt that generated this response

    - response_hash is SHA-256 truncated to 16 hex characters

    - processing_time_ms must be non-negative

    - token_count is optional (may be empty)

    - timestamp must be valid ISO 8601 format

    - response_text must not be empty

    - Responses must be traceable back to prompts via prompt_id

    '
  relational_integrity: '- Each response_id must be unique

    - Each prompt_id must exist in adri_reasoning_prompts.jsonl

    - Each assessment_id must exist in adri_assessment_logs.jsonl

    - Timestamps should be >= corresponding prompt timestamp

    '
  created_by: ADRI Framework
  created_date: 2025-06-10
