"""Auto-generated Pydantic models - webhooks domain.

DO NOT EDIT - This file is generated by scripts/generate_pydantic_models.py

To regenerate, run:
    uv run poe generate-pydantic
"""

from __future__ import annotations

from enum import StrEnum
from typing import Annotated

from pydantic import AnyUrl, AwareDatetime, ConfigDict, Field

from katana_public_api_client.models_pydantic._base import KatanaPydanticBase

from .base import UpdatableEntity
from .common import Format, Object, StatusFilterEnum


class WebhookEvent(StrEnum):
    sales_order_created = "sales_order.created"
    sales_order_updated = "sales_order.updated"
    sales_order_deleted = "sales_order.deleted"
    sales_order_packed = "sales_order.packed"
    sales_order_delivered = "sales_order.delivered"
    sales_order_availability_updated = "sales_order.availability_updated"
    purchase_order_created = "purchase_order.created"
    purchase_order_updated = "purchase_order.updated"
    purchase_order_deleted = "purchase_order.deleted"
    purchase_order_partially_received = "purchase_order.partially_received"
    purchase_order_received = "purchase_order.received"
    purchase_order_row_created = "purchase_order_row.created"
    purchase_order_row_updated = "purchase_order_row.updated"
    purchase_order_row_deleted = "purchase_order_row.deleted"
    purchase_order_row_received = "purchase_order_row.received"
    manufacturing_order_created = "manufacturing_order.created"
    manufacturing_order_updated = "manufacturing_order.updated"
    manufacturing_order_deleted = "manufacturing_order.deleted"
    manufacturing_order_in_progress = "manufacturing_order.in_progress"
    manufacturing_order_blocked = "manufacturing_order.blocked"
    manufacturing_order_done = "manufacturing_order.done"
    manufacturing_order_operation_row_created = (
        "manufacturing_order_operation_row.created"
    )
    manufacturing_order_operation_row_updated = (
        "manufacturing_order_operation_row.updated"
    )
    manufacturing_order_operation_row_deleted = (
        "manufacturing_order_operation_row.deleted"
    )
    manufacturing_order_operation_row_in_progress = (
        "manufacturing_order_operation_row.in_progress"
    )
    manufacturing_order_operation_row_paused = (
        "manufacturing_order_operation_row.paused"
    )
    manufacturing_order_operation_row_blocked = (
        "manufacturing_order_operation_row.blocked"
    )
    manufacturing_order_operation_row_completed = (
        "manufacturing_order_operation_row.completed"
    )
    manufacturing_order_recipe_row_created = "manufacturing_order_recipe_row.created"
    manufacturing_order_recipe_row_updated = "manufacturing_order_recipe_row.updated"
    manufacturing_order_recipe_row_deleted = "manufacturing_order_recipe_row.deleted"
    manufacturing_order_recipe_row_ingredients_in_stock = (
        "manufacturing_order_recipe_row.ingredients_in_stock"
    )
    current_inventory_product_updated = "current_inventory.product_updated"
    current_inventory_material_updated = "current_inventory.material_updated"
    current_inventory_product_out_of_stock = "current_inventory.product_out_of_stock"
    current_inventory_material_out_of_stock = "current_inventory.material_out_of_stock"
    product_created = "product.created"
    product_updated = "product.updated"
    product_deleted = "product.deleted"
    material_created = "material.created"
    material_updated = "material.updated"
    material_deleted = "material.deleted"
    variant_created = "variant.created"
    variant_updated = "variant.updated"
    variant_deleted = "variant.deleted"
    product_recipe_row_created = "product_recipe_row.created"
    product_recipe_row_updated = "product_recipe_row.updated"
    product_recipe_row_deleted = "product_recipe_row.deleted"
    outsourced_purchase_order_created = "outsourced_purchase_order.created"
    outsourced_purchase_order_updated = "outsourced_purchase_order.updated"
    outsourced_purchase_order_deleted = "outsourced_purchase_order.deleted"
    outsourced_purchase_order_received = "outsourced_purchase_order.received"
    outsourced_purchase_order_row_created = "outsourced_purchase_order_row.created"
    outsourced_purchase_order_row_updated = "outsourced_purchase_order_row.updated"
    outsourced_purchase_order_row_deleted = "outsourced_purchase_order_row.deleted"
    outsourced_purchase_order_row_received = "outsourced_purchase_order_row.received"
    outsourced_purchase_order_recipe_row_created = (
        "outsourced_purchase_order_recipe_row.created"
    )
    outsourced_purchase_order_recipe_row_updated = (
        "outsourced_purchase_order_recipe_row.updated"
    )
    outsourced_purchase_order_recipe_row_deleted = (
        "outsourced_purchase_order_recipe_row.deleted"
    )


class WebhookEventPayload(KatanaPydanticBase):
    resource_type: Annotated[
        str,
        Field(
            description="Indicates the resource type affected by this event",
            examples=["sales_order"],
        ),
    ]
    action: Annotated[
        WebhookEvent,
        Field(
            description="The event that triggered this webhook",
            examples=["sales_order.delivered"],
        ),
    ]
    webhook_id: Annotated[
        int,
        Field(
            description="ID of the registered webhook that was used to send the payload",
            examples=[123],
        ),
    ]
    object: Annotated[
        Object,
        Field(
            description="The object affected by this event. Contains id, status and href to retrieve the resource.\n\nNotes:\n- href property doesn't apply to deleted events (e.g., sales_order.deleted, product_recipe_row.deleted)\n- status field appears in examples but is not documented in official Katana API docs"
        ),
    ]


class CreateWebhookRequest(KatanaPydanticBase):
    model_config = ConfigDict(
        extra="forbid",
    )
    url: Annotated[
        str,
        Field(
            description="HTTPS endpoint URL where webhook events will be sent (must use HTTPS for security)",
            pattern="^https://.*$",
        ),
    ]
    subscribed_events: Annotated[
        list[WebhookEvent],
        Field(
            description="List of event types to subscribe to (at least one event type required)",
            min_length=1,
        ),
    ]
    description: Annotated[
        str | None,
        Field(
            description="Optional human-readable description of this webhook's purpose for management and documentation"
        ),
    ] = None


class UpdateWebhookRequest(KatanaPydanticBase):
    model_config = ConfigDict(
        extra="forbid",
    )
    url: Annotated[
        str,
        Field(
            description="HTTPS endpoint URL where webhook events will be sent (must use HTTPS for security)",
            pattern="^https://.*$",
        ),
    ]
    enabled: Annotated[
        bool | None,
        Field(
            description="Whether this webhook subscription should be active and receive events"
        ),
    ] = None
    subscribed_events: Annotated[
        list[WebhookEvent],
        Field(
            description="List of event types to subscribe to (at least one event type required)",
            min_length=1,
        ),
    ]
    description: Annotated[
        str | None,
        Field(
            description="Optional human-readable description of this webhook's purpose for management and documentation"
        ),
    ] = None


class Webhook(UpdatableEntity):
    id: Annotated[
        int | None, Field(description="Unique identifier for the webhook subscription")
    ] = None
    url: Annotated[
        str | None,
        Field(description="HTTPS endpoint URL where webhook events will be sent"),
    ] = None
    token: Annotated[
        str | None,
        Field(
            description="Authentication token included in webhook request headers for security verification"
        ),
    ] = None
    enabled: Annotated[
        bool | None,
        Field(
            description="Whether this webhook subscription is active and will receive events"
        ),
    ] = None
    description: Annotated[
        str | None,
        Field(
            description="Optional human-readable description of this webhook's purpose"
        ),
    ] = None
    subscribed_events: Annotated[
        list[str] | None,
        Field(description="List of event types that will trigger this webhook"),
    ] = None


class WebhookListResponse(KatanaPydanticBase):
    data: Annotated[
        list[Webhook] | None,
        Field(
            description="Array of webhook configurations with their subscription details and status"
        ),
    ] = None


class WebhookLogsExportRequest(KatanaPydanticBase):
    model_config = ConfigDict(
        extra="forbid",
    )
    webhook_id: Annotated[
        int | None,
        Field(
            description="Filter logs to specific webhook subscription (optional - if not provided, exports all webhook logs)"
        ),
    ] = None
    start_date: Annotated[
        AwareDatetime | None,
        Field(description="Start date for log export range (ISO 8601 format)"),
    ] = None
    end_date: Annotated[
        AwareDatetime | None,
        Field(description="End date for log export range (ISO 8601 format)"),
    ] = None
    status_filter: Annotated[
        list[StatusFilterEnum] | None,
        Field(description="Filter logs by delivery status (success, failure, retry)"),
    ] = None
    format: Annotated[
        Format | None, Field(description="Export file format preference")
    ] = Format.csv


class WebhookLogsExport(KatanaPydanticBase):
    url: Annotated[
        AnyUrl | None,
        Field(
            description="Pre-signed download URL for the webhook logs export file (CSV or JSON format)"
        ),
    ] = None
