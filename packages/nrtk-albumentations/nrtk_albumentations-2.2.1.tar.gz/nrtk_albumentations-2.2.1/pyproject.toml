[build-system]
build-backend = "poetry.core.masonry.api"

requires = [ "poetry-core>=2" ]

[tool.poetry]
name = "nrtk-albumentations"
version = "2.2.1"
description = "Fork of Albumentations in direct support of NRTK (Natural Robustness Toolkit). Fast, flexible, and advanced augmentation library for deep learning, computer vision, and medical imaging. Offers a wide range of transformations for both 2D (images, masks, bboxes, keypoints) and 3D (volumes, volumetric masks, keypoints) data, with optimized performance and seamless integration into ML workflows."
authors = [ "Vladimir Iglovikov" ]
maintainers = [ "Kitware, Inc. <nrtk@kitware.com>" ]
license = "MIT"
readme = "README.md"
homepage = "https://nrtk.readthedocs.io/"
repository = "https://github.com/Kitware/nrtk-albumentations"
keywords = [
  "2D augmentation",
  "3D augmentation",
  "aerial photography",
  "anomaly detection",
  "artificial intelligence",
  "autonomous driving",
  "bounding boxes",
  "classification",
  "computer vision",
  "computer vision library",
  "data augmentation",
  "data preprocessing",
  "data science",
  "deep learning",
  "deep learning library",
  "depth estimation",
  "face recognition",
  "fast augmentation",
  "image augmentation",
  "image processing",
  "image transformation",
  "images",
  "instance segmentation",
  "keras",
  "keypoint detection",
  "keypoints",
  "machine learning",
  "machine learning tools",
  "masks",
  "medical imaging",
  "microscopy",
  "object counting",
  "object detection",
  "optimized performance",
  "panoptic segmentation",
  "pose estimation",
  "python library",
  "pytorch",
  "quality inspection",
  "real-time processing",
  "robotics vision",
  "satellite imagery",
  "semantic segmentation",
  "tensorflow",
  "volumes",
  "volumetric data",
  "volumetric masks",
]
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Intended Audience :: Developers",
  "Intended Audience :: Healthcare Industry",
  "Intended Audience :: Information Technology",
  "Intended Audience :: Science/Research",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Topic :: Scientific/Engineering",
  "Topic :: Scientific/Engineering :: Artificial Intelligence",
  "Topic :: Scientific/Engineering :: Astronomy",
  "Topic :: Scientific/Engineering :: Atmospheric Science",
  "Topic :: Scientific/Engineering :: Bio-Informatics",
  "Topic :: Scientific/Engineering :: Image Processing",
  "Topic :: Scientific/Engineering :: Physics",
  "Topic :: Scientific/Engineering :: Visualization",
  "Topic :: Software Development :: Libraries",
  "Topic :: Software Development :: Libraries :: Python Modules",
  "Typing :: Typed",
]
packages = [
  { include = "albumentations" },
  { include = "albucore" },
]
include = [ "albumentations/*.txt", "albumentations/*.md" ]
exclude = [ "tests", "tools", "benchmark", "docs", ".github" ]

[tool.poetry.urls]
Homepage = "https://nrtk.readthedocs.io/"

[tool.poetry.dependencies]
python = "^3.10"
numpy = ">=1.26"
scipy = ">=1.14.1"
simsimd = ">=5.9.2"
stringzilla = ">=3.10.4"
PyYAML = "*"
typing-extensions = ">=4.9.0"
pydantic = ">=2.9.2"
eval-type-backport = "*"

[tool.poetry.extras]
hub = [ "huggingface-hub" ]
pytorch = [ "torch" ]
text = [ "pillow" ]

[tool.poetry.group.dev.dependencies]
deepdiff = ">=8.0.1"
eval-type-backport = "*"
opencv-python-headless = ">=4.9.0.80"
pre-commit = ">=3.5.0"
pytest = ">=8.3.3"
pytest-cov = ">=5.0.0"
pytest-mock = ">=3.14.0"
pytz = "*"
requests = ">=2.31.0"
scikit-image = "*"
scikit-learn = "*"
tomli = ">=2.0.1"
torch = ">=2.3.1"
torchvision = ">=0.18.1"
types-PyYAML = "*"
types-setuptools = "*"

[tool.ruff]
# Assume Python 3.10
target-version = "py310"

line-length = 120
indent-width = 4

# Exclude a variety of commonly ignored directories.
exclude = [
  ".bzr",
  ".direnv",
  ".eggs",
  ".git",
  ".git-rewrite",
  ".hg",
  ".ipynb_checkpoints",
  ".mypy_cache",
  ".nox",
  ".pants.d",
  ".pyenv",
  ".pytest_cache",
  ".pytype",
  ".ruff_cache",
  ".svn",
  ".tox",
  ".venv",
  ".vscode",
  "__pypackages__",
  "_build",
  "buck-out",
  "build",
  "dist",
  "node_modules",
  "setup.py",
  "site",
  "site-packages",
  "tests",
  "venv",
]

format.indent-style = "space"
# Like Black, respect magic trailing commas.
format.quote-style = "double"
# Like Black, indent with spaces, rather than tabs.
format.line-ending = "auto"
format.skip-magic-trailing-comma = false
# Like Black, automatically detect the appropriate line ending.
lint.select = [ "ALL" ]
lint.ignore = [
  "ANN001",
  "ANN204",
  "ANN401",
  "ARG001",
  "ARG002",
  "B006",
  "B008",
  "B027",
  "D104",
  "D105",
  "D106",
  "D107",
  "D205",
  "D213",
  "D400",
  "D401",
  "D404",
  "D415",
  "EM101",
  "EM102",
  "F403",
  "FBT001",
  "FBT002",
  "FBT003",
  "G004",
  "PLC0415",
  "PLR0911",
  "PLR0913",
  "PLR2004",
  "S311",
  "S608",
  "TC001",
  "TC002",
  "TC003",
  "TRY003",
]

lint.per-file-ignores."tools/*" = [
  "ANN201",
  "D100",
  "D101",
  "D103",
  "INP001",
  "SLF001",
  "T201",
]

[tool.mypy]
plugins = [ "pydantic.mypy" ]

python_version = "^3.10"
ignore_missing_imports = true
follow_imports = "silent"
warn_redundant_casts = true
warn_unused_ignores = true
disallow_any_generics = true
check_untyped_defs = true
no_implicit_reexport = true
disable_error_code = [ "valid-type" ]

# for strict mypy: (this is the tricky one :-))
disallow_untyped_defs = true

[tool.pydocstyle]
# Allow fix for all enabled rules (when `--fix`) is provided.

lint.explicit-preview-rules = true
lint.fixable = [ "ALL" ]
lint.unfixable = [  ]
# Allow unused variables when underscore-prefixed.
lint.dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"
# Like Black, use double quotes for strings.
lint.pydocstyle.convention = "google"
lint.pydocstyle.ignore-magic-methods = true

[tool.pydantic-mypy]
init_forbid_extra = true
init_typed = true
warn_required_dynamic_aliases = true

[tool.codeflash]
# All paths are relative to this pyproject.toml's directory.
module-root = "albumentations"
tests-root = "tests"
test-framework = "pytest"
ignore-paths = [  ]
formatter-cmds = [ "ruff check --exit-zero --fix $file", "ruff format $file" ]

[tool.google_docstring_parser]
paths = [ "albumentations", "tools" ] # Directories or files to scan
require_param_types = true            # Require parameter types in docstrings
exclude_files = [ "__init__.py" ]     # Files to exclude from checks
verbose = false                       # Enable verbose output
check_references = true
