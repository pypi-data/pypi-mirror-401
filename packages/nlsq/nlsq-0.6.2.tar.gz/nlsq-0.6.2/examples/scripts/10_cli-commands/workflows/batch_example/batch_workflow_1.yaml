# ==============================================================================
# Batch Workflow 1 - Exponential Decay Dataset 1
# ==============================================================================
# Part of batch processing demonstration.
# Run with: nlsq batch workflows/batch_example/*.yaml
# ==============================================================================

metadata:
  workflow_name: "batch_exp_decay_1"
  description: "Batch processing - Dataset 1"
  version: "1.0"

data:
  dataset_id: "batch_001"
  input_file: "data/batch_data_1.csv"
  format: "csv"
  columns:
    x: 0
    y: 1
    sigma: 2
  csv:
    header: true
    delimiter: ","
    skip_header: 1

model:
  type: "builtin"
  name: "exponential_decay"
  auto_p0: true

fitting:
  termination:
    ftol: 1.0e-8
    xtol: 1.0e-8
    gtol: 1.0e-8
    max_iterations: 100

export:
  results_file: "output/batch_results_1.json"
  include:
    parameters: true
    uncertainties: true
    statistics: true

# Batch workflow visualization - compact style for batch processing
visualization:
  enabled: true
  output_dir: "output/figures"
  filename_prefix: "batch_1"
  formats: ["png", "pdf"]
  dpi: 300
  figure_size: [5.0, 4.0]
  style: "minimal"
  layout: "combined"

  font:
    family: "sans-serif"
    size: 9

  main_plot:
    x_label: "Time (s)"
    y_label: "Signal"
    show_grid: false

    data:
      marker: "o"
      size: 15
      alpha: 0.7
      show_errorbars: true
      capsize: 2

    fit:
      linewidth: 1.5
      n_points: 300

    confidence_band:
      enabled: true
      level: 0.95
      alpha: 0.2

    legend:
      enabled: true
      location: "best"
      frameon: false

    annotation:
      enabled: true
      show_r_squared: true
      show_rmse: true
      location: "upper right"
      fontsize: 8

  residuals_plot:
    enabled: true
    type: "scatter"
    show_zero_line: true
    marker: "o"
    size: 10
    alpha: 0.7

    std_bands:
      enabled: true
      levels: [1, 2]

  histogram:
    enabled: true
    bins: "auto"
    show_normal_fit: true

  active_scheme: "default"
