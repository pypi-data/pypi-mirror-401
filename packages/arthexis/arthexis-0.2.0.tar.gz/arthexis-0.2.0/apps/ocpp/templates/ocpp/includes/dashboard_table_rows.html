{% load i18n %}
{% if charger_groups %}
  {% for group in charger_groups %}
    {% if group.parent %}
    <tr>
      <td>
        <a href="{{ group.parent.status_url }}">{{ group.parent.display_name }}</a>
        {% if group.parent.charging_limit %}
        <div class="text-muted small">
          {% trans "Limit" %}: {{ group.parent.charging_limit.label|default:group.parent.charging_limit.source }}
        </div>
        {% endif %}
      </td>
      <td>{{ group.parent.charger.charger_id }}</td>
      <td class="text-end">{{ group.parent.stats.total_kw|floatformat:2 }}</td>
      <td class="text-end">{{ group.parent.stats.today_kw|floatformat:2 }}</td>
      <td>
        <span class="badge" style="background-color: {{ group.parent.color }};">{{ group.parent.state }}</span>
      </td>
    </tr>
    {% endif %}
    {% for item in group.children %}
    <tr>
      <td class="ps-4">
        <a href="{{ item.status_url }}">{{ item.display_name }}</a>
        {% if item.charging_limit %}
        <div class="text-muted small">
          {% trans "Limit" %}: {{ item.charging_limit.label|default:item.charging_limit.source }}
        </div>
        {% endif %}
      </td>
      <td>
        {{ item.charger.charger_id }}{% if item.charger.connector_letter %} #{{ item.charger.connector_letter }}{% endif %}
      </td>
      <td class="text-end">{{ item.stats.total_kw|floatformat:2 }}</td>
      <td class="text-end">{{ item.stats.today_kw|floatformat:2 }}</td>
      <td>
        <span class="badge" style="background-color: {{ item.color }};">{{ item.state }}</span>
      </td>
    </tr>
    {% endfor %}
  {% endfor %}
{% else %}
<tr><td colspan="5">{% trans "No charge points found." %}</td></tr>
{% endif %}
