var ae=Object.defineProperty;var v=(n,i)=>ae(n,"name",{value:i,configurable:!0});import{a2 as W,dk as L,ea as T,r as S,dZ as ne,E as r,dl as R,h as oe,j as I,d as b,k as O,l as le,c as F,m as E,a8 as d,q as z,e as $,p as ie,s as C,I as y,J as h,L as ue,z as se,t as re}from"./vendor-other-Dsj-QuOx.js";import{b as de}from"./vendor-vue-DNQSPQQ2.js";import{c as g,cS as me,b9 as pe,d as ve}from"./index-Bc79VbnU.js";import{f as j,I as ce,S as fe}from"./widgetPropFilter-CygYoMQt.js";import{W as H}from"./index-BBvP0bLh.js";import{_ as q}from"./WidgetLayoutField.vue_vue_type_script_setup_true_lang-CYDaxuge.js";import{J as ge}from"./vendor-primevue-Cif--Rbw.js";import{_ as be}from"./WidgetWithControl.vue_vue_type_script_setup_true_lang-B5RYQ41H.js";const we=["aria-label"],Ve=["disabled"],xe={class:"relative min-w-[4ch] flex-1 py-1.5 my-0.25"},Ne=["aria-valuenow","aria-valuemin","aria-valuemax","value","disabled"],Me=["disabled"],G="w-8 bg-transparent border-0 text-sm text-smoke-700",X=W({__name:"WidgetInputNumberInput",props:L({widget:{}},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const{n:i}=de(),a=n,u=T("widgetContainer"),o=T("inputField"),l=S(!1);ne(u,()=>{l.value&&(l.value=!1)});const c=r(()=>i(1.1).replace(/\p{Number}/gu,"")),N=r(()=>i(11111).replace(/\p{Number}/gu,""));function k(e){return e.replaceAll(N.value,"").replaceAll(c.value,".")}v(k,"unformatValue");const s=R(n,"modelValue"),m=r(()=>{const e=f.value??s.value;return isFinite(e)?i(e,{useGrouping:Z.value,minimumFractionDigits:x.value,maximumFractionDigits:x.value}):`${e}`});function B(e){const{target:t}=e;if(!(t instanceof HTMLInputElement))return;const D=me(k(t.value));D!==void 0?s.value=Math.min(p.value.max,Math.max(p.value.min,D)):t.value=m.value,l.value=!1}v(B,"updateValue");const U=r(()=>s.value>p.value.min&&!a.widget.options?.disabled),A=r(()=>s.value<p.value.max&&!a.widget.options?.disabled),p=r(()=>j(a.widget.options,ce)),x=r(()=>{const e=a.widget.options?.precision;return typeof e=="number"&&e>=0?e:void 0}),w=r(()=>{if(a.widget.options?.step2!==void 0)return Number(a.widget.options.step2);const e=a.widget.options?.step;return e!==void 0&&e>10?Number(e)/10:x.value!==void 0?x.value===0?1:Number((1/Math.pow(10,x.value)).toFixed(x.value)):0}),Z=r(()=>a.widget.options?.useGrouping===!0),_=r(()=>{const e=s.value??0;return!Number.isFinite(e)||Math.abs(e)>Number.MAX_SAFE_INTEGER});function P(e){s.value=Math.min(p.value.max,Math.max(p.value.min,s.value+e))}v(P,"updateValueBy");const f=S(),V=S(0);function Q(e){if(a.widget.options?.disabled)return;const{target:t}=e;t instanceof HTMLElement&&(t.setPointerCapture(e.pointerId),f.value=s.value,V.value=0)}v(Q,"handleMouseDown");function Y(e){if(f.value===void 0)return;V.value+=e.movementX;const t=f.value+(V.value/10|0)*w.value;V.value%=10,f.value=Math.min(p.value.max,Math.max(p.value.min,t))}v(Y,"handleMouseMove");function ee(){const e=f.value;e!==void 0&&(s.value=e,f.value=void 0,V.value===0&&(l.value=!0,o.value?.focus(),o.value?.setSelectionRange(0,-1)),V.value=0)}v(ee,"handleMouseUp");const te=r(()=>_.value?"Increment/decrement disabled: value exceeds JavaScript precision limit (Â±2^53)":null);return(e,t)=>{const D=oe("tooltip");return b(),I(q,{widget:e.widget},{default:O(()=>[le((b(),F("div",E({ref_key:"widgetContainer",ref:u},p.value,{"aria-label":e.widget.name,class:d(g)(d(H),"grow text-xs flex h-7")}),[_.value?z("",!0):(b(),F("button",{key:0,"data-testid":"decrement",class:C(d(g)(G,"pi pi-minus",!U.value&&"opacity-60")),disabled:!U.value,tabindex:"-1",onClick:t[0]||(t[0]=M=>s.value-=w.value)},null,10,Ve)),$("div",xe,[$("input",{ref_key:"inputField",ref:o,"aria-valuenow":f.value??s.value,"aria-valuemin":p.value.min,"aria-valuemax":p.value.max,class:C(d(g)("bg-transparent border-0 focus:outline-0 p-1 truncate text-sm absolute inset-0")),inputmode:"decimal",value:m.value,role:"spinbutton",tabindex:"0",disabled:e.widget.options?.disabled,autocomplete:"off",autocorrect:"off",spellcheck:"false",onBlur:B,onKeyup:h(B,["enter"]),onKeydown:[t[1]||(t[1]=h(y(M=>P(w.value),["prevent"]),["up"])),t[2]||(t[2]=h(y(M=>P(-w.value),["prevent"]),["down"])),t[3]||(t[3]=h(y(M=>P(10*w.value),["prevent"]),["page-up"])),t[4]||(t[4]=h(y(M=>P(-10*w.value),["prevent"]),["page-down"]))],onDragstart:t[5]||(t[5]=y(()=>{},["prevent"]))},null,42,Ne),$("div",{class:C(d(g)("absolute inset-0 z-10 cursor-ew-resize",l.value&&"hidden pointer-events-none")),onPointerdown:Q,onPointermove:Y,onPointerup:ee,onPointercancel:t[6]||(t[6]=()=>{f.value=void 0,V.value=0})},null,34)]),ie(e.$slots,"default"),_.value?z("",!0):(b(),F("button",{key:1,"data-testid":"increment",class:C(d(g)(G,"pi pi-plus",!A.value&&"opacity-60")),disabled:!A.value,tabindex:"-1",onClick:t[7]||(t[7]=M=>s.value+=w.value)},null,10,Me))],16,we)),[[D,te.value]])]),_:3},8,["widget"])}}});function ye(n,i,a=!1){return r(()=>{const u=ue(i);if(n?.step2!==void 0)return Number(n.step2);const o=n?.step;if(o!==void 0&&o>10)return Number(o)/10;if(u===void 0)return a?void 0:0;if(u===0)return 1;const l=1/Math.pow(10,u);return a?l:Number(l.toFixed(u))})}v(ye,"useNumberStepCalculation");const J=g("inline-flex items-center justify-center border-0 bg-transparent text-inherit transition-colors duration-150 ease-in-out ","hover:bg-node-component-surface-hovered active:bg-node-component-surface-selected","disabled:bg-node-component-disabled disabled:text-node-icon-disabled disabled:cursor-not-allowed");function he(n){const{roundedLeft:i=!1,roundedRight:a=!1}=n??{},u=g(J,a&&"rounded-r-lg"),o=g(J,i&&"rounded-l-lg");return{incrementButton:{class:u},decrementButton:{class:o}}}v(he,"useNumberWidgetButtonPt");const Ce=W({__name:"WidgetInputNumberSlider",props:L({widget:{}},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const i=R(n,"modelValue"),a=S(0),u=v(m=>{m?.length&&(i.value=m[0])},"updateLocalValue"),o=v(m=>{if(m!==void 0){u([m]);return}a.value+=1},"handleNumberInputUpdate"),l=r(()=>j(n.widget.options,fe)),c=n.widget.options?.precision,N=typeof c=="number"&&c>=0?c:void 0,k=ye(n.widget.options,N,!0),s=he({roundedLeft:!0,roundedRight:!0});return(m,B)=>(b(),I(q,{widget:m.widget},{default:O(()=>[$("div",{class:C(d(g)(d(H),"flex items-center gap-2 pl-3 pr-2"))},[se(pe,E({"model-value":[i.value]},l.value,{class:"flex-grow text-xs",step:d(k),"aria-label":m.widget.name,"onUpdate:modelValue":u}),null,16,["model-value","step","aria-label"]),(b(),I(d(ge),E({key:a.value,"model-value":i.value},l.value,{step:d(k),"min-fraction-digits":d(N),"max-fraction-digits":d(N),"aria-label":m.widget.name,size:"small","pt:pc-input-text:root":"min-w-[4ch] bg-transparent border-none text-center truncate",class:"w-16",pt:d(s),"onUpdate:modelValue":o}),null,16,["model-value","step","min-fraction-digits","max-fraction-digits","aria-label","pt"]))],2)]),_:1},8,["widget"]))}}),K=ve(Ce,[["__scopeId","data-v-989ee2f9"]]),Fe=W({__name:"WidgetInputNumber",props:L({widget:{}},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const i=n,a=R(n,"modelValue"),u=r(()=>!!i.widget.controlWidget);return(o,l)=>u.value?(b(),I(be,{key:0,modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=c=>a.value=c),widget:o.widget,component:o.widget.type==="slider"?K:X},null,8,["modelValue","widget","component"])):(b(),I(re(o.widget.type==="slider"?K:X),E({key:1,modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=c=>a.value=c),widget:o.widget},o.$attrs),null,16,["modelValue","widget"]))}});export{Fe as _};
//# sourceMappingURL=WidgetInputNumber.vue_vue_type_script_setup_true_lang-CdvBpGed.js.map
