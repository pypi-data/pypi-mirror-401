var W=Object.defineProperty;var a=(f,c)=>W(f,"name",{value:c,configurable:!0});import{t as s,dJ as N,m as U,a5 as G,Y as J,dK as Q,c as O,_ as C,d as Y,A as X}from"./index-Bc79VbnU.js";import{_ as Z,a as ee}from"./GraphView-Dwrm8D3J.js";import{a2 as j,E as T,j as te,d as x,r as S,c as g,e,z as p,a8 as n,k as y,q as z,u as t,F as se,y as oe,s as F,l as ne,A,v as re,w as V,dN as ae}from"./vendor-other-Dsj-QuOx.js";import{v as le,p as ie}from"./vendor-primevue-Cif--Rbw.js";import{b as ce}from"./vendor-vue-DNQSPQQ2.js";import"./vendor-xterm-CWYFmgbN.js";import"./vendor-reka-ui-WjwjFuZo.js";import"./vendor-three-ByuY8CdW.js";import"./vendor-tiptap-YMjM2h-Z.js";import"./UserAvatar.vue_vue_type_script_setup_true_lang-BvnQQTOP.js";import"./LazyImage.vue_vue_type_script_setup_true_lang-CX9YtPlM.js";import"./index-BBvP0bLh.js";import"./keybindingService-DOwK-S5D.js";import"./serverConfigStore-BJQLZ9Iv.js";import"./WidgetInputNumber.vue_vue_type_script_setup_true_lang-CdvBpGed.js";import"./widgetPropFilter-CygYoMQt.js";import"./WidgetLayoutField.vue_vue_type_script_setup_true_lang-CYDaxuge.js";import"./WidgetWithControl.vue_vue_type_script_setup_true_lang-B5RYQ41H.js";const de=j({__name:"CloudBadge",props:{displayMode:{default:"full"},reverseOrder:{type:Boolean,default:!1},noPadding:{type:Boolean,default:!1},backgroundColor:{default:"var(--comfy-menu-bg)"}},setup(f){const c=T(()=>({label:s("g.beta"),text:"Comfy Cloud"}));return(m,v)=>(x(),te(Z,{badge:c.value,"display-mode":m.displayMode,"reverse-order":m.reverseOrder,"no-padding":m.noPadding,"background-color":m.backgroundColor},null,8,["badge","display-mode","reverse-order","no-padding","background-color"]))}}),ue=""+new URL("images/cloud-subscription.webm",import.meta.url).href,pe=20,fe=["yearly-pro","yearly-creator","yearly-standard","monthly-pro","monthly-creator","monthly-standard"];fe.reduce((f,c,m)=>f.set(c,m),new Map);const me={class:"flex flex-col gap-8"},xe={class:"flex justify-center"},be={class:"flex items-center gap-2"},ge={key:0,class:"bg-primary-background text-white text-[11px] px-1 py-0.5 rounded-full flex items-center font-bold"},_e={class:"flex flex-col xl:flex-row items-stretch gap-6"},ye={class:"p-8 pb-0 flex flex-col gap-8"},ve={class:"flex flex-row items-center gap-2 justify-between"},he={class:"font-inter text-base font-bold leading-normal text-base-foreground"},we={key:0,class:"rounded-full bg-base-foreground px-1.5 text-[11px] font-bold uppercase text-base-background h-5 tracking-tight flex items-center"},ke={class:"flex flex-col"},$e={class:"flex flex-col gap-2"},Ce={class:"flex flex-row items-baseline gap-2"},Le={class:"font-inter text-[32px] font-semibold leading-normal text-base-foreground"},Pe={class:"font-inter text-xl leading-normal text-base-foreground"},Ee={class:"flex items-center gap-2"},Se={class:"text-sm text-muted-foreground"},Te={class:"flex flex-col gap-4 pb-0 flex-1"},Ae={class:"flex flex-row items-center justify-between"},De={class:"font-inter text-sm font-normal leading-normal text-foreground"},Re={class:"flex flex-row items-center gap-1"},Be={class:"font-inter text-sm font-bold leading-normal text-base-foreground"},Ie={class:"flex flex-row items-center justify-between"},Ne={class:"text-sm font-normal text-foreground"},je={class:"font-inter text-sm font-bold leading-normal text-base-foreground"},Me={class:"flex flex-row items-center justify-between"},Oe={class:"text-sm font-normal text-foreground"},ze={class:"flex flex-row items-center justify-between"},Fe={class:"text-sm font-normal text-foreground"},Ve={class:"flex flex-row items-center justify-between"},Ue={class:"text-sm font-normal text-foreground"},Ye={key:0,class:"pi pi-check text-xs text-success-foreground"},qe={key:1,class:"pi pi-times text-xs text-foreground"},He={class:"flex flex-col gap-2"},Ke={class:"flex flex-row items-start justify-between"},We={class:"flex flex-col gap-2"},Ge={class:"text-sm font-normal text-foreground leading-relaxed"},Je={class:"flex flex-row items-center gap-2 group pt-2"},Qe={class:"font-inter text-sm font-bold leading-normal text-base-foreground"},Xe={class:"flex flex-col p-8"},Ze={class:"flex flex-col gap-2"},et={class:"text-sm text-base-foreground leading-normal"},tt={href:"https://cloud.comfy.org/?template=video_wan2_2_14B_fun_camera",target:"_blank",rel:"noopener noreferrer",class:"text-sm text-azure-600 hover:text-azure-400 no-underline flex gap-1"},st={class:"underline"},ot=j({__name:"PricingTable",setup(f){const c=[{label:s("subscription.yearly"),value:"yearly"},{label:s("subscription.monthly"),value:"monthly"}],m=[{id:"STANDARD",key:"standard",name:s("subscription.tiers.standard.name"),pricing:N.standard,maxDuration:s("subscription.maxDuration.standard"),customLoRAs:!1,isPopular:!1},{id:"CREATOR",key:"creator",name:s("subscription.tiers.creator.name"),pricing:N.creator,maxDuration:s("subscription.maxDuration.creator"),customLoRAs:!0,isPopular:!0},{id:"PRO",key:"pro",name:s("subscription.tiers.pro.name"),pricing:N.pro,maxDuration:s("subscription.maxDuration.pro"),customLoRAs:!0,isPopular:!1}],{n:v}=ce(),{isActiveSubscription:D,subscriptionTier:L,isYearlySubscription:P}=U(),{accessBillingPortal:M,reportError:R}=G(),{wrapWithErrorHandlingAsync:h}=J(),w=S(!1),k=S(null),b=S(),u=S("yearly"),_=T(()=>L.value?Q[L.value]:null);T(()=>_.value?{tierKey:_.value,billingCycle:P.value?"yearly":"monthly"}:null);const $=a(r=>{if(!_.value)return!1;const i=u.value==="yearly";return _.value===r&&P.value===i},"isCurrentPlan"),E=a(r=>{b.value.toggle(r)},"togglePopover"),B=a(r=>{if($(r.key))return s("subscription.currentPlan");const i=u.value==="yearly"?s("subscription.tierNameYearly",{name:r.name}):r.name;return D.value?s("subscription.changeTo",{plan:i}):s("subscription.subscribeTo",{plan:i})},"getButtonLabel"),I=a(r=>$(r.key)?"secondary":r.key==="creator"?"primary":"secondary","getButtonSeverity"),l=a(r=>r.key==="creator"?"font-inter text-sm font-bold leading-normal text-base-background":"font-inter text-sm font-bold leading-normal text-primary-foreground","getButtonTextClass"),d=a(r=>r.pricing[u.value],"getPrice"),q=a(r=>r.pricing.yearly*12,"getAnnualTotal"),H=a(r=>r.pricing.credits*(u.value==="yearly"?12:1),"getCreditsDisplay"),K=h(async r=>{},R);return(r,i)=>(x(),g("div",me,[e("div",xe,[p(n(le),{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=o=>u.value=o),options:c,"option-label":"label","option-value":"value","allow-empty":!1,unstyled:"",pt:{root:{class:"flex gap-1 bg-secondary-background rounded-lg p-1.5"},pcToggleButton:{root:a(({context:o})=>({class:["w-36  h-8 rounded-md transition-colors cursor-pointer border-none outline-none ring-0 text-sm font-medium flex items-center justify-center",o.active?"bg-base-foreground text-base-background":"bg-transparent text-muted-foreground hover:bg-secondary-background-hover"]}),"root"),label:{class:"flex items-center gap-2 "}}}},{option:y(({option:o})=>[e("div",be,[e("span",null,t(o.label),1),o.value==="yearly"?(x(),g("div",ge," -20% ")):z("",!0)])]),_:1},8,["modelValue","pt"])]),e("div",_e,[(x(),g(se,null,oe(m,o=>e("div",{key:o.id,class:F(n(O)("flex-1 flex flex-col rounded-2xl border border-border-default bg-base-background shadow-[0_0_12px_rgba(0,0,0,0.1)]",o.isPopular?"border-muted-foreground":""))},[e("div",ye,[e("div",ve,[e("span",he,t(o.name),1),o.isPopular?(x(),g("div",we,t(n(s)("subscription.mostPopular")),1)):z("",!0)]),e("div",ke,[e("div",$e,[e("div",Ce,[e("span",Le,[ne(e("span",{class:"line-through text-2xl text-muted-foreground"}," $"+t(o.pricing.monthly),513),[[re,u.value==="yearly"]]),A(" $"+t(d(o)),1)]),e("span",Pe,t(n(s)("subscription.usdPerMonth")),1)]),e("div",Ee,[e("span",Se,t(u.value==="yearly"?n(s)("subscription.billedYearly",{total:`$${q(o)}`}):n(s)("subscription.billedMonthly")),1)])])]),e("div",Te,[e("div",Ae,[e("span",De,t(u.value==="yearly"?n(s)("subscription.yearlyCreditsLabel"):n(s)("subscription.monthlyCreditsLabel")),1),e("div",Re,[i[1]||(i[1]=e("i",{class:"icon-[lucide--component] text-amber-400 text-sm"},null,-1)),e("span",Be,t(n(v)(H(o))),1)])]),e("div",Ie,[e("span",Ne,t(n(s)("subscription.maxDurationLabel")),1),e("span",je,t(o.maxDuration),1)]),e("div",Me,[e("span",Oe,t(n(s)("subscription.gpuLabel")),1),i[2]||(i[2]=e("i",{class:"pi pi-check text-xs text-success-foreground"},null,-1))]),e("div",ze,[e("span",Fe,t(n(s)("subscription.addCreditsLabel")),1),i[3]||(i[3]=e("i",{class:"pi pi-check text-xs text-success-foreground"},null,-1))]),e("div",Ve,[e("span",Ue,t(n(s)("subscription.customLoRAsLabel")),1),o.customLoRAs?(x(),g("i",Ye)):(x(),g("i",qe))]),e("div",He,[e("div",Ke,[e("div",We,[e("span",Ge,t(n(s)("subscription.videoEstimateLabel")),1),e("div",Je,[i[4]||(i[4]=e("i",{class:"pi pi-question-circle text-xs text-muted-foreground group-hover:text-base-foreground"},null,-1)),e("span",{class:"text-sm font-normal text-muted-foreground cursor-pointer group-hover:text-base-foreground",onClick:E},t(n(s)("subscription.videoEstimateHelp")),1)])]),e("span",Qe," ~"+t(n(v)(o.pricing.videoEstimate)),1)])])])]),e("div",Xe,[p(C,{variant:I(o),disabled:w.value||$(o.key),loading:k.value===o.key,class:F(n(O)("h-10 w-full",l(o),o.key==="creator"?"bg-base-foreground border-transparent hover:bg-inverted-background-hover":"bg-secondary-background border-transparent hover:bg-secondary-background-hover focus:bg-secondary-background-selected")),onClick:a(()=>n(K)(o.key),"onClick")},{default:y(()=>[A(t(B(o)),1)]),_:2},1032,["variant","disabled","loading","class","onClick"])])],2)),64))]),p(n(ie),{ref_key:"popover",ref:b,"append-to":"body","auto-z-index":!0,"base-z-index":1e3,dismissable:!0,"close-on-escape":!0,unstyled:"",pt:{root:{class:"rounded-lg border border-interface-stroke bg-interface-panel-surface shadow-lg p-4 max-w-xs"}}},{default:y(()=>[e("div",Ze,[e("p",et,t(n(s)("subscription.videoEstimateExplanation")),1),e("a",tt,[e("span",st,t(n(s)("subscription.videoEstimateTryTemplate")),1),i[5]||(i[5]=e("span",{class:"no-underline",innerHTML:"â†’"},null,-1))])])]),_:1},512)]))}}),nt={},rt={class:"flex flex-col items-start gap-0 self-stretch"},at={class:"flex items-center gap-2 py-2"},lt={class:"text-sm text-text-primary"},it={class:"flex items-center gap-2 py-2"},ct={class:"text-sm text-text-primary"};function dt(f,c){return x(),g("div",rt,[e("div",at,[c[0]||(c[0]=e("i",{class:"pi pi-check text-xs text-text-primary"},null,-1)),e("span",lt,t(f.$t("subscription.benefits.benefit1")),1)]),e("div",it,[c[1]||(c[1]=e("i",{class:"pi pi-check text-xs text-text-primary"},null,-1)),e("span",ct,t(f.$t("subscription.benefits.benefit2")),1)])])}a(dt,"_sfc_render");const ut=Y(nt,[["render",dt]]),pt={key:0,class:"relative flex flex-col p-4 pt-8 md:p-16 !overflow-y-auto h-full gap-8"},ft={class:"text-center"},mt={class:"text-xl lg:text-2xl text-muted-foreground m-0"},xt={class:"flex flex-col items-center gap-2"},bt={class:"text-sm text-text-secondary m-0"},gt={class:"flex items-center gap-1.5"},_t={class:"text-sm text-text-secondary"},yt={key:1,class:"legacy-dialog relative grid h-full grid-cols-5"},vt={class:"col-span-3 flex flex-col justify-between p-8"},ht={class:"flex flex-col gap-6"},wt={class:"inline-flex items-center gap-2"},kt={class:"text-sm text-text-primary"},$t={class:"flex items-baseline gap-2"},Ct={class:"text-4xl font-bold"},Lt={class:"text-xl"},Pt={class:"flex flex-col pt-8"},Et=3e3,St=3,Tt=j({__name:"SubscriptionRequiredDialogContent",props:{onClose:{type:Function}},emits:["close"],setup(f,{emit:c}){const m=f,v=c,{fetchStatus:D,isActiveSubscription:L,isSubscriptionEnabled:P}=U(),M=new Intl.NumberFormat(navigator.language||"en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(pe),R=X(),h=T(()=>P());let w=null,k=0;const b=a(()=>{w&&(clearInterval(w),w=null)},"stopPolling"),u=a(()=>{b(),k=0;const l=a(async()=>{try{await D(),k++,k>=St&&b()}catch(d){console.error("[SubscriptionDialog] Failed to poll subscription status",d),b()}},"poll");l(),w=window.setInterval(()=>{l()},Et)},"startPolling"),_=a(()=>{h.value&&u()},"handleWindowFocus");V(h,l=>{l?window.addEventListener("focus",_):(window.removeEventListener("focus",_),b())},{immediate:!0}),V(()=>L.value,l=>{l&&h.value&&v("close",!0)});const $=a(()=>{v("close",!0)},"handleSubscribed"),E=a(()=>{b(),m.onClose()},"handleClose"),B=a(async()=>{await R.execute("Comfy.ContactSupport")},"handleContactUs"),I=a(()=>{window.open("https://www.comfy.org/cloud/enterprise","_blank")},"handleViewEnterprise");return ae(()=>{b(),window.removeEventListener("focus",_)}),(l,d)=>h.value?(x(),g("div",pt,[p(C,{size:"icon",variant:"muted-textonly",class:"rounded-full shrink-0 text-text-secondary hover:bg-white/10 absolute right-2.5 top-2.5","aria-label":l.$t("g.close"),onClick:E},{default:y(()=>d[0]||(d[0]=[e("i",{class:"pi pi-times text-xl"},null,-1)])),_:1},8,["aria-label"]),e("div",ft,[e("h2",mt,t(l.$t("subscription.description")),1)]),p(ot,{class:"flex-1"}),e("div",xt,[e("p",bt,t(l.$t("subscription.haveQuestions")),1),e("div",gt,[p(C,{variant:"muted-textonly",class:"h-6 p-1 text-sm text-text-secondary hover:text-base-foreground",onClick:B},{default:y(()=>[A(t(l.$t("subscription.contactUs"))+" ",1),d[1]||(d[1]=e("i",{class:"pi pi-comments"},null,-1))]),_:1}),e("span",_t,t(l.$t("g.or")),1),p(C,{variant:"muted-textonly",class:"h-6 p-1 text-sm text-text-secondary hover:text-base-foreground",onClick:I},{default:y(()=>[A(t(l.$t("subscription.viewEnterprise"))+" ",1),d[2]||(d[2]=e("i",{class:"pi pi-external-link"},null,-1))]),_:1})])])])):(x(),g("div",yt,[p(C,{size:"icon",variant:"muted-textonly",class:"rounded-full absolute top-2.5 right-2.5 z-10 h-8 w-8 p-0 text-white hover:bg-white/20","aria-label":l.$t("g.close"),onClick:E},{default:y(()=>d[3]||(d[3]=[e("i",{class:"pi pi-times"},null,-1)])),_:1},8,["aria-label"]),d[4]||(d[4]=e("div",{class:"relative col-span-2 flex items-center justify-center overflow-hidden rounded-sm"},[e("video",{autoplay:"",loop:"",muted:"",playsinline:"",class:"h-full min-w-[125%] object-cover p-0",style:{"margin-left":"-20%"}},[e("source",{src:ue,type:"video/webm"})])],-1)),e("div",vt,[e("div",null,[e("div",ht,[e("div",wt,[e("div",kt,t(l.$t("subscription.required.title")),1),p(de,{"reverse-order":"","no-padding":"","background-color":"var(--p-dialog-background)","use-subscription":""})]),e("div",$t,[e("span",Ct,t(n(M)),1),e("span",Lt,t(l.$t("subscription.perMonth")),1)])]),p(ut,{class:"mt-6 text-muted"})]),e("div",Pt,[p(ee,{class:"py-2 px-4 rounded-lg",pt:{root:{style:"background: var(--color-accent-blue, #0B8CE9);"},label:{class:"font-inter font-[700] text-sm"}},onSubscribed:$})])])]))}}),Jt=Y(Tt,[["__scopeId","data-v-80c6bb1c"]]);export{Jt as default};
//# sourceMappingURL=SubscriptionRequiredDialogContent-DtxMOWxy.js.map
