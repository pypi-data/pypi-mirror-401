var V=Object.defineProperty;var a=(f,u)=>V(f,"name",{value:u,configurable:!0});import{s as w,b as I}from"./vendor-vue-DNQSPQQ2.js";import{J as T,ag as P}from"./vendor-primevue-Cif--Rbw.js";import{cu as S,e as z,d as k,q as E,H as W,r as j,A,_ as F}from"./index-Bc79VbnU.js";import{g as H}from"./GraphView-Dwrm8D3J.js";import{a2 as B,E as s,h as D,l as b,c as C,d as c,z as q,a8 as p,bV as K,j as y,k as _,q as L,A as R,s as g,u as G,e as J}from"./vendor-other-Dsj-QuOx.js";import"./vendor-reka-ui-WjwjFuZo.js";import"./vendor-xterm-CWYFmgbN.js";import"./vendor-three-ByuY8CdW.js";import"./vendor-tiptap-YMjM2h-Z.js";import"./UserAvatar.vue_vue_type_script_setup_true_lang-BvnQQTOP.js";import"./LazyImage.vue_vue_type_script_setup_true_lang-CX9YtPlM.js";import"./index-BBvP0bLh.js";import"./keybindingService-DOwK-S5D.js";import"./serverConfigStore-BJQLZ9Iv.js";import"./WidgetInputNumber.vue_vue_type_script_setup_true_lang-CdvBpGed.js";import"./widgetPropFilter-CygYoMQt.js";import"./WidgetLayoutField.vue_vue_type_script_setup_true_lang-CYDaxuge.js";import"./WidgetWithControl.vue_vue_type_script_setup_true_lang-B5RYQ41H.js";const O=["aria-label"],U=1,X=B({__name:"BatchCountEdit",setup(f){const u=S(),{batchCount:t}=w(u),v=z(),m=s(()=>v.get("Comfy.QueueButton.BatchCountLimit")),r=a(e=>{let o;if(e){const n=t.value-1;o=Math.min(n*2,m.value)}else{const n=t.value+1;o=Math.floor(n/2)}t.value=o},"handleClick");return(e,o)=>{const n=D("tooltip");return b((c(),C("div",{class:"batch-count","aria-label":e.$t("menu.batchCount")},[q(p(T),{modelValue:p(t),"onUpdate:modelValue":o[0]||(o[0]=h=>K(t)?t.value=h:null),class:"w-14",min:U,max:m.value,fluid:"","show-buttons":"",pt:{incrementButton:{class:"w-6",onmousedown:a(()=>{r(!0)},"onmousedown")},decrementButton:{class:"w-6",onmousedown:a(()=>{r(!1)},"onmousedown")}}},null,8,["modelValue","max","pt"])],8,O)),[[n,{value:e.$t("menu.batchCount"),showDelay:600},void 0,{bottom:!0}]])}}}),Y=k(X,[["__scopeId","data-v-19217ad4"]]),Z={class:"queue-button-group flex"},ee=B({__name:"ComfyQueueButton",setup(f){const u=E(),{mode:t,batchCount:v}=w(S()),m=W(),r=s(()=>H(j.rootGraph,m.nodeDefsByName)),{t:e}=I(),o=s(()=>{const i={disabled:{key:"disabled",label:e("menu.run"),tooltip:e("menu.disabledTooltip"),command:a(()=>{t.value="disabled"},"command")},change:{key:"change",label:`${e("menu.run")} (${e("menu.onChange")})`,tooltip:e("menu.onChangeTooltip"),command:a(()=>{t.value="change"},"command")}};return i.instant={key:"instant",label:`${e("menu.run")} (${e("menu.instant")})`,tooltip:e("menu.instantTooltip"),command:a(()=>{t.value="instant"},"command")},i}),n=s(()=>o.value[t.value]||o.value.disabled),h=s(()=>Object.values(o.value)),M=s(()=>r.value?"icon-[lucide--triangle-alert]":u.shiftDown?"icon-[lucide--list-start]":t.value==="disabled"?"icon-[lucide--play]":t.value==="instant"?"icon-[lucide--fast-forward]":t.value==="change"?"icon-[lucide--step-forward]":"icon-[lucide--play]"),$=s(()=>r.value?e("menu.runWorkflowDisabled"):u.shiftDown?e("menu.runWorkflowFront"):e("menu.runWorkflow")),x=A(),Q=a(async i=>{const d="shiftKey"in i&&i.shiftKey?"Comfy.QueuePromptFront":"Comfy.QueuePrompt";v.value>1,await x.execute(d,{metadata:{subscribe_to_run:!1,trigger_source:"button"}})},"queuePrompt");return(i,N)=>{const d=D("tooltip");return c(),C("div",Z,[b((c(),y(p(P),{class:"comfyui-queue-button",label:String(n.value?.label??""),severity:"primary",size:"small",model:h.value,"data-testid":"queue-button",onClick:Q},{icon:_(()=>[J("i",{class:g(M.value)},null,2)]),item:_(({item:l})=>[b((c(),y(F,{variant:l.key===p(t)?"primary":"secondary",size:"sm",class:"w-full justify-start"},{default:_(()=>[l.icon?(c(),C("i",{key:0,class:g(l.icon)},null,2)):L("",!0),R(" "+G(String(l.label??"")),1)]),_:2},1032,["variant"])),[[d,{value:l.tooltip,showDelay:600}]])]),_:1},8,["label","model"])),[[d,{value:$.value,showDelay:600},void 0,{bottom:!0}]]),q(Y)])}}}),ye=k(ee,[["__scopeId","data-v-214102f7"]]);export{ye as default};
//# sourceMappingURL=ComfyQueueButton-DriR7JtM.js.map
