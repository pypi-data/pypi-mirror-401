"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .language_code import LanguageCode
from .mode import Mode
from agentset.types import BaseModel, UNSET_SENTINEL
import pydantic
from pydantic import model_serializer
from typing import Dict, List, Literal, Optional, Union
from typing_extensions import Annotated, NotRequired, TypeAliasType, TypedDict


IngestJobConfigOutputMetadataTypedDict = TypeAliasType(
    "IngestJobConfigOutputMetadataTypedDict", Union[str, float, bool, List[str]]
)


IngestJobConfigOutputMetadata = TypeAliasType(
    "IngestJobConfigOutputMetadata", Union[str, float, bool, List[str]]
)


IngestJobConfigOutputChunkingStrategy = Literal[
    "basic",
    "by_title",
]
r"""[Deprecated] The legacy chunking strategy. This option is ignored by the current partition pipeline and kept only for backwards compatibility."""


IngestJobConfigOutputStrategy = Literal[
    "auto",
    "fast",
    "hi_res",
    "ocr_only",
]
r"""[Deprecated] Legacy processing strategy used by the previous partition API. This option is ignored by the current pipeline and kept only for backwards compatibility."""


class IngestJobConfigOutputTypedDict(TypedDict):
    r"""The ingest job config."""

    chunk_size: NotRequired[int]
    r"""Chunk size (in characters). Controls approximately how much text is included in each chunk. Defaults to `2048`."""
    delimiter: NotRequired[str]
    r"""Delimiter to use for separating text before chunking."""
    metadata: NotRequired[Dict[str, IngestJobConfigOutputMetadataTypedDict]]
    r"""Custom metadata to be added to the ingested documents. It cannot contain nested objects; only string, number, boolean, and array of strings are allowed."""
    language_code: NotRequired[LanguageCode]
    mode: NotRequired[Mode]
    r"""Processing mode for the parser. `fast` favors speed, `accurate` (pro subscription only) favors quality and layout fidelity, and `balanced` offers a compromise between the two. Defaults to `balanced`."""
    disable_image_extraction: NotRequired[bool]
    r"""Disable image extraction from the document. When combined with `useLlm`, images may still be automatically captioned by the partition API. Defaults to `false`."""
    disable_image_captions: NotRequired[bool]
    r"""Disable synthetic image captions/descriptions in output. Images will be rendered as plain img tags without alt text. Defaults to `false`."""
    chart_understanding: NotRequired[bool]
    r"""Enable chart understanding. This will extract the data from the charts in the document. Defaults to `false`."""
    keep_pageheader_in_output: NotRequired[bool]
    r"""Keep the page header in the output. Defaults to `false`."""
    keep_pagefooter_in_output: NotRequired[bool]
    r"""Keep the page footer in the output. Defaults to `false`."""
    force_ocr: NotRequired[bool]
    r"""Force OCR on the document even if selectable text exists. Useful for scanned documents with unreliable embedded text. Defaults to `false`."""
    disable_ocr_math: NotRequired[bool]
    r"""Disable inline math recognition in OCR. This can be useful if the document contains content that is frequently misclassified as math. Defaults to `false`."""
    use_llm: NotRequired[bool]
    r"""Enable LLM-assisted parsing to improve tables, forms, inline math, and layout detection. May increase latency and token usage. Defaults to `true`."""
    chunk_overlap: NotRequired[float]
    r"""[Deprecated] Custom chunk overlap (in characters) between consecutive chunks. Helps preserve context across chunk boundaries."""
    max_chunk_size: NotRequired[float]
    r"""[Deprecated] Hard chunk size. This option is ignored by the current partition pipeline and kept only for backwards compatibility."""
    chunking_strategy: NotRequired[IngestJobConfigOutputChunkingStrategy]
    r"""[Deprecated] The legacy chunking strategy. This option is ignored by the current partition pipeline and kept only for backwards compatibility."""
    strategy: NotRequired[IngestJobConfigOutputStrategy]
    r"""[Deprecated] Legacy processing strategy used by the previous partition API. This option is ignored by the current pipeline and kept only for backwards compatibility."""


class IngestJobConfigOutput(BaseModel):
    r"""The ingest job config."""

    chunk_size: Annotated[Optional[int], pydantic.Field(alias="chunkSize")] = None
    r"""Chunk size (in characters). Controls approximately how much text is included in each chunk. Defaults to `2048`."""

    delimiter: Optional[str] = None
    r"""Delimiter to use for separating text before chunking."""

    metadata: Optional[Dict[str, IngestJobConfigOutputMetadata]] = None
    r"""Custom metadata to be added to the ingested documents. It cannot contain nested objects; only string, number, boolean, and array of strings are allowed."""

    language_code: Annotated[
        Optional[LanguageCode], pydantic.Field(alias="languageCode")
    ] = None

    mode: Optional[Mode] = None
    r"""Processing mode for the parser. `fast` favors speed, `accurate` (pro subscription only) favors quality and layout fidelity, and `balanced` offers a compromise between the two. Defaults to `balanced`."""

    disable_image_extraction: Annotated[
        Optional[bool], pydantic.Field(alias="disableImageExtraction")
    ] = None
    r"""Disable image extraction from the document. When combined with `useLlm`, images may still be automatically captioned by the partition API. Defaults to `false`."""

    disable_image_captions: Annotated[
        Optional[bool], pydantic.Field(alias="disableImageCaptions")
    ] = None
    r"""Disable synthetic image captions/descriptions in output. Images will be rendered as plain img tags without alt text. Defaults to `false`."""

    chart_understanding: Annotated[
        Optional[bool], pydantic.Field(alias="chartUnderstanding")
    ] = None
    r"""Enable chart understanding. This will extract the data from the charts in the document. Defaults to `false`."""

    keep_pageheader_in_output: Annotated[
        Optional[bool], pydantic.Field(alias="keepPageheaderInOutput")
    ] = None
    r"""Keep the page header in the output. Defaults to `false`."""

    keep_pagefooter_in_output: Annotated[
        Optional[bool], pydantic.Field(alias="keepPagefooterInOutput")
    ] = None
    r"""Keep the page footer in the output. Defaults to `false`."""

    force_ocr: Annotated[
        Optional[bool],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option..",
            alias="forceOcr",
        ),
    ] = None
    r"""Force OCR on the document even if selectable text exists. Useful for scanned documents with unreliable embedded text. Defaults to `false`."""

    disable_ocr_math: Annotated[
        Optional[bool],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option..",
            alias="disableOcrMath",
        ),
    ] = None
    r"""Disable inline math recognition in OCR. This can be useful if the document contains content that is frequently misclassified as math. Defaults to `false`."""

    use_llm: Annotated[
        Optional[bool],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option. Use `mode` instead..",
            alias="useLlm",
        ),
    ] = None
    r"""Enable LLM-assisted parsing to improve tables, forms, inline math, and layout detection. May increase latency and token usage. Defaults to `true`."""

    chunk_overlap: Annotated[
        Optional[float],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option. Use `chunkSize` instead..",
            alias="chunkOverlap",
        ),
    ] = None
    r"""[Deprecated] Custom chunk overlap (in characters) between consecutive chunks. Helps preserve context across chunk boundaries."""

    max_chunk_size: Annotated[
        Optional[float],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option. Use `chunkSize` instead..",
            alias="maxChunkSize",
        ),
    ] = None
    r"""[Deprecated] Hard chunk size. This option is ignored by the current partition pipeline and kept only for backwards compatibility."""

    chunking_strategy: Annotated[
        Optional[IngestJobConfigOutputChunkingStrategy],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option..",
            alias="chunkingStrategy",
        ),
    ] = None
    r"""[Deprecated] The legacy chunking strategy. This option is ignored by the current partition pipeline and kept only for backwards compatibility."""

    strategy: Annotated[
        Optional[IngestJobConfigOutputStrategy],
        pydantic.Field(
            deprecated="warning: ** DEPRECATED ** - We no longer support this option. Use `mode` instead.."
        ),
    ] = None
    r"""[Deprecated] Legacy processing strategy used by the previous partition API. This option is ignored by the current pipeline and kept only for backwards compatibility."""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "chunkSize",
                "delimiter",
                "metadata",
                "languageCode",
                "mode",
                "disableImageExtraction",
                "disableImageCaptions",
                "chartUnderstanding",
                "keepPageheaderInOutput",
                "keepPagefooterInOutput",
                "forceOcr",
                "disableOcrMath",
                "useLlm",
                "chunkOverlap",
                "maxChunkSize",
                "chunkingStrategy",
                "strategy",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
