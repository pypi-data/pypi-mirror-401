# bclearer Pipeline Development Kit (PDK)

The bCLEARer Pipeline Development Kit (PDK) bundles the libraries, scaffolding tools, and reference assets used to build semantic data pipelines on the bCLEARer platform. It delivers the core building blocks for configuration, data interoperability, orchestration, and ontology modelling so you can go from a pipeline blueprint to a running implementation quickly.

## Highlights

- Generate complete pipeline skeletons with the `bclearer-pipeline-builder` CLI (interactive authoring, JSON-driven creation, structural updates, and template extraction).
- Connect to the ecosystems your pipelines touch: CSV/Excel/JSON, Delta Lake, PySpark, HDF5, MongoDB, MS Access, PostgreSQL, SQL Server, Neo4j, CozoDB, Raphtory, Enterprise Architect, and more.
- Operate pipelines confidently with orchestration helpers covering app lifecycle management, UUID/identity services, logging, reporting, static analysis, version-control utilities, and unit-of-measure management.
- Model your universe with the BNOP ontology module—our BORO Native Objects implementation featuring factories, relationship management, and XML migrations.

## Workspace Packages

| Package | Path | Highlights |
| --- | --- | --- |
| `bclearer-core` | `libraries/core` | Configuration managers, canonical identifiers (CKIDs), pipeline stage definitions, and the pipeline builder engine + CLI. |
| `bclearer-interop-services` | `libraries/interop_services` | Data I/O adapters and transformations spanning DataFrames, parquet/delta, document stores, graph backends (Neo4j, Raphtory, CozoDB), RDBMS connectors, EA integrations, and session orchestration. |
| `bclearer-orchestration-services` | `libraries/orchestration_services` | Application runner wrappers, logging and reporting helpers, UUID generation, static code analysis, string/unicode tooling, unit-of-measure libraries, and version-control services. |
| `bnop` | `libraries/ontology` | BORO Native Objects (Python) ontology runtime with factories, facades, migrations, and serializers used across bCLEARer pipelines. |

## Repository Layout

- `pipelines/` – reference pipelines generated by the builder (template domain, BOSON, CFI, Uniclass).
- `documentation/` – architecture notes and feature blueprints (pipeline framework, Neo4j, Raphtory, universe designer, RDF/Jena, and more).
- `docker/` – container recipes for running services locally.
- `release_management/` – scripts supporting builds and releases.
- `ui/` – the React-based tooling used to drive pipeline authoring experiences.

## Getting Started

Requires Python 3.12+.

### Install the workspace (recommended)

```bash
pip install uv
uv sync
source .venv/bin/activate
```

`uv sync` installs all workspace members (`bclearer-core`, `bclearer-interop-services`, `bclearer-orchestration-services`, `bnop`) in editable mode.

### Alternative: standard pip

```bash
python -m venv .venv
source .venv/bin/activate
pip install -e .
```

Install individual packages from PyPI if you only need a subset, for example `pip install bclearer-core`.

## Pipeline builder CLI

The pipeline builder turns JSON (or interactive prompts) into a fully structured bCLEARer pipeline: domains, pipelines, thin slices, stages, sub-stages, orchestrators, and b-units.

```bash
# Generate a sample configuration file
bclearer-pipeline-builder sample --output pipeline_config.json

# Create a pipeline in the current directory
bclearer-pipeline-builder create --config pipeline_config.json --output ./pipelines

# Update an existing pipeline from configuration
bclearer-pipeline-builder update --config pipeline_config.json --pipeline ./pipelines/example_domain

# Extract templates from a curated pipeline
bclearer-pipeline-builder update-templates --template-path pipelines/template_pipeline
```

Run `bclearer-pipeline-builder help` or `python -m bclearer_core.pipeline_builder help` for the full command reference. The generated pipelines follow the [bCLEARer pipeline framework](documentation/bclearer_pipeline_framework.md).

## Working with the libraries

### Data interchange

```python
from bclearer_interop_services.b_dictionary_service.table_as_dictionary_service import (
    TableAsDictionaryFromCsvFileReader,
    TableAsDictionaryToDataFrameConverter,
)

reader = TableAsDictionaryFromCsvFileReader()
table_dict = reader.read("data/example.csv")

converter = TableAsDictionaryToDataFrameConverter()
dataframe = converter.convert(table_dict)
```

Beyond CSV and DataFrames you will find adapters for Excel, JSON, XML, HDF5, Parquet/Delta Lake, PySpark sessions, MongoDB, MS Access, PostgreSQL, SQL Server, CozoDB, Neo4j, Raphtory, Enterprise Architect, filesystem snapshots, and more.

### Ontology modelling

```python
from bnop.bnop_facades import BnopFacades
from bclearer_orchestration_services.identification_services.uuid_service.uuid_helpers.uuid_factory import (
    create_new_uuid,
)

repository_uuid = create_new_uuid()

product_type = BnopFacades.create_new_bnop_type(repository_uuid)
product = BnopFacades.create_bnop_object(
    object_uuid=create_new_uuid(),
    owning_repository_uuid=repository_uuid,
    presentation_name="Example Product",
)

BnopFacades.write_bnop_object_to_xml("bnop_snapshot.xml")
```

Use CKIDs from `bclearer_core.ckids` to classify tuples and relationships when you need richer BORO semantics.

### Orchestration helpers

```python
from bclearer_orchestration_services.b_app_runner_service.b_application_runner import run_b_application

def bootstrap():
    print("hello bCLEARer")

run_b_application(bootstrap)
```

Complement this with utilities from `identification_services`, `log_environment_utility_service`, `static_code_analysis_service`, and `version_control_services` to manage runtime behaviour and governance.

## Testing & quality gates

```bash
pytest                     # run the complete suite
pytest -m "not heavy"      # skip connectors that rely on external services
ruff check                 # lint
black .                    # format
```

Most tests live under `libraries/*/tests`. Heavy tests target databases or graph backends and are opt-in via the `heavy` marker.

## Documentation & next steps

- Architecture overview: `documentation/bclearer_pipeline_framework.md`
- Feature workstreams: `documentation/features/`
- UI tooling walkthroughs: `documentation/ui/`

## Contributing

1. Fork the repository and create a feature branch.
2. Sync dependencies (`uv sync` or `pip install -e .`).
3. Add tests where sensible and run the quality gates.
4. Submit a pull request with context on the change.

We welcome issues and ideas—open a discussion in GitHub or drop us a line.

## License

MIT License. See [`LICENSE`](LICENSE).

## Contact

Mesbah Khan — khanm@ontoledgy.io
