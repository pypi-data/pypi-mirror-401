[package]
name = "rust_ephem"
version = "0.3.1"
edition = "2021"
license = "Apache-2.0"
readme = "README.md"

[features]
default = ["ut1"]
# UT1 support requires OpenSSL which may not be available on all platforms
ut1 = ["hifitime"]

[dependencies]
ndarray = "0.15"
sgp4 = "2.3"                 # pure-Rust SGP4 propagation & TLE parsing. See docs.rs.
chrono = { version = "0.4", features = ["serde"] }  # used by sgp4
# Optionally for TEME->GCRS transforms in Rust:
erfa = "0.2"                 # pure-Rust ERFA (SOFA) routines (time & transforms)
sofars = "0.2"               # pure-Rust SOFA routines
numpy = "0.26.0"
pyo3-ffi = "0.26.0"
pyo3 = { version = "0.26", features = ["extension-module"] }
# SPICE/ANISE for SPICE kernel ephemeris
anise = { version = "0.7.0", default-features = false }
hifitime = { version = "4.2", features = ["std", "ut1"], optional = true }  # high-precision time with UT1 support
# If you prefer SOFA direct bindings instead, you can use sofa-sys / rsofa etc.
once_cell = "1"
# Use rustls for TLS (pure Rust, no OpenSSL needed for cross-compilation)
ureq = { version = "3", features = ["json", "cookies", "rustls"], default-features = false }
md5 = "0.7"
dotenvy = "0.15"  # .env file support for credentials
# Serialization for constraint configuration
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
dirs = "6.0.0"
url = "2"


[build-dependencies]
# none required for basic build; use maturin to build wheels

[profile.release]
opt-level = 3           # Maximum optimization level
lto = "thin"            # Enable link-time optimization (thin for faster builds)
codegen-units = 1       # Better optimization at the cost of slower compile times
strip = true            # Strip symbols for smaller binary size
panic = "abort"         # Reduce binary size and improve performance by removing panic unwinding

# Enable native CPU features for better performance
# This allows the compiler to use SIMD instructions specific to the target CPU
[profile.release.package."*"]
opt-level = 3
