# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API obsidian-kb

**–í–µ—Ä—Å–∏—è:** 1.0.0
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2026-01-07
**–°—Ö–µ–º–∞ –ë–î:** v4 (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å —á–µ—Ç—ã—Ä—å–º—è —Ç–∞–±–ª–∏—Ü–∞–º–∏)
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Adaptive Search v5 (—Ç—Ä—ë—Ö—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞) + Multi-Provider Support + Hybrid Indexing Pipeline + Background Jobs + Adaptive Rate Limiting

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [CLI API](#cli-api)
3. [MCP API](#mcp-api)
4. [–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API (v5)](#–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π-api-v5)
5. [–§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞](#—Ñ–∏–ª—å—Ç—Ä—ã-–ø–æ–∏—Å–∫–∞)
6. [–§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö](#—Ñ–æ—Ä–º–∞—Ç—ã-–¥–∞–Ω–Ω—ã—Ö)
7. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
8. [–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö](#–º–∏–≥—Ä–∞—Ü–∏—è-–¥–∞–Ω–Ω—ã—Ö)

---

## –û–±–∑–æ—Ä

obsidian-kb –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã:

1. **CLI** ‚Äî –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
2. **MCP (Model Context Protocol)** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–∞–º–∏ (Claude Desktop, Cursor)

–û–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

---

## CLI API

### –ö–æ–º–∞–Ω–¥—ã –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è

#### `index-all`

–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ vault'—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```bash
obsidian-kb index-all [--max-workers N]
```

**–û–ø—Ü–∏–∏:**
- `--max-workers N` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫)

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb index-all
obsidian-kb index-all --max-workers 10
```

#### `index`

–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π vault.

```bash
obsidian-kb index --vault <name> --path <path> [--max-workers N]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--path <path>` ‚Äî –ø—É—Ç—å –∫ vault'—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--max-workers N` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb index --vault "my-vault" --path "/path/to/vault"
```

#### `reindex`

–ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å vault –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```bash
obsidian-kb reindex --vault <name> [--force] [--max-workers N]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--force` ‚Äî –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- `--max-workers N` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb reindex --vault "my-vault"
obsidian-kb reindex --vault "my-vault" --force
```

#### `watch`

–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

```bash
obsidian-kb watch [--vault <name>] [--debounce <seconds>]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ vault'—ã)
- `--debounce <seconds>` ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2.0)

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb watch
obsidian-kb watch --vault "my-vault" --debounce 3.0
```

### –ö–æ–º–∞–Ω–¥—ã –ø–æ–∏—Å–∫–∞

#### `search`

–ü–æ–∏—Å–∫ –≤ vault'–µ.

```bash
obsidian-kb search --vault <name> --query "<query>" [--limit N] [--type <type>] [--export <path>] [--format <format>]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--query "<query>"` ‚Äî –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--limit N` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `--type <type>` ‚Äî —Ç–∏–ø –ø–æ–∏—Å–∫–∞: `vector`, `fts`, `hybrid` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `hybrid`)
- `--export <path>` ‚Äî –ø—É—Ç—å –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `--format <format>` ‚Äî —Ñ–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞: `json`, `markdown`, `csv` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `json`)

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
obsidian-kb search --vault "my-vault" --query "Python async"

# –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
obsidian-kb search --vault "my-vault" --query "Python tags:python created:>2024-01-01"

# –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
obsidian-kb search --vault "my-vault" --query "Python" --export results.json --format json
```

### –ö–æ–º–∞–Ω–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### `doctor`

–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã.

```bash
obsidian-kb doctor [--json] [--check <component>]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--json` ‚Äî –≤—ã–≤–æ–¥ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- `--check <component>` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: `ollama`, `lancedb`, `vaults`, `disk`

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
obsidian-kb doctor
obsidian-kb doctor --json
obsidian-kb doctor --check ollama
```

#### `stats`

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ vault'–∞.

```bash
obsidian-kb stats --vault <name>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb stats --vault "my-vault"
```

#### `metrics`

–ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

```bash
obsidian-kb metrics [--days N] [--export <path>] [--format <format>]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--days N` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)
- `--export <path>` ‚Äî –ø—É—Ç—å –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –º–µ—Ç—Ä–∏–∫
- `--format <format>` ‚Äî —Ñ–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞: `json`, `csv`

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
obsidian-kb metrics
obsidian-kb metrics --days 30
obsidian-kb metrics --export metrics.json --format json
```

#### `index-coverage`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∏–Ω–¥–µ–∫—Å–∞.

```bash
obsidian-kb index-coverage --vault <name> [--json]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--json` ‚Äî –≤—ã–≤–æ–¥ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb index-coverage --vault "my-vault"
```

#### `check-metrics`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∏ –º–µ—Ç—Ä–∏–∫.

```bash
obsidian-kb check-metrics [--days N] [--json]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--days N` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `--json` ‚Äî –≤—ã–≤–æ–¥ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb check-metrics --days 7
```

#### `check-index`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏.

```bash
obsidian-kb check-index --vault <name> [--json]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--vault <name>` ‚Äî –∏–º—è vault'–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--json` ‚Äî –≤—ã–≤–æ–¥ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb check-index --vault "my-vault"
```

### –ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### `config add-vault`

–î–æ–±–∞–≤–∏—Ç—å vault –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

```bash
obsidian-kb config add-vault --path <path> [--name <name>]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--path <path>` ‚Äî –ø—É—Ç—å –∫ vault'—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--name <name>` ‚Äî –∏–º—è vault'–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ü—Ä–∏–º–µ—Ä:**
```bash
obsidian-kb config add-vault --path "/path/to/vault" --name "my-vault"
```

#### `config list-vaults`

–°–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö vault'–æ–≤.

```bash
obsidian-kb config list-vaults
```

---

## MCP API

MCP API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å obsidian-kb —á–µ—Ä–µ–∑ Model Context Protocol. –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Claude Desktop, Cursor –∏ –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–∞—Ö, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö MCP.

### –ü–æ–∏—Å–∫

#### `search_vault`

–ü–æ–∏—Å–∫ –≤ –æ–¥–Ω–æ–º vault'–µ.

```python
search_vault(
    vault_name: str,
    query: str,
    limit: int = 10,
    search_type: str = "hybrid"
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `query` ‚Äî –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `limit` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `search_type` ‚Äî —Ç–∏–ø –ø–æ–∏—Å–∫–∞: `vector`, `fts`, `hybrid` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `hybrid`)

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
search_vault("my-vault", "Python async programming")

# –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
search_vault("my-vault", "Python tags:python created:>2024-01-01", limit=5)

# –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
search_vault("my-vault", "Python", search_type="vector")
```

#### `search_multi_vault`

–ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º vault'–∞–º.

```python
search_multi_vault(
    vault_names: list[str],
    query: str,
    limit: int = 10,
    search_type: str = "hybrid"
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_names` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω vault'–æ–≤
- `query` ‚Äî –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `limit` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ vault
- `search_type` ‚Äî —Ç–∏–ø –ø–æ–∏—Å–∫–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
search_multi_vault(["vault1", "vault2"], "Python async")
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π (Phase 4)

#### `index_documents` ‚ú® –ù–æ–≤–æ–µ

–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ vault —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±–æ–≥–∞—â–µ–Ω–∏—è.

```python
index_documents(
    vault_name: str,
    paths: list[str] | None = None,
    force: bool = False,
    enrichment: str = "contextual",  # none | contextual | full
    background: bool = True
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `paths` ‚Äî —Å–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (None = –≤—Å–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ)
- `force` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–∂–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `enrichment` ‚Äî —É—Ä–æ–≤–µ–Ω—å –æ–±–æ–≥–∞—â–µ–Ω–∏—è (none, contextual, full)
- `background` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ (True) –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (False)

**–ü—Ä–∏–º–µ—Ä:**
```python
# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
index_documents("my-vault")

# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
index_documents("my-vault", paths=["file1.md", "file2.md"], force=True)

# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –ø–æ–ª–Ω—ã–º –æ–±–æ–≥–∞—â–µ–Ω–∏–µ–º
index_documents("my-vault", enrichment="full", background=False)
```

#### `reindex_vault` ‚ú® –û–±–Ω–æ–≤–ª–µ–Ω–æ

–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è vault'–∞. ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (`confirm=True`).

```python
reindex_vault(
    vault_name: str,
    confirm: bool = False,
    enrichment: str = "contextual"
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `confirm` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ True –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- `enrichment` ‚Äî —É—Ä–æ–≤–µ–Ω—å –æ–±–æ–≥–∞—â–µ–Ω–∏—è (none, contextual, full)

**–ü—Ä–∏–º–µ—Ä:**
```python
reindex_vault("my-vault", confirm=True, enrichment="full")
```

#### `index_status` ‚ú® –ù–æ–≤–æ–µ

–°—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è vault'–∞ –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏.

```python
index_status(
    vault_name: str | None = None,
    job_id: str | None = None
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞ (–¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á)
- `job_id` ‚Äî ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏

**–ü—Ä–∏–º–µ—Ä:**
```python
# –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è vault'–∞
index_status(vault_name="my-vault")

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞
index_status(job_id="job_123")
```

#### `preview_chunks` ‚ú® –ù–æ–≤–æ–µ

–ü—Ä–µ–≤—å—é —Ä–∞–∑–±–∏–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏ (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è).

```python
preview_chunks(
    vault_name: str,
    file_path: str,
    strategy: str = "auto"  # auto | headers | semantic | fixed
) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
preview_chunks("my-vault", "documentation.md", strategy="auto")
```

#### `enrich_document` ‚ú® –ù–æ–≤–æ–µ

–û–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

```python
enrich_document(
    vault_name: str,
    file_path: str,
    enrichment_type: str = "all"  # context | summary | all
) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
enrich_document("my-vault", "important-doc.md", enrichment_type="all")
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (Phase 5) ‚ú® –ù–æ–≤–æ–µ

#### `list_providers`

–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö LLM-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–º, –º–æ–¥–µ–ª—è–º–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é.

```python
list_providers() -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
list_providers()
```

#### `set_provider`

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π.

```python
set_provider(
    provider_name: str,
    provider_type: str = "both",  # embedding | chat | both
    vault_name: str | None = None,
    model: str | None = None
) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ embedding –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
set_provider("yandex", provider_type="embedding")

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ vault'–∞
set_provider("ollama", provider_type="both", vault_name="my-vault")
```

#### `test_provider`

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

```python
test_provider(provider_name: str) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
test_provider("ollama")
```

#### `provider_health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

```python
provider_health() -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
provider_health()
```

#### `estimate_cost`

–û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π.

```python
estimate_cost(
    operation: str,  # reindex | index_new | enrich
    vault_name: str | None = None,
    provider: str | None = None
) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
estimate_cost("reindex", vault_name="my-vault", provider="yandex")
```

### –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ (Phase 5) ‚ú® –ù–æ–≤–æ–µ

#### `index_coverage`

–ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –∏–Ω–¥–µ–∫—Å–∞.

```python
index_coverage(vault_name: str) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
index_coverage("my-vault")
```

#### `test_retrieval`

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ retrieval.

```python
test_retrieval(
    vault_name: str,
    queries: list[str],
    expected_docs: dict[str, list[str]] | None = None
) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
test_retrieval(
    "my-vault",
    queries=["Python async", "–∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio"],
    expected_docs={"Python async": ["python-guide.md"]}
)
```

#### `audit_index`

–ê—É–¥–∏—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏–Ω–¥–µ–∫—Å–∞.

```python
audit_index(vault_name: str) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
audit_index("my-vault")
```

#### `cost_report`

–û—Ç—á—ë—Ç –æ –∑–∞—Ç—Ä–∞—Ç–∞—Ö –Ω–∞ LLM.

```python
cost_report(
    days: int = 7,
    vault_name: str | None = None
) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
cost_report(days=30, vault_name="my-vault")
```

#### `performance_report`

–û—Ç—á—ë—Ç –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

```python
performance_report(days: int = 7) -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
performance_report(days=7)
```

#### `delete_vault`

–£–¥–∞–ª–∏—Ç—å vault –∏–∑ –∏–Ω–¥–µ–∫—Å–∞.

```python
delete_vault(vault_name: str) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
delete_vault("old-vault")
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ vault'–∞—Ö

#### `list_vaults`

–°–ø–∏—Å–æ–∫ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö vault'–æ–≤.

```python
list_vaults() -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
list_vaults()
```

#### `vault_stats`

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ vault'–∞.

```python
vault_stats(vault_name: str) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
vault_stats("my-vault")
```

#### `list_tags`

–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ–≥–æ–≤ –≤ vault'–µ.

```python
list_tags(vault_name: str, limit: int = 100) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `limit` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–≥–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```python
list_tags("my-vault", limit=50)
```

#### `list_doc_types`

–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ vault'–µ.

```python
list_doc_types(vault_name: str) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
list_doc_types("my-vault")
```

#### `list_links`

–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö wikilinks –≤ vault'–µ.

```python
list_links(vault_name: str, limit: int = 100) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `limit` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Å—ã–ª–æ–∫

**–ü—Ä–∏–º–µ—Ä:**
```python
list_links("my-vault", limit=50)
```

### Extended Query API (v6) - FrontmatterAPI

–ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏.

#### `get_frontmatter`

–ü–æ–ª—É—á–∏—Ç—å frontmatter –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

```python
get_frontmatter(vault_name: str, file_path: str) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `file_path` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç –∫–æ—Ä–Ω—è vault)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- YAML frontmatter —Ñ–∞–π–ª–∞ –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

**–ü—Ä–∏–º–µ—Ä:**
```python
get_frontmatter("naumen-cto", "People/–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤.md")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## Frontmatter: People/–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤.md

```yaml
type: person
name: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
role: developer
team: backend
```
```

#### `get_vault_schema`

–ü–æ–ª—É—á–∏—Ç—å —Å—Ö–µ–º—É frontmatter vault'–∞ ‚Äî –≤—Å–µ –ø–æ–ª—è, –∏—Ö —Ç–∏–ø—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π.

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö vault'–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

```python
get_vault_schema(
    vault_name: str,
    doc_type: str | None = None,
    top_values: int = 10
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `doc_type` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ç–∏–ø–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `top_values` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–ª–µ–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
get_vault_schema("naumen-cto")  # –í—Å–µ –ø–æ–ª—è vault'–∞
get_vault_schema("naumen-cto", "person")  # –¢–æ–ª—å–∫–æ –¥–ª—è type:person
get_vault_schema("naumen-cto", "1-1", top_values=5)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## –°—Ö–µ–º–∞ vault: naumen-cto

**–í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 150

### –ü–æ–ª—è frontmatter

| –ü–æ–ª–µ | –¢–∏–ø | –î–æ–∫—É–º–µ–Ω—Ç–æ–≤ | –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö | –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π |
|------|-----|------------|------------|------------------|
| type | string | 150 | 5 | `person`, `task`, `meeting` ... (+2) |
| status | string | 80 | 3 | `done`, `in-progress`, `pending` |
| role | string | 45 | 8 | `developer`, `manager`, `cto` ... (+5) |

### –ß–∞—Å—Ç—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–ª–µ–π

- type + status
- role + team
```

#### `list_by_property`

–ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é —Å–≤–æ–π—Å—Ç–≤–∞ frontmatter.

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–∞—Ç—å –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é frontmatter, –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º (type, tags). –ï—Å–ª–∏ `property_value` –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —ç—Ç–∏–º –ø–æ–ª–µ–º.

```python
list_by_property(
    vault_name: str,
    property_key: str,
    property_value: str | None = None,
    limit: int = 50
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `property_key` ‚Äî –∏–º—è —Å–≤–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä "status", "role", "project", "priority")
- `property_value` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ (–µ—Å–ª–∏ None ‚Äî –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —ç—Ç–∏–º –ø–æ–ª–µ–º)
- `limit` ‚Äî –º–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–æ–º –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
list_by_property("vault", "status", "in-progress")  # –î–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º
list_by_property("vault", "role")  # –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –ø–æ–ª–µ–º role
list_by_property("vault", "priority", "high", limit=10)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## –î–æ–∫—É–º–µ–Ω—Ç—ã: status = in-progress

**–ù–∞–π–¥–µ–Ω–æ:** 15 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

- **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API**
  - –ü—É—Ç—å: `task1.md`
  - –ò–∑–º–µ–Ω—ë–Ω: 2024-03-01
- **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
  - –ü—É—Ç—å: `task2.md`
  - –ò–∑–º–µ–Ω—ë–Ω: 2024-03-15
```

#### `aggregate_by_property`

–ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ —Å–≤–æ–π—Å—Ç–≤—É ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ vault'—É: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º, —Ä–æ–ª—è–º –∏ —Ç.–¥.

```python
aggregate_by_property(
    vault_name: str,
    property_key: str,
    doc_type: str | None = None
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `property_key` ‚Äî –∏–º—è —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (status, priority, role, etc.)
- `doc_type` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ç–∏–ø–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- –¢–∞–±–ª–∏—Ü–∞: –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
aggregate_by_property("vault", "status")  # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
aggregate_by_property("vault", "priority", "task")  # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á
aggregate_by_property("vault", "role", "person")  # –†–æ–ª–∏ –ª—é–¥–µ–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## –ê–≥—Ä–µ–≥–∞—Ü–∏—è: status

**–í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 80

| –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | % |
|----------|------------|---|
| done | 50 | 62.5% |
| in-progress | 20 | 25.0% |
| pending | 10 | 12.5% |
```

### Extended Query API (v6) - Batch Operations ‚úÖ Phase 5

–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ vault'–∞–º–∏: —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ö–µ–º.

#### `export_to_csv`

–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö vault'–∞ –≤ CSV —Ñ–∞–π–ª.

```python
export_to_csv(
    vault_name: str,
    output_path: str | None = None,
    doc_type: str | None = None,
    fields: str | None = None,
    where: str | None = None
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `output_path` ‚Äî –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª)
- `doc_type` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `fields` ‚Äî –ø–æ–ª—è —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ ‚Äî –≤—Å–µ –ø–æ–ª—è)
- `where` ‚Äî —É—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (SQL-like WHERE clause)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- –ü—É—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É CSV —Ñ–∞–π–ª—É –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –ª—é–¥–µ–π
export_to_csv("vault", doc_type="person", fields="title,role,team")

# –≠–∫—Å–ø–æ—Ä—Ç —Å —Ñ–∏–ª—å—Ç—Ä–æ–º WHERE
export_to_csv("vault", where="status = active", fields="title,status,priority")

# –≠–∫—Å–ø–æ—Ä—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
export_to_csv("vault", output_path="/tmp/export.csv", doc_type="task")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö: vault

**CSV —Ñ–∞–π–ª:** `/tmp/export.csv`
**–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** person
**–ü–æ–ª—è:** title,role,team

–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É—Ç—å –≤—ã—à–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É.
```

#### `compare_schemas`

–°—Ä–∞–≤–Ω–∏—Ç—å —Å—Ö–µ–º—ã frontmatter –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö vault'–æ–≤.

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–µ –ø–æ–ª—è, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∏ —Ä–∞–∑–ª–∏—á–∏—è –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö.

```python
compare_schemas(vault_names: list[str]) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_names` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω vault'–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ö–µ–º –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ —Å –æ–±—â–∏–º–∏ –ø–æ–ª—è–º–∏, —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Ä–∞–∑–ª–∏—á–∏—è–º–∏ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö vault'–æ–≤
compare_schemas(["vault1", "vault2"])

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç—Ä—ë—Ö vault'–æ–≤
compare_schemas(["vault1", "vault2", "vault3"])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ö–µ–º vault'–æ–≤

**Vault'—ã:** vault1, vault2

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **vault1:** 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **vault2:** 50 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –û–±—â–∏–µ –ø–æ–ª—è (2)

- `type`
- `status`

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

**vault1:**
  - `role`

**vault2:**
  - `priority`

### –†–∞–∑–ª–∏—á–∏—è –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö –ø–æ–ª–µ–π

**`type`:**
  - vault1: person, task
  - vault2: task, meeting
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

#### `add_vault_to_config` ‚ú® –û–±–Ω–æ–≤–ª–µ–Ω–æ

–î–æ–±–∞–≤–∏—Ç—å vault –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –∞–≥–µ–Ω—Ç–∞.

```python
add_vault_to_config(
    vault_path: str,
    vault_name: str | None = None,
    auto_index: bool = True
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_path` ‚Äî –ø—É—Ç—å –∫ vault'—É
- `vault_name` ‚Äî –∏–º—è vault'–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `auto_index` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å vault –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True)

**–ü—Ä–∏–º–µ—Ä:**
```python
# –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π –≤ —Ñ–æ–Ω–µ
result = add_vault_to_config("/path/to/vault", "my-vault", auto_index=True)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

# –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
add_vault_to_config("/path/to/vault", "my-vault", auto_index=False)
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ `auto_index=True`, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ –∏ –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å ID –∑–∞–¥–∞—á–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `get_job_status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

#### `index_vault` ‚ú® –û–±–Ω–æ–≤–ª–µ–Ω–æ

–ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å vault (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å). –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –∞–≥–µ–Ω—Ç–∞.

```python
index_vault(
    vault_name: str,
    vault_path: str
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `vault_path` ‚Äî –ø—É—Ç—å –∫ vault'—É

**–ü—Ä–∏–º–µ—Ä:**
```python
result = index_vault("my-vault", "/path/to/vault")
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ –∏ –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å ID –∑–∞–¥–∞—á–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `get_job_status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

#### `get_job_status` ‚ú® –ù–æ–≤–æ–µ

–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏.

```python
get_job_status(
    job_id: str | None = None,
    vault_name: str | None = None
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `job_id` ‚Äî ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `vault_name` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ vault'—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏
status = get_job_status(job_id="a1b2c3d4-e5f6-7890-abcd-ef1234567890")

# –í—Å–µ –∑–∞–¥–∞—á–∏ –¥–ª—è vault'–∞
status = get_job_status(vault_name="my-vault")

# –í—Å–µ –∑–∞–¥–∞—á–∏
status = get_job_status()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```markdown
## –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏: a1b2c3d4-e5f6-7890-abcd-ef1234567890
- **Vault:** my-vault
- **–û–ø–µ—Ä–∞—Ü–∏—è:** index_vault
- **–°—Ç–∞—Ç—É—Å:** running
- **–ü—Ä–æ–≥—Ä–µ—Å—Å:** 45.2%
- **–°–æ–∑–¥–∞–Ω–∞:** 2026-01-XX 10:30:00
- **–ù–∞—á–∞—Ç–∞:** 2026-01-XX 10:30:01

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:** 23/51
- **–ß–∞–Ω–∫–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 156
```

#### `check_vault_in_config`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ vault –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```python
check_vault_in_config(
    vault_path: str | None = None,
    vault_name: str | None = None
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_path` ‚Äî –ø—É—Ç—å –∫ vault'—É (–æ–¥–∏–Ω –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- `vault_name` ‚Äî –∏–º—è vault'–∞ (–æ–¥–∏–Ω –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)

**–ü—Ä–∏–º–µ—Ä:**
```python
check_vault_in_config(vault_path="/path/to/vault")
check_vault_in_config(vault_name="my-vault")
```

#### `list_configured_vaults`

–°–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö vault'–æ–≤.

```python
list_configured_vaults() -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
list_configured_vaults()
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### `system_health`

–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã.

```python
system_health() -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
system_health()
```

#### `get_metrics`

–ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

```python
get_metrics(
    days: int = 7,
    limit: int = 20
) -> str
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `days` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- `limit` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–º–µ—Ä:**
```python
get_metrics(days=30, limit=50)
```

#### `search_help`

–°–ø—Ä–∞–≤–∫–∞ –ø–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –ø–æ–∏—Å–∫–∞.

```python
search_help() -> str
```

**–ü—Ä–∏–º–µ—Ä:**
```python
search_help()
```

---

## –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞

–í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–º. –≤ [ADVANCED_SEARCH.md](ADVANCED_SEARCH.md).

### –§–∏–ª—å—Ç—Ä `type:` (v4 - –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –∑–∞–ø—Ä–æ—Å)

–ü–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ frontmatter. –í v4 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
type:<value>
type:<value> OR type:<value2>
type:<value> NOT type:<value2>
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
type:–ø—Ä–æ—Ç–æ–∫–æ–ª

# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
type:–ø—Ä–æ—Ç–æ–∫–æ–ª OR type:–¥–æ–≥–æ–≤–æ—Ä

# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –Ω–æ –Ω–µ –∞—Ä—Ö–∏–≤–Ω—ã—Ö
type:–ø—Ä–æ—Ç–æ–∫–æ–ª NOT type:–∞—Ä—Ö–∏–≤
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ v4:**
1. **–≠—Ç–∞–ø 1:** –ü–æ–∏—Å–∫ `document_id` –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–∏–ø–æ–º "–ø—Ä–æ—Ç–æ–∫–æ–ª" –≤ —Ç–∞–±–ª–∏—Ü–µ `document_properties`
2. **–≠—Ç–∞–ø 2:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ —á–∞–Ω–∫–æ–≤ —ç—Ç–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–∂–µ –ø—Ä–∏ –º–∏–ª–ª–∏–æ–Ω–∞—Ö —á–∞–Ω–∫–æ–≤
- üéØ –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
- üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö vault'–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—â–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–µ `type` –∏–∑ frontmatter (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `document_properties`)
- –ù–µ –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ–≥–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tags:` –¥–ª—è —Ç–µ–≥–æ–≤)
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ lowercase –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### –§–∏–ª—å—Ç—Ä `tags:`

–ü–æ–∏—Å–∫ –ø–æ frontmatter —Ç–µ–≥–∞–º.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
tags:<tag1> [tag2] ...                    # AND (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
tags:<tag1> OR tags:<tag2>                 # OR –æ–ø–µ—Ä–∞—Ç–æ—Ä
tags:<tag1> NOT tags:<tag2>                # NOT –æ–ø–µ—Ä–∞—Ç–æ—Ä
tags:<tag1>,<tag2>,<tag3>                  # –ß–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—ã–µ
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ–≥–æ–º "python"
tags:python

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ–≥–∞–º–∏ "python" –ò "async"
tags:python async

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ–≥–æ–º "python" –ò–õ–ò "javascript"
tags:python OR tags:javascript

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ–≥–æ–º "python", –Ω–æ –ë–ï–ó —Ç–µ–≥–∞ "deprecated"
tags:python NOT tags:deprecated

# –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—ã–µ
tags:python,async,test
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—â–µ—Ç —Ç–æ–ª—å–∫–æ –≤ `frontmatter_tags` (—Ç–µ–≥–∏ –∏–∑ frontmatter)
- –ù–µ –≤–∫–ª—é—á–∞–µ—Ç inline —Ç–µ–≥–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `#tags:` –¥–ª—è inline —Ç–µ–≥–æ–≤)
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ lowercase

### –§–∏–ª—å—Ç—Ä `#tags:`

–ü–æ–∏—Å–∫ –ø–æ inline —Ç–µ–≥–∞–º (—Ç–µ–≥–∏ –≤ —Ç–µ–∫—Å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞).

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
#tags:<tag1> [tag2] ...                   # AND (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
#tags:<tag1> OR #tags:<tag2>              # OR –æ–ø–µ—Ä–∞—Ç–æ—Ä
#tags:<tag1> NOT #tags:<tag2>             # NOT –æ–ø–µ—Ä–∞—Ç–æ—Ä
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å inline —Ç–µ–≥–æ–º "#important"
#tags:important

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å inline —Ç–µ–≥–∞–º–∏ "#important" –ò "#meeting"
#tags:important meeting

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å inline —Ç–µ–≥–æ–º "#important" –ò–õ–ò "#urgent"
#tags:important OR #tags:urgent
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—â–µ—Ç —Ç–æ–ª—å–∫–æ –≤ `inline_tags` (—Ç–µ–≥–∏ –≤ —Ç–µ–∫—Å—Ç–µ `#tag`)
- –ù–µ –≤–∫–ª—é—á–∞–µ—Ç frontmatter —Ç–µ–≥–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tags:` –¥–ª—è frontmatter —Ç–µ–≥–æ–≤)
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ lowercase

### –§–∏–ª—å—Ç—Ä `links:`

–ü–æ–∏—Å–∫ –ø–æ wikilinks (—Å–≤—è–∑–∞–Ω–Ω—ã–º –∑–∞–º–µ—Ç–∫–∞–º).

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
links:<link1> [link2] ...                 # AND (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
links:<link1> OR links:<link2>            # OR –æ–ø–µ—Ä–∞—Ç–æ—Ä
links:<link1> NOT links:<link2>           # NOT –æ–ø–µ—Ä–∞—Ç–æ—Ä
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è –Ω–∞ "Python"
links:Python

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è –Ω–∞ "Python" –ò "async"
links:Python async

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è –Ω–∞ "Python" –ò–õ–ò "Flask"
links:Python OR links:Flask

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è –Ω–∞ "Python", –Ω–æ –ù–ï –Ω–∞ "deprecated"
links:Python NOT links:deprecated
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã wikilinks: `[[link]]`, `[[path/to/link]]`, `[[link|alias]]`
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ lowercase
- –ò—â–µ—Ç –≤ –ø–æ–ª–µ `links` (–º–∞—Å—Å–∏–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫)
- **Fuzzy matching:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `links:amur` –Ω–∞–π–¥—ë—Ç `amuratov`, `amur`, `amur_notes`)

**Fuzzy Matching (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ):**

Fuzzy matching –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–∞—Ç—å —Å—Å—ã–ª–∫–∏ –∏ —Ç–µ–≥–∏ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã –ø–æ–º–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä—ã fuzzy matching:**
```bash
# –ù–∞–π–¥—ë—Ç –≤—Å–µ —Å—Å—ã–ª–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ "amur" (amuratov, amur, amur_notes –∏ —Ç.–¥.)
links:amur

# –ù–∞–π–¥—ë—Ç –≤—Å–µ —Ç–µ–≥–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ "meet" (meeting, meetings, meetup –∏ —Ç.–¥.)
tags:meet
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Fuzzy matching —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ `links:` –∏ `tags:` —á–µ—Ä–µ–∑ MCP –∏–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API. –í CLI fuzzy matching –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `--fuzzy`.

### –§–∏–ª—å—Ç—Ä—ã `created:` –∏ `modified:`

–ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–∞–º —Å–æ–∑–¥–∞–Ω–∏—è –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
created:<operator><date>
modified:<operator><date>
```

**–û–ø–µ—Ä–∞—Ç–æ—Ä—ã:**
- `=` ‚Äî —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `>` ‚Äî –±–æ–ª—å—à–µ
- `<` ‚Äî –º–µ–Ω—å—à–µ
- `>=` ‚Äî –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
- `<=` ‚Äî –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ

**–§–æ—Ä–º–∞—Ç—ã –¥–∞—Ç:**
- `YYYY-MM-DD` ‚Äî –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –¥–∞—Ç–∞
- `YYYY-MM-DD HH:MM:SS` ‚Äî –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- ISO —Ñ–æ—Ä–º–∞—Ç: `2024-01-01T10:30:00`
- **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã:** `today`, `yesterday`, `last_week`, `last_month`, `last_year`, `this_week`, `this_month`, `this_year`, `n_days_ago`, `n_weeks_ago`, `n_months_ago`

**–ü—Ä–∏–º–µ—Ä—ã –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –¥–∞—Ç:**
```bash
# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ 2024-01-01
created:>2024-01-01

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
created:2024-01-01

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ 2024-12-01
modified:>2024-12-01

# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–∞—Ç
created:>=2024-01-01 created:<=2024-12-31
```

**–ü—Ä–∏–º–µ—Ä—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—Ç:**
```bash
# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è
created:today

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤—á–µ—Ä–∞
created:yesterday

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–µ
created:>=last_week

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
modified:>=this_month

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
created:7_days_ago

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö 2 –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥
created:2_weeks_ago

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö 3 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥
created:3_months_ago

# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—Ç
created:>=last_week created:<=today
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã:**
- `today` ‚Äî —Å–µ–≥–æ–¥–Ω—è (00:00:00)
- `yesterday` ‚Äî –≤—á–µ—Ä–∞ (00:00:00)
- `last_week` ‚Äî –Ω–∞—á–∞–ª–æ –ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
- `last_month` ‚Äî –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ –ø—Ä–æ—à–ª–æ–≥–æ –º–µ—Å—è—Ü–∞
- `last_year` ‚Äî 1 —è–Ω–≤–∞—Ä—è –ø—Ä–æ—à–ª–æ–≥–æ –≥–æ–¥–∞
- `this_week` ‚Äî –Ω–∞—á–∞–ª–æ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
- `this_month` ‚Äî –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
- `this_year` ‚Äî 1 —è–Ω–≤–∞—Ä—è —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–¥–∞
- `n_days_ago` ‚Äî n –¥–Ω–µ–π –Ω–∞–∑–∞–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `7_days_ago`)
- `n_weeks_ago` ‚Äî n –Ω–µ–¥–µ–ª—å –Ω–∞–∑–∞–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2_weeks_ago`)
- `n_months_ago` ‚Äî n –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `3_months_ago`)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: frontmatter ‚Üí filesystem (ctime –¥–ª—è created, mtime –¥–ª—è modified)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã ISO 8601 –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ
- –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã

### –§–∏–ª—å—Ç—Ä `file:`

–ü–æ–∏—Å–∫ –ø–æ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
file:<path>
file:<path> OR file:<path2>
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–∏—Å–∫ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ñ–∞–π–ª–µ
file:notes/python-guide.md

# –ü–æ–∏—Å–∫ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö
file:notes/python-guide.md OR file:notes/javascript-guide.md
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—É—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è vault'–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤

–í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:

```bash
# –¢–µ–∫—Å—Ç + —Ç–µ–≥–∏ + –¥–∞—Ç–∞ + —Ç–∏–ø + links
Python tags:python async created:>2024-01-01 type:guide links:Flask

# –¢–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—ã
tags:python created:>2024-01-01 type:–ø—Ä–æ—Ç–æ–∫–æ–ª links:Python

# –° OR –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º
tags:python OR tags:javascript type:–ø—Ä–æ—Ç–æ–∫–æ–ª

# –° NOT –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º
tags:python NOT tags:deprecated type:–¥–æ–∫—É–º–µ–Ω—Ç

# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è OR –∏ NOT
tags:python OR tags:javascript NOT tags:deprecated type:–ø—Ä–æ—Ç–æ–∫–æ–ª OR type:–¥–æ–≥–æ–≤–æ—Ä
```

**–õ–æ–≥–∏–∫–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (v4):**
- –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ò (AND) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –û–ø–µ—Ä–∞—Ç–æ—Ä `OR` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã —á–µ—Ä–µ–∑ –ò–õ–ò
- –û–ø–µ—Ä–∞—Ç–æ—Ä `NOT` –∏—Å–∫–ª—é—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º
- –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ (tags, type, links, dates) –≤—Å–µ–≥–¥–∞ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ AND
- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π/–ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –ø–æ–∏—Å–∫–∞
- **–î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:** –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å–≤–æ–π—Å—Ç–≤–∞–º (type) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø–æ–¥—Ö–æ–¥:
  1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —Å–≤–æ–π—Å—Ç–≤–∞–º ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ `document_ids`
  2. –ü–æ–∏—Å–∫ —Å—Ä–µ–¥–∏ —á–∞–Ω–∫–æ–≤ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

## –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### Frontmatter

Frontmatter ‚Äî —ç—Ç–æ YAML –±–ª–æ–∫ –≤ –Ω–∞—á–∞–ª–µ markdown —Ñ–∞–π–ª–∞, –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã–π –º–µ–∂–¥—É `---`.

**–ü—Ä–∏–º–µ—Ä:**
```yaml
---
title: Python Guide
type: guide
tags: [python, programming, tutorial]
created: 2024-01-01
modified: 2024-12-29
---

# Python Guide

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞...
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è (v4):**
- `title` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `documents`)
- `type` ‚Äî —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `document_properties` –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–æ)
- `tags` ‚Äî –º–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤ (–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ `frontmatter_tags` –≤ —Ç–∞–±–ª–∏—Ü–µ `chunks`)
- `created` ‚Äî –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `documents`)
- `modified` ‚Äî –¥–∞—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `documents`)
- –î—Ä—É–≥–∏–µ –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `metadata` (JSON) –∏ `document_properties` (key-value)

### Wikilinks

Wikilinks ‚Äî —ç—Ç–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –∑–∞–º–µ—Ç–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `[[note-name]]`.

**–§–æ—Ä–º–∞—Ç—ã:**
- `[[note-name]]` ‚Äî –ø—Ä–æ—Å—Ç–∞—è —Å—Å—ã–ª–∫–∞
- `[[path/to/note]]` ‚Äî —Å—Å—ã–ª–∫–∞ —Å –ø—É—Ç—ë–º
- `[[note-name|display text]]` ‚Äî —Å—Å—ã–ª–∫–∞ —Å –∞–ª–∏–∞—Å–æ–º

**–ü—Ä–∏–º–µ—Ä—ã:**
```markdown
–°–º. [[Python Guide]] –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
–°–º. [[notes/python-guide]] –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
–°–º. [[Python Guide|—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Python]] –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
- –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∫ –∏–º–µ–Ω–∏ –∑–∞–º–µ—Ç–∫–∏ (–±–µ–∑ –ø—É—Ç–∏ –∏ –∞–ª–∏–∞—Å–∞)
- –ò–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ –ø–æ–ª–µ `links` –∫–∞–∫ –º–∞—Å—Å–∏–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

### Inline —Ç–µ–≥–∏

Inline —Ç–µ–≥–∏ ‚Äî —ç—Ç–æ —Ç–µ–≥–∏ –≤ —Ç–µ–∫—Å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `#tag`.

**–ü—Ä–∏–º–µ—Ä:**
```markdown
–≠—Ç–æ –≤–∞–∂–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ #important #meeting
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
- –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ —Ç–µ–∫—Å—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ò–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ –ø–æ–ª–µ `inline_tags`
- –û—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç frontmatter —Ç–µ–≥–æ–≤

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥

```bash
obsidian-kb search --vault "my-vault" \
  --query "type:–ø—Ä–æ—Ç–æ–∫–æ–ª created:>=2024-01-01 created:<=2024-12-31"
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏

```bash
obsidian-kb search --vault "my-vault" \
  --query "tags:python async programming"
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–∏—Å–∫ –Ω–µ–¥–∞–≤–Ω–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```bash
obsidian-kb search --vault "my-vault" \
  --query "modified:>2024-12-01"
```

### –ü—Ä–∏–º–µ—Ä 4: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫

```bash
obsidian-kb search --vault "my-vault" \
  --query "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ tags:python,ai created:>2024-01-01 type:–¥–æ–∫—É–º–µ–Ω—Ç links:Python"
```

### –ü—Ä–∏–º–µ—Ä 5: –ü–æ–∏—Å–∫ –ø–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º –∑–∞–º–µ—Ç–∫–∞–º

```bash
obsidian-kb search --vault "my-vault" \
  --query "links:Python"
```

### –ü—Ä–∏–º–µ—Ä 6: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ MCP

```python
# –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
search_vault("my-vault", "Python tags:python created:>2024-01-01", limit=5)

# –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º vault'–∞–º
search_multi_vault(["vault1", "vault2"], "Python async")

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–µ–≥–æ–≤ –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
list_tags("my-vault", limit=50)
```

---

## –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API (v5)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π API v5** –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–æ–∫. API v5 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º intent.

### ISearchService

–ì–ª–∞–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –≤ v5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç intent –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.

#### `search()`

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –≤ –æ–¥–Ω–æ–º vault'–µ.

```python
from obsidian_kb.service_container import get_service_container
from obsidian_kb.types import SearchRequest, RetrievalGranularity, SearchIntent

services = get_service_container()
search_service = services.search_service

request = SearchRequest(
    vault_name="my_vault",
    query="Python async programming",
    limit=10,
    granularity=RetrievalGranularity.AUTO,  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
    search_type="hybrid",  # vector, fts, hybrid
    include_content=True,
    max_content_length=10000,
    force_intent=None,  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π intent
)

response = await search_service.search(request)

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
print(f"–ù–∞–π–¥–µ–Ω–æ: {response.total_found} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤")
print(f"Intent: {response.detected_intent.value}")
print(f"Strategy: {response.strategy_used}")
print(f"–í—Ä–µ–º—è: {response.execution_time_ms} –º—Å")

for result in response.results:
    print(f"- {result.document.title} (score: {result.score.value:.2f})")
```

#### `search_multi_vault()`

–ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º vault'–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

```python
request = SearchRequest(
    vault_name="vault1",  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
    query="tags:meeting",
    limit=10,
)

response = await search_service.search_multi_vault(
    vault_names=["vault1", "vault2", "vault3"],
    request=request,
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
print(f"–ù–∞–π–¥–µ–Ω–æ –≤ {len(['vault1', 'vault2', 'vault3'])} vault'–∞—Ö: {response.total_found} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤")
```

#### `get_available_strategies()`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–æ–∏—Å–∫–∞.

```python
strategies = search_service.get_available_strategies()
# ['document_level', 'chunk_level']
```

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö v5

#### SearchRequest

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∏—Å–∫.

```python
from obsidian_kb.types import SearchRequest, RetrievalGranularity, SearchIntent

request = SearchRequest(
    vault_name="my_vault",
    query="tags:python type:guide",
    limit=10,
    granularity=RetrievalGranularity.AUTO,  # DOCUMENT, CHUNK, AUTO
    search_type="hybrid",  # vector, fts, hybrid
    include_content=True,
    max_content_length=10000,
    force_intent=None,  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: SearchIntent.SEMANTIC
)
```

#### SearchResponse

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

```python
from obsidian_kb.types import SearchResponse

response: SearchResponse = await search_service.search(request)

# –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
print(response.detected_intent)  # SearchIntent.SEMANTIC
print(response.intent_confidence)  # 0.85
print(response.strategy_used)  # "chunk_level"
print(response.execution_time_ms)  # 245.3

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
for result in response.results:
    print(result.document.title)
    print(result.score.value)  # 0.0 - 1.0
    print(result.score.match_type)  # MatchType.SEMANTIC
    print(result.snippet)  # Snippet —Ç–µ–∫—Å—Ç–∞
```

#### DocumentSearchResult

–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

```python
from obsidian_kb.types import DocumentSearchResult

result: DocumentSearchResult = response.results[0]

# –î–æ–∫—É–º–µ–Ω—Ç
doc = result.document
print(doc.document_id)  # "vault::file.md"
print(doc.title)  # "Python Guide"
print(doc.file_path)  # "file.md"
print(doc.tags)  # ["python", "tutorial"]
print(doc.properties)  # {"type": "guide", "author": "..."}

# –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
score = result.score
print(score.value)  # 0.85
print(score.match_type)  # MatchType.SEMANTIC
print(score.label)  # "üü° –°—Ä–µ–¥–Ω—è—è"

# –ö–æ–Ω—Ç–µ–∫—Å—Ç (–¥–ª—è chunk-level)
print(result.matched_chunks)  # [ChunkSearchResult, ...] (—Ç–æ–ø-3)
print(result.matched_sections)  # ["Introduction", "Basics"]
print(result.snippet)  # "Python async programming –ø–æ–∑–≤–æ–ª—è–µ—Ç..."
```

#### SearchIntent

–¢–∏–ø—ã –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

```python
from obsidian_kb.types import SearchIntent

# METADATA_FILTER ‚Äî —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—ã, –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
# KNOWN_ITEM ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
# SEMANTIC ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
# EXPLORATORY ‚Äî –≤–æ–ø—Ä–æ—Å—ã
# PROCEDURAL ‚Äî how-to –∑–∞–ø—Ä–æ—Å—ã

intent = SearchIntent.SEMANTIC
```

#### RetrievalGranularity

–ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞.

```python
from obsidian_kb.types import RetrievalGranularity

# DOCUMENT ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
# CHUNK ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π —á–∞–Ω–∫–æ–≤
# AUTO ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ intent
```

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Storage Layer)

#### IChunkRepository

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–∞–Ω–∫–∞–º–∏.

```python
from obsidian_kb.service_container import get_service_container

services = get_service_container()
chunk_repo = services.chunk_repository

# –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
results = await chunk_repo.vector_search(
    vault_name="my_vault",
    query_vector=[0.1] * 768,
    limit=10,
    filter_document_ids=None,  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø—Ä–µ–¥—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
    where=None,  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: SQL WHERE —É—Å–ª–æ–≤–∏–µ
)

# –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
results = await chunk_repo.fts_search(
    vault_name="my_vault",
    query="Python async",
    limit=10,
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞
chunks = await chunk_repo.get_by_document(
    vault_name="my_vault",
    document_id="vault::file.md",
)
```

#### IDocumentRepository

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.

```python
doc_repo = services.document_repository

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
doc = await doc_repo.get("my_vault", "vault::file.md")

# –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
docs = await doc_repo.get_many("my_vault", {"vault::file1.md", "vault::file2.md"})

# –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º
doc_ids = await doc_repo.find_by_tags(
    vault_name="my_vault",
    tags=["python", "tutorial"],
    match_all=True,  # –í—Å–µ —Ç–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å
)

# –ü–æ–∏—Å–∫ –ø–æ —Å–≤–æ–π—Å—Ç–≤—É
doc_ids = await doc_repo.find_by_property(
    vault_name="my_vault",
    property_key="type",
    property_value="guide",
)

# –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–∞–º
doc_ids = await doc_repo.find_by_date_range(
    vault_name="my_vault",
    field="created_at",
    after=datetime(2024, 1, 1),
    before=datetime(2024, 12, 31),
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
content = await doc_repo.get_content("my_vault", "vault::file.md")

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤
properties = await doc_repo.get_properties("my_vault", "vault::file.md")
```

### Intent Detection

#### IIntentDetector

–î–µ—Ç–µ–∫—Ç–æ—Ä –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

```python
from obsidian_kb.search.intent_detector import IntentDetector
from obsidian_kb.types import SearchIntent

detector = IntentDetector()

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ intent
result = detector.detect(
    query="tags:python",
    parsed_filters={"tags": ["python"]},
)

print(result.intent)  # SearchIntent.METADATA_FILTER
print(result.confidence)  # 0.95
print(result.recommended_granularity)  # RetrievalGranularity.DOCUMENT
print(result.signals)  # {"has_filters": True, "has_text": False}
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### IResultFormatter

–§–æ—Ä–º–∞—Ç—Ç–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞.

```python
formatter = services.formatter

# Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
markdown = formatter.format_markdown(response)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Markdown –¥–ª—è MCP

# JSON —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
json_data = formatter.format_json(response)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –¥–ª—è structuredContent
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è v5 API

#### –ü—Ä–∏–º–µ—Ä 1: Metadata-only –ø–æ–∏—Å–∫

```python
from obsidian_kb.types import SearchRequest, RetrievalGranularity

request = SearchRequest(
    vault_name="my_vault",
    query="tags:meeting tags:important",
    limit=10,
    granularity=RetrievalGranularity.DOCUMENT,  # –Ø–≤–Ω–æ document-level
    include_content=False,  # –ë–µ–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
)

response = await search_service.search(request)
# Intent: METADATA_FILTER
# Strategy: document_level
# Score: EXACT_METADATA (1.0)
```

#### –ü—Ä–∏–º–µ—Ä 2: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫

```python
request = SearchRequest(
    vault_name="my_vault",
    query="Python async programming",
    limit=10,
    granularity=RetrievalGranularity.CHUNK,  # –Ø–≤–Ω–æ chunk-level
    search_type="vector",  # –¢–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
    include_content=True,
)

response = await search_service.search(request)
# Intent: SEMANTIC
# Strategy: chunk_level
# Score: SEMANTIC (0.0 - 1.0)
```

#### –ü—Ä–∏–º–µ—Ä 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫

```python
request = SearchRequest(
    vault_name="my_vault",
    query="database optimization",
    limit=10,
    granularity=RetrievalGranularity.AUTO,  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
    search_type="hybrid",  # Vector + FTS
)

response = await search_service.search(request)
# Intent: SEMANTIC
# Strategy: chunk_level
# Score: HYBRID (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ RRF)
```

#### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π intent

```python
from obsidian_kb.types import SearchIntent

request = SearchRequest(
    vault_name="my_vault",
    query="Python async programming",
    limit=10,
    force_intent=SearchIntent.PROCEDURAL,  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ procedural
)

response = await search_service.search(request)
# Intent: PROCEDURAL (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ)
# Strategy: document_level
```

---

## –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API (v4)

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏

#### `get_documents_by_property()`

–ü–æ–ª—É—á–µ–Ω–∏–µ `document_id` –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–æ–º.

```python
doc_ids: set[str] = await db_manager.get_documents_by_property(
    vault_name: str,
    property_key: str,
    property_value: str | None = None,
    property_value_pattern: str | None = None,
)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `property_key` ‚Äî –∫–ª—é—á —Å–≤–æ–π—Å—Ç–≤–∞ (type, author, status, priority, project, etc.)
- `property_value` ‚Äî —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `property_value_pattern` ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ (LIKE, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `set[str]` ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ `document_id`

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ "–ø—Ä–æ—Ç–æ–∫–æ–ª"
doc_ids = await db_manager.get_documents_by_property(
    vault_name="vault",
    property_key="type",
    property_value="–ø—Ä–æ—Ç–æ–∫–æ–ª"
)

# –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∞ "john doe"
doc_ids = await db_manager.get_documents_by_property(
    vault_name="vault",
    property_key="author",
    property_value="john doe"
)

# –ü–æ–∏—Å–∫ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
doc_ids = await db_manager.get_documents_by_property(
    vault_name="vault",
    property_key="author",
    property_value_pattern="john"
)
```

---

#### `get_document_properties()`

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤–æ–π—Å—Ç–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

```python
properties: dict[str, str] = await db_manager.get_document_properties(
    vault_name: str,
    document_id: str,
)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `document_id` ‚Äî ID –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `dict[str, str]` ‚Äî —Å–ª–æ–≤–∞—Ä—å `{property_key: property_value}`

**–ü—Ä–∏–º–µ—Ä:**
```python
properties = await db_manager.get_document_properties(
    vault_name="vault",
    document_id="vault::file.md"
)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {"type": "–ø—Ä–æ—Ç–æ–∫–æ–ª", "author": "john doe", "status": "draft"}
```

---

#### `get_document_info()`

–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞.

```python
doc_info: DocumentInfo | None = await db_manager.get_document_info(
    vault_name: str,
    document_id: str,
)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `document_id` ‚Äî ID –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `DocumentInfo | None`

**–ü–æ–ª—è DocumentInfo:**
- `document_id` ‚Äî ID –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `vault_name` ‚Äî –∏–º—è vault'–∞
- `file_path` ‚Äî –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
- `file_path_full` ‚Äî –ø–æ–ª–Ω—ã–π –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
- `file_name` ‚Äî –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- `file_extension` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- `content_type` ‚Äî —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `title` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `created_at` ‚Äî –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `modified_at` ‚Äî –¥–∞—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `file_size` ‚Äî —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
- `chunk_count` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```python
doc_info = await db_manager.get_document_info(
    vault_name="vault",
    document_id="vault::file.md"
)
if doc_info:
    print(f"Title: {doc_info.title}")
    print(f"File: {doc_info.file_path}")
    print(f"Chunks: {doc_info.chunk_count}")
```

---

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ (v4)

–í—Å–µ –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `document_ids` –¥–ª—è –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

#### `vector_search()`

```python
results: list[SearchResult] = await db_manager.vector_search(
    vault_name: str,
    query_vector: list[float],
    limit: int = 10,
    where: str | None = None,
    document_ids: set[str] | None = None,  # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä v4
)
```

#### `fts_search()`

```python
results: list[SearchResult] = await db_manager.fts_search(
    vault_name: str,
    query: str,
    limit: int = 10,
    where: str | None = None,
    document_ids: set[str] | None = None,  # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä v4
)
```

#### `hybrid_search()`

```python
results: list[SearchResult] = await db_manager.hybrid_search(
    vault_name: str,
    query_vector: list[float],
    query_text: str,
    limit: int = 10,
    alpha: float | None = None,
    where: str | None = None,
    document_ids: set[str] | None = None,  # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä v4
)
```

**–ü—Ä–∏–º–µ—Ä –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:**
```python
# –≠—Ç–∞–ø 1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —Ç–∏–ø—É
doc_ids = await db_manager.get_documents_by_property(
    vault_name="vault",
    property_key="type",
    property_value="–ø—Ä–æ—Ç–æ–∫–æ–ª"
)

# –≠—Ç–∞–ø 2: –ü–æ–∏—Å–∫ —Å—Ä–µ–¥–∏ —á–∞–Ω–∫–æ–≤ —ç—Ç–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
results = await db_manager.vector_search(
    vault_name="vault",
    query_vector=query_embedding,
    document_ids=doc_ids,  # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ document_ids
    limit=10
)
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–í–∞–∂–Ω–æ:** –í v4 –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è. –°—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã v3 —É–¥–∞–ª—è—é—Ç—Å—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è.

### –í–µ—Ä—Å–∏–∏ —Å—Ö–µ–º—ã

- **v1** ‚Äî –±–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å –ø–æ–ª—è–º–∏: id, vault_name, file_path, content, vector
- **v2** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è: frontmatter_tags, inline_tags, doc_type, links, created_at, modified_at
- **v3** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è: author, status, priority, project (—É—Å—Ç–∞—Ä–µ–ª–∞)
- **v4** (—Ç–µ–∫—É—â–∞—è) ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ —Å 4 —Ç–∞–±–ª–∏—Ü–∞–º–∏, –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ v4

1. –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é —Å—Ö–µ–º—É v3 (–æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `vault_{vault_name}`)
2. –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É–¥–∞–ª—è–µ—Ç—Å—è
3. –°–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã v4 (4 —Ç–∞–±–ª–∏—Ü—ã)
4. **–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è** vault'–∞ –∫–æ–º–∞–Ω–¥–æ–π `obsidian-kb reindex --vault <name>`

### –†—É—á–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ v4 –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ vault'—ã:

```bash
# –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ vault'–∞
obsidian-kb reindex --vault "my-vault" --force

# –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—Å–µ—Ö vault'–æ–≤
obsidian-kb index-all
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ, –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è. –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î v4.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [DATABASE_SCHEMA.md](DATABASE_SCHEMA.md#–≤–µ—Ä—Å–∏–∏-—Å—Ö–µ–º—ã).

---

## –°—Å—ã–ª–∫–∏

- [ARCHITECTURE.md](ARCHITECTURE.md) ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [ADVANCED_SEARCH.md](ADVANCED_SEARCH.md) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞
- [DATABASE_SCHEMA.md](DATABASE_SCHEMA.md) ‚Äî —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- [USAGE.md](USAGE.md) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

