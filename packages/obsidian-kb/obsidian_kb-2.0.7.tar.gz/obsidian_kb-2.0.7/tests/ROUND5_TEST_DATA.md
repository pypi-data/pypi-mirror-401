# Тестовые данные и сценарии для Round 5

**Дата создания:** 2026-01-02  
**Цель:** Тестирование проблемных кейсов, выявленных в тестировании Intent Detection Раунд 5

---

## Новые тестовые данные

### Профиль человека с полным именем

**Файл:** `07_PEOPLE/volkov/volkov.md`

Профиль "Александр Волков" создан для тестирования поиска людей по имени (P0).

**Особенности:**
- Полное имя в заголовке: `# Александр Волков`
- Должность в frontmatter: `role: Руководитель AI офиса`
- Должность в тексте: `## Роль\n\nРуководитель AI офиса`
- Имя в frontmatter: `name: Александр Волков`
- ID профиля: `volkov`

**Используется для тестирования:**
- Поиск по полному имени: `Александр Волков`
- Поиск по фамилии: `Волков`
- Поиск по имени: `Александр`
- Поиск по должности: `Руководитель AI офиса`
- Поиск по ID: `volkov`

### Документы с разными датами

**Файлы:**
- `05_DECISIONS/ADR-003.md` — дата: `2024-11-27`
- `06_CURRENT/projects/platform-modernization/2024-12-25_project-update.md` — дата: `2024-12-25`
- `07_PEOPLE/volkov/1-1/2024-12-20.md` — дата: `2024-12-20`

**Используются для тестирования:**
- Фильтр `created:>2024-12-20` — должен включать документ от 2024-12-25, исключать от 2024-11-27
- Фильтр `created:<2024-12-01` — должен включать документ от 2024-11-27, исключать от 2024-12-25
- Комбинированные фильтры дат

### Гайд по созданию ADR

**Файл:** `03_METHODOLOGY/guide_adr.md`

Гайд по созданию ADR для тестирования PROCEDURAL запросов (P1).

**Содержит:**
- Инструкции по созданию ADR
- Шаги создания
- Примеры ADR
- Ссылки на шаблоны

**Используется для тестирования:**
- `как создать ADR` → должен находить `guide_adr.md` в топ-3
- `инструкция по созданию ADR` → должен находить `guide_adr.md` в топ-3

### Шаблон для 1-1

**Файл:** `04_TEMPLATES/template_1-1.md`

Шаблон встречи 1-1 для тестирования PROCEDURAL запросов (P1).

**Содержит:**
- Шаблон встречи 1-1
- Инструкции по проведению встречи
- Рекомендации

**Используется для тестирования:**
- `как провести 1-1` → должен находить `template_1-1.md` в топ-3
- `шаблон для 1-1` → должен находить `template_1-1.md` в топ-3

### Документ для EXPLORATORY

**Файл:** `01_CONTEXT/smp.md`

Документ о Naumen SMP для тестирования EXPLORATORY запросов (P2).

**Содержит:**
- Определение SMP
- Основные компоненты
- Преимущества
- Использование

**Используется для тестирования:**
- `что такое Naumen SMP` → должен находить `smp.md` в топ-3
- `что такое SMP` → должен находить `smp.md` в топ-3

---

## Тестовые сценарии

### Файл: `tests/test_round5_issues.py`

Автоматические тесты для всех проблемных кейсов Round 5.

### Структура тестов

#### P0: Поиск людей по имени (6 сценариев)

1. **Поиск по полному имени** — `Александр Волков` → `volkov.md` в топ-3
2. **Поиск по фамилии** — `Волков` → `volkov.md` в топ-3
3. **Поиск по должности** — `Руководитель AI офиса` → `volkov.md` в топ-3
4. **Поиск по ID** — `volkov` → `volkov.md` на первом месте
5. **Поиск по имени** — `Александр` → `volkov.md` в топ-3
6. **Поиск с фильтром** — `type:person Александр Волков` → `volkov.md` на первом месте

#### P1: Фильтр дат (5 сценариев)

1. **Фильтр "больше"** — `created:>2024-12-20` → включает документы после 2024-12-20
2. **Фильтр "больше или равно"** — `created:>=2024-12-01` → включает документы от 2024-12-01
3. **Фильтр "меньше"** — `created:<2024-12-01` → включает документы до 2024-12-01
4. **Комбинированный фильтр** — `created:>=2024-12-01 created:<=2024-12-31` → документы за декабрь
5. **Фильтр с type** — `type:1-1 created:>2024-12-20` → встречи после 2024-12-20

#### P1: Релевантность PROCEDURAL (4 сценария)

1. **Как создать ADR** — `как создать ADR` → `guide_adr.md` в топ-3
2. **Как провести 1-1** — `как провести 1-1` → `template_1-1.md` в топ-3
3. **Инструкция по созданию ADR** — `инструкция по созданию ADR` → `guide_adr.md` в топ-3
4. **Шаблон для 1-1** — `шаблон для 1-1` → `template_1-1.md` в топ-3

#### P2: KNOWN_ITEM при отсутствии (3 сценария)

1. **Несуществующий ADR** — `ADR-999` → 0 результатов
2. **Существующий ADR** — `ADR-003` → `ADR-003.md` на первом месте
3. **Несуществующий человек** — `nonexistent-person` → 0 результатов

#### P2: Релевантность EXPLORATORY (3 сценария)

1. **Что такое Naumen SMP** — `что такое Naumen SMP` → `smp.md` в топ-3
2. **Что такое SMP** — `что такое SMP` → `smp.md` в топ-3
3. **Зачем нужна централизация** — `зачем нужна централизация` → релевантные документы

---

## Запуск тестов

### Запуск всех тестов Round 5

```bash
python tests/test_round5_issues.py
```

### Результаты

Результаты сохраняются в `tests/round5_test_results.json`:
- Статистика по приоритетам (P0, P1, P2)
- Детальные результаты каждого сценария
- Метрики успеха

---

## Критерии успеха

### P0 (Критично)
- ✅ Все 6 сценариев должны проходить
- ✅ Профиль должен находиться в топ-3 для всех вариантов запроса
- ✅ Профиль должен приоритизироваться выше упоминаний

### P1 (Высокий приоритет)
- ✅ Все фильтры дат должны работать корректно
- ✅ PROCEDURAL запросы должны находить релевантные документы в топ-3
- ✅ Минимум 80% сценариев должны проходить

### P2 (Средний приоритет)
- ✅ KNOWN_ITEM должен возвращать 0 для несуществующих документов
- ✅ EXPLORATORY запросы должны находить релевантные документы
- ✅ Минимум 70% сценариев должны проходить

---

## Связанные документы

- [REAL_DATA_TESTING_ISSUES.md](REAL_DATA_TESTING_ISSUES.md) — Проблемные моменты для тестирования на реальных данных
- [IMPROVEMENT_PLAN.md](../IMPROVEMENT_PLAN.md) — План улучшений (фаза V5.10)
- [test_cto_vault_scenarios.py](test_cto_vault_scenarios.py) — Основные тестовые сценарии

---

*Документ создан 2026-01-02*

