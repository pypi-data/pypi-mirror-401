# typed: false
# frozen_string_literal: true

# This file was generated by obsidian-kb release process
# Homebrew formula for obsidian-kb
class ObsidianKb < Formula
  desc "Local knowledge base for Obsidian vaults with vector search via MCP"
  homepage "https://github.com/mdemyanov/obsidian-kb"
  url "https://github.com/mdemyanov/obsidian-kb/archive/refs/tags/v0.1.1.tar.gz"
  sha256 "7b2c1c4a716914d5ff7acd9644c2ffc54c6dccb736b4f411fb4b34c821e178de"
  license "MIT"
  head "https://github.com/mdemyanov/obsidian-kb.git", branch: "main"

  depends_on "python@3.12"

  def install
    # Используем pip для установки пакета
    python3 = "python3.12"
    system python3, "-m", "pip", "install", "--prefix=#{prefix}", "--no-warn-script-location", "."
    
    # Убеждаемся, что скрипт доступен
    bin.install Dir["#{prefix}/bin/*"]
  end

  test do
    system "#{bin}/obsidian-kb", "--help"
  end
end

