[project]
name = "japyd"
version = "0.1.19"
description = "Automate JSON:API relationships with Pydantic. No manual mapping, just clean code."
authors = [
    { name = "gdoumenc", email = "gdoumenc@neorezo.io" },
]
requires-python = ">=3.11"
readme = "README.md"
dependencies = [
    "flask",
    "flask-pydantic>=0.13.1",
    "twine",
]

[project.license]
text = "MIT"

[project.optional-dependencies]
dev = [
    "pytest>=8.4.1",
    "mypy>=1.17.1",
    "ruff>=0.12.7",
    "cloudsmith-cli>=1.8.3",
    "codecov>=2.1.13",
    "pytest-cov>=6.2.1",
    "pip>=25.2",
    "types-requests>=2.31.0.6",
]

[build-system]
requires = [
    "pdm-backend",
]
build-backend = "pdm.backend"

[tool.pdm]
distribution = true

[tool.pdm.build]
excludes = [
    "tests/",
]

[tool.pdm.scripts.ruff]
cmd = "ruff check src"
help = "Linting using Ruff"

[tool.pdm.scripts.mypy]
cmd = "mypy src --exclude neorezo/biz"
help = "Type checking using mypy"

[tool.pdm.scripts.pytest]
cmd = "pytest ."
help = "Unit testing using pytest"

[tool.pdm.scripts.tests]
composite = [
    "ruff",
    "mypy",
    "pytest",
]

[tool.pytest.ini_options]
pythonpath = "src"
testpaths = "tests"
markers = [
    "wip",
]

[[tool.mypy.overrides]]
module = [
    "jsonapi_pydantic.*",
]
follow_untyped_imports = true
