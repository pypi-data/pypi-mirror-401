[tool.poetry]
name = "aidial-client"
version = "0.5.0rc"

description = "A Python client library for the AI DIAL API"
authors = ["EPAM RAIL <SpecialEPM-DIALDevTeam@epam.com>"]
homepage = "https://epam-rail.com"
license = "Apache-2.0"
readme = "README.md"
repository = "https://github.com/epam/ai-dial-client-python"
packages = [{ include = "aidial_client" }]

[tool.poetry.dependencies]
python = ">=3.9,<4.0"
openai = ">=1.1.0,<2.0.0"
httpx = ">=0.25.0,<1.0"
pydantic = ">=1.10,<3"
aiofiles = ">=0.5.0"

[tool.setuptools]
packages = ["aidial_client"]

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.group.test.dependencies]
pytest = "^7.4.2"
pytest-asyncio = "^0.21.0"
nox = "^2024.4.15"
pytest-cov = "^5.0"
coverage = "^7.6"

[tool.poetry.group.lint.dependencies]
flake8 = "^6.0.0"
black = ">=23.3,<25.0"
isort = "^5.12.0"
pyright = "^1.1.324"
autoflake = "^2.2.0"
codespell = "^2.3.0"
blacken-docs = "^1.18.0"

[tool.pytest.ini_options]
testpaths = ["tests"]
filterwarnings = ["error::pytest.PytestUnhandledCoroutineWarning"]

[tool.pyright]
typeCheckingMode = "basic"
reportUnusedVariable = "error"
reportIncompatibleMethodOverride = "error"
exclude = [
  ".git",
  "**/.venv",
  ".nox",
  ".pytest_cache",
  "**/__pycache__",
  "build",
]

[tool.black]
line-length = 80
exclude = '''
/(
    \.git
  | \.venv
  | \.nox
  | \.pytest_cache
  | \.__pycache__
)/
'''

[tool.isort]
line_length = 80
profile = "black"

[tool.autoflake]
ignore_init_module_imports = true
remove_all_unused_imports = true
in_place = true
recursive = true
quiet = true
exclude = [".nox", ".pytest_cache", "\\.venv"]

[tool.coverage.run]
source = ["."]
omit = [
  "tests/*",
  "*/__init__.py",
  "noxfile.py",
  'aidial_client/_compatibility/pydantic_v1.py',
  'htmlcov/*',
]
