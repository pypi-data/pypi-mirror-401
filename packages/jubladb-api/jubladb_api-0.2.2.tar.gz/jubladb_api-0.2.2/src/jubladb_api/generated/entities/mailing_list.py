# DO NOT EDIT THIS FILE, it is auto-generated!
import jubladb_api.core.metamodel_classes
import jubladb_api.core.base_entity
import jubladb_api.generated.entities.keys

import typing

# @formatter:off


class MailingList(jubladb_api.core.base_entity.BaseEntity):
    def __init__(
        self,
        id_: int,
        name: str,
        group_id: int,
        description: str,
        publisher: str,
        mail_name: str,
        additional_sender: str,
        subscribable_for: str,
        subscribable_mode: str,
        subscribers_may_post: bool,
        anyone_may_post: bool,
        preferred_labels: list[str],
        delivery_report: bool,
        main_email: str,
        subscribable: bool,
        subscribers: list[str],
        group: jubladb_api.generated.entities.keys.GroupKey | None,
    ):
        super().__init__(id_)

        self._name = name
        self._group_id = group_id
        self._description = description
        self._publisher = publisher
        self._mail_name = mail_name
        self._additional_sender = additional_sender
        self._subscribable_for = subscribable_for
        self._subscribable_mode = subscribable_mode
        self._subscribers_may_post = subscribers_may_post
        self._anyone_may_post = anyone_may_post
        self._preferred_labels = preferred_labels
        self._delivery_report = delivery_report
        self._main_email = main_email
        self._subscribable = subscribable
        self._subscribers = subscribers

        self._group = group

    @property
    def name(self) -> str:
        return self._name

    @property
    def group_id(self) -> int:
        return self._group_id

    @property
    def description(self) -> str:
        return self._description

    @property
    def publisher(self) -> str:
        return self._publisher

    @property
    def mail_name(self) -> str:
        return self._mail_name

    @property
    def additional_sender(self) -> str:
        return self._additional_sender

    @property
    def subscribable_for(self) -> str:
        return self._subscribable_for

    @property
    def subscribable_mode(self) -> str:
        return self._subscribable_mode

    @property
    def subscribers_may_post(self) -> bool:
        return self._subscribers_may_post

    @property
    def anyone_may_post(self) -> bool:
        return self._anyone_may_post

    @property
    def preferred_labels(self) -> list[str]:
        return self._preferred_labels

    @property
    def delivery_report(self) -> bool:
        return self._delivery_report

    @property
    def main_email(self) -> str:
        return self._main_email

    @property
    def subscribable(self) -> bool:
        return self._subscribable

    @property
    def subscribers(self) -> list[str]:
        return self._subscribers

    @property
    def group(self) -> jubladb_api.generated.entities.keys.GroupKey:
        if self._group is None:
            raise ValueError("Relation group is not included")
        return self._group

    @property
    def key(self) -> jubladb_api.generated.entities.keys.MailingListKey:
        return jubladb_api.generated.entities.keys.MailingListKey(self._id)

    @property
    def meta(self) -> jubladb_api.core.metamodel_classes.Entity:
        return jubladb_api.generated.metamodel.ENTITIES["mailing_list"]

    def is_relation_loaded(
        self,
        relation_name: typing.Literal["group",],
    ) -> bool:

        if relation_name == "group":
            return self._group is not None

        else:
            raise ValueError(f"relation {relation_name} does not exist on mailing_list")

    def __str__(self) -> str:
        return f"{self.__class__.__name__}({self._id}, name={repr(self._name)})"

    @classmethod
    def from_json(cls, json_data: dict):
        if json_data.get("type", None) != "mailing_lists":
            raise ValueError("Invalid data type")
        return cls(
            id_=cls._access_id(json_data),
            name=cls._access_data_attribute(
                json_data,
                "name",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            group_id=cls._access_data_attribute(
                json_data,
                "group_id",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
            ),
            description=cls._access_data_attribute(
                json_data,
                "description",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            publisher=cls._access_data_attribute(
                json_data,
                "publisher",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            mail_name=cls._access_data_attribute(
                json_data,
                "mail_name",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            additional_sender=cls._access_data_attribute(
                json_data,
                "additional_sender",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            subscribable_for=cls._access_data_attribute(
                json_data,
                "subscribable_for",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            subscribable_mode=cls._access_data_attribute(
                json_data,
                "subscribable_mode",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            subscribers_may_post=cls._access_data_attribute(
                json_data,
                "subscribers_may_post",
                jubladb_api.core.metamodel_classes.AttributeType.BOOLEAN,
            ),
            anyone_may_post=cls._access_data_attribute(
                json_data,
                "anyone_may_post",
                jubladb_api.core.metamodel_classes.AttributeType.BOOLEAN,
            ),
            preferred_labels=cls._access_data_attribute(
                json_data,
                "preferred_labels",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
                array=True,
            ),
            delivery_report=cls._access_data_attribute(
                json_data,
                "delivery_report",
                jubladb_api.core.metamodel_classes.AttributeType.BOOLEAN,
            ),
            main_email=cls._access_data_attribute(
                json_data,
                "main_email",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            subscribable=cls._access_data_attribute(
                json_data,
                "subscribable",
                jubladb_api.core.metamodel_classes.AttributeType.BOOLEAN,
            ),
            subscribers=cls._access_data_attribute(
                json_data,
                "subscribers",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
                array=True,
            ),
            group=cls._create_single_relation_key(
                json_data,
                "group",
                "groups",
                jubladb_api.generated.entities.keys.GroupKey,
            ),
        )


# @formatter:on
