# DO NOT EDIT THIS FILE, it is auto-generated!
import jubladb_api.core.metamodel_classes
import jubladb_api.core.base_entity
import jubladb_api.generated.entities.keys

import typing

# @formatter:off


class InvoiceItem(jubladb_api.core.base_entity.BaseEntity):
    def __init__(
        self,
        id_: int,
        invoice_id: int,
        name: str,
        description: str,
        unit_cost: float,
        vat_rate: float,
        cost: int,
        count: int,
        cost_center: str,
        account: str,
        invoice: jubladb_api.generated.entities.keys.InvoiceKey | None,
    ):
        super().__init__(id_)

        self._invoice_id = invoice_id
        self._name = name
        self._description = description
        self._unit_cost = unit_cost
        self._vat_rate = vat_rate
        self._cost = cost
        self._count = count
        self._cost_center = cost_center
        self._account = account

        self._invoice = invoice

    @property
    def invoice_id(self) -> int:
        return self._invoice_id

    @property
    def name(self) -> str:
        return self._name

    @property
    def description(self) -> str:
        return self._description

    @property
    def unit_cost(self) -> float:
        return self._unit_cost

    @property
    def vat_rate(self) -> float:
        return self._vat_rate

    @property
    def cost(self) -> int:
        return self._cost

    @property
    def count(self) -> int:
        return self._count

    @property
    def cost_center(self) -> str:
        return self._cost_center

    @property
    def account(self) -> str:
        return self._account

    @property
    def invoice(self) -> jubladb_api.generated.entities.keys.InvoiceKey:
        if self._invoice is None:
            raise ValueError("Relation invoice is not included")
        return self._invoice

    @property
    def key(self) -> jubladb_api.generated.entities.keys.InvoiceItemKey:
        return jubladb_api.generated.entities.keys.InvoiceItemKey(self._id)

    @property
    def meta(self) -> jubladb_api.core.metamodel_classes.Entity:
        return jubladb_api.generated.metamodel.ENTITIES["invoice_item"]

    def is_relation_loaded(
        self,
        relation_name: typing.Literal["invoice",],
    ) -> bool:

        if relation_name == "invoice":
            return self._invoice is not None

        else:
            raise ValueError(f"relation {relation_name} does not exist on invoice_item")

    @classmethod
    def from_json(cls, json_data: dict):
        if json_data.get("type", None) != "invoice_items":
            raise ValueError("Invalid data type")
        return cls(
            id_=cls._access_id(json_data),
            invoice_id=cls._access_data_attribute(
                json_data,
                "invoice_id",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
            ),
            name=cls._access_data_attribute(
                json_data,
                "name",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            description=cls._access_data_attribute(
                json_data,
                "description",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            unit_cost=cls._access_data_attribute(
                json_data,
                "unit_cost",
                jubladb_api.core.metamodel_classes.AttributeType.FLOAT,
            ),
            vat_rate=cls._access_data_attribute(
                json_data,
                "vat_rate",
                jubladb_api.core.metamodel_classes.AttributeType.FLOAT,
            ),
            cost=cls._access_data_attribute(
                json_data,
                "cost",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
            ),
            count=cls._access_data_attribute(
                json_data,
                "count",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
            ),
            cost_center=cls._access_data_attribute(
                json_data,
                "cost_center",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            account=cls._access_data_attribute(
                json_data,
                "account",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            invoice=cls._create_single_relation_key(
                json_data,
                "invoice",
                "invoices",
                jubladb_api.generated.entities.keys.InvoiceKey,
            ),
        )


# @formatter:on
