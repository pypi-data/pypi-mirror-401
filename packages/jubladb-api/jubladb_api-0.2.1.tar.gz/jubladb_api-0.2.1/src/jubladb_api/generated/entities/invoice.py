# DO NOT EDIT THIS FILE, it is auto-generated!
import jubladb_api.core.metamodel_classes
import jubladb_api.core.base_entity
import jubladb_api.generated.entities.keys

import datetime

import typing

# @formatter:off


class Invoice(jubladb_api.core.base_entity.BaseEntity):
    def __init__(
        self,
        id_: int,
        title: str,
        description: str,
        state: str,
        group_id: int,
        recipient_id: int,
        due_at: datetime.date,
        issued_at: datetime.date,
        recipient_email: str,
        payment_information: str,
        payment_purpose: str,
        hide_total: bool,
        group: jubladb_api.generated.entities.keys.GroupKey | None,
        recipient: jubladb_api.generated.entities.keys.PersonKey | None,
        invoice_items: list[jubladb_api.generated.entities.keys.InvoiceItemKey] | None,
    ):
        super().__init__(id_)

        self._title = title
        self._description = description
        self._state = state
        self._group_id = group_id
        self._recipient_id = recipient_id
        self._due_at = due_at
        self._issued_at = issued_at
        self._recipient_email = recipient_email
        self._payment_information = payment_information
        self._payment_purpose = payment_purpose
        self._hide_total = hide_total

        self._group = group
        self._recipient = recipient
        self._invoice_items = invoice_items

    @property
    def title(self) -> str:
        return self._title

    @property
    def description(self) -> str:
        return self._description

    @property
    def state(self) -> str:
        return self._state

    @property
    def group_id(self) -> int:
        return self._group_id

    @property
    def recipient_id(self) -> int:
        return self._recipient_id

    @property
    def due_at(self) -> datetime.date:
        return self._due_at

    @property
    def issued_at(self) -> datetime.date:
        return self._issued_at

    @property
    def recipient_email(self) -> str:
        return self._recipient_email

    @property
    def payment_information(self) -> str:
        return self._payment_information

    @property
    def payment_purpose(self) -> str:
        return self._payment_purpose

    @property
    def hide_total(self) -> bool:
        return self._hide_total

    @property
    def group(self) -> jubladb_api.generated.entities.keys.GroupKey:
        if self._group is None:
            raise ValueError("Relation group is not included")
        return self._group

    @property
    def recipient(self) -> jubladb_api.generated.entities.keys.PersonKey:
        if self._recipient is None:
            raise ValueError("Relation recipient is not included")
        return self._recipient

    @property
    def invoice_items(self) -> list[jubladb_api.generated.entities.keys.InvoiceItemKey]:
        if self._invoice_items is None:
            raise ValueError("Relation invoice_items is not included")
        return self._invoice_items

    @property
    def key(self) -> jubladb_api.generated.entities.keys.InvoiceKey:
        return jubladb_api.generated.entities.keys.InvoiceKey(self._id)

    @property
    def meta(self) -> jubladb_api.core.metamodel_classes.Entity:
        return jubladb_api.generated.metamodel.ENTITIES["invoice"]

    def is_relation_loaded(
        self,
        relation_name: typing.Literal[
            "group",
            "recipient",
            "invoice_items",
        ],
    ) -> bool:

        if relation_name == "group":
            return self._group is not None

        elif relation_name == "recipient":
            return self._recipient is not None

        elif relation_name == "invoice_items":
            return self._invoice_items is not None

        else:
            raise ValueError(f"relation {relation_name} does not exist on invoice")

    @classmethod
    def from_json(cls, json_data: dict):
        if json_data.get("type", None) != "invoices":
            raise ValueError("Invalid data type")
        return cls(
            id_=cls._access_id(json_data),
            title=cls._access_data_attribute(
                json_data,
                "title",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            description=cls._access_data_attribute(
                json_data,
                "description",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            state=cls._access_data_attribute(
                json_data,
                "state",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            group_id=cls._access_data_attribute(
                json_data,
                "group_id",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
            ),
            recipient_id=cls._access_data_attribute(
                json_data,
                "recipient_id",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
            ),
            due_at=cls._access_data_attribute(
                json_data,
                "due_at",
                jubladb_api.core.metamodel_classes.AttributeType.DATE,
            ),
            issued_at=cls._access_data_attribute(
                json_data,
                "issued_at",
                jubladb_api.core.metamodel_classes.AttributeType.DATE,
            ),
            recipient_email=cls._access_data_attribute(
                json_data,
                "recipient_email",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            payment_information=cls._access_data_attribute(
                json_data,
                "payment_information",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            payment_purpose=cls._access_data_attribute(
                json_data,
                "payment_purpose",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            hide_total=cls._access_data_attribute(
                json_data,
                "hide_total",
                jubladb_api.core.metamodel_classes.AttributeType.BOOLEAN,
            ),
            group=cls._create_single_relation_key(
                json_data,
                "group",
                "groups",
                jubladb_api.generated.entities.keys.GroupKey,
            ),
            recipient=cls._create_single_relation_key(
                json_data,
                "recipient",
                "people",
                jubladb_api.generated.entities.keys.PersonKey,
            ),
            invoice_items=cls._create_many_relation_keys(
                json_data,
                "invoice_items",
                "invoice_items",
                jubladb_api.generated.entities.keys.InvoiceItemKey,
            ),
        )


# @formatter:on
