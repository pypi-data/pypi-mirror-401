# DO NOT EDIT THIS FILE, it is auto-generated!
import jubladb_api.core.metamodel_classes
import jubladb_api.core.base_entity
import jubladb_api.generated.entities.keys

import datetime

import typing

# @formatter:off


class Event(jubladb_api.core.base_entity.BaseEntity):
    def __init__(
        self,
        id_: int,
        group_ids: list[int],
        type: str | None,
        kind_id: int | None,
        name: str,
        description: str,
        application_conditions: str,
        motto: str,
        cost: str,
        location: str,
        application_opening_at: datetime.date | None,
        application_closing_at: datetime.date | None,
        application_contact_id: int | None,
        external_application_link: str | None,
        maximum_participants: int | None,
        created_at: datetime.datetime,
        updated_at: datetime.datetime,
        contact: jubladb_api.generated.entities.keys.PersonKey | None,
        kind: jubladb_api.generated.entities.keys.EventKindKey | None,
        dates: list[jubladb_api.generated.entities.keys.DateKey] | None,
    ):
        super().__init__(id_)

        self._group_ids = group_ids
        self._type = type
        self._kind_id = kind_id
        self._name = name
        self._description = description
        self._application_conditions = application_conditions
        self._motto = motto
        self._cost = cost
        self._location = location
        self._application_opening_at = application_opening_at
        self._application_closing_at = application_closing_at
        self._application_contact_id = application_contact_id
        self._external_application_link = external_application_link
        self._maximum_participants = maximum_participants
        self._created_at = created_at
        self._updated_at = updated_at

        self._contact = contact
        self._kind = kind
        self._dates = dates

    @property
    def group_ids(self) -> list[int]:
        return self._group_ids

    @property
    def type(self) -> str | None:
        return self._type

    @property
    def kind_id(self) -> int | None:
        return self._kind_id

    @property
    def name(self) -> str:
        return self._name

    @property
    def description(self) -> str:
        return self._description

    @property
    def application_conditions(self) -> str:
        return self._application_conditions

    @property
    def motto(self) -> str:
        return self._motto

    @property
    def cost(self) -> str:
        return self._cost

    @property
    def location(self) -> str:
        return self._location

    @property
    def application_opening_at(self) -> datetime.date | None:
        return self._application_opening_at

    @property
    def application_closing_at(self) -> datetime.date | None:
        return self._application_closing_at

    @property
    def application_contact_id(self) -> int | None:
        return self._application_contact_id

    @property
    def external_application_link(self) -> str | None:
        return self._external_application_link

    @property
    def maximum_participants(self) -> int | None:
        return self._maximum_participants

    @property
    def created_at(self) -> datetime.datetime:
        return self._created_at

    @property
    def updated_at(self) -> datetime.datetime:
        return self._updated_at

    @property
    def contact(self) -> jubladb_api.generated.entities.keys.PersonKey:
        if self._contact is None:
            raise ValueError("Relation contact is not included")
        return self._contact

    @property
    def kind(self) -> jubladb_api.generated.entities.keys.EventKindKey:
        if self._kind is None:
            raise ValueError("Relation kind is not included")
        return self._kind

    @property
    def dates(self) -> list[jubladb_api.generated.entities.keys.DateKey]:
        if self._dates is None:
            raise ValueError("Relation dates is not included")
        return self._dates

    @property
    def key(self) -> jubladb_api.generated.entities.keys.EventKey:
        return jubladb_api.generated.entities.keys.EventKey(self._id)

    @property
    def meta(self) -> jubladb_api.core.metamodel_classes.Entity:
        return jubladb_api.generated.metamodel.ENTITIES["event"]

    def is_relation_loaded(
        self,
        relation_name: typing.Literal[
            "contact",
            "kind",
            "dates",
        ],
    ) -> bool:

        if relation_name == "contact":
            return self._contact is not None

        elif relation_name == "kind":
            return self._kind is not None

        elif relation_name == "dates":
            return self._dates is not None

        else:
            raise ValueError(f"relation {relation_name} does not exist on event")

    @classmethod
    def from_json(cls, json_data: dict):
        if json_data.get("type", None) != "events":
            raise ValueError("Invalid data type")
        return cls(
            id_=cls._access_id(json_data),
            group_ids=cls._access_data_attribute(
                json_data,
                "group_ids",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
                array=True,
            ),
            type=cls._access_data_attribute(
                json_data,
                "type",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
                optional=True,
            ),
            kind_id=cls._access_data_attribute(
                json_data,
                "kind_id",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
                optional=True,
            ),
            name=cls._access_data_attribute(
                json_data,
                "name",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            description=cls._access_data_attribute(
                json_data,
                "description",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            application_conditions=cls._access_data_attribute(
                json_data,
                "application_conditions",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            motto=cls._access_data_attribute(
                json_data,
                "motto",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            cost=cls._access_data_attribute(
                json_data,
                "cost",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            location=cls._access_data_attribute(
                json_data,
                "location",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
            ),
            application_opening_at=cls._access_data_attribute(
                json_data,
                "application_opening_at",
                jubladb_api.core.metamodel_classes.AttributeType.DATE,
                optional=True,
            ),
            application_closing_at=cls._access_data_attribute(
                json_data,
                "application_closing_at",
                jubladb_api.core.metamodel_classes.AttributeType.DATE,
                optional=True,
            ),
            application_contact_id=cls._access_data_attribute(
                json_data,
                "application_contact_id",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
                optional=True,
            ),
            external_application_link=cls._access_data_attribute(
                json_data,
                "external_application_link",
                jubladb_api.core.metamodel_classes.AttributeType.STRING,
                optional=True,
            ),
            maximum_participants=cls._access_data_attribute(
                json_data,
                "maximum_participants",
                jubladb_api.core.metamodel_classes.AttributeType.INTEGER,
                optional=True,
            ),
            created_at=cls._access_data_attribute(
                json_data,
                "created_at",
                jubladb_api.core.metamodel_classes.AttributeType.DATETIME,
            ),
            updated_at=cls._access_data_attribute(
                json_data,
                "updated_at",
                jubladb_api.core.metamodel_classes.AttributeType.DATETIME,
            ),
            contact=cls._create_single_relation_key(
                json_data,
                "contact",
                "people",
                jubladb_api.generated.entities.keys.PersonKey,
            ),
            kind=cls._create_single_relation_key(
                json_data,
                "kind",
                "event_kinds",
                jubladb_api.generated.entities.keys.EventKindKey,
            ),
            dates=cls._create_many_relation_keys(
                json_data, "dates", "dates", jubladb_api.generated.entities.keys.DateKey
            ),
        )


# @formatter:on
