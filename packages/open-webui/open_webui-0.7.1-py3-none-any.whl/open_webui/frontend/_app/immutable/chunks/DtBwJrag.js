var R=Object.defineProperty;var g=a=>{throw TypeError(a)};var x=(a,e,s)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var y=(a,e,s)=>x(a,typeof e!="symbol"?e+"":e,s),A=(a,e,s)=>e.has(a)||g("Cannot "+s);var t=(a,e,s)=>(A(a,e,"read from private field"),s?s.call(a):e.get(a)),u=(a,e,s)=>e.has(a)?g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,s),T=(a,e,s,r)=>(A(a,e,"write to private field"),r?r.call(a,s):e.set(a,s),s);import{av as D,aA as b,aw as N,ae as w,an as E,H as k,al as S,ay as F,aV as B,ao as C,J as H,I,K as j,ah as J,ai as K,aj as L,ag as O,ak as M}from"./Cef1s1vS.js";var d,l,h,p,v,m;class P{constructor(e,s=!0){y(this,"anchor");u(this,d,new Map);u(this,l,new Map);u(this,h,new Map);u(this,p,!0);u(this,v,()=>{var e=F;if(t(this,d).has(e)){var s=t(this,d).get(e),r=t(this,l).get(s);if(r)D(r);else{var n=t(this,h).get(s);n&&(t(this,l).set(s,n.effect),t(this,h).delete(s),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[c,i]of t(this,d)){if(t(this,d).delete(c),c===e)break;const f=t(this,h).get(i);f&&(b(f.effect),t(this,h).delete(i))}for(const[c,i]of t(this,l)){if(c===s)continue;const f=()=>{if(Array.from(t(this,d).values()).includes(c)){var _=document.createDocumentFragment();B(i,_),_.append(w()),t(this,h).set(c,{effect:i,fragment:_})}else b(i);t(this,l).delete(c)};t(this,p)||!r?N(i,f,!1):f()}}});u(this,m,e=>{t(this,d).delete(e);const s=Array.from(t(this,d).values());for(const[r,n]of t(this,h))s.includes(r)||(b(n.effect),t(this,h).delete(r))});this.anchor=e,T(this,p,s)}ensure(e,s){var r=F,n=C();if(s&&!t(this,l).has(e)&&!t(this,h).has(e))if(n){var c=document.createDocumentFragment(),i=w();c.append(i),t(this,h).set(e,{effect:E(()=>s(i)),fragment:c})}else t(this,l).set(e,E(()=>s(this.anchor)));if(t(this,d).set(r,e),n){for(const[f,o]of t(this,l))f===e?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[f,o]of t(this,h))f===e?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(t(this,v)),r.ondiscard(t(this,m))}else k&&(this.anchor=S),t(this,v).call(this)}}d=new WeakMap,l=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap;function q(a,e,s=!1){k&&I();var r=new P(a),n=s?j:0;function c(i,f){if(k){const _=J(a)===K;if(i===_){var o=L();O(o),r.anchor=o,M(!1),r.ensure(i,f),M(!0);return}}r.ensure(i,f)}H(()=>{var i=!1;e((f,o=!0)=>{i=!0,c(o,f)}),i||c(!1,null)},n)}export{P as B,q as i};
//# sourceMappingURL=DtBwJrag.js.map
