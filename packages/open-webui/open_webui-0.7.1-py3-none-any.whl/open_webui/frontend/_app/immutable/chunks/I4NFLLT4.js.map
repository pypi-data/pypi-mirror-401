{"version":3,"file":"I4NFLLT4.js","sources":["../../../../../../src/lib/apis/evaluations/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\n\nexport const getConfig = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/config`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateConfig = async (token: string, config: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/config`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...config\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getAllFeedbacks = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/feedbacks/all`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getLeaderboard = async (token: string = '', query: string = '') => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tif (query) searchParams.append('query', query);\n\n\tconst res = await fetch(\n\t\t`${WEBUI_API_BASE_URL}/evaluations/leaderboard?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tauthorization: `Bearer ${token}`\n\t\t\t}\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getModelHistory = async (token: string = '', modelId: string, days: number = 30) => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tsearchParams.append('days', days.toString());\n\n\tconst res = await fetch(\n\t\t`${WEBUI_API_BASE_URL}/evaluations/leaderboard/${encodeURIComponent(modelId)}/history?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tauthorization: `Bearer ${token}`\n\t\t\t}\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFeedbackItems = async (token: string = '', orderBy, direction, page) => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tif (orderBy) searchParams.append('order_by', orderBy);\n\tif (direction) searchParams.append('direction', direction);\n\tif (page) searchParams.append('page', page.toString());\n\n\tconst res = await fetch(\n\t\t`${WEBUI_API_BASE_URL}/evaluations/feedbacks/list?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tauthorization: `Bearer ${token}`\n\t\t\t}\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const exportAllFeedbacks = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/feedbacks/all/export`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const createNewFeedback = async (token: string, feedback: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/feedback`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...feedback\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFeedbackById = async (token: string, feedbackId: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/feedback/${feedbackId}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateFeedbackById = async (token: string, feedbackId: string, feedback: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/feedback/${feedbackId}`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...feedback\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deleteFeedbackById = async (token: string, feedbackId: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/evaluations/feedback/${feedbackId}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["getConfig","token","error","res","WEBUI_API_BASE_URL","json","err","updateConfig","config","getLeaderboard","query","searchParams","getModelHistory","modelId","days","getFeedbackItems","orderBy","direction","page","exportAllFeedbacks","createNewFeedback","feedback","getFeedbackById","feedbackId","updateFeedbackById","deleteFeedbackById"],"mappings":"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"}