import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{b as Xe,g as Ye,j as e,i as x,d as Ze,e as J,a as f,c as r,w as d,k as c,r as t,t as S,s as _,p as et,f as y,m as D,n as oe,o as $t,q as kt,v as Pt,h as St,$ as Ct,A as Dt,x as Et,l as Y,aQ as Ht,u as Nt}from"../chunks/Cef1s1vS.js";import{i as O}from"../chunks/DtBwJrag.js";import{e as Lt,i as jt}from"../chunks/DHQpwR2r.js";import{r as Ot,a as Fe}from"../chunks/CepVL_7U.js";import{a as Bt,b as It}from"../chunks/C-UcLPd1.js";import{b as Ve}from"../chunks/DhQBHKPK.js";import{i as tt}from"../chunks/D6HxSY24.js";import{a as V,s as rt}from"../chunks/B0aKtzpN.js";import{t as xe}from"../chunks/Bfaq2Jpc.js";import{f as Mt}from"../chunks/CxvPj3pb.js";import{g as zt}from"../chunks/BUPwbfhi.js";import{c as at,u as st,W as Ut,p as qe}from"../chunks/D3pt6ESx.js";import{b as Ke,g as Ge,c as Wt,d as At}from"../chunks/TXMk8vAG.js";import{k as Qe,s as Tt}from"../chunks/DHdn9FJM.js";import{s as Jt}from"../chunks/XZMgsyez.js";import{p as se}from"../chunks/8WYl0Dy3.js";import"../chunks/C3aUuVTd.js";import{b as Rt,c as _e}from"../chunks/R7cNvzSA.js";import{f as Ft}from"../chunks/BjO3HhBo.js";import{D as Vt}from"../chunks/B8Zi6N3Q.js";import{G as ot}from"../chunks/OTRYe80G.js";import{T as Le}from"../chunks/JXfXx3cP.js";import{S as qt}from"../chunks/BD8fE4Jb.js";import{D as Kt}from"../chunks/BOLBI9yR.js";import{D as Gt}from"../chunks/D52qNrtl.js";import{E as Qt}from"../chunks/dEXUfeqI.js";import{C as Xt}from"../chunks/RhD_GpP6.js";import{S as Yt}from"../chunks/CxwbzrnD.js";import{P as Zt}from"../chunks/Czmx3fnX.js";import{C as er}from"../chunks/B4oZRTyL.js";import{S as tr}from"../chunks/CaFREkKp.js";import{X as rr}from"../chunks/i-Im-os4.js";import{V as ar}from"../chunks/BpWqIegX.js";import{B as sr}from"../chunks/Dv1GBoB0.js";var or=y('<!> <div class="flex items-center"> </div>',1),nr=y('<!> <div class="flex items-center"> </div>',1),ir=y('<!> <div class="flex items-center"> </div>',1),lr=y('<!> <div class="flex items-center"> </div>',1),dr=y('<!> <!> <!> <hr class="border-gray-50 dark:border-gray-850/30 my-1"/> <!>',1),vr=y('<div slot="content"><!></div>');function cr(Z,B){Xe(B,!1);const p=()=>V(ye,"$i18n",q),i=()=>V(at,"$config",q),ee=()=>V(st,"$user",q),[q,K]=rt(),ye=Ye("i18n");let ne=se(B,"shareHandler",8),G=se(B,"cloneHandler",8),be=se(B,"exportHandler",8),R=se(B,"deleteHandler",8),ie=se(B,"onClose",8),z=D(!1);tt(),Vt(Z,{get show(){return e(z)},set show(b){x(z,b)},$$events:{change:b=>{b.detail===!1&&ie()()}},children:(b,N)=>{{let I=oe(()=>(p(),d(()=>p().t("More"))));Le(b,{get content(){return e(I)},children:(U,te)=>{var k=Ze(),E=J(k);Jt(E,B,"default",{},null),f(U,k)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(b,N)=>{var I=vr(),U=r(I);Rt(U,{class:"w-full max-w-[170px] rounded-2xl p-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:"start",get transition(){return Ft},children:(te,k)=>{var E=dr(),le=J(E);{var he=w=>{_e(w,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$events:{click:()=>{ne()()}},children:(L,C)=>{var h=or(),l=J(h);qt(l,{});var o=c(l,2),u=r(o,!0);t(o),S(g=>_(u,g),[()=>(p(),d(()=>p().t("Share")))]),f(L,h)},$$slots:{default:!0}})};O(le,w=>{i(),d(()=>i().features.enable_community_sharing)&&w(he)})}var de=c(le,2);_e(de,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{G()()}},children:(w,L)=>{var C=nr(),h=J(C);Kt(h,{});var l=c(h,2),o=r(l,!0);t(l),S(u=>_(o,u),[()=>(p(),d(()=>p().t("Clone")))]),f(w,C)},$$slots:{default:!0}});var ve=c(de,2);{var ce=w=>{_e(w,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{be()()}},children:(L,C)=>{var h=ir(),l=J(h);Gt(l,{});var o=c(l,2),u=r(o,!0);t(o),S(g=>_(u,g),[()=>(p(),d(()=>p().t("Export")))]),f(L,h)},$$slots:{default:!0}})};O(ve,w=>{ee(),d(()=>{var L,C,h,l;return((L=ee())==null?void 0:L.role)==="admin"||((l=(h=(C=ee())==null?void 0:C.permissions)==null?void 0:h.workspace)==null?void 0:l.prompts_export)})&&w(ce)})}var me=c(ve,4);_e(me,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{R()()}},children:(w,L)=>{var C=lr(),h=J(C);ot(h,{});var l=c(h,2),o=r(l,!0);t(l),S(u=>_(o,u),[()=>(p(),d(()=>p().t("Delete")))]),f(w,C)},$$slots:{default:!0}}),f(te,E)},$$slots:{default:!0}}),t(I),f(b,I)}},$$legacy:!0}),et(),K()}var mr=y('<div class=" text-sm text-gray-500 truncate"> <span class="  font-medium"> </span>.</div>'),ur=y('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),fr=y('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),pr=y('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),gr=y('<div class="shrink-0 text-gray-500"> </div>'),xr=y('<button class="self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),_r=y('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),yr=y('<a class=" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl"><div class=" flex flex-col flex-1 space-x-4 cursor-pointer w-full pl-1"><div class="flex items-center justify-between w-full"><div class="flex items-center gap-2"><div class="font-medium line-clamp-1 capitalize"> </div> <div class="text-xs overflow-hidden text-ellipsis line-clamp-1 text-gray-500"> </div></div> <!></div> <div class=" text-xs"><!></div></div> <div class="flex flex-row gap-0.5 self-center"><!></div></a>'),br=y('<div class="gap-2 grid my-2 px-3 lg:grid-cols-2"></div>'),hr=y('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),wr=y('<div class=" my-16"><div class=" text-xl font-medium mb-1 line-clamp-1"> </div> <a class=" flex cursor-pointer items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-850 w-full mb-2 px-3.5 py-1.5 rounded-xl transition" href="https://openwebui.com/prompts" target="_blank"><div class=" self-center"><div class=" font-medium line-clamp-1"> </div> <div class=" text-sm line-clamp-1"> </div></div> <div><div><!></div></div></a></div>'),$r=y('<!> <div class="flex flex-col gap-1 px-1 mt-1.5 mb-3"><input id="prompts-import-input" type="file" accept=".json" hidden=""/> <div class="flex justify-between items-center"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><!> <!> <a class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center" href="/workspace/prompts/create"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></a></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30"><div class=" flex w-full space-x-2 py-0.5 px-3.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap"><!></div></div> <!></div> <!>',1),kr=y('<div class="w-full h-full flex justify-center items-center"><!></div>');function Pr(Z,B){Xe(B,!1);const p=()=>V(st,"$user",K),i=()=>V(be,"$i18n",K),ee=()=>V(Ut,"$WEBUI_NAME",K),q=()=>V(at,"$config",K),[K,ye]=rt(),{saveAs:ne}=Mt;let G=D(!1);const be=Ye("i18n");let R=D(),ie=D(!1),z=D(null),b=D(""),N=D([]),I=D(!1),U=D(null),te=D(),k=D(""),E=D([]);const le=()=>{x(E,e(N).filter(l=>{var u,g,F,re;if(e(b)===""&&e(k)==="")return!0;const o=e(b).toLowerCase();return((l.title||"").toLowerCase().includes(o)||(l.command||"").toLowerCase().includes(o)||(((u=l.user)==null?void 0:u.name)||"").toLowerCase().includes(o)||(((g=l.user)==null?void 0:g.email)||"").toLowerCase().includes(o))&&(e(k)===""||e(k)==="created"&&l.user_id===((F=p())==null?void 0:F.id)||e(k)==="shared"&&l.user_id!==((re=p())==null?void 0:re.id))}))},he=async l=>{xe.success(i().t("Redirecting you to Open WebUI Community"));const o="https://openwebui.com",u=await window.open(`${o}/prompts/create`,"_blank");window.addEventListener("message",g=>{g.origin===o&&g.data==="loaded"&&u.postMessage(JSON.stringify(l),"*")},!1)},de=async l=>{const o={...l};o.title=`${o.title} (Clone)`;const u=o.command.startsWith("/")?o.command.substring(1):o.command;o.command=Tt(`${u} clone`),sessionStorage.prompt=JSON.stringify(o),zt("/workspace/prompts/create")},ve=async l=>{let o=new Blob([JSON.stringify([l])],{type:"application/json"});ne(o,`prompt-export-${Date.now()}.json`)},ce=async l=>{const o=l.command;await At(localStorage.token,o).catch(g=>(xe.error(g),null))&&xe.success(i().t("Deleted {{name}}",{name:o})),await me()},me=async()=>{x(N,await Ke(localStorage.token)),await qe.set(await Ge(localStorage.token))};$t(async()=>{x(k,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),await me(),x(ie,!0);const l=g=>{g.key==="Shift"&&x(G,!0)},o=g=>{g.key==="Shift"&&x(G,!1)},u=()=>{x(G,!1)};return window.addEventListener("keydown",l),window.addEventListener("keyup",o),window.addEventListener("blur",u),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",o),window.removeEventListener("blur",u)}}),kt(()=>(e(N),e(b),e(k)),()=>{e(N)&&e(b)!==void 0&&e(k)!==void 0&&le()}),Pt(),tt();var w=Ze();St(l=>{S(o=>Ct.title=`
		${o??""} â€¢ ${ee()??""}
	`,[()=>(i(),d(()=>i().t("Prompts")))])});var L=J(w);{var C=l=>{var o=$r(),u=J(o);{let a=oe(()=>(i(),d(()=>i().t("Delete prompt?"))));Xt(u,{get title(){return e(a)},get show(){return e(I)},set show(n){x(I,n)},$$events:{confirm:()=>{ce(e(U))}},children:(n,v)=>{var s=mr(),m=r(s),P=c(m),H=r(P,!0);t(P),Dt(),t(s),S(M=>{_(m,`${M??""} `),_(H,(e(U),d(()=>e(U).command)))},[()=>(i(),d(()=>i().t("This will delete")))]),f(n,s)},$$slots:{default:!0},$$legacy:!0})}var g=c(u,2),F=r(g);Ve(F,a=>x(R,a),()=>e(R));var re=c(F,2),we=r(re),$e=r(we),nt=r($e,!0);t($e);var je=c($e,2),it=r(je,!0);t(je),t(we);var Oe=c(we,2),Be=r(Oe);{var lt=a=>{var n=ur(),v=r(n),s=r(v,!0);t(v),t(n),S(m=>_(s,m),[()=>(i(),d(()=>i().t("Import")))]),Y("click",n,()=>{e(R).click()}),f(a,n)};O(Be,a=>{p(),d(()=>{var n,v,s,m;return((n=p())==null?void 0:n.role)==="admin"||((m=(s=(v=p())==null?void 0:v.permissions)==null?void 0:s.workspace)==null?void 0:m.prompts_import)})&&a(lt)})}var Ie=c(Be,2);{var dt=a=>{var n=fr(),v=r(n),s=r(v,!0);t(v),t(n),S(m=>_(s,m),[()=>(i(),d(()=>i().t("Export")))]),Y("click",n,async()=>{let m=new Blob([JSON.stringify(e(N))],{type:"application/json"});ne(m,`prompts-export-${Date.now()}.json`)}),f(a,n)};O(Ie,a=>{e(N),p(),d(()=>{var n,v,s,m;return e(N).length&&(((n=p())==null?void 0:n.role)==="admin"||((m=(s=(v=p())==null?void 0:v.permissions)==null?void 0:s.workspace)==null?void 0:m.prompts_export))})&&a(dt)})}var Me=c(Ie,2),ze=r(Me);Zt(ze,{className:"size-3",strokeWidth:"2.5"});var Ue=c(ze,2),vt=r(Ue,!0);t(Ue),t(Me),t(Oe),t(re),t(g);var ke=c(g,2),Pe=r(ke),We=r(Pe),Se=r(We),ct=r(Se);Yt(ct,{className:"size-3.5"}),t(Se);var ue=c(Se,2);Ot(ue);var mt=c(ue,2);{var ut=a=>{var n=pr(),v=r(n),s=r(v);rr(s,{className:"size-3",strokeWidth:"2"}),t(v),t(n),Y("click",v,()=>{x(b,"")}),f(a,n)};O(mt,a=>{e(b)&&a(ut)})}t(We),t(Pe);var fe=c(Pe,2),Ce=r(fe),ft=r(Ce);ar(ft,{onChange:async a=>{localStorage.workspaceViewOption=a,await Et()},get value(){return e(k)},set value(a){x(k,a)},$$legacy:!0}),t(Ce),Ve(Ce,a=>x(te,a),()=>e(te)),t(fe);var pt=c(fe,2);{var gt=a=>{var n=br();Lt(n,5,()=>e(E),jt,(v,s)=>{var m=yr(),P=r(m),H=r(P),M=r(H),W=r(M),De=r(W,!0);t(W);var ae=c(W,2),pe=r(ae,!0);t(ae),t(M);var Ee=c(M,2);{var He=$=>{{let j=oe(()=>(i(),d(()=>i().t("Read Only"))));sr($,{type:"muted",get content(){return e(j)}})}};O(Ee,$=>{e(s),d(()=>!e(s).write_access)&&$(He)})}t(H);var ge=c(H,2),Ne=r(ge);{let $=oe(()=>(e(s),i(),d(()=>{var j,Q;return((Q=(j=e(s))==null?void 0:j.user)==null?void 0:Q.email)??i().t("Deleted User")})));Le(Ne,{get content(){return e($)},className:"flex shrink-0",placement:"top-start",children:(j,Q)=>{var A=gr(),T=r(A,!0);t(A),S(X=>_(T,X),[()=>(i(),Nt(Qe),e(s),d(()=>{var X,Te,Je,Re;return i().t("By {{name}}",{name:Qe(((Te=(X=e(s))==null?void 0:X.user)==null?void 0:Te.name)??((Re=(Je=e(s))==null?void 0:Je.user)==null?void 0:Re.email)??i().t("Deleted User"))})}))]),f(j,A)},$$slots:{default:!0}})}t(ge),t(P);var Ae=c(P,2),bt=r(Ae);{var ht=$=>{{let j=oe(()=>(i(),d(()=>i().t("Delete"))));Le($,{get content(){return e(j)},children:(Q,A)=>{var T=xr(),X=r(T);ot(X,{}),t(T),Y("click",T,()=>{ce(e(s))}),f(Q,T)},$$slots:{default:!0}})}},wt=$=>{cr($,{shareHandler:()=>{he(e(s))},cloneHandler:()=>{de(e(s))},exportHandler:()=>{ve(e(s))},deleteHandler:async()=>{x(U,e(s)),x(I,!0)},onClose:()=>{},children:(j,Q)=>{var A=_r(),T=r(A);Qt(T,{className:"size-5"}),t(A),f(j,A)},$$slots:{default:!0}})};O(bt,$=>{e(G)?$(ht):$(wt,!1)})}t(Ae),t(m),S($=>{Fe(m,"href",$),_(De,(e(s),d(()=>e(s).title))),_(pe,(e(s),d(()=>e(s).command)))},[()=>(e(s),d(()=>`/workspace/prompts/edit?command=${encodeURIComponent(e(s).command)}`))]),f(v,m)}),t(n),f(a,n)},xt=a=>{var n=hr(),v=r(n),s=c(r(v),2),m=r(s,!0);t(s);var P=c(s,2),H=r(P,!0);t(P),t(v),t(n),S((M,W)=>{_(m,M),_(H,W)},[()=>(i(),d(()=>i().t("No prompts found"))),()=>(i(),d(()=>i().t("Try adjusting your search or filter to find what you are looking for.")))]),f(a,n)};O(pt,a=>{e(E),d(()=>(e(E)??[]).length!==0)?a(gt):a(xt,!1)})}t(ke);var _t=c(ke,2);{var yt=a=>{var n=wr(),v=r(n),s=r(v,!0);t(v);var m=c(v,2),P=r(m),H=r(P),M=r(H,!0);t(H);var W=c(H,2),De=r(W,!0);t(W),t(P);var ae=c(P,2),pe=r(ae),Ee=r(pe);er(Ee,{}),t(pe),t(ae),t(m),t(n),S((He,ge,Ne)=>{_(s,He),_(M,ge),_(De,Ne)},[()=>(i(),d(()=>i().t("Made by Open WebUI Community"))),()=>(i(),d(()=>i().t("Discover a prompt"))),()=>(i(),d(()=>i().t("Discover, download, and explore custom prompts")))]),f(a,n)};O(_t,a=>{q(),d(()=>{var n;return(n=q())==null?void 0:n.features.enable_community_sharing})&&a(yt)})}S((a,n,v)=>{_(nt,a),_(it,(e(E),d(()=>e(E).length))),_(vt,n),Fe(ue,"placeholder",v)},[()=>(i(),d(()=>i().t("Prompts"))),()=>(i(),d(()=>i().t("New Prompt"))),()=>(i(),d(()=>i().t("Search Prompts")))]),Bt(F,()=>e(z),a=>x(z,a)),Y("change",F,()=>{e(z);const a=new FileReader;a.onload=async n=>{const v=JSON.parse(n.target.result);for(const s of v)await Wt(localStorage.token,{command:s.command.charAt(0)==="/"?s.command.slice(1):s.command,title:s.title,content:s.content}).catch(m=>(xe.error(`${m}`),null));x(N,await Ke(localStorage.token)),await qe.set(await Ge(localStorage.token)),x(z,[]),Ht(R,e(R).value="")},a.readAsText(e(z)[0])}),It(ue,()=>e(b),a=>x(b,a)),Y("wheel",fe,a=>{a.deltaY!==0&&(a.preventDefault(),a.currentTarget.scrollLeft+=a.deltaY)}),f(l,o)},h=l=>{var o=kr(),u=r(o);tr(u,{className:"size-5"}),t(o),f(l,o)};O(L,l=>{e(ie)?l(C):l(h,!1)})}f(Z,w),et(),ye()}function la(Z){Pr(Z,{})}export{la as component};
//# sourceMappingURL=37.Cgm2KjWd.js.map
