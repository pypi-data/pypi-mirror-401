import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{t as W,a as d,B as mt,b as st,g as ht,e as le,c as o,r,k as x,u as Pe,w as c,aP as ta,s as ie,j as e,l as pe,p as lt,f,A as aa,n as $e,d as Fe,o as Dt,i,x as nt,m as Y,aQ as ke,aM as ra,y as Na,q as Lt,v as Ea,h as Ia,$ as Sa}from"../chunks/Cef1s1vS.js";import{i as me}from"../chunks/DtBwJrag.js";import{a as gt,s as Le,c as pt,d as oa,r as Ma}from"../chunks/CepVL_7U.js";import{i as it}from"../chunks/D6HxSY24.js";import{a as Me,s as _t}from"../chunks/B0aKtzpN.js";import{g as Zt}from"../chunks/BUPwbfhi.js";import{p as za}from"../chunks/FrigezeZ.js";import{a as qt,i as Pa,b as Ta,c as Aa,W as Oa,m as ja,u as Wa,s as Jt}from"../chunks/D3pt6ESx.js";import{d as ye,r as Ha}from"../chunks/I1CDPYOB.js";import"../chunks/BkIq4suy.js";import"../chunks/BFmuJLeH.js";import{t as Ce}from"../chunks/Bfaq2Jpc.js";import{m as At,o as na,n as Qt,z as Kt,y as Ra,A as Ba}from"../chunks/DHdn9FJM.js";import{b as Da}from"../chunks/C-UcLPd1.js";import{b as sa}from"../chunks/DhQBHKPK.js";import{p as u}from"../chunks/8WYl0Dy3.js";import{f as Ua}from"../chunks/CxvPj3pb.js";import{c as Fa}from"../chunks/DOWKdgXc.js";import{d as La}from"../chunks/BQWQRICs.js";import{d as Ja,c as la,P as Ya}from"../chunks/DMKNnpKE.js";import{b as Yt}from"../chunks/CIXyf-s1.js";import{u as qa,g as Va}from"../chunks/Bdp0bqD6.js";import{c as ia,a as Ga}from"../chunks/DjfhbysU.js";import{d as Xa}from"../chunks/CngP2r_l.js";import{e as Ot,i as jt}from"../chunks/DHQpwR2r.js";import{X as da}from"../chunks/i-Im-os4.js";import{I as Za,M as Qa,c as ca}from"../chunks/BHYCUY60.js";import"../chunks/C3aUuVTd.js";import{F as Ka}from"../chunks/BVhp4GCM.js";import{p as er}from"../chunks/Bfc47y5P.js";import{S as tr}from"../chunks/CW8ogf0p.js";import{P as ar}from"../chunks/DUEzloFV.js";import{T as rr}from"../chunks/Dlc8dZfN.js";import{T as Ge}from"../chunks/JXfXx3cP.js";import{M as or}from"../chunks/C4BGruIs.js";import{P as nr}from"../chunks/0wqOCvwo.js";import{s as Ct}from"../chunks/XZMgsyez.js";import{D as sr}from"../chunks/IzBjbzL9.js";import{A as lr}from"../chunks/BpPms_aG.js";import{g as ir,d as dr,u as cr}from"../chunks/Bl9Qaom3.js";import{R as ur,V as vr}from"../chunks/BArPYa2D.js";import{S as ea}from"../chunks/CaFREkKp.js";import{M as fr}from"../chunks/CwEve5o4.js";import{C as mr}from"../chunks/RhD_GpP6.js";import"../chunks/B3gTqYNi.js";import{F as gr}from"../chunks/Dji5WfHR.js";import{M as ua,a as va,b as fa}from"../chunks/R7cNvzSA.js";import{f as ma}from"../chunks/CiB29Aqe.js";import{N as pr}from"../chunks/CopdGtdP.js";import{E as hr}from"../chunks/dEXUfeqI.js";import{S as ga}from"../chunks/lCfDZ88e.js";import{S as _r}from"../chunks/DYVezSX_.js";var xr=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"></path></svg>');function br(U,l){let t=u(l,"className",8,"w-4 h-4"),b=u(l,"strokeWidth",8,"1.5");var m=xr();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var wr=f('<div class=" text-xs font-medium mb-2"> </div> <div class="flex flex-col gap-1"><!> <div class="flex items-center flex-wrap gap-2 mt-1.5"></div></div> <hr class="my-2 border-gray-50 dark:border-gray-700/10"/>',1),yr=f('<option class="bg-gray-50 dark:bg-gray-700"> </option>'),kr=f('<div class="flex items-center mb-1.5 pt-1.5"><div class=" mr-1 flex items-center"><button class="p-0.5 bg-transparent transition rounded-lg"><!></button></div> <div class=" font-medium text-base flex items-center gap-1"><div> </div></div></div> <div class="mt-1 px-1.5"><div class="pb-10"><!> <div class=" text-xs font-medium mb-1"> </div> <div class="w-full"><select class="w-full bg-transparent text-sm outline-hidden"><option class="bg-gray-50 dark:bg-gray-700" disabled> </option><!></select></div></div></div>',1);function $r(U,l){st(l,!1);const t=()=>Me(h,"$i18n",m),b=()=>Me(qt,"$models",m),[m,de]=_t(),h=ht("i18n");let H=u(l,"show",12,!1),ce=u(l,"selectedModelId",12,""),S=u(l,"files",28,()=>[]),ee=u(l,"onUpdate",8,ae=>{});it();var F=kr(),ue=le(F),R=o(ue),B=o(R),be=o(B);da(be,{className:"size-5",strokeWidth:"2.5"}),r(B),r(R);var M=x(R,2),J=o(M),y=o(J,!0);r(J),r(M),r(ue);var a=x(ue,2),g=o(a),te=o(g);{var X=ae=>{var Q=wr(),ve=le(Q),Be=o(ve,!0);r(ve);var ze=x(ve,2),Ee=o(ze);Ot(Ee,1,()=>(Pe(S()),c(()=>S().filter(_e=>_e.type!=="image"))),jt,(_e,L)=>{{let Je=$e(()=>(e(L),c(()=>{var Xe;return(Xe=e(L))==null?void 0:Xe.size}))),Ye=$e(()=>(e(L),c(()=>e(L).status==="uploading")));Ka(_e,{className:"w-full",get item(){return e(L)},small:!0,edit:!0,dismissible:!0,get url(){return e(L),c(()=>e(L).url)},get name(){return e(L),c(()=>e(L).name)},get type(){return e(L),c(()=>e(L).type)},get size(){return e(Je)},get loading(){return e(Ye)},$$events:{dismiss:()=>{S(S().filter(Xe=>Xe.id!==e(L).id)),S(S()),ee()(S())},click:()=>{e(L)}}})}});var dt=x(Ee,2);Ot(dt,5,()=>(Pe(S()),c(()=>S().filter(_e=>_e.type==="image"||((_e==null?void 0:_e.content_type)??"").startsWith("image/")))),jt,(_e,L)=>{Za(_e,{get src(){return e(L),c(()=>e(L).url)},imageClassName:" size-14 rounded-xl object-cover",dismissible:!0,onDismiss:()=>{S(S().filter(Je=>Je.id!==e(L).id)),S(S()),ee()(S())}})}),r(dt),r(ze),aa(2),W(_e=>ie(Be,_e),[()=>(t(),c(()=>t().t("Files")))]),d(ae,Q)};me(te,ae=>{Pe(S()),c(()=>S().length>0)&&ae(X)})}var O=x(te,2),z=o(O,!0);r(O);var $=x(O,2),P=o($);W(()=>{ce(),ta(()=>{t(),b()})});var V=o(P),N=o(V,!0);r(V),V.value=V.__value="";var Z=x(V);Ot(Z,1,()=>(b(),c(()=>b().filter(ae=>{var Q,ve;return!(((ve=(Q=ae==null?void 0:ae.info)==null?void 0:Q.meta)==null?void 0:ve.hidden)??!1)}))),jt,(ae,Q)=>{var ve=yr(),Be=o(ve,!0);r(ve);var ze={};W(()=>{ie(Be,(e(Q),c(()=>e(Q).name))),ze!==(ze=(e(Q),c(()=>e(Q).id)))&&(ve.value=(ve.__value=(e(Q),c(()=>e(Q).id)))??"")}),d(ae,ve)}),r(P),r($),r(g),r(a),W((ae,Q,ve)=>{ie(y,ae),ie(z,Q),ie(N,ve)},[()=>(t(),c(()=>t().t("Controls"))),()=>(t(),c(()=>t().t("Model"))),()=>(t(),c(()=>t().t("Select a model")))]),pe("click",B,()=>{H(!H())}),oa(P,ce),d(U,F),lt(),de()}var Cr=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 19.5-15-15m0 0v11.25m0-11.25h11.25"></path></svg>');function Nr(U,l){let t=u(l,"className",8,"size-4"),b=u(l,"strokeWidth",8,"1.5");var m=Cr();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var Er=f('<button class=" text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition"><!></button>'),Ir=f('<button class=" text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition"><!></button>'),Sr=f('<button class=" text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg></button>'),Mr=f("<div><!></div>"),zr=f('<div class=" markdown-prose-sm text-sm"><!></div>'),Pr=f('<div class="flex flex-col gap-1 group"><div class="flex items-center justify-between pt-1"><div class="py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"> </div> <div class="flex items-center gap-2"><!> <!> <!></div></div> <div class="flex-1"><!></div></div>');function Tr(U,l){st(l,!1);const t=()=>Me(de,"$i18n",b),[b,m]=_t(),de=ht("i18n");let h=u(l,"message",12),H=u(l,"idx",8),ce=u(l,"onDelete",8),S=u(l,"onEdit",8),ee=u(l,"onInsert",8);it();var F=Pr(),ue=o(F),R=o(ue),B=o(R,!0);r(R);var be=x(R,2),M=o(be);{let O=$e(()=>(t(),c(()=>t().t("Insert"))));Ge(M,{placement:"top",get content(){return e(O)},children:(z,$)=>{var P=Er(),V=o(P);Nr(V,{className:"size-3.5",strokeWidth:"2"}),r(P),pe("click",P,()=>{ee()()}),d(z,P)},$$slots:{default:!0}})}var J=x(M,2);{let O=$e(()=>(t(),c(()=>t().t("Edit"))));Ge(J,{placement:"top",get content(){return e(O)},children:(z,$)=>{var P=Ir(),V=o(P);ar(V,{className:"size-3.5",strokeWidth:"2"}),r(P),pe("click",P,()=>{S()()}),d(z,P)},$$slots:{default:!0}})}var y=x(J,2);{let O=$e(()=>(t(),c(()=>t().t("Delete"))));Ge(y,{placement:"top",get content(){return e(O)},children:(z,$)=>{var P=Sr();pe("click",P,()=>{ce()()}),d(z,P)},$$slots:{default:!0}})}r(be),r(ue);var a=x(ue,2),g=o(a);{var te=O=>{var z=Mr(),$=o(z);tr($,{size:"sm"}),r(z),d(O,z)},X=O=>{var z=Fe(),$=le(z);{var P=N=>{{let Z=$e(()=>(t(),Pe(h()),c(()=>t().t("Enter {{role}} message here",{role:h().role==="user"?t().t("a user"):t().t("an assistant")}))));rr(N,{className:"w-full bg-transparent outline-hidden text-sm resize-none overflow-hidden",get placeholder(){return e(Z)},onBlur:()=>{h(h().edit=!1,!0)},get value(){return h().content},set value(ae){h(h().content=ae,!0)},$$legacy:!0})}},V=N=>{var Z=zr(),ae=o(Z);{let Q=$e(()=>`note-message-${H()}`);Qa(ae,{get id(){return e(Q)},get content(){return Pe(h()),c(()=>h().content)}})}r(Z),d(N,Z)};me($,N=>{Pe(h()),c(()=>{var Z;return((Z=h())==null?void 0:Z.edit)===!0})?N(P):N(V,!1)},!0)}d(O,z)};me(g,O=>{Pe(h()),c(()=>{var z,$;return!(((z=h())==null?void 0:z.done)??!0)&&(($=h())==null?void 0:$.content)===""})?O(te):O(X,!1)})}r(a),r(F),W(O=>ie(B,O),[()=>(t(),Pe(h()),c(()=>t().t(h().role)))]),d(U,F),lt(),m()}var Ar=f('<div class="space-y-3 pb-12"></div>');function Or(U,l){st(l,!1),ht("i18n");let t=u(l,"messages",28,()=>[]),b=u(l,"onInsert",8,de=>{});it();var m=Ar();Ot(m,5,t,jt,(de,h,H)=>{Tr(de,{get message(){return e(h)},idx:H,onInsert:()=>{var ce;b()(((ce=e(h))==null?void 0:ce.content)??"")},onEdit:()=>{t(t().map((ce,S)=>S===H?{...ce,edit:!0}:ce))},onDelete:()=>{t(t().filter((ce,S)=>S!==H))}})}),r(m),d(U,m),lt()}var jr=f('<span class="text-gray-500 text-sm"> </span>'),Wr=f('<div class="text-xs rounded-xl px-2.5 py-3 w-full markdown-prose-xs"><blockquote><div class=" line-clamp-3"> </div></blockquote></div>'),Hr=f('<button type="button"><!> <span class="block whitespace-nowrap overflow-hidden text-ellipsis leading-none pr-0.5"> </span></button>'),Rr=f('<option class="bg-gray-50 dark:bg-gray-700"> </option>'),Br=f('<select class=" bg-transparent rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden w-full text-right pr-5"></select>'),Dr=f('<div slot="menu" class="flex items-center justify-between gap-2 w-full pr-1"><div><!></div> <!></div>'),Ur=f('<div class="flex items-center mb-1.5 pt-1.5"><div class="flex items-center mr-1"><button class="p-0.5 bg-transparent transition rounded-lg"><!></button></div> <div class=" font-medium text-base flex items-center gap-1"><div> </div> <div><!></div></div></div> <div class="flex flex-col items-center flex-1 @container"><div class=" flex flex-col justify-between w-full overflow-y-auto h-full"><div class="mx-auto w-full md:px-0 h-full relative"><div class=" flex flex-col h-full"><div class=" pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 scrollbar-hidden" id="messages-container"><div class=" h-full w-full flex flex-col"><div class="flex-1 p-1"><!></div></div></div> <div class=" pb-[1rem]"><!> <!></div></div></div></div></div>',1);function Fr(U,l){st(l,!1);const t=()=>Me(ce,"$i18n",m),b=()=>Me(qt,"$models",m),[m,de]=_t();let h=u(l,"show",12,!1),H=u(l,"selectedModelId",12,"");At.use({breaks:!0,gfm:!0,renderer:{list(G,fe,ge){if(G.includes("data-checked="))return`<ul data-type="taskList">${G}</ul>`;const Re=fe?"ol":"ul",De=fe&&ge!==1?` start="${ge}"`:"";return`<${Re}${De}>${G}</${Re}>`},listitem(G,fe,ge){return fe?`<li data-type="taskItem" data-checked="${ge?"true":"false"}">${G}</li>`:`<li>${G}</li>`}}});const ce=ht("i18n");let S=u(l,"editor",8,null),ee=u(l,"editing",12,!1),F=u(l,"streaming",12,!1),ue=u(l,"stopResponseFlag",12,!1),R=u(l,"note",12,null),B=u(l,"selectedContent",12,null),be=u(l,"files",24,()=>[]),M=u(l,"messages",28,()=>[]),J=u(l,"onInsert",8,G=>{}),y=u(l,"onStop",8,()=>{}),a=u(l,"onEdited",8,()=>{});u(l,"insertNoteHandler",8,()=>{});let g=u(l,"scrollToBottomHandler",8,()=>{}),te=Y(!1),X=Y(),O="",z=Y(!1),$=Y(null);const P=`You are an expert document editor.

## Task
Based on the user's instruction, update and enhance the existing notes or selection by incorporating relevant and accurate information from the provided context in the content's primary language. Ensure all edits strictly follow the user‚Äôs intent.

## Input Structure
- Existing notes: Enclosed within <notes></notes> XML tags.
- Additional context: Enclosed within <context></context> XML tags.
- Current note selection: Enclosed within <selection></selection> XML tags.
- Editing instruction: Provided in the user message.

## Output Instructions
- If a selection is provided, edit **only** the content within <selection></selection>. Leave unselected parts unchanged.
- If no selection is provided, edit the entire notes.
- Deliver a single, rewritten version of the notes in markdown format.
- Integrate information from the context only if it directly supports the user's instruction.
- Use clear, organized markdown elements: headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, bold and italic text as appropriate.
- Focus on improving clarity, completeness, and usefulness of the notes.
- Return only the final, fully-edited markdown notes‚Äîdo not include explanations, reasoning, or XML tags.
`;let V=!0;const N=()=>{e(X)&&V&&ke(X,e(X).scrollTop=e(X).scrollHeight)},Z=()=>{e(X)&&(V=e(X).scrollHeight-e(X).scrollTop<=e(X).clientHeight+10)},ae=async()=>{var ut,Qe,Ie,Se,Te,n,s,v,w;if(H()===""){Ce.error(t().t("Please select a model."));return}const G=b().find(k=>k.id===H());if(!G){H("");return}let fe;((ut=M().at(-1))==null?void 0:ut.role)==="assistant"?fe=M().at(-1):(fe={role:"assistant",content:"",done:!1},M().push(fe),M(M())),await nt(),N(),ue(!1);let ge={json:null,html:"",md:""};O="",e(z)?O=`${P}

`:O=`You are a helpful assistant. Please answer the user's questions based on the context provided.

`,O+=`<notes>${((Se=(Ie=(Qe=R())==null?void 0:Qe.data)==null?void 0:Ie.content)==null?void 0:Se.md)??""}</notes>`+(be()&&be().length>0?`
<context>${be().map(k=>{var C,E;return`${k.name}: ${((E=(C=k==null?void 0:k.file)==null?void 0:C.data)==null?void 0:E.content)??"Could not extract content"}
`}).join("")}</context>`:"")+(B()?`
<selection>${(Te=B())==null?void 0:Te.text}</selection>`:"");const Ne=JSON.parse(JSON.stringify([{role:"system",content:`${O}`},...M()])),[Re,De]=await ia(localStorage.token,{model:G.id,stream:!0,messages:Ne.map(k=>({role:k.role,content:k.content}))},`${Yt}/api`);await nt(),N();let at="";if(Re&&Re.ok){const k=Re.body.pipeThrough(new TextDecoderStream).pipeThrough(na(`
`)).getReader();for(;;){const{value:C,done:E}=await k.read();if(E||ue()){ue()&&De.abort("User: Stop Response"),e(z)&&(ee(!1),F(!1),a()());break}try{let I=C.split(`
`);for(const K of I)if(K!=="")if(K==="data: [DONE]")e(z)&&(fe.content=`<status title="${t().t("Edited")}" done="true" />`,B()&&((n=B())!=null&&n.text)&&S()&&(S().commands.insertContentAt({from:B().from,to:B().to},ge.html||ge.md||""),B(null))),fe.done=!0,M(M());else{let we=JSON.parse(K.replace(/^data: /,"")),oe=((v=(s=we.choices[0])==null?void 0:s.delta)==null?void 0:v.content)??"";if(fe.content==""&&oe==`
`)continue;e(z)?(ee(!0),F(!0),ge.md+=oe,ge.html=At.parse(ge.md),(!B()||!((w=B())!=null&&w.text))&&(R(R().data.content.md=ge.md,!0),R(R().data.content.html=ge.html,!0),R(R().data.content.json=null,!0)),g()(),fe.content=`<status title="${t().t("Editing")}" done="false" />`,M(M())):(at+=oe,fe.content=at,M(M())),await nt()}}catch(I){}N()}}},Q=async G=>{const{content:fe,data:ge}=G;H()&&fe&&(M().push({role:"user",content:fe}),M(M()),await nt(),N(),i(te,!0),await ae(),M(M().map(Ne=>(Ne.done=!0,Ne))),i(te,!1),ue(!1))};Dt(async()=>{i(z,localStorage.getItem("noteEditEnabled")==="true"),await nt(),N()}),it();var ve=Ur(),Be=le(ve),ze=o(Be),Ee=o(ze),dt=o(Ee);da(dt,{className:"size-5",strokeWidth:"2.5"}),r(Ee),r(ze);var _e=x(ze,2),L=o(_e),Je=o(L,!0);r(L);var Ye=x(L,2),Xe=o(Ye);{let G=$e(()=>(t(),c(()=>t().t("This feature is experimental and may be modified or discontinued without notice."))));Ge(Xe,{get content(){return e(G)},position:"top",className:"inline-block",children:(fe,ge)=>{var Ne=jr(),Re=o(Ne);r(Ne),W(De=>ie(Re,`(${De??""})`),[()=>(t(),c(()=>t().t("Experimental")))]),d(fe,Ne)},$$slots:{default:!0}})}r(Ye),r(_e),r(Be);var Wt=x(Be,2),xt=o(Wt),tt=o(xt),Ht=o(tt),ct=o(Ht),Nt=o(ct),Rt=o(Nt),Ut=o(Rt);Or(Ut,{get onInsert(){return J()},get messages(){return M()},set messages(G){M(G)},$$legacy:!0}),r(Rt),r(Nt),r(ct),sa(ct,G=>i(X,G),()=>e(X));var Et=x(ct,2),bt=o(Et);{var Ft=G=>{var fe=Wr(),ge=o(fe),Ne=o(ge),Re=o(Ne,!0);r(Ne),r(ge),r(fe),W(()=>ie(Re,(Pe(B()),c(()=>{var De;return(De=B())==null?void 0:De.text})))),d(G,fe)};me(bt,G=>{B()&&G(Ft)})}var It=x(bt,2);or(It,{acceptFiles:!1,get inputLoading(){return e(te)},showFormattingToolbar:!1,onSubmit:Q,get onStop(){return y()},get chatInputElement(){return e($)},set chatInputElement(G){i($,G)},$$slots:{menu:(G,fe)=>{var ge=Dr(),Ne=o(ge),Re=o(Ne);{let at=$e(()=>(t(),c(()=>t().t("Edit"))));Ge(Re,{get content(){return e(at)},placement:"top",children:(ut,Qe)=>{var Ie=Hr(),Se=o(Ie);nr(Se,{className:"size-4",strokeWidth:"1.75"});var Te=x(Se,2),n=o(Te,!0);r(Te),r(Ie),W(s=>{Ie.disabled=F()||e(te),Le(Ie,1,`px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 ${e(z)?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 "} disabled:opacity-50 disabled:pointer-events-none`),ie(n,s)},[()=>(t(),c(()=>t().t("Edit")))]),pe("click",Ie,er(()=>{i(z,!e(z)),localStorage.setItem("noteEditEnabled",e(z)?"true":"false")})),d(ut,Ie)},$$slots:{default:!0}})}r(Ne);var De=x(Ne,2);Ge(De,{get content(){return H()},children:(at,ut)=>{var Qe=Br();W(()=>{H(),ta(()=>{b()})}),Ot(Qe,5,()=>(b(),c(()=>b().filter(Ie=>{var Se,Te;return!(((Te=(Se=Ie==null?void 0:Ie.info)==null?void 0:Se.meta)==null?void 0:Te.hidden)??!1)}))),jt,(Ie,Se)=>{var Te=Rr(),n=o(Te,!0);r(Te);var s={};W(()=>{ie(n,(e(Se),c(()=>e(Se).name))),s!==(s=(e(Se),c(()=>e(Se).id)))&&(Te.value=(Te.__value=(e(Se),c(()=>e(Se).id)))??"")}),d(Ie,Te)}),r(Qe),oa(Qe,H),d(at,Qe)},$$slots:{default:!0}}),r(ge),d(G,ge)}},$$legacy:!0}),r(Et),r(Ht),r(tt),r(xt),r(Wt),W(G=>ie(Je,G),[()=>(t(),c(()=>t().t("Chat")))]),pe("click",Ee,()=>{h(!h())}),pe("scroll",ct,Z),d(U,ve),lt(),de()}var Lr=f('<div class=" px-3.5 py-2.5 h-screen max-h-dvh flex flex-col"><!></div>'),Jr=f('<div class=" absolute -left-1.5 -right-1.5 -top-0 -bottom-0 z-20 cursor-col-resize bg-transparent"></div>'),Yr=f('<div class="flex max-h-full min-h-full"><div class="w-full pt-2 bg-white dark:shadow-lg dark:bg-gray-850 z-40 pointer-events-auto overflow-y-auto scrollbar-hidden flex flex-col px-2"><!></div></div>'),qr=f("<!> <!>",1);function Vr(U,l){st(l,!1);let t=u(l,"show",12,!1),b=u(l,"pane",12,null),m=u(l,"containerId",8,"note-container"),de,h=Y(!1),H=Y(0);const ce=async R=>{R.matches?i(h,!0):(i(h,!1),b(null))};Dt(()=>{de=window.matchMedia("(min-width: 1000px)"),de.addEventListener("change",ce),ce(de);const R=document.getElementById(m());i(H,Math.floor(400/R.clientWidth*100)),new ResizeObserver(be=>{for(let M of be){const y=400/M.contentRect.width*100;i(H,Math.floor(y)),t()&&b()&&b().isExpanded()&&b().getSize()<e(H)&&b().resize(e(H))}}).observe(R)}),ra(()=>{de.removeEventListener("change",ce)}),it();var S=Fe(),ee=le(S);{var F=R=>{var B=Fe(),be=le(B);{var M=J=>{sr(J,{get show(){return t()},onClose:()=>{t(!1)},children:(y,a)=>{var g=Lr(),te=o(g);Ct(te,l,"default",{},null),r(g),d(y,g)},$$slots:{default:!0}})};me(be,J=>{t()&&J(M)})}d(R,B)},ue=R=>{var B=Fe(),be=le(B);{var M=J=>{var y=qr(),a=le(y);Ja(a,{class:"relative flex items-center justify-center group border-l border-gray-50 dark:border-gray-850/30 hover:border-gray-200 dark:hover:border-gray-800  transition z-20",id:"controls-resizer",children:(te,X)=>{var O=Jr();d(te,O)},$$slots:{default:!0}});var g=x(a,2);{let te=$e(()=>(e(H),c(()=>Math.max(20,e(H)))));la(g,{get defaultSize(){return e(te)},get minSize(){return e(H)},onCollapse:()=>{t(!1)},collapsible:!0,class:" z-10 ",get pane(){return b()},set pane(X){b(X)},children:(X,O)=>{var z=Fe(),$=le(z);{var P=V=>{var N=Yr(),Z=o(N),ae=o(Z);Ct(ae,l,"default",{},null),r(Z),r(N),d(V,N)};me($,V=>{t()&&V(P)})}d(X,z)},$$slots:{default:!0},$$legacy:!0})}d(J,y)};me(be,J=>{t()&&J(M)},!0)}d(R,B)};me(ee,R=>{e(h)?R(ue,!1):R(F)})}d(U,S),lt()}var Gr=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"></path></svg>');function Xr(U,l){let t=u(l,"className",8,"size-4"),b=u(l,"strokeWidth",8,"1.5");var m=Gr();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var Zr=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"></path></svg>');function Qr(U,l){let t=u(l,"className",8,"size-4"),b=u(l,"strokeWidth",8,"1.5");var m=Zr();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var Kr=f('<button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button>',1),eo=f("<!> <!>",1);function to(U,l){st(l,!1);const t=()=>Me(de,"$i18n",b),[b,m]=_t(),de=ht("i18n");let h=u(l,"show",12,!1),H=u(l,"className",8,"max-w-[170px]"),ce=u(l,"onRecord",8,()=>{}),S=u(l,"onCaptureAudio",8,()=>{}),ee=u(l,"onUpload",8,()=>{});const F=Na();it(),ua(U,{onOpenChange:ue=>{F("change",ue)},get open(){return h()},set open(ue){h(ue)},children:(ue,R)=>{var B=eo(),be=le(B);va(be,{children:(J,y)=>{var a=Fe(),g=le(a);Ct(g,l,"default",{},null),d(J,a)},$$slots:{default:!0}});var M=x(be,2);Ct(M,l,"content",{},J=>{fa(J,{get class(){return`w-full ${H()??""} text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary`},sideOffset:8,side:"bottom",align:"start",transition:y=>ma(y,{duration:100}),children:(y,a)=>{var g=Kr(),te=le(g),X=o(te),O=o(X);Xr(O,{className:"size-4",strokeWidth:"2"}),r(X);var z=x(X,2),$=o(z,!0);r(z),r(te);var P=x(te,2),V=o(P),N=o(V);Qr(N,{className:"size-4",strokeWidth:"2"}),r(V);var Z=x(V,2),ae=o(Z,!0);r(Z),r(P);var Q=x(P,2),ve=o(Q),Be=o(ve);br(Be,{className:"size-4",strokeWidth:"2"}),r(ve);var ze=x(ve,2),Ee=o(ze,!0);r(ze),r(Q),W((dt,_e,L)=>{ie($,dt),ie(ae,_e),ie(Ee,L)},[()=>(t(),c(()=>t().t("Record"))),()=>(t(),c(()=>t().t("Capture Audio"))),()=>(t(),c(()=>t().t("Upload Audio")))]),pe("click",te,async()=>{ce()(),h(!1)}),pe("click",P,()=>{S()(),h(!1)}),pe("click",Q,()=>{ee()(),h(!1)}),d(y,g)},$$slots:{default:!0}})}),d(ue,B)},$$slots:{default:!0},$$legacy:!0}),lt(),m()}var ao=mt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z" clip-rule="evenodd"></path></svg>');function ro(U,l){let t=u(l,"className",8,"w-4 h-4");u(l,"strokeWidth",8,"1.5");var b=ao();W(()=>Le(b,0,pt(t()))),d(U,b)}var oo=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"></path></svg>');function no(U,l){let t=u(l,"className",8,"size-4"),b=u(l,"strokeWidth",8,"1.5");var m=oo();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var so=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"></path></svg>');function lo(U,l){let t=u(l,"className",8,"size-4"),b=u(l,"strokeWidth",8,"1.5");var m=so();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var io=f('<button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button>',1),co=f("<!> <!>",1);function uo(U,l){st(l,!1);const t=()=>Me(de,"$i18n",b),[b,m]=_t(),de=ht("i18n");let h=u(l,"show",12,!1),H=u(l,"className",8,"max-w-[170px]"),ce=u(l,"onEdit",8,()=>{}),S=u(l,"onChat",8,()=>{}),ee=u(l,"onChange",8,()=>{});it(),ua(U,{get onOpenChange(){return ee()},get open(){return h()},set open(F){h(F)},children:(F,ue)=>{var R=co(),B=le(R);va(B,{children:(M,J)=>{var y=Fe(),a=le(y);Ct(a,l,"default",{},null),d(M,y)},$$slots:{default:!0}});var be=x(B,2);Ct(be,l,"content",{},M=>{fa(M,{get class(){return`w-full ${H()??""} text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary`},sideOffset:8,side:"bottom",align:"end",transition:J=>ma(J,{duration:100}),children:(J,y)=>{var a=io(),g=le(a),te=o(g),X=o(te);ga(X,{className:"size-4",strokeWidth:"2"}),r(te);var O=x(te,2),z=o(O,!0);r(O),r(g);var $=x(g,2),P=o($),V=o(P);ca(V,{className:"size-4",strokeWidth:"2"}),r(P);var N=x(P,2),Z=o(N,!0);r(N),r($),W((ae,Q)=>{ie(z,ae),ie(Z,Q)},[()=>(t(),c(()=>t().t("Enhance"))),()=>(t(),c(()=>t().t("Chat")))]),pe("click",g,async()=>{ce()(),h(!1)}),pe("click",$,()=>{S()(),h(!1)}),d(J,a)},$$slots:{default:!0}})}),d(F,R)},$$slots:{default:!0},$$legacy:!0}),lt(),m()}var vo=mt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"></path></svg>');function fo(U,l){let t=u(l,"className",8,"w-4 h-4"),b=u(l,"strokeWidth",8,"1.5");var m=vo();W(()=>{gt(m,"stroke-width",b()),Le(m,0,pt(t()))}),d(U,m)}var mo=f('<div class=" text-sm text-gray-500"> <span class="  font-semibold"> </span>.</div>'),go=f('<div class=" absolute top-0 bottom-0 left-0 right-0 flex"><div class="m-auto"><!></div></div>'),po=f('<button id="sidebar-toggle-button" class=" cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-"><div class=" self-center p-1.5"><!></div></button>'),ho=f("<div><!></div>"),_o=f('<button class=" self-center dark:hover:text-white transition" id="generate-title-button"><!></button>'),xo=f('<div class="flex self-center items-center space-x-1.5 z-10 translate-y-[0.5px] -translate-x-[0.5px] pl-2"><!></div>'),bo=f('<div><div class="flex items-center gap-0.5 self-center min-w-fit" dir="ltr"><button class="self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"><!></button> <button class="self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"><!></button></div></div>'),wo=f('<button class="p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"><!></button>'),yo=f('<button class="p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"><!></button>'),ko=f("<!> <!> <!>",1),$o=f('<div class="p-1 bg-transparent hover:bg-white/5 transition rounded-lg"><!></div>'),Co=f("<span> </span>"),No=f("<span> </span>"),Eo=f("<span> </span>"),Io=f("<span> </span>"),So=f('<button class=" flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"><span> </span></button>'),Mo=f("<div> </div>"),zo=f('<div class="flex items-center gap-1 px-1 min-w-fit"><div> </div> <div> </div></div>'),Po=f("<div></div>"),To=f('<div><div class="shrink-0 w-full flex justify-between items-center px-3.5 mb-1.5"><div class="w-full flex items-center"><!> <input class="w-full text-2xl font-medium bg-transparent outline-hidden" type="text" required/> <!> <div class="flex items-center gap-0.5 translate-x-1"><!> <!></div></div></div> <div class="  px-2.5"><div class=" flex w-full bg-transparent overflow-x-auto scrollbar-none"><div class="flex gap-0.5 items-center text-xs font-medium text-gray-500 dark:text-gray-500 w-fit"><button class=" flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"><!></button> <!> <!></div></div></div> <div class=" flex-1 w-full h-full overflow-auto px-3.5 relative" id="note-content-container"><!> <!></div></div>'),Ao=f('<div class="flex-1 w-full"><!></div>'),Oo=f('<button class="p-2 flex justify-center items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full transition shrink-0" type="button"><!></button>'),jo=f('<div class="cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"><!></div>'),Wo=f('<div class="cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"><!></div>'),Ho=f('<div class="cursor-pointer flex gap-0.5 rounded-full border border-gray-50 dark:border-gray-850/30 dark:bg-gray-850 transition shadow-xl"><!></div> <!>',1),Ro=f('<div class="relative flex-1 w-full h-full flex justify-center pt-[11px]" id="note-editor"><!></div> <div class="absolute z-50 bottom-0 right-0 p-3.5 flex select-none"><div class="flex flex-col gap-2 justify-end"><!></div></div>',1),Bo=f("<!> <!>",1),Do=f("<!> <!> <!> <!>",1);function Uo(U,l){st(l,!1);const t=()=>Me(be,"$i18n",F),b=()=>Me(Pa,"$socket",F),m=()=>Me(qt,"$models",F),de=()=>Me(Ta,"$settings",F),h=()=>Me(Aa,"$config",F),H=()=>Me(Oa,"$WEBUI_NAME",F),ce=()=>Me(ja,"$mobile",F),S=()=>Me(Jt,"$showSidebar",F),ee=()=>Me(Wa,"$user",F),[F,ue]=_t(),R=Y(),{saveAs:B}=Ua,be=ht("i18n");ye.extend(Fa),ye.extend(La),ye.extend(Ha);async function M(n){for(const s of n)try{ye.locale(s);break}catch(v){`${s}`}}let J=u(l,"id",8,null),y=Y(null),a=Y(null),g=Y([]),te=Y([]),X=Y(0),O=Y(0),z=Y(null),$=Y(null),P=Y(!1),V=Y(!1),N=Y(!1),Z=Y("chat"),ae=Y(null),Q=Y(!1),ve=Y(!1),Be=Y(!1),ze=Y(!1),Ee=Y(!1),dt=Y(!1),_e=Y(!1),L=Y(!1),Je=Y(!1),Ye=Y(!1),Xe=Y(null);const Wt=async()=>{var s,v,w;i(_e,!0);const n=await ir(localStorage.token,J()).catch(k=>(Ce.error(`${k}`),null));if(i(te,[]),n)i(a,n),i(g,n.data.files||[]),(s=e(a))!=null&&s.write_access&&((v=b())==null||v.emit("join-note",{note_id:J(),auth:{token:localStorage.token}}),(w=b())==null||w.on("note-events",De));else{Zt("/");return}i(_e,!1)};let xt=null;const tt=()=>{xt&&clearTimeout(xt),xt=setTimeout(async()=>{var n,s;await cr(localStorage.token,J(),{title:((n=e(a))==null?void 0:n.title)===""?t().t("Untitled"):e(a).title,data:{files:e(g)},access_control:(s=e(a))==null?void 0:s.access_control}).catch(v=>{Ce.error(`${v}`)})},200)};function Ht(n,s){return JSON.stringify(n)===JSON.stringify(s)}function ct(n){var w;const s={json:n.data.content.json,html:n.data.content.html,md:n.data.content.md},v=(w=n.data.versions)==null?void 0:w.at(-1);return!v||!Ht(v,s)?(n.data.versions=(n.data.versions??[]).concat(s),!0):!1}const Nt=async()=>{e(y)&&e(y).commands.setContent(e(a).data.content.html)},Rt=async()=>{var k,C;const s=`### Task:
Generate a concise, 3-5 word title with an emoji summarizing the content in the content's primary language.
### Guidelines:
- The title should clearly represent the main theme or subject of the content.
- Use emojis that enhance understanding of the topic, but avoid quotation marks or special formatting.
- Write the title in the content's primary language.
- Prioritize accuracy over excessive creativity; keep it clear and simple.
- Your entire response must consist solely of the JSON object, without any introductory or concluding text.
- The output must be a single, raw JSON object, without any markdown code fences or other encapsulating text.
- Ensure no conversational text, affirmations, or explanations precede or follow the raw JSON output, as this will cause direct parsing failure.
### Output:
JSON format: { "title": "your concise title here" }
### Examples:
- { "title": "üìâ Stock Market Trends" },
- { "title": "üç™ Perfect Chocolate Chip Recipe" },
- { "title": "Evolution of Music Streaming" },
- { "title": "Remote Work Productivity Tips" },
- { "title": "Artificial Intelligence in Healthcare" },
- { "title": "üéÆ Video Game Development Insights" }
### Content:
<content>
${e(a).data.content.md}
</content>`,v=JSON.parse(JSON.stringify(e(a).title));ke(a,e(a).title=""),i(Ee,!0);const w=await Ga(localStorage.token,{model:e($),stream:!1,messages:[{role:"user",content:s}]},`${Yt}/api`);if(w){const E=((C=(k=w==null?void 0:w.choices[0])==null?void 0:k.message)==null?void 0:C.content)??"";try{const I=E.indexOf("{"),K=E.lastIndexOf("}");if(I!==-1&&K!==-1){const we=E.substring(I,K+1),oe=JSON.parse(we);oe&&oe.title&&ke(a,e(a).title=oe.title.trim())}}catch(I){Ce.error(t().t("Failed to generate title"))}}e(a).title||ke(a,e(a).title=v),i(Ee,!1),await nt(),tt()};async function Ut(){if(e($)===""){Ce.error(t().t("Please select a model."));return}const n=m().filter(s=>{var v,w;return s.id===e($)&&!(((w=(v=s==null?void 0:s.info)==null?void 0:v.meta)==null?void 0:w.hidden)??!1)}).find(s=>s.id===e($));if(!n){i($,"");return}i(L,!0),await Ne(n),i(L,!1),Nt(),i(z,null)}const Et=async()=>{i(Ye,!0),e(Ye)},bt=async n=>{var w,k,C,E,I,K,we;const s=Kt(),v={type:"file",file:"",id:null,url:"",name:n.name,collection_name:"",status:"uploading",size:n.size,error:"",itemId:s};if(v.size==0)return Ce.error(t().t("You cannot upload an empty file.")),null;i(g,[...e(g),v]),i(Z,"settings"),e(N)||i(N,!0);try{let oe=null;(n.type.startsWith("audio/")||n.type.startsWith("video/"))&&((C=(k=(w=de())==null?void 0:w.audio)==null?void 0:k.stt)!=null&&C.language)&&(oe={language:(K=(I=(E=de())==null?void 0:E.audio)==null?void 0:I.stt)==null?void 0:K.language});const j=await qa(localStorage.token,n,oe);j?(j.error&&(console.warn("File upload warning:",j.error),Ce.warning(j.error)),v.status="uploaded",v.file=await Va(localStorage.token,j.id).catch(q=>(Ce.error(`${q}`),null)),v.id=j.id,v.collection_name=((we=j==null?void 0:j.meta)==null?void 0:we.collection_name)||(j==null?void 0:j.collection_name),v.url=`${j.id}`,i(g,e(g))):i(g,e(g).filter(q=>(q==null?void 0:q.itemId)!==s))}catch(oe){Ce.error(`${oe}`),i(g,e(g).filter(j=>(j==null?void 0:j.itemId)!==s))}return e(g).length>0?ke(a,e(a).data.files=e(g)):ke(a,e(a).data.files=null),ke(y,e(y).storage.files=e(g)),tt(),v},Ft=async(n,s={},v={})=>{var K,we,oe,j,q,rt;const w=(s==null?void 0:s.imageCompression)??!1,k=((we=(K=v==null?void 0:v.file)==null?void 0:K.image_compression)==null?void 0:we.width)??null,C=((j=(oe=v==null?void 0:v.file)==null?void 0:oe.image_compression)==null?void 0:j.height)??null;if(!w&&!k&&!C)return n;let E=null,I=null;return w&&(E=((q=s==null?void 0:s.imageCompressionSize)==null?void 0:q.width)??null,I=((rt=s==null?void 0:s.imageCompressionSize)==null?void 0:rt.height)??null),k&&(E===null||E>k)&&(E=k),C&&(I===null||I>C)&&(I=C),E||I?await Ba(n,E,I):n},It=async n=>{var s,v,w,k,C,E,I,K;if(n.name,n.type,n.size,n.name.split(".").at(-1),(((v=(s=h())==null?void 0:s.file)==null?void 0:v.max_size)??null)!==null&&n.size>(((k=(w=h())==null?void 0:w.file)==null?void 0:k.max_size)??0)*1024*1024){n.size,(((E=(C=h())==null?void 0:C.file)==null?void 0:E.max_size)??0)*1024*1024,Ce.error(t().t("File size should not exceed {{maxSize}} MB.",{maxSize:(K=(I=h())==null?void 0:I.file)==null?void 0:K.max_size}));return}return n.type.startsWith("image/")?await new Promise(async(oe,j)=>{let q=new FileReader;q.onload=async rt=>{try{let ot=rt.target.result;ot=await Ft(ot,de(),h());const Ke={id:Kt(),type:"image",url:`${ot}`};i(g,[...e(g),Ke]),ke(a,e(a).data.files=e(g)),ke(y,e(y).storage.files=e(g)),tt(),oe(Ke)}catch(ot){j(ot)}},q.readAsDataURL(n.type==="image/heic"?await Ra(n):n)}):await bt(n)},G=async n=>{if(n==="txt"){const s=new Blob([e(a).data.content.md],{type:"text/plain"});B(s,`${e(a).title}.txt`)}else if(n==="md"){const s=new Blob([e(a).data.content.md],{type:"text/markdown"});B(s,`${e(a).title}.md`)}else if(n==="pdf")try{await Xa(e(a))}catch(s){Ce.error(`${s}`)}},fe=async n=>{await dr(localStorage.token,n).catch(v=>(Ce.error(`${v}`),null))?(Ce.success(t().t("Note deleted successfully")),Zt("/notes")):Ce.error(t().t("Failed to delete note"))},ge=()=>{const n=document.getElementById("note-content-container");n&&(n.scrollTop=n==null?void 0:n.scrollHeight)},Ne=async n=>{i(Ye,!1);let s={json:null,html:"",md:""};const v=`Enhance existing notes using additional context provided from audio transcription or uploaded file content in the content's primary language. Your task is to make the notes more useful and comprehensive by incorporating relevant information from the provided context.

Input will be provided within <notes> and <context> XML tags, providing a structure for the existing notes and context respectively.

# Output Format

Provide the enhanced notes in markdown format. Use markdown syntax for headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, and emphasis to improve clarity and presentation. Ensure that all integrated content from the context is accurately reflected. Return only the markdown formatted note.
`,[w,k]=await ia(localStorage.token,{model:n.id,stream:!0,messages:[{role:"system",content:v},{role:"user",content:`<notes>${e(a).data.content.md}</notes>`+(e(g)&&e(g).length>0?`
<context>${e(g).map(C=>{var E,I;return`${C.name}: ${((I=(E=C==null?void 0:C.file)==null?void 0:E.data)==null?void 0:I.content)??"Could not extract content"}
`}).join("")}</context>`:"")}]},`${Yt}/api`);if(await nt(),i(Je,!0),w&&w.ok){const C=w.body.pipeThrough(new TextDecoderStream).pipeThrough(na(`
`)).getReader();for(;;){const{value:E,done:I}=await C.read();if(I||e(Ye)){e(Ye)&&k.abort("User: Stop Response"),i(L,!1),i(Je,!1);break}try{let K=E.split(`
`);for(const we of K)if(we!==""&&we!=="data: [DONE]"){let oe=JSON.parse(we.replace(/^data: /,""));if(oe.choices&&oe.choices.length>0){const j=oe.choices[0];j.delta&&j.delta.content&&(s.md+=j.delta.content,s.html=At.parse(s.md),ke(a,e(a).data.content.md=s.md),ke(a,e(a).data.content.html=s.html),ke(a,e(a).data.content.json=null),ge())}}}catch(K){}}}i(Je,!1)},Re=n=>{var s;ct(e(a)),(s=e(Xe))==null||s.insertContent(n)},De=async n=>{if(n.id===J()){n.access_control&&n.access_control!==e(a).access_control&&ke(a,e(a).access_control=n.access_control),n.data&&n.data.files&&(i(g,n.data.files),ke(a,e(a).data.files=e(g))),n.title&&n.title&&ke(a,e(a).title=n.title),ke(y,e(y).storage.files=e(g)),await nt();for(const s of e(g))if(s.type==="image"||((s==null?void 0:s.content_type)??"").startsWith("image/")){const v=new CustomEvent("data",{files:e(g)}),w=document.getElementById(`image:${s.id}`);w&&w.dispatchEvent(v)}}};Dt(async()=>{var n,s,v,w,k;await nt(),(n=de())!=null&&n.models?i($,(s=de())==null?void 0:s.models[0]):(v=h())!=null&&v.default_models?i($,(w=h())==null?void 0:w.default_models.split(",")[0]):i($,""),e($)&&(m().filter(E=>{var I,K;return E.id===e($)&&!(((K=(I=E==null?void 0:E.info)==null?void 0:I.meta)==null?void 0:K.hidden)??!1)}).find(E=>E.id===e($))||i($,"")),e($)||i($,((k=m().filter(C=>{var E,I;return!(((I=(E=C==null?void 0:C.info)==null?void 0:E.meta)==null?void 0:I.hidden)??!1)}).at(0))==null?void 0:k.id)||""),document.getElementById("note-editor")}),ra(()=>{var n;(n=b())==null||n.off("note-events",De),document.getElementById("note-editor")}),Lt(()=>t(),()=>{M(t().languages)}),Lt(()=>(e(a),At),()=>{var n,s,v,w,k,C;i(R,((v=(s=(n=e(a))==null?void 0:n.data)==null?void 0:s.content)==null?void 0:v.html)||((C=(k=(w=e(a))==null?void 0:w.data)==null?void 0:k.content)!=null&&C.md?At.parse(e(a).data.content.md):""))}),Lt(()=>Pe(J()),()=>{J()&&Wt()}),Ea(),it();var at=Do();Ia(n=>{W(s=>Sa.title=`
		${s??""}
	`,[()=>(e(a),H(),c(()=>{var s,v,w,k;return(s=e(a))!=null&&s.title?`${((v=e(a))==null?void 0:v.title.length)>30?`${(w=e(a))==null?void 0:w.title.slice(0,30)}...`:(k=e(a))==null?void 0:k.title} ‚Ä¢ ${H()}`:`${H()}`}))])});var ut=le(at);{var Qe=n=>{lr(n,{accessRoles:["read","write"],onChange:()=>{tt()},get show(){return e(ve)},set show(s){i(ve,s)},get accessControl(){return e(a).access_control},set accessControl(s){ke(a,e(a).access_control=s)},$$legacy:!0})};me(ut,n=>{e(a)&&n(Qe)})}var Ie=x(ut,2);gr(Ie,{get show(){return e(dt)}});var Se=x(Ie,2);{let n=$e(()=>(t(),c(()=>t().t("Delete note?"))));mr(Se,{get title(){return e(n)},get show(){return e(Q)},set show(s){i(Q,s)},$$events:{confirm:()=>{fe(e(a).id),i(Q,!1)}},children:(s,v)=>{var w=mo(),k=o(w),C=x(k),E=o(C,!0);r(C),aa(),r(w),W(I=>{ie(k,`${I??""} `),ie(E,(e(a),c(()=>e(a).title)))},[()=>(t(),c(()=>t().t("This will delete")))]),d(s,w)},$$slots:{default:!0},$$legacy:!0})}var Te=x(Se,2);Ya(Te,{direction:"horizontal",class:"w-full h-full",children:(n,s)=>{var v=Bo(),w=le(v);la(w,{defaultSize:70,minSize:30,class:"h-full flex flex-col w-full relative",children:(C,E)=>{var I=Ro(),K=le(I),we=o(K);{var oe=Ue=>{var Ae=go(),qe=o(Ae),Oe=o(qe);ea(Oe,{className:"size-5"}),r(qe),r(Ae),d(Ue,Ae)},j=Ue=>{var Ae=To(),qe=o(Ae),Oe=o(qe),Bt=o(Oe);{var je=p=>{var _=ho(),re=o(_);{let xe=$e(()=>(S(),t(),c(()=>S()?t().t("Close Sidebar"):t().t("Open Sidebar"))));Ge(re,{get content(){return e(xe)},children:(T,ne)=>{var A=po(),D=o(A),se=o(D);_r(se,{}),r(D),r(A),pe("click",A,()=>{Jt.set(!S())}),d(T,A)},$$slots:{default:!0}})}r(_),W(()=>Le(_,1,`${S()?"md:hidden pl-0.5":""} flex flex-none items-center pr-1 -translate-x-1`)),d(p,_)};me(Bt,p=>{ce()&&p(je)})}var We=x(Bt,2);Ma(We);var Ze=x(We,2);{var yt=p=>{var _=xo(),re=o(_);{let xe=$e(()=>(t(),c(()=>t().t("Generate"))));Ge(re,{get content(){return e(xe)},children:(T,ne)=>{var A=_o(),D=o(A);ga(D,{strokeWidth:"2"}),r(A),W(()=>A.disabled=(e(a),ee(),e(Ee),c(()=>{var se,he,He;return((se=e(a))==null?void 0:se.user_id)!==((he=ee())==null?void 0:he.id)&&((He=ee())==null?void 0:He.role)!=="admin"||e(Ee)}))),pe("mouseenter",A,()=>{i(Be,!0)}),pe("click",A,se=>{se.preventDefault(),se.stopImmediatePropagation(),se.stopPropagation(),Rt(),i(ze,!1)}),d(T,A)},$$slots:{default:!0}})}r(_),d(p,_)};me(Ze,p=>{e(ze)&&!e(Ee)&&p(yt)})}var St=x(Ze,2),vt=o(St);{var Mt=p=>{var _=ko(),re=le(_);{var xe=A=>{var D=bo(),se=o(D),he=o(se),He=o(he);no(He,{className:"size-4"}),r(he);var Ve=x(he,2),Pt=o(Ve);lo(Pt,{className:"size-4"}),r(Ve),r(se),r(D),W((Tt,Ca)=>{he.disabled=Tt,Ve.disabled=Ca,se.dir=se.dir},[()=>(e(y),c(()=>!e(y).can().undo())),()=>(e(y),c(()=>!e(y).can().redo()))]),pe("click",he,()=>{e(y).chain().focus().undo().run()}),pe("click",Ve,()=>{e(y).chain().focus().redo().run()}),d(A,D)};me(re,A=>{e(y)&&A(xe)})}var T=x(re,2);{let A=$e(()=>(t(),c(()=>t().t("Chat"))));Ge(T,{placement:"top",get content(){return e(A)},className:"cursor-pointer",children:(D,se)=>{var he=wo(),He=o(he);ca(He,{}),r(he),pe("click",he,()=>{e(N)&&e(Z)==="chat"?i(N,!1):(e(N)||i(N,!0),i(Z,"chat"))}),d(D,he)},$$slots:{default:!0}})}var ne=x(T,2);{let A=$e(()=>(t(),c(()=>t().t("Controls"))));Ge(ne,{placement:"top",get content(){return e(A)},className:"cursor-pointer",children:(D,se)=>{var he=yo(),He=o(he);fo(He,{}),r(he),pe("click",he,()=>{e(N)&&e(Z)==="settings"?i(N,!1):(e(N)||i(N,!0),i(Z,"settings"))}),d(D,he)},$$slots:{default:!0}})}d(p,_)};me(vt,p=>{e(a),c(()=>{var _;return(_=e(a))==null?void 0:_.write_access})&&p(Mt)})}var ft=x(vt,2);pr(ft,{onDownload:p=>{G(p)},onCopyLink:async()=>{const p=window.location.origin;await Qt(`${p}/notes/${e(a).id}`)?Ce.success(t().t("Copied link to clipboard")):Ce.error(t().t("Failed to copy link"))},onCopyToClipboard:async()=>{await Qt(e(a).data.content.md,e(a).data.content.html,!0).catch(_=>(Ce.error(`${_}`),null))&&Ce.success(t().t("Copied to clipboard"))},onDelete:()=>{i(Q,!0)},children:(p,_)=>{var re=$o(),xe=o(re);hr(xe,{className:"size-5"}),r(re),d(p,re)},$$slots:{default:!0}}),r(St),r(Oe),r(qe);var et=x(qe,2),kt=o(et),$t=o(kt),zt=o($t),pa=o(zt);{var ha=p=>{var _=Co(),re=o(_,!0);r(_),W(xe=>ie(re,xe),[()=>(Pe(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("[Today at] h:mm A"))))]),d(p,_)},_a=p=>{var _=Fe(),re=le(_);{var xe=ne=>{var A=No(),D=o(A,!0);r(A),W(se=>ie(D,se),[()=>(Pe(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("[Yesterday at] h:mm A"))))]),d(ne,A)},T=ne=>{var A=Fe(),D=le(A);{var se=He=>{var Ve=Eo(),Pt=o(Ve,!0);r(Ve),W(Tt=>ie(Pt,Tt),[()=>(Pe(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("[Last] dddd [at] h:mm A"))))]),d(He,Ve)},he=He=>{var Ve=Io(),Pt=o(Ve,!0);r(Ve),W(Tt=>ie(Pt,Tt),[()=>(Pe(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("DD/MM/YYYY"))))]),d(He,Ve)};me(D,He=>{Pe(ye),e(a),c(()=>ye(e(a).created_at/1e6).isSame(ye().subtract(1,"week"),"week"))?He(se):He(he,!1)},!0)}d(ne,A)};me(re,ne=>{Pe(ye),e(a),c(()=>ye(e(a).created_at/1e6).isSame(ye().subtract(1,"day"),"day"))?ne(xe):ne(T,!1)},!0)}d(p,_)};me(pa,p=>{Pe(ye),e(a),c(()=>ye(e(a).created_at/1e6).isSame(ye(),"day"))?p(ha):p(_a,!1)})}r(zt);var Vt=x(zt,2);{var xa=p=>{var _=So(),re=o(_),xe=o(re,!0);r(re),r(_),W(T=>{_.disabled=(e(a),ee(),c(()=>{var ne,A,D;return((ne=e(a))==null?void 0:ne.user_id)!==((A=ee())==null?void 0:A.id)&&((D=ee())==null?void 0:D.role)!=="admin"})),ie(xe,T)},[()=>(e(a),t(),c(()=>{var T;return(T=e(a))!=null&&T.access_control?t().t("Private"):t().t("Everyone")}))]),pe("click",_,()=>{i(ve,!0)}),d(p,_)},ba=p=>{var _=Mo(),re=o(_,!0);r(_),W(xe=>ie(re,xe),[()=>(t(),c(()=>t().t("Read-Only Access")))]),d(p,_)};me(Vt,p=>{e(a),c(()=>{var _;return(_=e(a))==null?void 0:_.write_access})?p(xa):p(ba,!1)})}var wa=x(Vt,2);{var ya=p=>{var _=zo(),re=o(_),xe=o(re,!0);r(re);var T=x(re,2),ne=o(T,!0);r(T),r(_),W((A,D)=>{ie(xe,A),ie(ne,D)},[()=>(t(),e(X),c(()=>t().t("{{COUNT}} words",{COUNT:e(X)}))),()=>(t(),e(O),c(()=>t().t("{{COUNT}} characters",{COUNT:e(O)})))]),d(p,_)};me(wa,p=>{e(y)&&p(ya)})}r($t),r(kt),r(et);var Gt=x(et,2),Xt=o(Gt);{var ka=p=>{var _=Po();W(()=>Le(_,1,`w-full h-full fixed top-0 left-0 ${e(Je)?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10"} flex items-center justify-center z-10 cursor-not-allowed`)),d(p,_)};me(Xt,p=>{e(L)&&p(ka)})}var $a=x(Xt,2);{let p=$e(()=>(e(a),c(()=>`note-${e(a).id}`))),_=$e(()=>(e(a),c(()=>`note:${e(a).id}`))),re=$e(()=>(t(),c(()=>t().t("Write something...")))),xe=$e(()=>(e(z),e(L),e(a),c(()=>{var T;return e(z)===null&&!e(L)&&((T=e(a))==null?void 0:T.write_access)})));sa(ur($a,{get id(){return e(p)},className:"input-prose-sm px-0.5 h-[calc(100%-2rem)]",json:!0,get html(){return e(R)},get documentId(){return e(_)},collaboration:!0,get socket(){return b()},get user(){return ee()},dragHandle:!0,link:!0,image:!0,get files(){return e(g)},get placeholder(){return e(re)},get editable(){return e(xe)},onSelectionUpdate:({editor:T})=>{const{from:ne,to:A}=T.state.selection,D=T.state.doc.textBetween(ne,A," ");D.length===0?i(ae,null):i(ae,{text:D,from:ne,to:A})},onChange:T=>{ke(a,e(a).data.content.html=T.html),ke(a,e(a).data.content.md=T.md),e(y)&&(i(X,e(y).storage.characterCount.words()),i(O,e(y).storage.characterCount.characters()))},fileHandler:!0,onFileDrop:(T,ne,A)=>{ne.forEach(async D=>{const se=await It(D).catch(he=>null);se.type==="image"&&T.chain().insertContentAt(A,{type:"image",attrs:{src:`data://${se.id}`}}).focus().run()})},onFilePaste:()=>{},get editor(){return e(y)},set editor(T){i(y,T)},get value(){return e(a).data.content.json},set value(T){ke(a,e(a).data.content.json=T)},$$events:{paste:async T=>{var A;T=T.detail.event||T;const ne=T.clipboardData||window.clipboardData;if(ne&&ne.items){ne.items;for(const D of ne.items)if(D.type.indexOf("image")!==-1){const se=D.getAsFile(),he=await It(se);e(y)&&((A=e(y))==null||A.chain().insertContentAt(e(y).state.selection.$anchor.pos,{type:"image",attrs:{src:`data://${he.id}`}}).focus().run())}else if((D==null?void 0:D.kind)==="file"){const se=D.getAsFile();await It(se),T.preventDefault()}}}},$$legacy:!0}),T=>i(Xe,T),()=>e(Xe))}r(Gt),r(Ae),W(p=>{Le(Ae,1,` w-full flex flex-col ${e(_e)?"opacity-20":""}`),gt(We,"placeholder",p),We.disabled=(e(a),ee(),e(Ee),c(()=>{var _,re,xe;return((_=e(a))==null?void 0:_.user_id)!==((re=ee())==null?void 0:re.id)&&((xe=ee())==null?void 0:xe.role)!=="admin"||e(Ee)}))},[()=>(e(Ee),t(),c(()=>e(Ee)?t().t("Generating..."):t().t("Title")))]),Da(We,()=>e(a).title,p=>ke(a,e(a).title=p)),pe("focus",We,()=>{i(ze,!0)}),pe("blur",We,p=>{if(e(Be)){i(Be,!1);return}i(ze,!1),tt()}),pe("wheel",kt,p=>{p.deltaY!==0&&(p.preventDefault(),p.currentTarget.scrollLeft+=p.deltaY)}),d(Ue,Ae)};me(we,Ue=>{e(_e)?Ue(oe):Ue(j,!1)})}r(K);var q=x(K,2),rt=o(q),ot=o(rt);{var wt=Ue=>{var Ae=Ao(),qe=o(Ae);vr(qe,{className:"p-1 w-full max-w-full",transcribe:!1,get displayMedia(){return e(V)},echoCancellation:!1,noiseSuppression:!1,onCancel:()=>{i(P,!1),i(V,!1)},onConfirm:Oe=>{Oe!=null&&Oe.file&&bt(Oe==null?void 0:Oe.file),i(P,!1),i(V,!1)},get recording(){return e(P)},set recording(Oe){i(P,Oe)},$$legacy:!0}),r(Ae),d(Ue,Ae)},Ke=Ue=>{var Ae=Ho(),qe=le(Ae),Oe=o(qe);{let je=$e(()=>(t(),c(()=>t().t("AI"))));Ge(Oe,{get content(){return e(je)},placement:"top",children:(We,Ze)=>{var yt=Fe(),St=le(yt);{var vt=ft=>{var et=Oo(),kt=o(et);ea(kt,{className:"size-5"}),r(et),pe("click",et,()=>{Et()}),d(ft,et)},Mt=ft=>{uo(ft,{onEdit:()=>{Ut()},onChat:()=>{i(N,!0),i(Z,"chat")},children:(et,kt)=>{var $t=jo(),zt=o($t);ro(zt,{}),r($t),d(et,$t)},$$slots:{default:!0}})};me(St,ft=>{e(L)?ft(vt):ft(Mt,!1)})}d(We,yt)},$$slots:{default:!0}})}r(qe);var Bt=x(qe,2);to(Bt,{onRecord:async()=>{i(V,!1);try{let je=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(We){return Ce.error(t().t("Permission denied when accessing microphone: {{error}}",{error:We})),null});je&&(i(P,!0),je.getTracks().forEach(Ze=>Ze.stop())),je=null}catch{Ce.error(t().t("Permission denied when accessing microphone"))}},onCaptureAudio:async()=>{i(V,!0),i(P,!0)},onUpload:async()=>{const je=document.createElement("input");je.type="file",je.accept="audio/*",je.multiple=!1,je.click(),je.onchange=async We=>{const Ze=We.target.files;Ze&&Ze.length>0&&await bt(Ze[0])}},children:(je,We)=>{{let Ze=$e(()=>(t(),c(()=>t().t("Record"))));Ge(je,{get content(){return e(Ze)},placement:"top",children:(yt,St)=>{var vt=Wo(),Mt=o(vt);fr(Mt,{className:"size-4.5"}),r(vt),d(yt,vt)},$$slots:{default:!0}})}},$$slots:{default:!0}}),d(Ue,Ae)};me(ot,Ue=>{e(P)?Ue(wt):Ue(Ke,!1)})}r(rt),r(q),d(C,I)},$$slots:{default:!0}});var k=x(w,2);Vr(k,{get show(){return e(N)},set show(C){i(N,C)},children:(C,E)=>{var I=Fe(),K=le(I);{var we=j=>{Fr(j,{get editor(){return e(y)},get inputElement(){return e(Xe)},get selectedContent(){return e(ae)},get files(){return e(g)},onInsert:Re,onStop:Et,onEdited:Nt,insertNoteHandler:()=>{ct(e(a))},scrollToBottomHandler:ge,get show(){return e(N)},set show(q){i(N,q)},get selectedModelId(){return e($)},set selectedModelId(q){i($,q)},get messages(){return e(te)},set messages(q){i(te,q)},get note(){return e(a)},set note(q){i(a,q)},get editing(){return e(L)},set editing(q){i(L,q)},get streaming(){return e(Je)},set streaming(q){i(Je,q)},get stopResponseFlag(){return e(Ye)},set stopResponseFlag(q){i(Ye,q)},$$legacy:!0})},oe=j=>{var q=Fe(),rt=le(q);{var ot=wt=>{$r(wt,{onUpdate:()=>{tt()},get show(){return e(N)},set show(Ke){i(N,Ke)},get selectedModelId(){return e($)},set selectedModelId(Ke){i($,Ke)},get files(){return e(g)},set files(Ke){i(g,Ke)},$$legacy:!0})};me(rt,wt=>{e(Z)==="settings"&&wt(ot)},!0)}d(j,q)};me(K,j=>{e(Z)==="chat"?j(we):j(oe,!1)})}d(C,I)},$$slots:{default:!0},$$legacy:!0}),d(n,v)},$$slots:{default:!0}}),d(U,at),lt(),ue()}var Fo=f('<div id="note-container"><!></div>');function Jn(U,l){st(l,!1);const t=()=>Me(Jt,"$showSidebar",m),b=()=>Me(za,"$page",m),[m,de]=_t();let h=Y(!1);Dt(async()=>{i(h,!0)}),it();var H=Fe(),ce=le(H);{var S=ee=>{var F=Fo(),ue=o(F);Uo(ue,{get id(){return b().params.id}}),r(F),W(()=>Le(F,1,`w-full h-full ${t()?"md:max-w-[calc(100%-var(--sidebar-width))]":""}`)),d(ee,F)};me(ce,ee=>{e(h)&&ee(S)})}d(U,H),lt(),de()}export{Jn as component};
//# sourceMappingURL=25.D3c7k3dZ.js.map
