import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{g as E,o as k,d as v,e as D,a as x,p as N,b as A,i as d,m as B,j as g}from"../chunks/Cef1s1vS.js";import{k as C}from"../chunks/DKuG6z3I.js";import{i as J}from"../chunks/D6HxSY24.js";import{s as L,a as r}from"../chunks/B0aKtzpN.js";import{t as a}from"../chunks/Bfaq2Jpc.js";import{g as O}from"../chunks/BUPwbfhi.js";import{a as f,c as P,b as U}from"../chunks/D3pt6ESx.js";import{b as j}from"../chunks/CIXyf-s1.js";import{c as F}from"../chunks/D7wpsH27.js";import{g as R}from"../chunks/CGfnvjAy.js";import{M as W}from"../chunks/BcYHnKrZ.js";function te(u,w){A(w,!1);const _=()=>r(f,"$models",s),i=()=>r(S,"$i18n",s),$=()=>r(P,"$config",s),h=()=>r(U,"$settings",s),[s,b]=L(),S=E("i18n"),y=async e=>{var t,c,p;if(_().find(l=>l.id===e.id)){a.error(i().t("Error: A model with the ID '{{modelId}}' already exists. Please select a different ID to proceed.",{modelId:e.id}));return}if(e.id===""){a.error(i().t("Error: Model ID cannot be empty. Please enter a valid ID to proceed."));return}e&&await F(localStorage.token,{...e,meta:{...e.meta,profile_image_url:e.meta.profile_image_url??`${j}/static/favicon.png`,suggestion_prompts:e.meta.suggestion_prompts?e.meta.suggestion_prompts.filter(n=>n.content!==""):null},params:{...e.params}}).catch(n=>(a.error(`${n}`),null))&&(await f.set(await R(localStorage.token,((c=(t=$())==null?void 0:t.features)==null?void 0:c.enable_direct_connections)&&(((p=h())==null?void 0:p.directConnections)??null))),a.success(i().t("Model created successfully!")),await O("/workspace/models"))};let o=B(null);k(async()=>{window.addEventListener("message",async e=>{if(["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(e.origin))try{let t=JSON.parse(e.data);t!=null&&t.info&&(t=t.info),d(o,t)}catch(t){}}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.model&&(d(o,JSON.parse(sessionStorage.model)),sessionStorage.removeItem("model"))}),J();var m=v(),M=D(m);C(M,()=>g(o),e=>{W(e,{get model(){return g(o)},onSubmit:y})}),x(u,m),N(),b()}export{te as component};
//# sourceMappingURL=35.CPBNMXcl.js.map
