## TASK DECOMPOSITION STRATEGY

Decompose the goal into exactly 4-5 strategic tasks. Quality over quantity.

### Goal-First Planning

**Before creating tasks, answer:**
1. What is the specific goal we're trying to achieve?
2. What information/access is needed to achieve it?
3. What's the most direct path to that goal?
4. What could block us, and what are alternatives?

### Task Selection Principles

**Each task must be:**
- **Goal-connected**: Explicitly advances toward the goal (state how)
- **Evidence-based**: Grounded in discovered information (not speculation)
- **Distinct**: Non-overlapping with other tasks
- **Atomic**: Completable in single agent run
- **Sequenced**: Logically ordered (each informs the next)

### Decomposition Guidelines

**When to decompose:**
✅ Goal requires multiple distinct phases (discover → validate → exploit)
✅ Each subtask benefits from different tools/approaches
✅ Tasks can be sequenced (one provides input for next)

**When NOT to decompose:**
❌ Simple, atomic actions (execution details, not strategic tasks)
❌ Micro-tasks that are implementation steps
❌ More than 5 tasks needed (consolidate or prioritize)
❌ Parallel tasks doing same thing (choose best approach)

### Goal-Oriented Task Sequence

**For exploitation goals:**
1. **Discover attack surface** relevant to goal
2. **Identify requirements** (auth, parameters, context)
3. **Test most promising path** toward goal
4. **Validate/exploit** the vulnerability
5. **Confirm goal achievement** with evidence

**For reconnaissance goals:**
1. **Map relevant surface** (goal-related endpoints/inputs)
2. **Enumerate details** (parameters, auth, formats)
3. **Analyze for weaknesses** (evidence-based)
4. **Prioritize attack paths** (by goal-relevance)
5. **Compile exploitation brief** (structured for next phase)

### Task Structure

Each task must include:
- `task`: What to accomplish (1 sentence, <20 words)
- `description`: How to approach it (2-3 sentences)
- `goal_connection`: How this advances toward the goal (1 sentence)
- `status`: Always "pending"
- `confidence_score`: Always 0.0 when creating tasks

**Important**: When creating tasks, always set `confidence_score` to 0.0. This does NOT mean the task failed—it simply indicates the task hasn't been treated/executed yet. Confidence scores are assigned later during task execution, not during task creation.

### Example: Goal "Find XSS injection in the web page"

**Good decomposition** (goal-connected):
1. "Find and extract the inputs and different sources where a XSS could be injected" (confidence_score: 0.0)
   - Goal connection: Understanding where we can send or alter the data to inject.
2. "Testing XSS payloads to understand how the web application behaves" (confidence_score: 0.0)
   - Goal connection: Directly testing XSS payloads to understand the behavior or the web app
3. "Test complex XSS payloads, look for hints and changes in the web app." (confidence_score: 0.0)
   - Goal connection: Trying harder to trigger an XSS vulnerability
4. "Validation the XSS injection found or extensive search" (confidence_score: 0.0)
   - Goal connection: Validate the vulnerability

**Bad decomposition** (no goal connection):
1. ❌ "Enumerate all endpoints" (generic, not goal-focused)
2. ❌ "Test for SQL injection" (why? how does this help the goal?)
3. ❌ "Check security headers" (defensive assessment, not exploitation)
4. ❌ "Review OWASP Top 10 categories" (framework exercise, not goal path)

### Output Format

Return tasks as structured list. Keep descriptions concise (2-3 sentences max).
Every task must have explicit `goal_connection` field.
