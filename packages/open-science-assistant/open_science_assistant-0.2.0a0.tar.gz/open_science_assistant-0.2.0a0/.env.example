# ============================================================================
# Open Science Assistant (OSA) - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ============================================================================
# LLM Provider Configuration
# ============================================================================

# Primary LLM provider: "openrouter" (recommended) or "ollama"
LLM_PROVIDER=openrouter

# OpenRouter API key (required for openrouter provider)
# Get yours at: https://openrouter.ai/keys
OPENROUTER_API_KEY=

# Model selection (OpenRouter model IDs, format: provider/model)
# Examples:
#   - openai/gpt-oss-120b (fast with Cerebras provider)
#   - openai/gpt-4.1-mini (cheap)
#   - anthropic/claude-3-5-sonnet (quality)
#   - google/gemini-2.5-flash (cheap)
DEFAULT_MODEL=openai/gpt-oss-120b

# Provider preference for routing (e.g., Cerebras, Azure, Fireworks)
# See: https://openrouter.ai/docs/guides/routing/provider-selection
DEFAULT_MODEL_PROVIDER=Cerebras

# Model for testing (same format as DEFAULT_MODEL)
TEST_MODEL=openai/gpt-oss-120b
TEST_MODEL_PROVIDER=Cerebras

# API key specifically for integration tests (pytest -m llm)
# This is separate from the main key to allow CI/CD testing
OPENROUTER_API_KEY_FOR_TESTING=

# Ollama configuration (for local development)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2

# LLM Temperature (0.0 - 1.0)
LLM_TEMPERATURE=0.1

# ============================================================================
# API Security Configuration
# ============================================================================

# API keys for server authentication (comma-separated list)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEYS=

# Require API key authentication (disable for local dev only)
REQUIRE_API_AUTH=true

# Allow Bring-Your-Own-Key mode (users provide their own OpenRouter key)
ALLOW_BYOK=true

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection URL for LangGraph state and telemetry
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://osa:osa_dev@localhost:5432/osa

# ============================================================================
# LangFuse Observability
# ============================================================================

# LangFuse configuration for tracing and observability
# Get keys at: https://cloud.langfuse.com or self-host
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=https://cloud.langfuse.com

# Environment label for LangFuse (production, staging, development)
LANGFUSE_ENVIRONMENT=development

# ============================================================================
# External API Keys
# ============================================================================

# GitHub API token for issue/PR search and feedback integration
# Scopes needed: public_repo (or repo for private repos)
GITHUB_TOKEN=

# GitHub repository for feedback integration (owner/repo format)
GITHUB_REPO=neuromechanist/osa

# ============================================================================
# API Server Configuration
# ============================================================================

# API host and port
API_HOST=0.0.0.0
API_PORT=38528

# Root path for reverse proxy (e.g., /osa for api.osc.earth/osa/)
ROOT_PATH=/osa
# Dev root path (for api.osc.earth/osa-dev/)
DEV_ROOT_PATH=/osa-dev

# Number of Uvicorn workers (production)
API_WORKERS=4

# CORS: Additional allowed origins (comma-separated)
# Localhost origins are allowed by default in development
EXTRA_CORS_ORIGINS=

# Disable localhost CORS in production
ALLOW_LOCALHOST_CORS=true

# ============================================================================
# Telemetry and Feedback
# ============================================================================

# Enable detailed telemetry recording
ENABLE_TELEMETRY=true

# Feedback storage directory
FEEDBACK_DIR=./feedback

# ============================================================================
# Development Settings
# ============================================================================

# Enable debug mode (verbose logging, hot reload)
DEBUG=false

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
