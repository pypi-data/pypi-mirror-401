# SPDX-FileCopyrightText: Copyright (c) 2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

"""
Plot package for AIPerf profiling results.

This package provides tools for plotting and analyzing AIPerf profiling data,
including data loading, plot generation, and various output modes (PNG, HTML, dashboard).
"""

from aiperf.plot.cli_runner import (
    run_plot_controller,
)
from aiperf.plot.config import (
    PlotConfig,
)
from aiperf.plot.constants import (
    ALL_STAT_KEYS,
    AVAILABLE_STATS,
    CUMULATIVE_METRIC_PATTERNS,
    DARK_THEME_COLORS,
    DEFAULT_DASHBOARD_PORT,
    DEFAULT_OUTPUT_DIR,
    DEFAULT_PERCENTILE,
    DEFAULT_PERCENTILES,
    DEFAULT_PLOT_DPI,
    DEFAULT_PLOT_HEIGHT,
    DEFAULT_PLOT_WIDTH,
    DEFAULT_PNG_OUTPUT_DIR,
    DERIVED_METRIC_DIRECTIONS,
    LIGHT_THEME_COLORS,
    NON_METRIC_KEYS,
    NVIDIA_BORDER_DARK,
    NVIDIA_BORDER_LIGHT,
    NVIDIA_CARD_BG,
    NVIDIA_DARK,
    NVIDIA_DARK_BG,
    NVIDIA_GOLD,
    NVIDIA_GRAY,
    NVIDIA_GREEN,
    NVIDIA_TEXT_LIGHT,
    NVIDIA_WHITE,
    OUTLIER_RED,
    PLOT_FONT_FAMILY,
    PLOT_LOG_FILE,
    PROFILE_EXPORT_AIPERF_JSON,
    PROFILE_EXPORT_GPU_TELEMETRY_JSONL,
    PROFILE_EXPORT_JSONL,
    PROFILE_EXPORT_TIMESLICES_CSV,
    SERVER_METRICS_EXPORT_CSV,
    SERVER_METRICS_EXPORT_JSON,
    SERVER_METRICS_EXPORT_JSONL,
    SERVER_METRICS_EXPORT_PARQUET,
    STAT_LABELS,
    PlotMode,
    PlotTheme,
)
from aiperf.plot.core import (
    DEFAULT_IGNORE_PARAMS,
    DataLoader,
    DataSource,
    DerivedMetricCalculator,
    ExperimentClassificationConfig,
    MetricSpec,
    ModeDetector,
    PlotGenerator,
    PlotSpec,
    PlotType,
    PlotTypeHandlerFactory,
    PlotTypeHandlerProtocol,
    PlotTypeInfo,
    RunData,
    RunMetadata,
    Style,
    TimeSlicePlotSpec,
    VisualizationMode,
    aggregate_gpu_telemetry,
    auto_select_group_by,
    auto_select_label_by,
    calculate_rolling_percentiles,
    calculate_throughput_events,
    detect_directional_outliers,
    detect_swept_parameters,
    flatten_config,
    get_nvidia_color_scheme,
    get_plot_type_info,
    prepare_request_timeseries,
    prepare_timeslice_metrics,
    validate_request_uniformity,
)
from aiperf.plot.dashboard import (
    CATEGORY_HEADERS,
    EXCLUDED_METRIC_COLUMNS,
    MULTI_RUN_PLOT_TYPES,
    MULTI_RUN_STAT_OPTIONS,
    SINGLE_RUN_STAT_SUFFIXES,
    SINGLE_RUN_TITLE_SUFFIXES,
    CachedPlot,
    CacheKey,
    DashboardBuilder,
    DashboardServer,
    PlotCache,
    SingleRunFieldConfig,
    add_run_idx_to_figure,
    build_single_run_plot_config,
    compute_config_hash,
    compute_runs_hash,
    create_autoscale_dropdown,
    create_button,
    create_collapsible_section,
    create_export_controls_card,
    create_fieldset,
    create_global_stat_selector,
    create_label,
    create_log_scale_dropdown,
    create_plot_container_component,
    create_run_selector_checklist,
    create_section_header,
    create_sidebar_toggle_button,
    create_stat_selector_dropdown,
    create_switch_toggle,
    create_two_column_row,
    extract_metric_value,
    field_config_to_edit_outputs,
    field_config_to_outputs,
    filter_stat_options_by_available,
    generate_plot_from_spec,
    get_all_themes_css,
    get_available_stats_for_metric,
    get_button_style,
    get_dropdown_css,
    get_header_style,
    get_label_style,
    get_main_area_style,
    get_plot_cache,
    get_plot_title,
    get_scoped_theme_css,
    get_section_header_style,
    get_sidebar_style,
    get_single_run_field_config,
    get_single_run_metrics_with_stats,
    get_single_run_y_metric_options,
    get_stat_options_for_single_run_metric,
    get_theme_colors,
    prepare_timeseries_dataframe,
    register_all_callbacks,
    register_collapsible_sections_callback,
    register_config_modal_callback,
    register_context_menu_callbacks,
    register_custom_plot_callbacks,
    register_drag_drop_callbacks,
    register_drill_down_callbacks,
    register_dynamic_grid_callback,
    register_export_png_callback,
    register_hide_show_plot_callbacks,
    register_layout_control_callbacks,
    register_layout_theme_callbacks,
    register_modal_theme_callbacks,
    register_multi_run_plot_edit_callbacks,
    register_nested_run_selector_callbacks,
    register_resize_toggle_callbacks,
    register_run_count_badge_callback,
    register_sidebar_components_theme_callback,
    register_sidebar_sync_callback,
    register_sidebar_toggle_callback,
    register_sidebar_widgets_theme_callback,
    register_single_run_callbacks,
    register_single_run_custom_plot_callbacks,
    register_single_run_plot_edit_callbacks,
    register_size_migration_callback,
    register_theme_callback,
    register_toast_notifications_callbacks,
    register_version_check_callback,
    resolve_single_run_column_name,
    runs_to_dataframe,
    select_best_stat,
    select_metric_value,
)
from aiperf.plot.exceptions import (
    DataLoadError,
    DataUnavailableError,
    ModeDetectionError,
    PlotError,
    PlotGenerationError,
)
from aiperf.plot.exporters import (
    BaseExporter,
    BasePNGExporter,
    MultiRunPNGExporter,
    SingleRunPNGExporter,
)
from aiperf.plot.handlers import (
    AreaHandler,
    BaseMultiRunHandler,
    BaseSingleRunHandler,
    DualAxisHandler,
    HistogramHandler,
    ParetoHandler,
    PercentileBandsHandler,
    RequestTimelineHandler,
    ScatterHandler,
    ScatterLineHandler,
    ScatterWithPercentilesHandler,
    TimeSliceHandler,
)
from aiperf.plot.logging import (
    setup_console_only_logging,
    setup_plot_logging,
)
from aiperf.plot.metric_names import (
    get_aggregated_metrics,
    get_all_metric_display_names,
    get_gpu_metric_unit,
    get_gpu_metrics,
    get_metric_display_name,
    get_metric_display_name_with_unit,
    get_request_metrics,
    get_server_metrics,
    get_timeslice_metrics,
)
from aiperf.plot.plot_controller import (
    PlotController,
)
from aiperf.plot.utils import (
    create_series_legend_label,
    detect_server_metric_series,
    filter_server_metrics_dataframe,
    get_available_labels_for_metric,
    get_server_metrics_summary,
    parse_server_metric_spec,
)

__all__ = [
    "ALL_STAT_KEYS",
    "AVAILABLE_STATS",
    "AreaHandler",
    "BaseExporter",
    "BaseMultiRunHandler",
    "BasePNGExporter",
    "BaseSingleRunHandler",
    "CATEGORY_HEADERS",
    "CUMULATIVE_METRIC_PATTERNS",
    "CacheKey",
    "CachedPlot",
    "DARK_THEME_COLORS",
    "DEFAULT_DASHBOARD_PORT",
    "DEFAULT_IGNORE_PARAMS",
    "DEFAULT_OUTPUT_DIR",
    "DEFAULT_PERCENTILE",
    "DEFAULT_PERCENTILES",
    "DEFAULT_PLOT_DPI",
    "DEFAULT_PLOT_HEIGHT",
    "DEFAULT_PLOT_WIDTH",
    "DEFAULT_PNG_OUTPUT_DIR",
    "DERIVED_METRIC_DIRECTIONS",
    "DashboardBuilder",
    "DashboardServer",
    "DataLoadError",
    "DataLoader",
    "DataSource",
    "DataUnavailableError",
    "DerivedMetricCalculator",
    "DualAxisHandler",
    "EXCLUDED_METRIC_COLUMNS",
    "ExperimentClassificationConfig",
    "HistogramHandler",
    "LIGHT_THEME_COLORS",
    "MULTI_RUN_PLOT_TYPES",
    "MULTI_RUN_STAT_OPTIONS",
    "MetricSpec",
    "ModeDetectionError",
    "ModeDetector",
    "MultiRunPNGExporter",
    "NON_METRIC_KEYS",
    "NVIDIA_BORDER_DARK",
    "NVIDIA_BORDER_LIGHT",
    "NVIDIA_CARD_BG",
    "NVIDIA_DARK",
    "NVIDIA_DARK_BG",
    "NVIDIA_GOLD",
    "NVIDIA_GRAY",
    "NVIDIA_GREEN",
    "NVIDIA_TEXT_LIGHT",
    "NVIDIA_WHITE",
    "OUTLIER_RED",
    "PLOT_FONT_FAMILY",
    "PLOT_LOG_FILE",
    "PROFILE_EXPORT_AIPERF_JSON",
    "PROFILE_EXPORT_GPU_TELEMETRY_JSONL",
    "PROFILE_EXPORT_JSONL",
    "PROFILE_EXPORT_TIMESLICES_CSV",
    "ParetoHandler",
    "PercentileBandsHandler",
    "PlotCache",
    "PlotConfig",
    "PlotController",
    "PlotError",
    "PlotGenerationError",
    "PlotGenerator",
    "PlotMode",
    "PlotSpec",
    "PlotTheme",
    "PlotType",
    "PlotTypeHandlerFactory",
    "PlotTypeHandlerProtocol",
    "PlotTypeInfo",
    "RequestTimelineHandler",
    "RunData",
    "RunMetadata",
    "SERVER_METRICS_EXPORT_CSV",
    "SERVER_METRICS_EXPORT_JSON",
    "SERVER_METRICS_EXPORT_JSONL",
    "SERVER_METRICS_EXPORT_PARQUET",
    "SINGLE_RUN_STAT_SUFFIXES",
    "SINGLE_RUN_TITLE_SUFFIXES",
    "STAT_LABELS",
    "ScatterHandler",
    "ScatterLineHandler",
    "ScatterWithPercentilesHandler",
    "SingleRunFieldConfig",
    "SingleRunPNGExporter",
    "Style",
    "TimeSliceHandler",
    "TimeSlicePlotSpec",
    "VisualizationMode",
    "add_run_idx_to_figure",
    "aggregate_gpu_telemetry",
    "auto_select_group_by",
    "auto_select_label_by",
    "build_single_run_plot_config",
    "calculate_rolling_percentiles",
    "calculate_throughput_events",
    "compute_config_hash",
    "compute_runs_hash",
    "create_autoscale_dropdown",
    "create_button",
    "create_collapsible_section",
    "create_export_controls_card",
    "create_fieldset",
    "create_global_stat_selector",
    "create_label",
    "create_log_scale_dropdown",
    "create_plot_container_component",
    "create_run_selector_checklist",
    "create_section_header",
    "create_series_legend_label",
    "create_sidebar_toggle_button",
    "create_stat_selector_dropdown",
    "create_switch_toggle",
    "create_two_column_row",
    "detect_directional_outliers",
    "detect_server_metric_series",
    "detect_swept_parameters",
    "extract_metric_value",
    "field_config_to_edit_outputs",
    "field_config_to_outputs",
    "filter_server_metrics_dataframe",
    "filter_stat_options_by_available",
    "flatten_config",
    "generate_plot_from_spec",
    "get_aggregated_metrics",
    "get_all_metric_display_names",
    "get_all_themes_css",
    "get_available_labels_for_metric",
    "get_available_stats_for_metric",
    "get_button_style",
    "get_dropdown_css",
    "get_gpu_metric_unit",
    "get_gpu_metrics",
    "get_header_style",
    "get_label_style",
    "get_main_area_style",
    "get_metric_display_name",
    "get_metric_display_name_with_unit",
    "get_nvidia_color_scheme",
    "get_plot_cache",
    "get_plot_title",
    "get_plot_type_info",
    "get_request_metrics",
    "get_scoped_theme_css",
    "get_section_header_style",
    "get_server_metrics",
    "get_server_metrics_summary",
    "get_sidebar_style",
    "get_single_run_field_config",
    "get_single_run_metrics_with_stats",
    "get_single_run_y_metric_options",
    "get_stat_options_for_single_run_metric",
    "get_theme_colors",
    "get_timeslice_metrics",
    "parse_server_metric_spec",
    "prepare_request_timeseries",
    "prepare_timeseries_dataframe",
    "prepare_timeslice_metrics",
    "register_all_callbacks",
    "register_collapsible_sections_callback",
    "register_config_modal_callback",
    "register_context_menu_callbacks",
    "register_custom_plot_callbacks",
    "register_drag_drop_callbacks",
    "register_drill_down_callbacks",
    "register_dynamic_grid_callback",
    "register_export_png_callback",
    "register_hide_show_plot_callbacks",
    "register_layout_control_callbacks",
    "register_layout_theme_callbacks",
    "register_modal_theme_callbacks",
    "register_multi_run_plot_edit_callbacks",
    "register_nested_run_selector_callbacks",
    "register_resize_toggle_callbacks",
    "register_run_count_badge_callback",
    "register_sidebar_components_theme_callback",
    "register_sidebar_sync_callback",
    "register_sidebar_toggle_callback",
    "register_sidebar_widgets_theme_callback",
    "register_single_run_callbacks",
    "register_single_run_custom_plot_callbacks",
    "register_single_run_plot_edit_callbacks",
    "register_size_migration_callback",
    "register_theme_callback",
    "register_toast_notifications_callbacks",
    "register_version_check_callback",
    "resolve_single_run_column_name",
    "run_plot_controller",
    "runs_to_dataframe",
    "select_best_stat",
    "select_metric_value",
    "setup_console_only_logging",
    "setup_plot_logging",
    "validate_request_uniformity",
]
