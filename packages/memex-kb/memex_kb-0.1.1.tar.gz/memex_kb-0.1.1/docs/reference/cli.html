<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLI Reference - Memex</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/memex/assets/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>window.BASE_URL = "/memex";</script>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <a href="/memex/" class="logo">
                <div class="logo-mark"></div>
                <div class="logo-text">Memex<span> / knowledge</span></div>
            </a>

            <div class="search-container">
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input type="text" id="search-input" placeholder="Search knowledge base..." autocomplete="off">
                <div id="search-results"></div>
            </div>

            <div class="header-nav">
                <a href="/memex/" class="nav-link active">Reader</a>
                <a href="/memex/graph.html" class="nav-link">Graph</a>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="tree">Browse</button>
                <button class="nav-tab" data-tab="recent">Recent</button>
            </div>

            <div class="sidebar-section" id="tree-section">
                <div class="sidebar-header">Categories</div>
                <div class="tree" id="tree">
            <div class="tree-folder">
                <div class="tree-folder-header">
                    <span class="tree-icon folder">üìÅ</span>
                    <span class="tree-label">guides</span>
                </div>
                <div class="tree-children">
                    <a href="/memex/guides/ai-integration.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">AI Agent Integration</span>
                    </a>
                    <a href="/memex/guides/installation.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">Installation Guide</span>
                    </a>
                    <a href="/memex/guides/mcp-setup.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">MCP Server Setup</span>
                    </a>
                    <a href="/memex/guides/quick-start.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">Quick Start Guide</span>
                    </a>
                </div>
            </div>
            <div class="tree-folder">
                <div class="tree-folder-header">
                    <span class="tree-icon folder">üìÅ</span>
                    <span class="tree-label">reference</span>
                </div>
                <div class="tree-children">
                    <a href="/memex/reference/beads.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">Beads Integration</span>
                    </a>
                    <a href="/memex/reference/cli.html" class="tree-item active">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">CLI Reference</span>
                    </a>
                    <a href="/memex/reference/entry-format.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">Entry Format Reference</span>
                    </a>
                    <a href="/memex/reference/templates.html" class="tree-item">
                        <span class="tree-icon file">‚óá</span>
                        <span class="tree-label">Templates Reference</span>
                    </a>
                </div>
            </div></div>
            </div>

            <div class="sidebar-section" id="recent-section" style="display: none;">
                <div class="sidebar-header">Recent Updates</div>
                <div class="tree" id="recent-list">
            <a href="/memex/reference/beads.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">Beads Integration</span>
            </a>
            <a href="/memex/reference/templates.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">Templates Reference</span>
            </a>
            <a href="/memex/guides/ai-integration.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">AI Agent Integration</span>
            </a>
            <a href="/memex/guides/quick-start.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">Quick Start Guide</span>
            </a>
            <a href="/memex/guides/mcp-setup.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">MCP Server Setup</span>
            </a>
            <a href="/memex/guides/installation.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">Installation Guide</span>
            </a>
            <a href="/memex/reference/entry-format.html" class="tree-item">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">Entry Format Reference</span>
            </a>
            <a href="/memex/reference/cli.html" class="tree-item active">
                <span class="tree-icon file">‚óá</span>
                <span class="tree-label">CLI Reference</span>
            </a></div>
            </div>
            <div class="sidebar-footer">
                <a href="https://github.com/chriskd/memex" target="_blank" rel="noopener">Powered by memex</a>
            </div>
        </aside>

        <!-- Main content -->
        <main class="main">
            
<div class="reader-container">
    <article class="entry">
        <header class="entry-header">
            <a href="/memex/reference/cli.html" class="entry-path">reference/cli</a>
            <div class="entry-meta">
                
                <div class="entry-meta-item">Created: <span>Jan 6, 2026</span></div>
                
                
            </div>
            
            <div class="entry-tags">
                
                <a href="/memex/tags/cli.html" class="tag">cli</a>
                
                <a href="/memex/tags/reference.html" class="tag">reference</a>
                
                <a href="/memex/tags/commands.html" class="tag">commands</a>
                
            </div>
            
        </header>
        <div class="entry-content">
            <h1>CLI Reference</h1>
<p>The <code>mx</code> CLI provides token-efficient access to your knowledge base.</p>
<h2>Global Options</h2>
<p>All commands support these top-level options:</p>
<pre><code class="language-bash">mx --version                     # Show version
mx --json-errors &lt;command&gt;       # Output errors as JSON (for agents)
mx --quiet &lt;command&gt;             # Suppress warnings
mx -q &lt;command&gt;                  # Shorthand for --quiet
</code></pre>
<p><strong>Environment Variables:</strong></p>
<ul>
<li><code>MEMEX_KB_ROOT</code>: Knowledge base root directory</li>
<li><code>MEMEX_INDEX_ROOT</code>: Search index directory</li>
<li><code>MEMEX_QUIET=1</code>: Suppress warnings (equivalent to --quiet)</li>
</ul>
<hr />
<h2>Search Commands</h2>
<h3>mx search</h3>
<p>Search the knowledge base with hybrid keyword + semantic search.</p>
<pre><code class="language-bash">mx search &quot;query&quot;                    # Hybrid search
mx search &quot;docker&quot; --tags=infra      # Filter by tag
mx search &quot;api&quot; --mode=semantic      # Semantic only
mx search &quot;api&quot; --mode=keyword       # Keyword only
mx search &quot;query&quot; --limit=20         # More results
mx search &quot;query&quot; --content          # Include full content
mx search &quot;query&quot; --strict           # No semantic fallback
mx search &quot;query&quot; --terse            # Paths only
mx search &quot;query&quot; --json             # JSON output
mx search &quot;query&quot; --compact          # Minimal JSON (short keys)
mx search &quot;query&quot; --no-session       # Ignore session context
mx search &quot;query&quot; --no-history       # Don't record in history
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--tags, -t</code>: Filter by tags (comma-separated)</li>
<li><code>--mode</code>: Search mode (hybrid, keyword, semantic)</li>
<li><code>--limit, -n</code>: Maximum results (default: 10)</li>
<li><code>--content, -c</code>: Include full content in results</li>
<li><code>--strict</code>: Disable semantic fallback</li>
<li><code>--terse</code>: Output paths only (one per line)</li>
<li><code>--json</code>: JSON output</li>
<li><code>--compact</code>: Minimal JSON (short keys: p, t, s)</li>
<li><code>--no-session</code>: Ignore session context for this search</li>
<li><code>--no-history</code>: Don't record this search in history</li>
</ul>
<p><strong>JSON Output Example:</strong></p>
<pre><code class="language-json">[
  {
    &quot;path&quot;: &quot;tooling/beads.md&quot;,
    &quot;title&quot;: &quot;Beads Issue Tracker&quot;,
    &quot;score&quot;: 0.95,
    &quot;snippet&quot;: &quot;Lightweight issue tracking...&quot;,
    &quot;match_type&quot;: &quot;keyword&quot;
  }
]
</code></pre>
<p><strong>Compact JSON Output:</strong></p>
<pre><code class="language-json">[{&quot;p&quot;: &quot;tooling/beads.md&quot;, &quot;t&quot;: &quot;Beads Issue Tracker&quot;, &quot;s&quot;: 0.95}]
</code></pre>
<h3>mx history</h3>
<p>View and re-run past searches.</p>
<pre><code class="language-bash">mx history                  # Show last 10 searches
mx history -n 20            # Show last 20
mx history --rerun 1        # Re-run most recent
mx history -r 3             # Re-run 3rd most recent
mx history --clear          # Clear history
mx history --json           # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-n, --limit</code>: Max entries to show (default: 10)</li>
<li><code>-r, --rerun</code>: Re-execute search at position N (1=most recent)</li>
<li><code>--clear</code>: Clear all search history</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Read Commands</h2>
<h3>mx get</h3>
<p>Read a knowledge base entry.</p>
<pre><code class="language-bash">mx get tooling/my-entry.md            # Full entry
mx get tooling/my-entry.md --metadata # Metadata only
mx get tooling/my-entry.md --json     # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-m, --metadata</code>: Show only metadata (frontmatter)</li>
<li><code>--json</code>: Output as JSON with metadata</li>
</ul>
<h3>mx list</h3>
<p>List entries with optional filters.</p>
<pre><code class="language-bash">mx list                        # All entries
mx list --tag=infrastructure   # Filter by tag
mx list --category=tooling     # Filter by category
mx list --limit=50             # More results
mx list --json                 # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-t, --tag</code>: Filter by tag</li>
<li><code>-c, --category</code>: Filter by category</li>
<li><code>-n, --limit</code>: Max results (default: 20)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx tree</h3>
<p>Display directory structure.</p>
<pre><code class="language-bash">mx tree                    # Full tree
mx tree tooling            # Specific path
mx tree --depth=2          # Limit depth
mx tree --json             # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-d, --depth</code>: Max depth to display</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Write Commands</h2>
<h3>mx add</h3>
<p>Create a new entry.</p>
<pre><code class="language-bash">mx add --title=&quot;My Entry&quot; --tags=&quot;foo,bar&quot; --category=tooling --content=&quot;...&quot;
mx add --title=&quot;...&quot; --tags=&quot;...&quot; --category=... --file=content.md
cat content.md | mx add --title=&quot;...&quot; --tags=&quot;...&quot; --category=... --stdin
mx add --title=&quot;...&quot; --tags=&quot;...&quot; --template=troubleshooting
mx add --title=&quot;...&quot; --tags=&quot;...&quot; --dry-run  # Preview only
mx add --title=&quot;...&quot; --tags=&quot;...&quot; --force    # Override duplicate detection
mx add --title=&quot;...&quot; --tags=&quot;...&quot; --json     # JSON output
</code></pre>
<p><strong>Required:</strong></p>
<ul>
<li><code>--title, -t</code>: Entry title</li>
<li><code>--tags</code>: Tags (comma-separated)</li>
<li><code>--category, -c</code>: Target directory (required unless .kbcontext sets a primary path)</li>
</ul>
<p><strong>Options:</strong></p>
<ul>
<li><code>--content</code>: Content (or use --file/--stdin)</li>
<li><code>-f, --file</code>: Read content from file</li>
<li><code>--stdin</code>: Read content from stdin</li>
<li><code>-T, --template</code>: Use a template (see <code>mx templates</code>)</li>
<li><code>--force</code>: Create even if duplicates detected</li>
<li><code>--dry-run</code>: Preview path/frontmatter/content without creating</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx update</h3>
<p>Update an existing entry.</p>
<pre><code class="language-bash">mx update path/entry.md --tags=&quot;new,tags&quot;
mx update path/entry.md --content=&quot;New content&quot;
mx update path/entry.md --content=&quot;Append this&quot; --append
mx update path/entry.md --content=&quot;...&quot; --append --timestamp
mx update path/entry.md --file=new-content.md
mx update path/entry.md --stdin --append
mx update path/entry.md --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--tags</code>: Replace tags (comma-separated)</li>
<li><code>--content</code>: New content (replaces existing unless --append)</li>
<li><code>-f, --file</code>: Read content from file</li>
<li><code>--stdin</code>: Read content from stdin</li>
<li><code>--append</code>: Append to end instead of replacing</li>
<li><code>--timestamp</code>: Add <code>## YYYY-MM-DD HH:MM UTC</code> header</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx patch</h3>
<p>Surgical find-replace edits.</p>
<pre><code class="language-bash">mx patch path/entry.md --old=&quot;old text&quot; --new=&quot;new text&quot;
mx patch path/entry.md --old=&quot;TODO&quot; --new=&quot;DONE&quot; --replace-all
mx patch path/entry.md --old-file=old.txt --new-file=new.txt
mx patch path/entry.md --old=&quot;...&quot; --new=&quot;...&quot; --dry-run
mx patch path/entry.md --old=&quot;...&quot; --new=&quot;...&quot; --backup
mx patch path/entry.md --old=&quot;...&quot; --new=&quot;...&quot; --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--old</code>: Exact text to find and replace</li>
<li><code>--new</code>: Replacement text</li>
<li><code>--old-file</code>: Read --old text from file (for multi-line)</li>
<li><code>--new-file</code>: Read --new text from file (for multi-line)</li>
<li><code>--replace-all</code>: Replace all occurrences</li>
<li><code>--dry-run</code>: Preview changes without modifying</li>
<li><code>--backup</code>: Create .bak backup before patching</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<p><strong>Exit Codes:</strong></p>
<ul>
<li>0: Success</li>
<li>1: Text not found</li>
<li>2: Multiple matches (ambiguous, use --replace-all)</li>
<li>3: Input error (file not found, permission, encoding)</li>
</ul>
<h3>mx upsert</h3>
<p>Create or append to entry by title.</p>
<pre><code class="language-bash">mx upsert &quot;Daily Log&quot; --content=&quot;Session summary&quot;
mx upsert &quot;API Docs&quot; --file=api.md --tags=&quot;api,docs&quot;
mx upsert &quot;Debug Log&quot; --content=&quot;...&quot; --no-create  # Error if not found
mx upsert &quot;Notes&quot; --content=&quot;...&quot; --replace        # Replace instead of append
mx upsert &quot;Notes&quot; --content=&quot;...&quot; --no-timestamp   # Skip timestamp header
mx upsert &quot;Notes&quot; --stdin --directory=projects/myapp
mx upsert &quot;Notes&quot; --content=&quot;...&quot; --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-c, --content</code>: Content to add</li>
<li><code>-f, --file</code>: Read content from file</li>
<li><code>--stdin</code>: Read content from stdin</li>
<li><code>--tags</code>: Tags for new entry (comma-separated)</li>
<li><code>-d, --directory</code>: Target directory for new entry</li>
<li><code>--no-timestamp</code>: Don't add timestamp header</li>
<li><code>--replace</code>: Replace content instead of appending</li>
<li><code>--create / --no-create</code>: Create entry if not found (default: create)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx quick-add</h3>
<p>Quickly add content with auto-generated metadata.</p>
<pre><code class="language-bash">mx quick-add --stdin              # Paste content, auto-generate all
mx quick-add -f notes.md          # From file with auto metadata
mx quick-add -c &quot;...&quot; -y          # Auto-confirm creation
echo &quot;...&quot; | mx quick-add --stdin --json  # Machine-readable
mx quick-add --stdin --title=&quot;Override Title&quot;  # Override auto-detection
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-f, --file</code>: Read content from file</li>
<li><code>--stdin</code>: Read content from stdin</li>
<li><code>-c, --content</code>: Raw content to add</li>
<li><code>-t, --title</code>: Override auto-detected title</li>
<li><code>--tags</code>: Override auto-suggested tags (comma-separated)</li>
<li><code>--category</code>: Override auto-suggested category</li>
<li><code>-y, --confirm</code>: Auto-confirm without prompting</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx delete</h3>
<p>Delete an entry.</p>
<pre><code class="language-bash">mx delete path/entry.md
mx delete path/entry.md --force  # Delete even with backlinks
mx delete path/entry.md --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-f, --force</code>: Delete even if has backlinks</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Analysis Commands</h2>
<h3>mx health</h3>
<p>Audit KB for problems.</p>
<pre><code class="language-bash">mx health
mx health --json
</code></pre>
<p>Checks for:</p>
<ul>
<li>Orphaned entries (no backlinks)</li>
<li>Broken links</li>
<li>Stale content (&gt;90 days)</li>
<li>Missing frontmatter</li>
<li>Empty directories</li>
<li>Entries missing descriptions</li>
</ul>
<h3>mx hubs</h3>
<p>Show most connected entries.</p>
<pre><code class="language-bash">mx hubs
mx hubs --limit=5
mx hubs --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-n, --limit</code>: Max results (default: 10)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx suggest-links</h3>
<p>Find semantically related entries.</p>
<pre><code class="language-bash">mx suggest-links path/entry.md
mx suggest-links path/entry.md --limit=10
mx suggest-links path/entry.md --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-n, --limit</code>: Max suggestions (default: 5)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx tags</h3>
<p>List all tags with counts.</p>
<pre><code class="language-bash">mx tags
mx tags --min-count=3
mx tags --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--min-count</code>: Minimum usage count</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx summarize</h3>
<p>Generate descriptions for entries missing them.</p>
<pre><code class="language-bash">mx summarize --dry-run         # Preview what would be generated
mx summarize                   # Generate and write descriptions
mx summarize --limit 5         # Process only 5 entries
mx summarize --json            # Output as JSON
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--dry-run</code>: Preview changes without writing</li>
<li><code>--limit</code>: Maximum entries to process</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Browse Commands</h2>
<h3>mx info</h3>
<p>Show KB configuration and stats.</p>
<pre><code class="language-bash">mx info
mx info --json
</code></pre>
<p>Alias: <code>mx config</code></p>
<h3>mx whats-new</h3>
<p>Show recently modified entries.</p>
<pre><code class="language-bash">mx whats-new                      # Last 30 days
mx whats-new --days=7             # Last week
mx whats-new --project=myapp      # Filter by project
mx whats-new --limit=20           # More results
mx whats-new --json               # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-d, --days</code>: Look back N days</li>
<li><code>-n, --limit</code>: Max results</li>
<li><code>-p, --project</code>: Filter by project name</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Session Commands</h2>
<h3>mx session</h3>
<p>Manage session search context. Session context persists until explicitly cleared.</p>
<pre><code class="language-bash">mx session                    # Show current session (alias for 'show')
mx session show               # Show current session
mx session show --json        # JSON output
mx session show --suggest     # Show bootstrap suggestions
</code></pre>
<h3>mx session start</h3>
<p>Start a new session with given context.</p>
<pre><code class="language-bash">mx session start --tags=infra,docker
mx session start --project=api-service
mx session start --tags=python --project=memex
mx session start --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-t, --tags</code>: Tags to filter by (comma-separated)</li>
<li><code>-p, --project</code>: Project to boost in results</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx session set</h3>
<p>Update the current session context.</p>
<pre><code class="language-bash">mx session set --tags=docker          # Replace tags
mx session set --add-tags=kubernetes  # Add tag
mx session set --project=new-project  # Change project
mx session set --json
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-t, --tags</code>: Tags to filter by (replaces existing)</li>
<li><code>--add-tags</code>: Tags to add (comma-separated)</li>
<li><code>-p, --project</code>: Project to boost</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx session clear</h3>
<p>Clear the session context.</p>
<pre><code class="language-bash">mx session clear
mx session clear --json
</code></pre>
<h3>mx session-log</h3>
<p>Log a session summary to the project's session entry.</p>
<pre><code class="language-bash">mx session-log --message=&quot;Fixed auth bug, added tests&quot;
mx session-log --stdin &lt; session_notes.md
mx session-log -m &quot;Deployed v2.1&quot; --tags=&quot;deployment,release&quot;
mx session-log -m &quot;...&quot; --entry=projects/myapp/devlog.md
mx session-log -m &quot;...&quot; --links=&quot;tooling/beads,projects/api&quot;
mx session-log -m &quot;...&quot; --no-timestamp
mx session-log -f session.md --json
</code></pre>
<p><strong>Entry Resolution Order:</strong></p>
<ol>
<li><code>--entry</code> flag (explicit)</li>
<li><code>.kbcontext</code> session_entry field</li>
<li><code>{.kbcontext primary}/sessions.md</code></li>
<li>Error with guidance if no context</li>
</ol>
<p><strong>Options:</strong></p>
<ul>
<li><code>-m, --message</code>: Session summary message</li>
<li><code>-f, --file</code>: Read message from file</li>
<li><code>--stdin</code>: Read message from stdin</li>
<li><code>-e, --entry</code>: Explicit entry path (overrides context)</li>
<li><code>--tags</code>: Additional tags (comma-separated)</li>
<li><code>--links</code>: Wiki-style links to include (comma-separated)</li>
<li><code>--no-timestamp</code>: Don't add timestamp header</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Context Commands</h2>
<h3>mx context</h3>
<p>Manage project-specific KB context.</p>
<pre><code class="language-bash">mx context                  # Show current context (alias for 'show')
mx context show             # Show current context
mx context show --suggest   # Show bootstrap suggestions if no context
mx context show --json      # JSON output
</code></pre>
<h3>mx context init</h3>
<p>Create a new .kbcontext file in the current directory.</p>
<pre><code class="language-bash">mx context init
mx context init --project myapp
mx context init --project myapp --directory projects/myapp/docs
mx context init --force     # Overwrite existing
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-p, --project</code>: Project name (auto-detected from directory if not provided)</li>
<li><code>-d, --directory</code>: KB directory (defaults to projects/<project>)</li>
<li><code>-f, --force</code>: Overwrite existing .kbcontext file</li>
</ul>
<h3>mx context validate</h3>
<p>Validate the current .kbcontext file against the knowledge base.</p>
<pre><code class="language-bash">mx context validate
mx context validate --json
</code></pre>
<p>Checks that:</p>
<ul>
<li>Primary directory exists (or can be created)</li>
<li>Paths reference valid locations (warning only)</li>
</ul>
<hr />
<h2>Beads Commands</h2>
<p>Browse beads issue tracking across registered projects.</p>
<h3>mx beads</h3>
<pre><code class="language-bash">mx beads list                    # List issues
mx beads show epstein-42         # Show issue details
mx beads kanban                  # Kanban board view
mx beads status                  # Project statistics
mx beads projects                # List registered projects
</code></pre>
<h3>mx beads list</h3>
<p>List issues from a beads project.</p>
<pre><code class="language-bash">mx beads list                         # All issues from detected project
mx beads list -p epstein              # Issues from epstein project
mx beads list --status=open           # Only open issues
mx beads list --type=bug --limit=10   # 10 bugs
mx beads list --json                  # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-p, --project</code>: Beads project prefix from registry</li>
<li><code>-s, --status</code>: Filter by status (open, in_progress, closed, all)</li>
<li><code>-t, --type</code>: Filter by type (task, bug, feature, epic)</li>
<li><code>-n, --limit</code>: Max results (default: 50)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx beads show</h3>
<p>Show detailed information for a specific issue.</p>
<pre><code class="language-bash">mx beads show epstein-42              # Full issue details with comments
mx beads show 42 -p epstein           # Equivalent with explicit project
mx beads show epstein-42 --no-comments # Without comments
mx beads show epstein-42 --json       # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-p, --project</code>: Beads project prefix (auto-detected from issue ID)</li>
<li><code>--no-comments</code>: Exclude comments</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx beads kanban</h3>
<p>Display issues grouped by status (kanban board view).</p>
<pre><code class="language-bash">mx beads kanban                       # Kanban for detected project
mx beads kanban -p voidlabs-ansible   # Specific project
mx beads kanban --compact             # Titles only
mx beads kanban --json                # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-p, --project</code>: Beads project prefix from registry</li>
<li><code>--compact</code>: Compact view (titles only)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx beads status</h3>
<p>Show project statistics and health summary.</p>
<pre><code class="language-bash">mx beads status                       # Stats for detected project
mx beads status -p memex              # Stats for memex project
mx beads status --json                # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>-p, --project</code>: Beads project prefix from registry</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx beads projects</h3>
<p>List all registered beads projects.</p>
<pre><code class="language-bash">mx beads projects                     # List all projects
mx beads projects --json              # JSON output
</code></pre>
<hr />
<h2>Batch Operations</h2>
<h3>mx batch</h3>
<p>Execute multiple KB operations in a single invocation.</p>
<pre><code class="language-bash">mx batch &lt;&lt; 'EOF'
add --title='Note 1' --tags='tag1' --category=tooling --content='Content'
search 'api'
get tooling/beads.md
update tooling/notes.md --content='New content' --append
delete tooling/old-entry.md --force
EOF

mx batch -f commands.txt              # Read from file
mx batch --stop-on-error              # Stop on first error
</code></pre>
<p><strong>Supported Commands:</strong></p>
<ul>
<li><code>add --title='...' --tags='...' [--category=...] [--content='...'] [--force]</code></li>
<li><code>update &lt;path&gt; [--tags='...'] [--content='...'] [--append]</code></li>
<li><code>upsert &lt;title&gt; [--content='...'] [--tags='...'] [--directory=...]</code></li>
<li><code>search &lt;query&gt; [--tags='...'] [--mode=...] [--limit=N]</code></li>
<li><code>get &lt;path&gt; [--metadata]</code></li>
<li><code>delete &lt;path&gt; [--force]</code></li>
</ul>
<p><strong>Options:</strong></p>
<ul>
<li><code>-f, --file</code>: Read commands from file instead of stdin</li>
<li><code>--continue-on-error / --stop-on-error</code>: Continue after errors (default: continue)</li>
</ul>
<p><strong>Output Format:</strong></p>
<pre><code class="language-json">{
  &quot;total&quot;: 2,
  &quot;succeeded&quot;: 2,
  &quot;failed&quot;: 0,
  &quot;results&quot;: [
    {&quot;index&quot;: 0, &quot;command&quot;: &quot;add ...&quot;, &quot;success&quot;: true, &quot;result&quot;: {...}},
    {&quot;index&quot;: 1, &quot;command&quot;: &quot;search ...&quot;, &quot;success&quot;: true, &quot;result&quot;: {...}}
  ]
}
</code></pre>
<hr />
<h2>Publishing</h2>
<h3>mx publish</h3>
<p>Generate static HTML site for GitHub Pages or other static hosting.</p>
<p><strong>KB Source Resolution:</strong></p>
<p>The publish command resolves which KB to publish in this order:</p>
<ol>
<li><code>--kb-root ./path</code> - explicit CLI override</li>
<li><code>project_kb</code> in <code>.kbcontext</code> - project-local KB</li>
<li>Requires <code>--global</code> flag to use <code>MEMEX_KB_ROOT</code></li>
</ol>
<p>This prevents accidentally publishing your organizational KB when you meant to publish project docs.</p>
<pre><code class="language-bash"># Using .kbcontext (recommended)
mx publish -o docs                   # Uses project_kb from .kbcontext

# Explicit KB source
mx publish --kb-root ./kb -o docs    # Specify KB directory
mx publish --global -o docs          # Use global MEMEX_KB_ROOT

# Base URL for subdirectory hosting
mx publish -o docs --base-url /repo-name   # For username.github.io/repo-name

# Other options
mx publish -o docs --title &quot;My Docs&quot;       # Custom site title
mx publish -o docs --index guides/welcome  # Custom landing page
mx publish -o docs --include-drafts        # Include draft entries
mx publish -o docs --include-archived      # Include archived entries
mx publish -o docs --no-clean              # Don't clean output dir first
mx publish -o docs --json                  # JSON output
</code></pre>
<p><strong>When to use --base-url:</strong></p>
<p>If your site is hosted at a subdirectory (e.g., <code>username.github.io/my-repo</code>), you need <code>--base-url /my-repo</code> so all links work correctly. Without it, links will point to the root domain and 404.</p>
<p><strong>Recommended: Configure in .kbcontext:</strong></p>
<pre><code class="language-yaml"># .kbcontext
project_kb: ./kb              # Project's documentation folder
publish_base_url: /my-repo    # Auto-applied to mx publish
</code></pre>
<p>Then just run <code>mx publish -o docs</code> - both settings are applied automatically.</p>
<p><strong>Options:</strong></p>
<ul>
<li><code>--kb-root, -k</code>: KB source directory</li>
<li><code>--global</code>: Use global MEMEX_KB_ROOT</li>
<li><code>--output, -o</code>: Output directory (default: _site)</li>
<li><code>--base-url, -b</code>: URL prefix for links</li>
<li><code>--title, -t</code>: Site title (default: Memex)</li>
<li><code>--index, -i</code>: Entry to use as landing page</li>
<li><code>--include-drafts</code>: Include draft entries in output</li>
<li><code>--include-archived</code>: Include archived entries in output</li>
<li><code>--no-clean</code>: Don't remove output directory before build</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<hr />
<h2>Maintenance Commands</h2>
<h3>mx init</h3>
<p>Initialize a new memex knowledge base.</p>
<pre><code class="language-bash">mx init                           # Use defaults
mx init --kb-root ~/my-kb         # Custom location
mx init --index-root ~/my-indices # Custom index location
mx init --no-context              # Skip .kbcontext setup
mx init --force                   # Recreate dirs (safe, keeps entries)
</code></pre>
<p><strong>Default Structure:</strong></p>
<pre><code>&lt;kb-root&gt;/
  ‚îú‚îÄ‚îÄ projects/       # Project-specific documentation
  ‚îú‚îÄ‚îÄ tooling/        # Tools and utilities
  ‚îî‚îÄ‚îÄ infrastructure/ # Infrastructure and DevOps
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--kb-root</code>: KB root path (defaults to MEMEX_KB_ROOT or ~/.memex/kb)</li>
<li><code>--index-root</code>: Index root path</li>
<li><code>--no-context</code>: Skip .kbcontext creation prompt</li>
<li><code>-f, --force</code>: Recreate directory structure (preserves existing entries)</li>
</ul>
<h3>mx reindex</h3>
<p>Rebuild search indices.</p>
<pre><code class="language-bash">mx reindex
</code></pre>
<p>Use this after bulk imports or if search results seem stale.</p>
<h3>mx prime</h3>
<p>Output agent workflow context (for Claude Code hooks).</p>
<pre><code class="language-bash">mx prime                    # Auto-detect mode
mx prime --full             # Force full output
mx prime --compact          # Force minimal output (for PreCompact hooks)
mx prime --project=myapp    # Include recent entries for project
mx prime -p myapp -d 14     # Last 14 days of myapp changes
mx prime --json             # JSON output
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--full</code>: Force full CLI output (ignore MCP detection)</li>
<li><code>--compact</code>: Force compact output (minimal)</li>
<li><code>-p, --project</code>: Include recent entries for project</li>
<li><code>-d, --days</code>: Days to look back for project entries (default: 7)</li>
<li><code>--json</code>: Output as JSON</li>
</ul>
<h3>mx templates</h3>
<p>List or show entry templates.</p>
<pre><code class="language-bash">mx templates              # List all available templates
mx templates list         # Same as above
mx templates show pattern # Show the 'pattern' template content
mx templates --json       # JSON output
</code></pre>
<p><strong>Template Sources (priority order):</strong></p>
<ol>
<li>Project: <code>.kbcontext</code> templates section</li>
<li>User: <code>~/.config/memex/templates/*.yaml</code></li>
<li>Built-in: troubleshooting, project, pattern, decision, runbook, api, meeting</li>
</ol>
<h3>mx schema</h3>
<p>Output machine-readable schema of all mx commands.</p>
<pre><code class="language-bash">mx schema                    # Full schema as JSON
mx schema -c add             # Schema for 'add' command only
mx schema --compact          # Minified JSON output
</code></pre>
<p>Useful for LLM agents and tools that need to programmatically understand available commands.</p>
<p><strong>Options:</strong></p>
<ul>
<li><code>-c, --command</code>: Get schema for specific command only</li>
<li><code>--compact</code>: Compact JSON output (no indentation)</li>
</ul>
<hr />
<h2>Programmatic Error Handling</h2>
<h3>--json-errors Flag</h3>
<p>Use <code>--json-errors</code> for structured error output that agents can parse:</p>
<pre><code class="language-bash">mx --json-errors get nonexistent/file.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{&quot;error&quot;: &quot;ENTRY_NOT_FOUND&quot;, &quot;code&quot;: 1002, &quot;message&quot;: &quot;Entry not found: nonexistent/file.md&quot;}
</code></pre>
<p><strong>Error Format:</strong></p>
<pre><code class="language-json">{
  &quot;error&quot;: &quot;ERROR_NAME&quot;,
  &quot;code&quot;: 1001,
  &quot;message&quot;: &quot;Human-readable message&quot;,
  &quot;details&quot;: {
    &quot;similar_entries&quot;: [&quot;path/to/similar.md&quot;],
    &quot;suggestion&quot;: &quot;Use --force to override&quot;
  }
}
</code></pre>
<h3>Error Codes Reference</h3>
<p><strong>Entry Errors (1001-1099):</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1001</td>
<td>DUPLICATE_DETECTED</td>
<td>Entry with similar title exists</td>
</tr>
<tr>
<td>1002</td>
<td>ENTRY_NOT_FOUND</td>
<td>Entry does not exist</td>
</tr>
<tr>
<td>1003</td>
<td>INVALID_PATH</td>
<td>Path is malformed or invalid</td>
</tr>
<tr>
<td>1004</td>
<td>ENTRY_EXISTS</td>
<td>Entry already exists (for create operations)</td>
</tr>
<tr>
<td>1005</td>
<td>PARSE_ERROR</td>
<td>Failed to parse entry content</td>
</tr>
<tr>
<td>1006</td>
<td>AMBIGUOUS_MATCH</td>
<td>Multiple entries match the query</td>
</tr>
</tbody>
</table>
<p><strong>Index/Search Errors (1101-1199):</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1101</td>
<td>INDEX_UNAVAILABLE</td>
<td>Search index is not available</td>
</tr>
<tr>
<td>1102</td>
<td>SEMANTIC_SEARCH_UNAVAILABLE</td>
<td>Semantic search not installed</td>
</tr>
<tr>
<td>1103</td>
<td>SEARCH_FAILED</td>
<td>Search operation failed</td>
</tr>
</tbody>
</table>
<p><strong>Configuration Errors (1201-1299):</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1201</td>
<td>KB_NOT_CONFIGURED</td>
<td>MEMEX_KB_ROOT not set</td>
</tr>
<tr>
<td>1202</td>
<td>INVALID_CATEGORY</td>
<td>Category/directory does not exist</td>
</tr>
<tr>
<td>1203</td>
<td>CONTEXT_NOT_FOUND</td>
<td>No .kbcontext file found</td>
</tr>
</tbody>
</table>
<p><strong>Validation Errors (1301-1399):</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1301</td>
<td>MISSING_REQUIRED_FIELD</td>
<td>Required option not provided</td>
</tr>
<tr>
<td>1302</td>
<td>INVALID_CONTENT</td>
<td>Content failed validation</td>
</tr>
<tr>
<td>1303</td>
<td>INVALID_TAGS</td>
<td>Tags format is invalid</td>
</tr>
<tr>
<td>1304</td>
<td>VALIDATION_ERROR</td>
<td>General input validation failure</td>
</tr>
</tbody>
</table>
<p><strong>File Operation Errors (1401-1499):</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1401</td>
<td>FILE_READ_ERROR</td>
<td>Failed to read file</td>
</tr>
<tr>
<td>1402</td>
<td>FILE_WRITE_ERROR</td>
<td>Failed to write file</td>
</tr>
<tr>
<td>1403</td>
<td>PERMISSION_DENIED</td>
<td>Insufficient permissions</td>
</tr>
</tbody>
</table>
<p><strong>Batch Operation Errors (1501-1599):</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1501</td>
<td>BATCH_PARSE_ERROR</td>
<td>Failed to parse batch command</td>
</tr>
<tr>
<td>1502</td>
<td>BATCH_UNKNOWN_COMMAND</td>
<td>Unknown command in batch</td>
</tr>
<tr>
<td>1503</td>
<td>BATCH_MISSING_ARGUMENT</td>
<td>Missing required argument</td>
</tr>
</tbody>
</table>
<h3>Agent Error Handling Example</h3>
<pre><code class="language-bash"># Agent workflow: try to get entry, handle errors programmatically
result=$(mx --json-errors get tooling/api-docs.md 2&gt;&amp;1)
exit_code=$?

if [ $exit_code -ne 0 ]; then
  error_code=$(echo &quot;$result&quot; | jq -r '.code')

  case $error_code in
    1002)
      # Entry not found - create it
      mx add --title=&quot;API Docs&quot; --tags=&quot;api&quot; --category=tooling --content=&quot;...&quot;
      ;;
    1201)
      # KB not configured - initialize
      mx init
      ;;
    *)
      echo &quot;Unexpected error: $result&quot;
      ;;
  esac
fi
</code></pre>
<hr />
<h2>See Also</h2>
<ul>
<li><a href="../guides/installation.html" class="wikilink">Installation Guide</a></li>
<li><a href="../guides/ai-integration.html" class="wikilink">AI Agent Integration</a></li>
<li><a href="entry-format.html" class="wikilink">Entry Format</a></li>
</ul>

        </div>
    </article>
</div>
        </main>

        <!-- Right panel -->
        <aside class="panel">
            
        <div class="panel-section">
            <div class="panel-header">Outgoing Links</div>
            <ul class="link-list">
                <li class="link-item">
                    <a href="/memex/guides/ai-integration.html">
                        <div class="link-title">AI Agent Integration</div>
                        <div class="link-path">guides/ai-integration</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/guides/installation.html">
                        <div class="link-title">Installation Guide</div>
                        <div class="link-path">guides/installation</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/reference/entry-format.html">
                        <div class="link-title">Entry Format Reference</div>
                        <div class="link-path">reference/entry-format</div>
                    </a>
                </li>
            </ul>
        </div>
        <div class="panel-section">
            <div class="panel-header">Backlinks</div>
            <ul class="link-list">
                <li class="link-item">
                    <a href="/memex/guides/ai-integration.html">
                        <div class="link-title">AI Agent Integration</div>
                        <div class="link-path">guides/ai-integration</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/guides/installation.html">
                        <div class="link-title">Installation Guide</div>
                        <div class="link-path">guides/installation</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/guides/mcp-setup.html">
                        <div class="link-title">MCP Server Setup</div>
                        <div class="link-path">guides/mcp-setup</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/guides/quick-start.html">
                        <div class="link-title">Quick Start Guide</div>
                        <div class="link-path">guides/quick-start</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/reference/beads.html">
                        <div class="link-title">Beads Integration</div>
                        <div class="link-path">reference/beads</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/reference/entry-format.html">
                        <div class="link-title">Entry Format Reference</div>
                        <div class="link-path">reference/entry-format</div>
                    </a>
                </li>
                <li class="link-item">
                    <a href="/memex/reference/templates.html">
                        <div class="link-title">Templates Reference</div>
                        <div class="link-path">reference/templates</div>
                    </a>
                </li>
            </ul>
        </div>
        </aside>
    </div>

    <script src="/memex/assets/search.js"></script>
    <script src="/memex/assets/sidebar.js"></script>
    <script>hljs.highlightAll(); mermaid.initialize({startOnLoad: true, theme: 'dark'});</script>
</body>
</html>
