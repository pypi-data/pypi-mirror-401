Metadata-Version: 2.4
Name: mtcli-percentlevels
Version: 1.0.0
Summary: Plugin mtcli para exibiÃ§Ã£o de nÃ­veis percentuais
License-Expression: GPL-3.0
License-File: LICENSE
Author: Valmir FranÃ§a
Author-email: vfranca3@gmail.com
Requires-Python: >=3.10,<3.14
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Requires-Dist: click (>=8.3.0,<9.0.0)
Requires-Dist: metatrader5 (>=5.0.5370,<6.0.0)
Requires-Dist: mtcli (>=3.2.0)
Description-Content-Type: text/markdown

# mtcli-percentlevels

Plugin do **mtcli** para exibiÃ§Ã£o de **nÃ­veis percentuais verticais** em relaÃ§Ã£o ao **fechamento D-1** ou **ajuste D-1**, com foco em **preparaÃ§Ã£o de pregÃ£o**, **leitura objetiva de risco** e **definiÃ§Ã£o prÃ©via de zonas de preÃ§o**.

Projetado para **day trade na B3**, com saÃ­da **100% textual**, compatÃ­vel com **NVDA / JAWS**, e integraÃ§Ã£o natural com metodologias baseadas em **VWAP, Auction Market Theory e RA-VWAP**.

---

## Funcionalidade

O plugin exibe **nÃ­veis percentuais simÃ©tricos**, calculados a partir de um preÃ§o de referÃªncia do pregÃ£o anterior.

### ğŸ“Œ PreÃ§o de referÃªncia (configurÃ¡vel)
- `close` â†’ Fechamento D-1 (**padrÃ£o**)
- `ajuste` â†’ Ajuste D-1

### ğŸ“Œ VariaÃ§Ãµes percentuais
- Passo configurÃ¡vel (padrÃ£o: **0,5%**)
- VariaÃ§Ã£o total configurÃ¡vel (padrÃ£o: **3%**)
- CÃ¡lculo simÃ©trico (acima e abaixo do referencial)

### ğŸ“Œ Layout de saÃ­da
- ExibiÃ§Ã£o **vertical**
- PreÃ§o de referÃªncia **centralizado**
- VariaÃ§Ãµes **positivas acima**
- VariaÃ§Ãµes **negativas abaixo**
- OrdenaÃ§Ã£o **decrescente em ambos os lados**
  - Positivos: `+3.0 â†’ +0.5`
  - Negativos: `-0.5 â†’ -3.0`

---

## Exemplo de saÃ­da

```text
Ativo: WING26
----------------------------------------
+3.0%  169141
+2.5%  168320
+2.0%  167498
+1.5%  166677
+1.0%  165856
+0.5%  165035
----------------------------------------
CLOSE  164215
----------------------------------------
-0.5%  163394
-1.0%  162573
-1.5%  161752
-2.0%  160931
-2.5%  160109
-3.0%  159288
````

---

## InstalaÃ§Ã£o

### Requisitos

* Python 3.10+
* MetaTrader 5 instalado e configurado
* Biblioteca Python `MetaTrader5`
* `mtcli`

### InstalaÃ§Ã£o local

```bash
pip install .
```

Ou via Poetry (desenvolvimento):

```bash
poetry install
```

---

## Uso

```bash
mt pl --symbol WING26
```

### OpÃ§Ãµes do comando

| OpÃ§Ã£o            | DescriÃ§Ã£o                                 | PadrÃ£o      |
| ---------------- | ----------------------------------------- | ----------- |
| `--symbol`, `-s` | Ativo negociado no MT5                    | obrigatÃ³rio |
| `--ref`          | PreÃ§o de referÃªncia (`close` ou `ajuste`) | `close`     |
| `--step`         | Passo percentual                          | `0.5`       |
| `--total`        | VariaÃ§Ã£o percentual total                 | `3.0`       |

### Exemplos

```bash
mt pl --symbol WING26
```

```bash
mt pl --symbol WING26 --ref ajuste
```

```bash
mt pl --symbol WING26 --step 1 --total 5
```

---

## Arquitetura

O plugin segue o padrÃ£o **MVC explÃ­cito**, adotado no ecossistema `mtcli`.

```text
mtcli_percentlevels/
â”œâ”€â”€ cli.py          # Interface Click
â”œâ”€â”€ controller.py   # OrquestraÃ§Ã£o
â”œâ”€â”€ model.py        # Dados e cÃ¡lculos
â”œâ”€â”€ view.py         # FormataÃ§Ã£o e saÃ­da
â”œâ”€â”€ conf.py         # ConfiguraÃ§Ãµes globais
â””â”€â”€ __init__.py
```

### Model

* Usa `copy_rates_from_pos`
* NÃ£o depende de datas ou timezone
* Funciona corretamente em:

  * dias Ãºteis
  * fins de semana
  * feriados
* PreÃ§o de referÃªncia sempre do **Ãºltimo pregÃ£o vÃ¡lido**

### View

* ResponsÃ¡vel apenas pela apresentaÃ§Ã£o
* FormataÃ§Ã£o numÃ©rica baseada em `DIGITOS`
* SaÃ­da linear e previsÃ­vel (acessibilidade)

### Controller

* Coordena model e view
* Sem regras de negÃ³cio

---

## DecisÃµes de projeto

### ğŸ”‘ IdentificaÃ§Ã£o do pregÃ£o

> O pregÃ£o anterior **nunca Ã© identificado por data**, apenas pela posiÃ§Ã£o do candle diÃ¡rio no MT5.

Isso evita erros comuns relacionados a:

* timezone
* execuÃ§Ã£o fora do horÃ¡rio de pregÃ£o
* feriados e fins de semana

### ğŸ”‘ PreÃ§o central como Ã¢ncora

O preÃ§o de referÃªncia (close ou ajuste) Ã© tratado como:

* ponto neutro
* base para risco
* eixo de decisÃ£o prÃ©-trade

---

## IntegraÃ§Ã£o com outros plugins

Este plugin Ã© complementar a:

* `mtcli-prevsession`
* `mtcli-vwap`
* `mtcli-vap`
* `mtcli-timesales`

Permitindo:

* checklist prÃ©-trade automÃ¡tico
* definiÃ§Ã£o objetiva de zonas
* leitura de confluÃªncia com volume

---

## LimitaÃ§Ãµes conhecidas

* O ajuste utilizado corresponde ao **close do candle D1**
* Ajuste oficial da B3 pode diferir

> VersÃµes futuras podem incorporar ajuste oficial via Times & Trades.

---

## Roadmap (ideias futuras)

* [ ] Flag `--json`
* [ ] Destaque de zonas (ex: equilÃ­brio / extensÃ£o)
* [ ] IntegraÃ§Ã£o direta com checklist RA-VWAP
* [ ] Ajuste oficial da B3

---

## LicenÃ§a

GPL

---

## Autor

Valmir FranÃ§a
Day trader Â· Desenvolvedor Python Â· Arquitetura CLI
Volume Â· VWAP Â· Auction Market Theory

```

