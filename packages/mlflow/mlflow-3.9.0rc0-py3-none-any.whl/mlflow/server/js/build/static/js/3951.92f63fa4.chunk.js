"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[3951],{14429:function(e,t,n){n.d(t,{KT:function(){return c},Pz:function(){return m},UY:function(){return p},VA:function(){return u},oy:function(){return d}});var i=n(46709),s=n(91105),r=n(79444);const a="startTimeLabel",o="startTime",l="endTime",d="LAST_7_DAYS",c=(0,i.createContext)(null),u=()=>{const e=(0,r.U)(),t=(0,i.useContext)(c),[n,u]=(0,s.ok)();let m,f,g;var v;t?(m=t.params.startTimeLabel||d,f=t.params.startTime,g=t.params.endTime):(m=n.get(a)||d,f=n.get(o)||void 0,g=null!==(v=n.get(l))&&void 0!==v?v:void 0);if("CUSTOM"!==m){const t=p(e.dateNow,{startTimeLabel:m});f=t.startTime,g=t.endTime}const h=(0,i.useMemo)(()=>({startTimeLabel:m,startTime:f,endTime:g}),[m,f,g]),T=(0,i.useCallback)((e,n=!1)=>{t?t.setParams(null!==e&&void 0!==e?e:{startTimeLabel:void 0,startTime:void 0,endTime:void 0},n):u(t=>(void 0===(null===e||void 0===e?void 0:e.startTime)?t.delete(o):"CUSTOM"===e.startTimeLabel&&t.set(o,e.startTime),void 0===(null===e||void 0===e?void 0:e.endTime)?t.delete(l):"CUSTOM"===e.startTimeLabel&&t.set(l,e.endTime),void 0===(null===e||void 0===e?void 0:e.startTimeLabel)?t.delete(a):t.set(a,e.startTimeLabel),t),{replace:n})},[t,u]);return[h,T,Boolean(n.has(a)||(null===t||void 0===t?void 0:t.disableAutomaticInitialization))]},m=e=>{const[t]=u(),[n]=(0,i.useState)(()=>null!==e&&void 0!==e?e:new Date);return(0,i.useMemo)(()=>{const{startTime:e,endTime:i}=p(n,t);return{startTime:e?new Date(e).getTime().toString():void 0,endTime:i?new Date(i).getTime().toString():void 0}},[n,t])};function p(e,t){return t.startTimeLabel&&"CUSTOM"!==t.startTimeLabel?function(e,t){switch(t){case"LAST_HOUR":return{startTime:new Date(new Date(e).setUTCHours((new Date).getUTCHours()-1)).toISOString(),endTime:e.toISOString()};case"LAST_24_HOURS":return{startTime:new Date(new Date(e).setUTCDate((new Date).getUTCDate()-1)).toISOString(),endTime:e.toISOString()};case"LAST_7_DAYS":return{startTime:new Date(new Date(e).setUTCDate((new Date).getUTCDate()-7)).toISOString(),endTime:e.toISOString()};case"LAST_30_DAYS":return{startTime:new Date(new Date(e).setUTCDate((new Date).getUTCDate()-30)).toISOString(),endTime:e.toISOString()};case"LAST_YEAR":return{startTime:new Date(new Date(e).setUTCFullYear((new Date).getUTCFullYear()-1)).toISOString(),endTime:e.toISOString()};case"ALL":return{startTime:void 0,endTime:e.toISOString()};default:throw new Error(`Unexpected start time label: ${t}`)}}(e,t.startTimeLabel):{startTime:t.startTime,endTime:t.endTime}}},43979:function(e,t,n){n.d(t,{J:function(){return c}});var i=n(68248),s=n(82716),r=n(27757),a=n(12998),o=n(84411),l=n(42747),d=n(73408);const c=({viewState:e,sessionId:t,className:n})=>{const{theme:c}=(0,r.u)();return(0,d.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",width:"100%",borderBottom:`1px solid ${c.colors.grey100}`,paddingBottom:`${c.spacing.sm}px`},""),className:n,children:[!("single-chat-session"===e)&&(0,d.Y)(o.$,{}),"single-chat-session"===e&&(0,d.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:c.spacing.sm},""),children:[(0,d.Y)(s.Tag,{color:"default",componentId:"mlflow.chat-sessions.session-header-label",css:(0,i.AH)({padding:c.spacing.xs+2,margin:0},""),children:(0,d.FD)("span",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:c.spacing.sm},""),children:[(0,d.Y)(s.SpeechBubbleIcon,{}),(0,d.Y)(r.T.Text,{ellipsis:!0,bold:!0,children:(0,d.Y)(l.sA,{id:"EAf6xM",defaultMessage:"Session"})})]})}),(0,d.Y)(r.T.Title,{level:3,withoutMargins:!0,children:t}),t&&(0,d.Y)(a.ad,{copyText:t,componentId:"mlflow.chat-sessions.copy-session-id",buttonProps:{icon:void 0}})]})]})}},48785:function(e,t,n){n.d(t,{_:function(){return r}});var i=n(4168),s=n(54313);const r=({sessionId:e})=>{const t=i.tl.CONTAINS;return[{column:`${i.rc}:${s.n2}`,operator:e?i.tl.EQUALS:t,value:null!==e&&void 0!==e?e:""}]}},54152:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(68248),s=n(91113),r=n(55570),a=n(42747),o=n(4168),l=n(91105),d=n(59930),c=n.n(d),u=n(54741),m=n(46709),p=n(27757),f=n(54313),g=n(76118),v=n(40724),h=n(25637),T=n(73408);var b={name:"1b2lv1",styles:"padding-left:0;border:0"};const x=({traces:e,sessionId:t})=>{const{theme:n}=(0,p.u)(),s=(0,m.useMemo)(()=>{var t;const n=null===(t=(0,g.first)(e))||void 0===t?void 0:t.info;if(n&&(0,f.gD)(n))return n},[e]),r=(0,m.useMemo)(()=>{var e,t;return null!==(e=null===s||void 0===s||null===(t=s.assessments)||void 0===t?void 0:t.filter(f.rX))&&void 0!==e?e:[]},[s]),a=f.iX,o=(0,f.M5)();return s?(0,T.Y)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",minHeight:0,paddingTop:n.spacing.sm,overflow:"auto"},""),children:(0,T.Y)(h.ResizableBox,{width:300,height:void 0,axis:"x",resizeHandles:["w"],minConstraints:[300,150],maxConstraints:[600,150],handle:(0,T.Y)("div",{css:(0,i.AH)({width:n.spacing.sm,left:-n.spacing.sm/2,height:"100%",position:"absolute",top:0,cursor:"ew-resize","&:hover":{backgroundColor:n.colors.border,opacity:.5}},"")}),css:(0,i.AH)({position:"relative",display:"flex",borderLeft:`1px solid ${n.colors.border}`,marginLeft:n.spacing.sm,paddingLeft:n.spacing.sm,flex:1},""),children:(0,T.Y)(f.ei,{...o,modelTraceInfo:s,chatSessionId:t,children:(0,T.Y)(a,{assessments:r,traceId:s.trace_id,css:b,assessmentsTitleOverride:y,disableCloseButton:!0})})})}):null},y=e=>(0,T.Y)(v.A,{id:"5IeFBG",defaultMessage:"Session scorers{count, plural, =0 {} other { (#)}}",values:{count:null!==e&&void 0!==e?e:0}});var S=n(43979),w=n(82716),_=n(54712);const I=({traces:e,selectedTurnIndex:t,setSelectedTurnIndex:n,setSelectedTrace:s,chatRefs:r})=>{const{theme:a}=(0,p.u)(),o=(0,m.useCallback)(e=>{const t=(0,f.MF)(e);r.current[t]&&r.current[t].scrollIntoView({behavior:"smooth"})},[r]);return e?(0,T.Y)("div",{css:(0,i.AH)({minHeight:0,width:200,borderRight:`1px solid ${a.colors.border}`,overflow:"auto",paddingTop:a.spacing.sm,paddingRight:a.spacing.sm},""),children:e.map((s,r)=>(0,T.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:a.spacing.sm,backgroundColor:t===r?a.colors.actionDefaultBackgroundHover:void 0,padding:a.spacing.xs,borderRadius:a.borders.borderRadiusSm,cursor:"pointer"},""),onMouseEnter:()=>n(r),onClick:()=>o(s),children:[(0,T.Y)(_.b,{displayLink:r!==e.length-1}),(0,T.Y)(p.T.Text,{bold:!0,children:(0,T.Y)(v.A,{id:"8ikgws",defaultMessage:"Turn {turnNumber}",values:{turnNumber:r+1}})})]},(0,f.MF)(s)))}):null};var Y={name:"xjt14x",styles:"width:60%"},D={name:"2ji30f",styles:"width:80%"},k={name:"maimdf",styles:"width:70%"};const A=()=>{const{theme:e}=(0,p.u)();return(0,T.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",minHeight:0,width:200,borderRight:`1px solid ${e.colors.border}`,gap:e.spacing.xs,paddingTop:e.spacing.sm,paddingRight:e.spacing.sm},""),children:[(0,T.Y)(w.TitleSkeleton,{css:Y}),(0,T.Y)(w.TitleSkeleton,{css:D}),(0,T.Y)(w.TitleSkeleton,{css:k})]})};var L=n(69986),M=n(48785),C=n(88442),H=n(44105);const R={sessionTokens:{input_tokens:0,output_tokens:0},sessionLatency:0,perTurnMetrics:[]};var O=n(66916);const F=({chatSessionMetrics:e})=>{var t;const{theme:n}=(0,p.u)();return(0,T.FD)("div",{css:(0,i.AH)({borderBottom:`1px solid ${n.colors.grey100}`,paddingBottom:n.spacing.sm,display:"flex",gap:n.spacing.sm},""),children:[e.sessionTokens.total_tokens&&(0,T.FD)("div",{css:(0,i.AH)({display:"flex",gap:n.spacing.xs},""),children:[(0,T.Y)(p.T.Text,{color:"secondary",children:(0,T.Y)(a.sA,{id:"Cu5P8e",defaultMessage:"Tokens"})}),(0,T.Y)(w.Tag,{componentId:"mlflow.experiment.chat-session.metrics.tokens-tag",icon:(0,T.Y)(w.TokenIcon,{}),children:e.sessionTokens.total_tokens})]}),e.sessionLatency&&(0,T.FD)("div",{css:(0,i.AH)({display:"flex",gap:n.spacing.xs},""),children:[(0,T.Y)(p.T.Text,{color:"secondary",children:(0,T.Y)(a.sA,{id:"XHKE0m",defaultMessage:"Latency"})}),(0,T.Y)(w.Tag,{componentId:"mlflow.experiment.chat-session.metrics.latency-tag",icon:(0,T.Y)(O.C,{}),children:(0,T.Y)(a.sA,{id:"iZOdRI",defaultMessage:"{latency} sec",values:{latency:null===(t=e.sessionLatency)||void 0===t?void 0:t.toFixed(4)}})})]})]})};const U=({children:e,invalidateTraceQuery:t})=>(0,T.Y)(f.ei,{invalidateTraceQuery:t,children:e});var E={name:"l2hjmg",styles:"display:flex;flex-direction:column;flex:1;min-height:0"},N={name:"1ndun5c",styles:"display:flex;flex:1;min-height:0"},B={name:"1ndun5c",styles:"display:flex;flex:1;min-height:0"};var P=(0,r.X)(s.A.mlflowServices.CHAT_SESSIONS,()=>{const{theme:e}=(0,p.u)(),{experimentId:t,sessionId:n}=(0,l.g)(),s=(0,l.zy)(),[r,a]=(0,m.useState)(null),[d,v]=(0,m.useState)(null),h=(0,m.useRef)({});c()(t,"Experiment ID must be defined"),c()(n,"Session ID must be defined");const b=(0,m.useMemo)(()=>new URLSearchParams(s.search).get(H.hb),[s.search]),{loading:y}=(0,u.L)({experimentId:t}),_=(0,m.useMemo)(()=>[(0,o.$U)(t)],[t]),Y=(0,m.useMemo)(()=>(0,M._)({sessionId:n}),[n]),{data:D,isLoading:k}=(0,o.Zn)({locations:_,filters:Y,disabled:!1}),O=(0,m.useMemo)(()=>null===D||void 0===D?void 0:D.sort((e,t)=>new Date(e.request_time).getTime()-new Date(t.request_time).getTime()),[D]),P=(({traceInfos:e})=>(0,m.useMemo)(()=>{var t;const n=(0,g.last)(e);if(!n)return R;const i=(0,f.m4)(n),{sessionLatency:s,perTurnMetrics:r}=null!==(t=null===e||void 0===e?void 0:e.reduce((e,t)=>{const n=parseFloat(t.execution_duration||"0");return{sessionLatency:e.sessionLatency+n,perTurnMetrics:[...e.perTurnMetrics,{tokens:(0,f.m4)(t),latency:t.execution_duration}]}},{sessionLatency:0,perTurnMetrics:[]}))&&void 0!==t?t:{};return{sessionTokens:i,sessionLatency:s,perTurnMetrics:r}},[e]))({traceInfos:O}),$=L.Uv,z=(0,m.useCallback)(e=>e,[]),{data:J,isLoading:V,invalidateSingleTraceQuery:Z}=(0,o.Wx)($,O);return(0,m.useEffect)(()=>{if(b&&J&&J.length>0&&!V){const e=J.findIndex(e=>(0,f.MF)(e)===b);if(-1!==e){a(e);const t=h.current[b];t&&t.scrollIntoView({behavior:"smooth",block:"center"})}}},[b,J,V]),(0,T.Y)(U,{invalidateTraceQuery:Z,children:(0,T.FD)("div",{css:E,children:[(0,T.Y)(S.J,{viewState:"single-chat-session",sessionId:n,css:(0,f.aZ)()?{borderBottom:"none"}:void 0}),(0,f.aZ)()&&(0,T.Y)(F,{chatSessionMetrics:P}),V||k?(0,T.FD)("div",{css:N,children:[(0,T.Y)(A,{}),(0,T.Y)(C.I,{})]}):(0,T.FD)("div",{css:B,children:[(0,T.Y)(I,{traces:null!==J&&void 0!==J?J:[],selectedTurnIndex:r,setSelectedTurnIndex:a,setSelectedTrace:v,chatRefs:h}),(0,T.Y)(C.L,{traces:null!==J&&void 0!==J?J:[],selectedTurnIndex:r,setSelectedTurnIndex:a,setSelectedTrace:v,chatRefs:h,getAssessmentTitle:z}),(0,f.aZ)()&&(0,T.Y)(x,{traces:null!==J&&void 0!==J?J:[],sessionId:n})]}),(0,T.Y)(w.Drawer.Root,{open:null!==d,onOpenChange:e=>{e||v(null)},children:(0,T.Y)(w.Drawer.Content,{componentId:"mlflow.experiment.chat-session.trace-drawer",title:d?(0,f.MF)(d):"",width:"90vw",expandContentToFullHeight:!0,children:(0,T.Y)("div",{css:(0,i.AH)({height:"100%",marginLeft:-e.spacing.lg,marginRight:-e.spacing.lg,marginBottom:-e.spacing.lg},""),children:d&&(0,T.Y)(f.a8,{modelTrace:d,collapseAssessmentPane:"force-open"})})})})]})})},(0,T.Y)(a.sA,{id:"fYtbd8",defaultMessage:"An error occurred while rendering the chat session."}))},54712:function(e,t,n){n.d(t,{b:function(){return o}});var i=n(68248),s=n(82716),r=n(27757),a=n(73408);const o=({displayLink:e=!1})=>{const{theme:t}=(0,r.u)();return(0,a.Y)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t.general.iconSize,height:t.general.iconSize,borderRadius:t.borders.borderRadiusSm,border:`1px solid ${t.colors.branded.ai.gradientStart}`,backgroundColor:t.colors.backgroundSecondary,"::after":e?{content:'""',position:"absolute",width:1,height:t.spacing.md,backgroundColor:t.colors.branded.ai.gradientStart,top:"100%",left:t.spacing.sm}:void 0},""),children:(0,a.Y)(s.ChainIcon,{color:"ai"})})}},54741:function(e,t,n){n.d(t,{L:function(){return r}});var i=n(81641);const s=i.J1`
  query MlflowGetExperimentQuery($input: MlflowGetExperimentInput!) @component(name: "MLflow.ExperimentRunTracking") {
    mlflowGetExperiment(input: $input) {
      apiError {
        code
        message
      }
      experiment {
        artifactLocation
        creationTime
        experimentId
        lastUpdateTime
        lifecycleStage
        name
        tags {
          key
          value
        }
      }
    }
  }
`,r=({experimentId:e,options:t={}})=>{var n;const{data:r,loading:a,error:o,refetch:l}=(0,i.IT)(s,{variables:{input:{experimentId:e}},skip:!e,...t});return{loading:a,data:null===r||void 0===r||null===(n=r.mlflowGetExperiment)||void 0===n?void 0:n.experiment,refetch:l,apolloError:o,apiError:(()=>{var e;return null===r||void 0===r||null===(e=r.mlflowGetExperiment)||void 0===e?void 0:e.apiError})()}}},69986:function(e,t,n){n.d(t,{RT:function(){return f},Rb:function(){return d},Uv:function(){return l},a_:function(){return g},fz:function(){return v},lc:function(){return T}});var i=n(12803),s=n(54313),r=n(71540),a=n(13433),o=n(4168);async function l(e,t){if(e){if((0,r.ZZ)(t)===r.Cf){const t=await(0,a.UA)({traceId:e});if(null!==t&&void 0!==t&&t.trace&&t.trace.data)return{info:t.trace.trace_info||{},data:t.trace.data}}return(0,s.ho)(e)?s._A.getTraceV4(e):e.startsWith("tr-")?s.TJ.getTraceV3(e):d(e)}}async function d(e){if(!e)return;const[t,n]=await Promise.all([i.x.getExperimentTraceInfo(e).then(e=>e.trace_info||{}),i.x.getExperimentTraceData(e)]);return n?{info:t,data:n}:void 0}function c(e){if("trace_id"in e&&"span_id"in e){return!e.parent_span_id}const t=e;return!t.parent_span_id&&!t.parent_id}function u(e){var t;return((null===(t=e.data)||void 0===t?void 0:t.spans)||[]).find(c)||null}function m(e){return"string"===typeof e?e:JSON.stringify(e)}function p(e,t,n){if(t in e){const n=e[t];if(void 0!==n)return m(n)}return void 0!==(0,o.zl)(e.attributes,n)?m((0,o.zl)(e.attributes,n)):null}function f(e){const t=u(e);return t?p(t,"inputs","mlflow.spanInputs"):null}function g(e){const t=u(e);return t?p(t,"outputs","mlflow.spanOutputs"):null}function v(e){const t={},n=e.info;return n.assessments&&Array.isArray(n.assessments)?(n.assessments.forEach(e=>{var n;if(!function(e){return"expectation"in e}(e))return;if(!1===e.valid)return;if("HUMAN"!==(null===(n=e.source)||void 0===n?void 0:n.source_type))return;const i=function(e){if("value"in e)return e.value;if("serialized_value"in e&&e.serialized_value)try{return JSON.parse(e.serialized_value.value)}catch{return e.serialized_value.value}return null}(e.expectation);void 0!==i&&null!==i&&(t[e.assessment_name]=i)}),t):t}function h(e){if("trace_id"in e&&"span_id"in e){var t;let n=null===(t=e.attributes)||void 0===t?void 0:t["mlflow.spanType"];if("string"===typeof n&&n.startsWith('"')&&n.endsWith('"'))try{n=JSON.parse(n)}catch{}return"RETRIEVER"===n}let n=e.span_type;if("string"===typeof n&&n.startsWith('"')&&n.endsWith('"'))try{n=JSON.parse(n)}catch{}return"RETRIEVER"===n}function T(e){const t=function(e){var t;const n=(null===(t=e.data)||void 0===t?void 0:t.spans)||[];if(0===n.length)return[];const i=n.filter(h);if(0===i.length)return[];const s=new Set;for(const a of i){const e="span_id"in a?a.span_id:a.context.span_id;e&&s.add(e)}const r=[];for(const a of i){let e,t=!0;if("trace_id"in a&&"span_id"in a)e=a.parent_span_id;else{const t=a;e=t.parent_span_id||t.parent_id}for(;e;){if(s.has(e)){t=!1;break}let i;for(const t of n)if(("span_id"in t?t.span_id:t.context.span_id)===e){i=t;break}if(!i)break;if("trace_id"in i&&"span_id"in i)e=i.parent_span_id;else{const t=i;e=t.parent_span_id||t.parent_id}}t&&r.push(a)}return r}(e);if(0===t.length)return null;const n=[];for(const r of t){let e=[],t="",a="";if("trace_id"in r&&"span_id"in r){var i;const n=r;t=n.span_id||"",a=n.name||t;let s=null===(i=n.attributes)||void 0===i?void 0:i["mlflow.spanOutputs"];if("string"===typeof s)try{s=JSON.parse(s)}catch{continue}s&&"object"===typeof s&&Array.isArray(s)&&(e=s.map(e=>{var t;return{doc_uri:e.doc_uri||e.uri||(null===(t=e.metadata)||void 0===t?void 0:t.doc_uri)||"",content:e.content||e.page_content||""}}))}else{var s;const n=r;t=(null===(s=n.context)||void 0===s?void 0:s.span_id)||"",a=n.name||t,n.outputs&&Array.isArray(n.outputs)&&(e=n.outputs.map(e=>({doc_uri:e.doc_uri||e.uri||"",content:e.content||e.page_content||""})))}e.length>0&&n.push({span_id:t,span_name:a,documents:e})}return 0===n.length?null:{retrieved_documents:n}}},76256:function(e,t,n){n.d(t,{L:function(){return s},S:function(){return r}});var i=n(43617);function s(e,t){return(0,i.N4)(t)}const r=i.N4},79444:function(e,t,n){n.d(t,{U:function(){return d},k:function(){return l}});var i=n(76118),s=n(46709),r=n(73408);const a=()=>({dateNow:new Date,lastRefreshTime:Date.now(),refresh:()=>{}}),o=(0,s.createContext)(a()),l=({config:e,children:t})=>{const n=a(),l=(0,i.merge)({},n,e),[d,c]=s.useState(l.lastRefreshTime),u=(0,s.useMemo)(()=>new Date(d),[d]),m=(0,s.useCallback)(()=>{c(Date.now())},[]);return(0,r.Y)(o.Provider,{value:{...l,dateNow:u,lastRefreshTime:d,refresh:m},children:t})},d=()=>{const e=(0,s.useContext)(o);return e||a()}},84411:function(e,t,n){n.d(t,{$:function(){return T}});var i=n(68248),s=n(46709),r=n(82716),a=n(27757),o=n(79081),l=n(4168),d=n(42747),c=n(92338),u=n(14429),m=n(76118),p=n(16453),f=n(79444),g=n(39595),v=n(92388),h=n(73408);const T=s.memo(function({excludeOptions:e,refreshButtonComponentId:t="mlflow.experiment-evaluation-monitoring.refresh-date-button"}){const n=(0,d.tz)(),{theme:T}=(0,a.u)(),b=(0,g.jE)(),x=(0,v.C)({queryKey:[l.TH]}),[y,S]=(0,u.VA)(),w=(0,s.useMemo)(()=>{const t=(0,c.p)(n);return null!==e&&void 0!==e&&e.length?t.filter(t=>!e.includes(t.key)):t},[n,e]),_=n.formatMessage({id:"BJvcsS",defaultMessage:"Time Range"}),I=(0,f.U)();return(0,h.FD)("div",{css:(0,i.AH)({display:"flex",gap:T.spacing.sm,alignItems:"center"},""),children:[(0,h.FD)(r.DialogCombobox,{componentId:"mlflow.experiment-evaluation-monitoring.date-selector",label:_,value:y.startTimeLabel?[y.startTimeLabel]:[u.oy],children:[(0,h.Y)(r.DialogComboboxTrigger,{renderDisplayedValue:e=>{var t;return null===(t=w.find(t=>t.key===e))||void 0===t?void 0:t.label},allowClear:!(0,m.isNil)(y.startTimeLabel)&&y.startTimeLabel!==u.oy,onClear:()=>{S({startTimeLabel:u.oy})},"data-testid":"time-range-select-dropdown"}),(0,h.Y)(r.DialogComboboxContent,{children:(0,h.Y)(r.DialogComboboxOptionList,{children:w.map(e=>(0,h.Y)(r.DialogComboboxOptionListSelectItem,{checked:y.startTimeLabel===e.key||e.key===u.oy&&(0,m.isNil)(y.startTimeLabel),title:e.label,"data-testid":`time-range-select-${e}`,value:e.key,onChange:()=>{S({...y,startTimeLabel:e.key})},children:e.label},e.key))})})]}),"CUSTOM"===y.startTimeLabel&&(0,h.Y)(h.FK,{children:(0,h.Y)(p.cv,{id:"date-picker-range",includeTime:!0,selected:{from:new Date(y.startTime),to:y.endTime?new Date(y.endTime):I.dateNow},onChange:e=>{const t=e.target.value;S({...y,startTime:null!==t&&void 0!==t&&t.from?t.from.toISOString():void 0,endTime:null!==t&&void 0!==t&&t.to?t.to.toISOString():void 0})},startDatePickerProps:{componentId:"experiment-evaluation-monitoring-start-date-picker",datePickerProps:{disabled:{after:I.dateNow}},value:y.startTime?new Date(y.startTime):void 0},endDatePickerProps:{componentId:"experiment-evaluation-monitoring-end-date-picker",datePickerProps:{disabled:{after:I.dateNow}},value:y.endTime?new Date(y.endTime):void 0}})}),(0,h.Y)(o.T,{componentId:"mlflow.experiment-evaluation-monitoring.trace-info-hover-request-time",content:n.formatMessage({id:"Arvaod",defaultMessage:"Showing data up to {date}."},{date:I.dateNow.toLocaleString(navigator.language,{timeZoneName:"short"})}),children:(0,h.Y)(a.B,{type:"link",componentId:t,disabled:Boolean(x),onClick:()=>{I.refresh(),(0,l.BL)({queryClient:b})},children:(0,h.Y)(r.RefreshIcon,{})})})]})})},88442:function(e,t,n){n.d(t,{I:function(){return v},L:function(){return p}});var i=n(68248),s=n(54313),r=n(82716),a=n(27757),o=n(79081),l=n(42747),d=n(54712),c=n(76118),u=n(73408);var m={name:"82a6rk",styles:"flex:1"};const p=({traces:e,selectedTurnIndex:t,setSelectedTurnIndex:n=c.noop,setSelectedTrace:r,chatRefs:p,getAssessmentTitle:f})=>{const{theme:g}=(0,a.u)();return e?(0,u.Y)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",flex:1,minWidth:0,height:"100%",overflowY:"auto",gap:g.spacing.sm,paddingTop:g.spacing.sm,paddingLeft:g.spacing.sm},""),children:e.map((e,c)=>{const v=t===c,h=(0,s.MF)(e);return(0,u.FD)("div",{ref:e=>{e&&p&&(p.current[h]=e)},css:(0,i.AH)({display:"flex",flexDirection:"column",position:"relative",gap:g.spacing.sm,backgroundColor:v?g.colors.actionDefaultBackgroundHover:void 0,border:`1px solid ${g.colors.border}`,padding:g.spacing.md,borderRadius:g.borders.borderRadiusMd},""),onMouseEnter:()=>n(c),children:[(0,u.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:g.spacing.sm},""),children:[(0,u.Y)(d.b,{}),(0,u.Y)(a.T.Text,{bold:!0,children:(0,u.Y)(l.sA,{id:"8ikgws",defaultMessage:"Turn {turnNumber}",values:{turnNumber:c+1}})}),(0,u.Y)("div",{css:m}),(0,u.Y)(a.B,{componentId:"mlflow.experiment.chat-session.view-trace",size:"small",color:"primary",css:[{visibility:v&&r?"visible":"hidden"},(0,a.i)({backgroundColor:g.colors.backgroundPrimary}),""],onClick:()=>null===r||void 0===r?void 0:r(e),children:(0,u.Y)(l.sA,{id:"7FI4Hp",defaultMessage:"View full trace"})})]}),(0,u.Y)(s.y8,{trace:e},h),(0,s.aZ)()&&(0,u.FD)(u.FK,{children:[(0,u.Y)(o.S,{size:"sm"}),(0,u.Y)(s.r_,{trace:e,getAssessmentTitle:f,onAddAssessmentsClick:r?()=>r(e):void 0})]})]},h)})}):null};var f={name:"12x64ox",styles:"width:20%"},g={name:"12x64ox",styles:"width:20%"};const v=()=>{const{theme:e}=(0,a.u)();return(0,u.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",flex:1,minWidth:0,height:"100%",overflowY:"auto",gap:e.spacing.sm,paddingTop:e.spacing.sm,paddingLeft:e.spacing.sm},""),children:[(0,u.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:e.spacing.sm,width:"60%",alignSelf:"flex-start"},""),children:[(0,u.Y)(r.TitleSkeleton,{css:f}),[...Array(5).keys()].map(e=>(0,u.Y)(r.ParagraphSkeleton,{seed:`s-${e}`},e))]}),(0,u.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:e.spacing.sm,width:"60%",alignSelf:"flex-end"},""),children:[(0,u.Y)(r.TitleSkeleton,{css:g}),[...Array(5).keys()].map(e=>(0,u.Y)(r.ParagraphSkeleton,{seed:`s-${e}`},e))]})]})}},92338:function(e,t,n){function i(e){return[{key:"LAST_HOUR",label:e.formatMessage({id:"bjoGjg",defaultMessage:"Last hour"})},{key:"LAST_24_HOURS",label:e.formatMessage({id:"JChRnq",defaultMessage:"Last 24 hours"})},{key:"LAST_7_DAYS",label:e.formatMessage({id:"eQsXm7",defaultMessage:"Last 7 days"})},{key:"LAST_30_DAYS",label:e.formatMessage({id:"p1H1KR",defaultMessage:"Last 30 days"})},{key:"LAST_YEAR",label:e.formatMessage({id:"EI7moF",defaultMessage:"Last year"})},{key:"ALL",label:e.formatMessage({id:"HeNa8H",defaultMessage:"All"})},{key:"CUSTOM",label:e.formatMessage({id:"TpmJlu",defaultMessage:"Custom"})}]}n.d(t,{p:function(){return i}})}}]);