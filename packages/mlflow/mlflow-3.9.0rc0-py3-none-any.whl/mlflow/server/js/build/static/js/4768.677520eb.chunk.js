"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4768],{30618:function(e,t,a){a.d(t,{b:function(){return l}});var i=a(90970),o=a(15714),r=a(60719),n=a(49960),s=a(44941),l=(0,i.gu)({chartName:"LineChart",GraphicalChild:o.N,axisComponents:[{axisType:"xAxis",AxisComp:r.W},{axisType:"yAxis",AxisComp:n.h}],formatAxisMap:s.pr})},34768:function(e,t,a){a.d(t,{TraceAssessmentChart:function(){return E}});var i=a(68248),o=a(46709),r=a(27757),n=a(82716),s=a(40724),l=a(66774),c=a(39833),d=a(60719),m=a(49960),u=a(858),h=a(6581),g=a(13240),p=a(30618),v=a(15714),f=a(97245),x=a(54313),y=a(23327),T=a(83110),S=a(3409);const A=(e,t)=>{for(let a=0;a<t.length;a++){const i=a===t.length-1;if(e>=t[a].min&&(i?e<=t[a].max:e<t[a].max))return a}return t.length-1};var C=a(69983);function Y(e){const{experimentId:t,startTimeMs:a,endTimeMs:i,timeIntervalSeconds:r,timeBuckets:n}=(0,C.W)(),s=(0,o.useMemo)(()=>[(0,x.$L)(x.mg.NAME,e)],[e]),{data:l,isLoading:c,error:d}=(0,y.o4)({experimentId:t,startTimeMs:a,endTimeMs:i,viewType:x.mW.ASSESSMENTS,metricName:x.cs.ASSESSMENT_VALUE,aggregations:[{aggregation_type:x.DF.AVG}],filters:s,timeIntervalSeconds:r}),{data:m,isLoading:u,error:h}=(0,y.o4)({experimentId:t,startTimeMs:a,endTimeMs:i,viewType:x.mW.ASSESSMENTS,metricName:x.cs.ASSESSMENT_COUNT,aggregations:[{aggregation_type:x.DF.COUNT}],filters:s,dimensions:[x.gV.ASSESSMENT_VALUE]}),g=(0,o.useMemo)(()=>(null===l||void 0===l?void 0:l.data_points)||[],[null===l||void 0===l?void 0:l.data_points]),p=(0,o.useMemo)(()=>(null===m||void 0===m?void 0:m.data_points)||[],[null===m||void 0===m?void 0:m.data_points]),v=(0,o.useCallback)(e=>{var t,a;return null!==(t=null===(a=e.values)||void 0===a?void 0:a[x.DF.AVG])&&void 0!==t?t:null},[]),f=(0,T.NM)(g,v);return{timeSeriesChartData:(0,o.useMemo)(()=>{const e=n.map(e=>{var t;return null!==(t=f.get(e))&&void 0!==t?t:null});return n.map((t,a)=>({name:(0,T.fq)(t,r),value:e[a],isIsolated:(0,S.yw)(e,a)}))},[n,f,r]),distributionChartData:(0,o.useMemo)(()=>{const e={};for(const r of p){var t;const i=null===(t=r.dimensions)||void 0===t?void 0:t[x.gV.ASSESSMENT_VALUE];if(void 0!==i){var a;const t=(null===(a=r.values)||void 0===a?void 0:a[x.DF.COUNT])||0;e[i]=(e[i]||0)+t}}const i=Object.keys(e);if(((e,t=5)=>{if(0===e.length)return!1;const a=e.map(e=>parseFloat(e)).filter(e=>!isNaN(e)),i=new Set(a);return a.some(e=>!Number.isInteger(e))||i.size>t})(i)){const t=((e,t=5)=>{const a=e.map(e=>parseFloat(e)).filter(e=>!isNaN(e));if(0===a.length)return[];const i=Math.min(...a),o=Math.max(...a);if(i===o)return[{min:i,max:o,label:i.toFixed(2)}];const r=(o-i)/t;return Array.from({length:t},(e,a)=>{const n=i+a*r,s=a===t-1?o:i+(a+1)*r;return{min:n,max:s,label:`${n.toFixed(2)}-${s.toFixed(2)}`}})})(i),a=t.map(()=>0);for(const[i,o]of Object.entries(e)){const e=parseFloat(i);if(!isNaN(e)){const i=A(e,t);a[i]+=o}}return t.map((e,t)=>({name:e.label,count:a[t]}))}var o;return(o=i,[...o].sort((e,t)=>e.localeCompare(t,void 0,{numeric:!0}))).map(t=>({name:t,count:e[t]||0}))},[p]),isLoading:c||u,error:d||h,hasData:g.length>0||p.length>0}}var M=a(73408);var N={name:"82a6rk",styles:"flex:1"};const b=({label:e,children:t})=>{const{theme:a}=(0,r.u)();return(0,M.FD)("div",{css:N,children:[(0,M.Y)(r.T.Text,{color:"secondary",size:"sm",children:e}),(0,M.Y)("div",{css:(0,i.AH)({height:S.tz,marginTop:a.spacing.sm},""),children:(0,M.Y)(l.u,{width:"100%",height:"100%",children:t})})]})},E=({assessmentName:e,lineColor:t,avgValue:a})=>{const{theme:l}=(0,r.u)(),x=(0,S.zZ)(),y=(0,S.IT)(),T=(0,S.gy)(),A=t||l.colors.green500,C=(0,o.useCallback)(e=>[e,"count"],[]),N=(0,o.useCallback)(t=>[t.toFixed(2),e],[e]),E=(0,S.T3)(A),{timeSeriesChartData:k,distributionChartData:F,isLoading:D,error:w,hasData:_}=Y(e);return D?(0,M.Y)(S.lh,{}):w?(0,M.Y)(S.nN,{}):_?(0,M.FD)(S.h,{"data-testid":`assessment-chart-${e}`,children:[(0,M.Y)(S.XQ,{icon:(0,M.Y)(n.CheckCircleIcon,{css:(0,i.AH)({color:A},"")}),title:e,value:void 0!==a?a.toFixed(2):void 0,subtitle:void 0!==a?(0,M.Y)(s.A,{id:"Rwi+VC",defaultMessage:"avg score"}):void 0}),(0,M.FD)("div",{css:(0,i.AH)({display:"flex",gap:l.spacing.lg,marginTop:l.spacing.sm},""),children:[(0,M.Y)(b,{label:(0,M.Y)(s.A,{id:"uHzRht",defaultMessage:"Total aggregate scores"}),children:(0,M.FD)(c.E,{data:F,layout:"vertical",margin:{top:10,right:10,left:10,bottom:0},children:[(0,M.Y)(d.W,{type:"number",allowDecimals:!1,...x}),(0,M.Y)(m.h,{type:"category",dataKey:"name",...y,width:60}),(0,M.Y)(u.m,{content:(0,M.Y)(S.Vn,{formatter:C}),cursor:{fill:l.colors.actionTertiaryBackgroundHover}}),(0,M.Y)(h.s,{...T}),(0,M.Y)(g.y,{dataKey:"count",fill:A,radius:[0,4,4,0]})]})}),void 0!==a&&(0,M.Y)(b,{label:(0,M.Y)(s.A,{id:"JNv3nr",defaultMessage:"Moving average over time"}),children:(0,M.FD)(p.b,{data:k,margin:{top:10,right:10,left:10,bottom:0},children:[(0,M.Y)(d.W,{dataKey:"name",...x}),(0,M.Y)(m.h,{...y}),(0,M.Y)(u.m,{content:(0,M.Y)(S.Vn,{formatter:N}),cursor:{stroke:l.colors.actionTertiaryBackgroundHover}}),(0,M.Y)(h.s,{...T}),(0,M.Y)(v.N,{type:"monotone",dataKey:"value",name:e,stroke:A,strokeWidth:2,dot:E,legendType:"plainline"}),(0,M.Y)(f.e,{y:a,stroke:l.colors.textSecondary,strokeDasharray:"4 4",label:{value:`AVG (${a.toFixed(2)})`,position:"insideTopRight",fill:l.colors.textSecondary,fontSize:10}})]})})]})]}):(0,M.FD)(S.h,{children:[(0,M.Y)(S.XQ,{icon:(0,M.Y)(n.CheckCircleIcon,{css:(0,i.AH)({color:A},"")}),title:e}),(0,M.Y)(S.iE,{})]})}},39833:function(e,t,a){a.d(t,{E:function(){return l}});var i=a(90970),o=a(13240),r=a(60719),n=a(49960),s=a(44941),l=(0,i.gu)({chartName:"BarChart",GraphicalChild:o.y,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:r.W},{axisType:"yAxis",AxisComp:n.h}],formatAxisMap:s.pr})}}]);