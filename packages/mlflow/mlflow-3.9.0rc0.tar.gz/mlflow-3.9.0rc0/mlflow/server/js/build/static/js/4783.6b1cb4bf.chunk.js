"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4783],{13479:function(){},34783:function(e,t,n){n.r(t),n.d(t,{ExperimentListView:function(){return B},default:function(){return N}});var i=n(68248),l=n(46709),o=n(27757),s=n(79081),r=n(82716),a=(n(13479),n(60284)),d=n(60329),c=n(26158),m=n(7655),p=n(40724),g=n(60312),u=n(76842),h=n(91105),f=n(84561),x=n(5690),v=n(56530),w=n(11522),_=n(73408);const b=({isOpen:e,onClose:t,experiments:n,onExperimentsDeleted:i})=>{const l=(0,v.wA)();return(0,_.Y)(f.u,{isOpen:e,onClose:t,handleSubmit:()=>Promise.all(n.map(e=>l((0,x.lJ)(e.experimentId)))).then(i).catch(e=>w.A.logErrorAndNotifyUser(e)),title:(0,_.Y)(p.A,{id:"Epo8/i",defaultMessage:"Delete {count, plural, one {# Experiment} other {# Experiments}}",values:{count:n.length}}),helpText:(0,_.FD)("div",{children:[(0,_.Y)(o.T.Paragraph,{children:"The following experiments will be deleted:"}),(0,_.Y)(o.T.Paragraph,{children:(0,_.Y)("ul",{children:n.map(e=>(0,_.Y)("li",{children:(0,_.FD)(o.T.Text,{children:[e.name," (ID: ",e.experimentId,")"]})},e.experimentId))})})]}),confirmButtonText:(0,_.Y)(p.A,{id:"9KLNi5",defaultMessage:"Delete"}),confirmButtonProps:{danger:!0}})};var y=n(77153),S=n(61060),Y=n(27042),k=n(181),T=n(12803);const C=["IS","IS NOT","CONTAINS"];function F(e){return[e.key,e.operator,e.value].join("-")}function I(e){const t=e.split("-");if(t.length>=3&&function(e){return C.includes(e)}(t[1])){const[e,n,...i]=t;return{key:e,operator:n,value:i.join("-")}}return null}var M=n(884);const A={key:"",value:"",operator:"IS"};var E={name:"isq613",styles:"min-width:14ch"},P={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};function D({tagsFilter:e,setTagsFilter:t}){const{control:n,handleSubmit:s}=(0,M.mN)({defaultValues:{tagsFilter:0===e.length?[A]:e}}),{fields:a,append:d,remove:c}=(0,M.jz)({control:n,name:"tagsFilter"}),{theme:g}=(0,o.u)(),{formatMessage:u}=(0,m.A)(),h={fontWeight:g.typography.typographyBoldFontWeight},f={key:u({id:"/k7Xvj",defaultMessage:"Key"}),operator:u({id:"JDpv0G",defaultMessage:"Operator"}),value:u({id:"OH7hV5",defaultMessage:"Value"})};return(0,_.FD)("form",{onSubmit:s(e=>t(e.tagsFilter)),css:(0,i.AH)({display:"flex",flexDirection:"column",gap:g.spacing.md,padding:g.spacing.md},""),children:[(0,_.FD)("fieldset",{css:(0,i.AH)({display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:g.spacing.sm},""),children:[(0,_.Y)("label",{htmlFor:`${a[0].id}-key`,css:h,children:f.key}),(0,_.Y)("label",{htmlFor:`${a[0].id}-op`,css:h,children:f.operator}),(0,_.Y)("label",{htmlFor:`${a[0].id}-value`,css:h,children:f.value}),(0,_.Y)("label",{}),a.map((e,t)=>(0,_.FD)(l.Fragment,{children:[(0,_.Y)(r.RHFControlledComponents.Input,{id:`${e.id}-key`,componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_components_experiment_page_components_experimentlistviewtagsfilter_69",name:`tagsFilter.${t}.key`,control:n,"aria-label":f.key,placeholder:f.key,required:!0}),(0,_.Y)(r.RHFControlledComponents.LegacySelect,{id:`${e.id}-op`,name:`tagsFilter.${t}.operator`,control:n,options:C.map(e=>({key:e,value:e})),"aria-label":f.operator,css:E}),(0,_.Y)(r.RHFControlledComponents.Input,{id:`${e.id}-value`,componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_components_experiment_page_components_experimentlistviewtagsfilter_87",name:`tagsFilter.${t}.value`,control:n,"aria-label":f.value,placeholder:f.value,required:!0}),(0,_.Y)(o.B,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_components_experiment_page_components_experimentlistviewtagsfilter_96",type:"tertiary",onClick:()=>c(t),disabled:1===a.length,"aria-label":u({id:"l8Z2nP",defaultMessage:"Remove filter"}),children:(0,_.Y)(o.C,{})})]},e.id))]}),(0,_.FD)("div",{css:P,children:[(0,_.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.add_filter_button",onClick:()=>d(A),icon:(0,_.Y)(r.PlusIcon,{}),children:(0,_.Y)(p.A,{id:"rY00Iw",defaultMessage:"Add filter"})}),(0,_.FD)("div",{css:(0,i.AH)({display:"flex",gap:g.spacing.sm},""),children:[(0,_.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.clear_filters_button",onClick:()=>t([]),children:(0,_.Y)(p.A,{id:"NPlcrl",defaultMessage:"Clear filters"})}),(0,_.Y)(o.B,{htmlType:"submit",componentId:"mlflow.experiment_list_view.tag_filter.apply_filters_button",type:"primary",children:(0,_.Y)(p.A,{id:"sWbj1n",defaultMessage:"Apply filters"})})]})]})]})}var R={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},H={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};const B=()=>{const[e,t]=function(){var e;const t="experimentSearchFilter",[n,i]=(0,h.ok)();return[null!==(e=n.get(t))&&void 0!==e?e:"",function(e){e?n.set(t,e):n.delete(t),i(n)}]}(),{tagsFilter:n,setTagsFilter:f,isTagsFilterOpen:x,setIsTagsFilterOpen:v}=function(){const[e,t]=(0,l.useState)(!1),n="experimentTagsFilter",[i,o]=(0,h.ok)();return{tagsFilter:(0,l.useMemo)(()=>{var e;return(null!==(e=i.getAll(n))&&void 0!==e?e:[]).map(I).filter(e=>null!==e)},[i]),setTagsFilter:function(e){i.delete(n);const l=e.filter(e=>""!==e.key&&""!==e.value);if(0!==l.length)for(const t of l)i.append(n,F(t));o(i),t(!1)},isTagsFilterOpen:e,setIsTagsFilterOpen:t}}(),{data:w,isLoading:C,error:M,hasNextPage:A,hasPreviousPage:E,onNextPage:P,onPreviousPage:B,pageSizeSelect:N,sorting:O,setSorting:j}=(0,c.f)({searchFilter:e,tagsFilter:n}),L=(0,c.M)(),{EditTagsModal:q,showEditExperimentTagsModal:$}=(({onSuccess:e})=>{const t=(0,S.n)({mutationFn:async({toAdd:e,toDelete:t,experimentId:n})=>Promise.all([...e.map(({key:e,value:t})=>T.x.setExperimentTag({experiment_id:n,key:e,value:t})),...t.map(({key:e})=>T.x.deleteExperimentTag({experiment_id:n,key:e}))])}),{EditTagsModal:n,showEditTagsModal:i,isLoading:o}=(0,Y.Q)({valueRequired:!0,saveTagsHandler:(n,i,l)=>{const{addedOrModifiedTags:o,deletedTags:s}=(0,k.Rf)(i,l);return new Promise((i,l)=>{if(!n)return l();t.mutate({experimentId:n.experimentId,toAdd:o,toDelete:s},{onSuccess:()=>{i(),null===e||void 0===e||e()},onError:l})})}});return{EditTagsModal:n,showEditExperimentTagsModal:(0,l.useCallback)(e=>i({experimentId:e.experimentId,name:e.name,tags:e.tags.filter(e=>(0,k.oD)(e.key))}),[i]),isLoading:o}})({onSuccess:L}),[z,W]=(0,l.useState)({}),[K,V]=(0,l.useState)(""),[U,Q]=(0,l.useState)(!1),[Z,G]=(0,l.useState)(!1),{theme:J}=(0,o.u)(),X=(0,h.Zp)(),ee=(0,m.A)(),te=Object.entries(z).filter(([e,t])=>t).map(([e,t])=>e);return(0,_.FD)(g.m,{css:R,children:[(0,_.Y)(s.S,{shrinks:!1}),(0,_.Y)(r.Header,{title:(0,_.Y)(p.A,{id:"ZqHpEG",defaultMessage:"Experiments"}),buttons:(0,_.FD)(_.FK,{children:[(0,_.Y)(o.B,{componentId:"mlflow.experiment_list_view.new_experiment_button",type:"primary",onClick:()=>{Q(!0)},"data-testid":"create-experiment-button",children:(0,_.Y)(p.A,{id:"9ut1Fj",defaultMessage:"Create"})}),(0,_.Y)(o.B,{componentId:"mlflow.experiment_list_view.compare_experiments_button",onClick:()=>{const e=a.Ay.getCompareExperimentsPageRoute(te);X(e)},"data-testid":"compare-experiment-button",disabled:te.length<2,children:(0,_.Y)(p.A,{id:"YECxws",defaultMessage:"Compare"})}),(0,_.Y)(o.B,{componentId:"mlflow.experiment_list_view.bulk_delete_button",onClick:()=>G(!0),"data-testid":"delete-experiments-button",disabled:te.length<1,danger:!0,children:(0,_.Y)(p.A,{id:"L/4iQO",defaultMessage:"Delete"})})]})}),(0,_.Y)(s.S,{shrinks:!1}),M&&(0,_.Y)(r.Alert,{css:(0,i.AH)({marginBlockEnd:J.spacing.sm},""),type:"error",message:M instanceof y.s?M.getMessageField():M.message||(0,_.Y)(p.A,{id:"9Bj7oS",defaultMessage:"A network error occurred."}),componentId:"mlflow.experiment_list_view.error",closable:!1}),(0,_.FD)("div",{css:H,children:[(0,_.FD)(r.TableFilterLayout,{children:[(0,_.Y)(r.TableFilterInput,{"data-testid":"search-experiment-input",placeholder:ee.formatMessage({id:"9vT4HV",defaultMessage:"Filter experiments by name"}),componentId:"mlflow.experiment_list_view.search",defaultValue:e,onChange:e=>{V(e.target.value)},onSubmit:()=>{t(K)},onClear:()=>{t("")},showSearchButton:!0}),(0,_.FD)(o.aw.Root,{componentId:"mlflow.experiment_list_view.tag_filter",open:x,onOpenChange:v,children:[(0,_.Y)(o.aw.Trigger,{asChild:!0,children:(0,_.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.trigger",icon:(0,_.Y)(r.FilterIcon,{}),endIcon:(0,_.Y)(r.ChevronDownIcon,{}),type:n.length>0?"primary":void 0,children:(0,_.Y)(p.A,{id:"55mClg",defaultMessage:"Tag filter"})})}),(0,_.Y)(o.aw.Content,{children:(0,_.Y)(D,{tagsFilter:n,setTagsFilter:f})})]})]}),(0,_.Y)(u.k,{experiments:w,isLoading:C,isFiltered:Boolean(e),rowSelection:z,setRowSelection:W,cursorPaginationProps:{hasNextPage:A,hasPreviousPage:E,onNextPage:P,onPreviousPage:B,pageSizeSelect:N},sortingProps:{sorting:O,setSorting:j},onEditTags:$})]}),(0,_.Y)(d.D,{isOpen:U,onClose:()=>{Q(!1)},onExperimentCreated:L}),(0,_.Y)(b,{experiments:(null!==w&&void 0!==w?w:[]).filter(({experimentId:e})=>te.includes(e)),isOpen:Z,onClose:()=>G(!1),onExperimentsDeleted:()=>{L(),W({})}}),q]})};var N=B},60312:function(e,t,n){n.d(t,{m:function(){return s}});var i=n(82716),l=n(73408);var o={name:"13udsys",styles:"height:100%"};const s=({children:e,className:t})=>(0,l.Y)(i.PageWrapper,{css:o,className:t,children:e})},76842:function(e,t,n){n.d(t,{k:function(){return S}});var i=n(68248),l=n(76256),o=n(46709),s=n(82716),r=n(27757),a=(n(13479),n(90061)),d=n(43617),c=n(76118),m=n(7655),p=n(40724),g=n(11522),u=n(91105),h=n(60284),f=n(59281),x=n(181),v=n(73408);var w={name:"zjik7",styles:"display:flex"},_={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},b={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const y=({row:{original:e},table:{options:{meta:t}}})=>{var n;const i=(0,m.A)(),{onEditTags:l}=t,o=(null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.filter(e=>(0,x.oD)(e.key)))||[],a=o.length>0;return(0,v.FD)("div",{css:w,children:[(0,v.Y)("div",{css:_,children:null===o||void 0===o?void 0:o.map(e=>(0,v.Y)(f.t,{tag:e},e.key))}),(0,v.Y)(r.B,{componentId:"mlflow.experiment.list.tag.add",size:"small",icon:a?(0,v.Y)(s.PencilIcon,{}):void 0,onClick:()=>null===l||void 0===l?void 0:l(e),"aria-label":i.formatMessage({id:"Vk+30L",defaultMessage:"Edit tags"}),css:b,type:"tertiary",children:a?void 0:(0,v.Y)(p.A,{id:"cI0kqF",defaultMessage:"Add tags"})})]})};const S=({experiments:e,isFiltered:t,isLoading:n,rowSelection:u,setRowSelection:h,cursorPaginationProps:f,sortingProps:{sorting:x,setSorting:w},onEditTags:_})=>{const{theme:b}=(0,r.u)(),S=(()=>{const e=(0,m.A)();return(0,o.useMemo)(()=>[{header:({table:e})=>(0,v.Y)(s.Checkbox,{componentId:"mlflow.experiment_list_view.check_all_box",isChecked:e.getIsSomeRowsSelected()?null:e.getIsAllRowsSelected(),onChange:(t,n)=>e.getToggleAllRowsSelectedHandler()(n)}),id:"select",cell:T,enableSorting:!1},{header:e.formatMessage({id:"QhEnTA",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:k,enableSorting:!0},{header:e.formatMessage({id:"JUTcIz",defaultMessage:"Time created"}),id:"creation_time",accessorFn:({creationTime:t})=>g.A.formatTimestamp(t,e),enableSorting:!0},{header:e.formatMessage({id:"l/+0SR",defaultMessage:"Last modified"}),id:"last_update_time",accessorFn:({lastUpdateTime:t})=>g.A.formatTimestamp(t,e),enableSorting:!0},{header:e.formatMessage({id:"STEhnv",defaultMessage:"Description"}),id:"description",accessorFn:({tags:e})=>{var t,n;return null!==(t=null===e||void 0===e||null===(n=e.find(({key:e})=>"mlflow.note.content"===e))||void 0===n?void 0:n.value)&&void 0!==t?t:"-"},enableSorting:!1},{header:e.formatMessage({id:"BB6In/",defaultMessage:"Tags"}),id:"tags",accessorKey:"tags",enableSorting:!1,cell:y}],[e])})(),Y=(0,l.L)("mlflow/server/js/src/experiment-tracking/components/ExperimentListTable.tsx",{data:null!==e&&void 0!==e?e:[],columns:S,getCoreRowModel:(0,a.HT)(),getRowId:e=>e.experimentId,enableRowSelection:!0,enableMultiRowSelection:!0,onRowSelectionChange:h,onSortingChange:w,state:{rowSelection:u,sorting:x},meta:{onEditTags:_}}),C={flex:"none",height:b.general.heightBase};return(0,v.FD)(s.Table,{scrollable:!0,pagination:f?(0,v.Y)(s.CursorPagination,{...f,componentId:"mlflow.experiment_list_view.pagination"}):void 0,empty:(()=>{const i=!n&&(0,c.isEmpty)(e);return i&&t?(0,v.Y)(s.Empty,{image:(0,v.Y)(s.NoIcon,{}),title:(0,v.Y)(p.A,{id:"QRnRh3",defaultMessage:"No experiments found"}),description:null}):i?(0,v.Y)(s.Empty,{title:(0,v.Y)(p.A,{id:"dcoaGS",defaultMessage:"No experiments created"}),description:(0,v.Y)(p.A,{id:"Zt2Uxi",defaultMessage:'Use "Create experiment" button in order to create a new experiment'})}):null})(),children:[(0,v.Y)(s.TableRow,{isHeader:!0,children:Y.getLeafHeaders().map(e=>(0,v.Y)(s.TableHeader,{componentId:"mlflow.experiment_list_view.table.header",css:"select"===e.column.id?C:void 0,sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),children:(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id))}),n?(0,v.Y)(s.TableSkeletonRows,{table:Y}):Y.getRowModel().rows.map(e=>(0,v.Y)(s.TableRow,{css:(0,i.AH)({height:b.general.buttonHeight},""),"data-testid":"experiment-list-item",children:e.getAllCells().map(e=>(0,v.Y)(s.TableCell,{css:(0,i.AH)({alignItems:"center",..."select"===e.column.id?C:void 0},""),children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))]})};var Y={name:"1d4xjjz",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1"};const k=({row:{original:e}})=>(0,v.Y)(u.N_,{className:"experiment-link",css:Y,to:h.Ay.getExperimentPageRoute(e.experimentId),title:e.name,"data-testid":"experiment-list-item-link",children:e.name}),T=({row:e})=>(0,v.Y)(s.Checkbox,{componentId:"mlflow.experiment_list_view.check_box",id:e.original.experimentId,"data-testid":"experiment-list-item-check-box",isChecked:e.getIsSelected(),disabled:!e.getCanSelect(),onChange:e.getToggleSelectedHandler()},e.original.experimentId)},84561:function(e,t,n){n.d(t,{u:function(){return s}});var i=n(46709),l=n(79081),o=n(73408);class s extends i.Component{constructor(e){super(e),this.state={isSubmitting:!1},this.onRequestCloseHandler=this.onRequestCloseHandler.bind(this),this.handleSubmitWrapper=this.handleSubmitWrapper.bind(this)}onRequestCloseHandler(){this.state.isSubmitting||this.props.onClose()}handleSubmitWrapper(){return this.setState({isSubmitting:!0}),this.props.handleSubmit().finally(()=>{this.props.onClose(),this.setState({isSubmitting:!1})})}render(){return(0,o.Y)(l.d,{"data-testid":"confirm-modal",title:this.props.title,visible:this.props.isOpen,onOk:this.handleSubmitWrapper,okText:this.props.confirmButtonText,okButtonProps:this.props.confirmButtonProps,confirmLoading:this.state.isSubmitting,onCancel:this.onRequestCloseHandler,centered:!0,children:(0,o.Y)("div",{className:"modal-explanatory-text",children:this.props.helpText})})}}}}]);