"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[7021],{3409:function(e,t,n){n.d(t,{tz:function(){return u},h:function(){return L},iE:function(){return y},nN:function(){return b},XQ:function(){return f},lh:function(){return S},Vn:function(){return Y},yw:function(){return w},zZ:function(){return C},IT:function(){return x},T4:function(){return k},T3:function(){return M},gy:function(){return A}});var o=n(68248),r=n(46709),i=n(27757),a=n(82716),s=n(40724),l=n(70431),d=n(80739);var c=n(73408);const u=200,m=60;var g={name:"lugakg",styles:"font-weight:normal"};const f=({icon:e,title:t,value:n,subtitle:r})=>{const{theme:a}=(0,i.u)();return(0,c.FD)("div",{css:(0,o.AH)({marginBottom:a.spacing.lg},""),children:[(0,c.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:a.spacing.xs},""),children:[(0,c.Y)("span",{css:(0,o.AH)({color:a.colors.textSecondary,display:"flex"},""),children:e}),(0,c.Y)(i.T.Text,{bold:!0,size:"lg",children:t})]}),void 0!==n&&(0,c.FD)(i.T.Title,{level:3,css:(0,o.AH)({margin:0,marginTop:a.spacing.sm},""),children:[n,r&&(0,c.FD)(c.FK,{children:[" ",(0,c.Y)(i.T.Text,{color:"secondary",css:g,children:r})]})]})]})},h=({children:e,height:t=280})=>{const{theme:n}=(0,i.u)();return(0,c.Y)("div",{css:(0,o.AH)({border:`1px solid ${n.colors.border}`,borderRadius:n.borders.borderRadiusMd,padding:n.spacing.lg,height:t,display:"flex",alignItems:"center",justifyContent:"center"},""),children:e})};var v={name:"1u1zie3",styles:"width:120px"},T={name:"m0jwvv",styles:"width:80px"},p={name:"82a6rk",styles:"flex:1"};const S=({height:e=280})=>{const{theme:t}=(0,i.u)();return(0,c.FD)("div",{css:(0,o.AH)({border:`1px solid ${t.colors.border}`,borderRadius:t.borders.borderRadiusMd,padding:t.spacing.lg,height:e,display:"flex",flexDirection:"column",gap:t.spacing.md},""),children:[(0,c.Y)(a.TitleSkeleton,{css:v}),(0,c.Y)(a.TitleSkeleton,{css:T}),(0,c.Y)("div",{css:p,children:(0,c.Y)(a.TableSkeleton,{lines:4})})]})},b=({height:e,message:t})=>(0,c.Y)(h,{height:e,children:(0,c.Y)(i.T.Text,{color:"error",children:t||(0,c.Y)(s.A,{id:"cp/h86",defaultMessage:"Failed to load chart data"})})}),y=({height:e,message:t})=>(0,c.Y)("div",{css:(0,o.AH)({height:e||"100%",display:"flex",alignItems:"center",justifyContent:"center"},""),children:(0,c.Y)(i.T.Text,{color:"secondary",children:t||(0,c.Y)(s.A,{id:"zwktEP",defaultMessage:"No data available for the selected time range"})})}),Y=({active:e,payload:t,label:n,formatter:r})=>{const{theme:a}=(0,i.u)();return e&&null!==t&&void 0!==t&&t.length?(0,c.FD)("div",{css:(0,o.AH)({backgroundColor:`${a.colors.backgroundPrimary}80`,backdropFilter:"blur(2px)",border:`1px solid ${a.colors.border}`,borderRadius:a.borders.borderRadiusMd,fontSize:a.typography.fontSizeSm,padding:a.spacing.sm,pointerEvents:"auto",marginLeft:-20,marginRight:-20},""),children:[n&&(0,c.Y)("div",{css:(0,o.AH)({fontWeight:500,marginBottom:a.spacing.xs},""),children:n}),(0,c.Y)("div",{css:(0,o.AH)({maxHeight:120,overflowY:"auto",overflowX:"hidden"},""),children:t.map((e,t)=>{const[n,i]=r?r(e.value,e.name):[e.value,e.name];return(0,c.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:a.spacing.xs,paddingTop:a.spacing.xs,paddingBottom:a.spacing.xs},""),children:[(0,c.Y)("span",{css:(0,o.AH)({width:a.spacing.sm,height:a.spacing.sm,borderRadius:"50%",backgroundColor:e.color,flexShrink:0},"")}),(0,c.FD)("span",{css:(0,o.AH)({color:e.color},""),children:[i,":"]}),(0,c.Y)("span",{children:n})]},t)})})]}):null};function C(){const{theme:e}=(0,i.u)();return{tick:{fontSize:10,fill:e.colors.textSecondary,dy:e.spacing.sm},axisLine:!1,tickLine:!1,interval:"preserveStartEnd"}}function x(){const{theme:e}=(0,i.u)();return{tick:{fontSize:10,fill:e.colors.textSecondary},axisLine:!1,tickLine:!1,width:40}}function w(e,t){return null!==e[t]&&(0===t||null===e[t-1])&&(t===e.length-1||null===e[t+1])}function M(e,t="isIsolated"){return(0,r.useCallback)(({cx:n,cy:o,payload:r})=>null!==r&&void 0!==r&&r[t]?(0,c.Y)("circle",{cx:n,cy:o,r:2,fill:e}):(0,c.Y)(c.FK,{}),[e,t])}function A(e){var t;const{theme:n}=(0,i.u)();return{formatter:e=>(0,c.Y)("span",{css:(0,o.AH)({color:n.colors.textPrimary,fontSize:n.typography.fontSizeSm,cursor:"pointer"},""),children:e}),wrapperStyle:{maxHeight:null!==(t=null===e||void 0===e?void 0:e.maxHeight)&&void 0!==t?t:m,overflowY:"auto",overflowX:"hidden",paddingTop:n.spacing.xs}}}const L=({children:e,componentId:t,...n})=>{const{theme:a}=(0,i.u)(),s=function(e){const t=(0,r.useRef)((0,l.A)()),n=(0,r.useRef)(0),o=(0,d.R)();return{onClick:(0,r.useCallback)(()=>{if(!e)return;const r=Date.now();r-n.current<1e4||(n.current=r,o({componentId:e,componentViewId:t.current,componentType:i.f.Card,eventType:i.d.OnClick,value:"chart_interaction"}))},[e,o])}}(t);return(0,c.Y)("div",{css:(0,o.AH)({border:`1px solid ${a.colors.border}`,borderRadius:a.borders.borderRadiusMd,padding:a.spacing.lg,backgroundColor:a.colors.backgroundPrimary},""),...s,...n,children:e})};function k(){const{theme:e}=(0,i.u)();return{strokeOpacity:.3,fill:e.colors.blue200,fillOpacity:.3}}},14429:function(e,t,n){n.d(t,{KT:function(){return c},Pz:function(){return m},UY:function(){return g},VA:function(){return u},oy:function(){return d}});var o=n(46709),r=n(91105),i=n(79444);const a="startTimeLabel",s="startTime",l="endTime",d="LAST_7_DAYS",c=(0,o.createContext)(null),u=()=>{const e=(0,i.U)(),t=(0,o.useContext)(c),[n,u]=(0,r.ok)();let m,f,h;var v;t?(m=t.params.startTimeLabel||d,f=t.params.startTime,h=t.params.endTime):(m=n.get(a)||d,f=n.get(s)||void 0,h=null!==(v=n.get(l))&&void 0!==v?v:void 0);if("CUSTOM"!==m){const t=g(e.dateNow,{startTimeLabel:m});f=t.startTime,h=t.endTime}const T=(0,o.useMemo)(()=>({startTimeLabel:m,startTime:f,endTime:h}),[m,f,h]),p=(0,o.useCallback)((e,n=!1)=>{t?t.setParams(null!==e&&void 0!==e?e:{startTimeLabel:void 0,startTime:void 0,endTime:void 0},n):u(t=>(void 0===(null===e||void 0===e?void 0:e.startTime)?t.delete(s):"CUSTOM"===e.startTimeLabel&&t.set(s,e.startTime),void 0===(null===e||void 0===e?void 0:e.endTime)?t.delete(l):"CUSTOM"===e.startTimeLabel&&t.set(l,e.endTime),void 0===(null===e||void 0===e?void 0:e.startTimeLabel)?t.delete(a):t.set(a,e.startTimeLabel),t),{replace:n})},[t,u]);return[T,p,Boolean(n.has(a)||(null===t||void 0===t?void 0:t.disableAutomaticInitialization))]},m=e=>{const[t]=u(),[n]=(0,o.useState)(()=>null!==e&&void 0!==e?e:new Date);return(0,o.useMemo)(()=>{const{startTime:e,endTime:o}=g(n,t);return{startTime:e?new Date(e).getTime().toString():void 0,endTime:o?new Date(o).getTime().toString():void 0}},[n,t])};function g(e,t){return t.startTimeLabel&&"CUSTOM"!==t.startTimeLabel?function(e,t){switch(t){case"LAST_HOUR":return{startTime:new Date(new Date(e).setUTCHours((new Date).getUTCHours()-1)).toISOString(),endTime:e.toISOString()};case"LAST_24_HOURS":return{startTime:new Date(new Date(e).setUTCDate((new Date).getUTCDate()-1)).toISOString(),endTime:e.toISOString()};case"LAST_7_DAYS":return{startTime:new Date(new Date(e).setUTCDate((new Date).getUTCDate()-7)).toISOString(),endTime:e.toISOString()};case"LAST_30_DAYS":return{startTime:new Date(new Date(e).setUTCDate((new Date).getUTCDate()-30)).toISOString(),endTime:e.toISOString()};case"LAST_YEAR":return{startTime:new Date(new Date(e).setUTCFullYear((new Date).getUTCFullYear()-1)).toISOString(),endTime:e.toISOString()};case"ALL":return{startTime:void 0,endTime:e.toISOString()};default:throw new Error(`Unexpected start time label: ${t}`)}}(e,t.startTimeLabel):{startTime:t.startTime,endTime:t.endTime}}},23327:function(e,t,n){n.d(t,{fc:function(){return u},o4:function(){return m}});var o=n(49708),r=n(61077),i=n(90935);const a="traceMetrics";const s=60,l=3600,d=86400,c=2592e3;function u(e,t){if(!e||!t)return d;const n=(t-e)/1e3;return n<=l?s:n<=d?l:n<=c?d:c}function m({experimentId:e,startTimeMs:t,endTimeMs:n,viewType:s,metricName:l,aggregations:d,timeIntervalSeconds:c,filters:u,dimensions:m}){const g={experiment_ids:[e],view_type:s,metric_name:l,aggregations:d,time_interval_seconds:c,start_time_ms:t,end_time_ms:n,filters:u,dimensions:m};return(0,o.I)({queryKey:[a,e,t,n,s,l,d,c,u,m],queryFn:async()=>await async function(e){return(0,r.qP)((0,r.we)("ajax-api/3.0/mlflow/traces/metrics"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(i.J)}(g),enabled:!!e,refetchOnWindowFocus:!1})}},53258:function(e,t,n){n.r(t),n.d(t,{default:function(){return oe}});var o=n(68248),r=n(46709),i=n(59930),a=n.n(i),s=n(91105),l=n(27757),d=n(82716),c=n(40724),u=n(84411),m=n(14429),g=n(79444),f=n(73408);const h=r.lazy(()=>Promise.all([n.e(4432),n.e(8614)]).then(n.bind(n,48614)).then(e=>({default:e.TraceRequestsChart}))),v=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(d.LegacySkeleton,{active:!0}),children:(0,f.Y)(h,{})}),T=r.lazy(()=>Promise.all([n.e(4432),n.e(5714),n.e(1078)]).then(n.bind(n,81078)).then(e=>({default:e.TraceLatencyChart}))),p=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(d.LegacySkeleton,{active:!0}),children:(0,f.Y)(T,{})}),S=r.lazy(()=>Promise.all([n.e(4432),n.e(5714),n.e(6809),n.e(2673)]).then(n.bind(n,72673)).then(e=>({default:e.TraceErrorsChart}))),b=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(d.LegacySkeleton,{active:!0}),children:(0,f.Y)(S,{})}),y=r.lazy(()=>Promise.all([n.e(4432),n.e(6809),n.e(767)]).then(n.bind(n,90767)).then(e=>({default:e.TraceTokenUsageChart}))),Y=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(d.LegacySkeleton,{active:!0}),children:(0,f.Y)(y,{})}),C=r.lazy(()=>Promise.all([n.e(4432),n.e(5714),n.e(2841)]).then(n.bind(n,92841)).then(e=>({default:e.TraceTokenStatsChart}))),x=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(d.LegacySkeleton,{active:!0}),children:(0,f.Y)(C,{})});var w=n(54313),M=n(23327),A=n(69983);var L=n(3409);const k=r.lazy(()=>Promise.all([n.e(4432),n.e(5714),n.e(4768)]).then(n.bind(n,34768)).then(e=>({default:e.TraceAssessmentChart}))),D=e=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(d.LegacySkeleton,{active:!0}),children:(0,f.Y)(k,{...e})});var N=n(83110);const I=()=>{const{theme:e}=(0,l.u)(),{assessmentNames:t,avgValuesByName:n,isLoading:i,error:a,hasData:s}=function(){const{experimentId:e,startTimeMs:t,endTimeMs:n}=(0,A.W)(),o=(0,r.useMemo)(()=>[(0,w.$L)(w.mg.TYPE,w.AN.FEEDBACK)],[]),{data:i,isLoading:a,error:s}=(0,M.o4)({experimentId:e,startTimeMs:t,endTimeMs:n,viewType:w.mW.ASSESSMENTS,metricName:w.cs.ASSESSMENT_COUNT,aggregations:[{aggregation_type:w.DF.COUNT}],filters:o,dimensions:[w.gV.ASSESSMENT_NAME]}),{data:l,isLoading:d,error:c}=(0,M.o4)({experimentId:e,startTimeMs:t,endTimeMs:n,viewType:w.mW.ASSESSMENTS,metricName:w.cs.ASSESSMENT_VALUE,aggregations:[{aggregation_type:w.DF.AVG}],filters:o,dimensions:[w.gV.ASSESSMENT_NAME]}),u=(0,r.useMemo)(()=>{if(null===i||void 0===i||!i.data_points)return[];const e=new Set;for(const n of i.data_points){var t;const o=null===(t=n.dimensions)||void 0===t?void 0:t[w.gV.ASSESSMENT_NAME];o&&e.add(o)}return Array.from(e).sort()},[null===i||void 0===i?void 0:i.data_points]);return{assessmentNames:u,avgValuesByName:(0,r.useMemo)(()=>{if(null===l||void 0===l||!l.data_points)return new Map;const e=new Map;for(const o of l.data_points){var t,n;const r=null===(t=o.dimensions)||void 0===t?void 0:t[w.gV.ASSESSMENT_NAME],i=null===(n=o.values)||void 0===n?void 0:n[w.DF.AVG];r&&void 0!==i&&e.set(r,i)}return e},[null===l||void 0===l?void 0:l.data_points]),isLoading:a||d,error:s||c,hasData:u.length>0}}(),{getChartColor:u}=(0,N.yC)();return i?(0,f.Y)(L.lh,{}):a?(0,f.Y)(L.nN,{}):s?(0,f.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:e.spacing.md},""),children:[(0,f.FD)("div",{children:[(0,f.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:e.spacing.xs,marginBottom:e.spacing.xs},""),children:[(0,f.Y)(d.SparkleIcon,{css:(0,o.AH)({color:e.colors.yellow500},"")}),(0,f.Y)(l.T.Text,{bold:!0,size:"lg",children:(0,f.Y)(c.A,{id:"ic8x74",defaultMessage:"Quality Insights"})})]}),(0,f.Y)(l.T.Text,{color:"secondary",children:(0,f.Y)(c.A,{id:"o0NwZU",defaultMessage:"Quality metrics computed by scorers."})})]}),t.map((e,t)=>(0,f.Y)(D,{assessmentName:e,lineColor:u(t),avgValue:n.get(e)},e))]}):(0,f.Y)(L.iE,{message:(0,f.Y)(c.A,{id:"AHaom4",defaultMessage:"No assessments available"})})};var _=n(66916);var F={name:"1fttcpj",styles:"display:flex;flex-direction:column"},U={name:"xjt14x",styles:"width:60%"};const O=({icon:e,iconColor:t,iconBgColor:n,value:r,label:i,isLoading:a})=>{const{theme:s}=(0,l.u)();return(0,f.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:s.spacing.sm,padding:`${s.spacing.sm}px ${s.spacing.md}px`,backgroundColor:s.colors.backgroundPrimary,borderRadius:s.borders.borderRadiusMd,border:`1px solid ${s.colors.border}`,flex:1,minWidth:160},""),children:[(0,f.Y)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",justifyContent:"center",width:s.general.iconSize,height:s.general.iconSize,borderRadius:s.borders.borderRadiusMd,backgroundColor:n,color:t,flexShrink:0},""),children:e}),(0,f.FD)("div",{css:F,children:[a?(0,f.Y)(d.TitleSkeleton,{css:U}):(0,f.Y)(l.T.Text,{bold:!0,size:"lg",children:r}),(0,f.Y)(l.T.Text,{color:"secondary",size:"sm",children:i})]})]})},R=({children:e})=>{const{theme:t}=(0,l.u)();return(0,f.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:t.spacing.lg,padding:`${t.spacing.md}px 0`},""),children:e})},E=({children:e})=>{const{theme:t}=(0,l.u)();return(0,f.Y)("div",{css:(0,o.AH)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:t.spacing.lg},""),children:e})},P=()=>{const{theme:e}=(0,l.u)(),{totalCalls:t,failedCalls:n,successRate:i,avgLatency:a,isLoading:s,error:u}=function(){var e,t,n;const{experimentId:o,startTimeMs:i,endTimeMs:a}=(0,A.W)(),s=(0,r.useMemo)(()=>[(0,w.jm)(w.Mm.TYPE,w.du.TOOL)],[]),{data:l,isLoading:d,error:c}=(0,M.o4)({experimentId:o,startTimeMs:i,endTimeMs:a,viewType:w.mW.SPANS,metricName:w.Ub.SPAN_COUNT,aggregations:[{aggregation_type:w.DF.COUNT}],filters:s,dimensions:[w.it.SPAN_STATUS]}),{data:u,isLoading:m,error:g}=(0,M.o4)({experimentId:o,startTimeMs:i,endTimeMs:a,viewType:w.mW.SPANS,metricName:w.Ub.LATENCY,aggregations:[{aggregation_type:w.DF.AVG}],filters:s}),{totalCalls:f,successCalls:h,failedCalls:v}=(0,r.useMemo)(()=>{if(null===l||void 0===l||!l.data_points)return{totalCalls:0,successCalls:0,failedCalls:0};let e=0,t=0,n=0;for(const i of l.data_points){var o,r;const a=(null===(o=i.values)||void 0===o?void 0:o[w.DF.COUNT])||0,s=null===(r=i.dimensions)||void 0===r?void 0:r[w.it.SPAN_STATUS];e+=a,s===w.Fp.OK?t+=a:s===w.Fp.ERROR&&(n+=a)}return{totalCalls:e,successCalls:t,failedCalls:n}},[null===l||void 0===l?void 0:l.data_points]);return{totalCalls:f,successCalls:h,failedCalls:v,successRate:f>0?h/f*100:0,avgLatency:(null===u||void 0===u||null===(e=u.data_points)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.values)||void 0===n?void 0:n[w.DF.AVG])||0,isLoading:d||m,error:c||g}}();return u?(0,f.Y)(L.nN,{}):(0,f.FD)("div",{css:(0,o.AH)({display:"flex",gap:e.spacing.md,flexWrap:"wrap"},""),children:[(0,f.Y)(O,{icon:(0,f.Y)(d.WrenchIcon,{}),iconColor:e.colors.blue600,iconBgColor:e.colors.blue100,value:(0,N.B4)(t),label:(0,f.Y)(c.A,{id:"wvuSAK",defaultMessage:"Total Tool Calls"}),isLoading:s}),(0,f.Y)(O,{icon:(0,f.Y)(_.C,{}),iconColor:e.colors.yellow600,iconBgColor:e.colors.yellow100,value:(0,N.YL)(a),label:(0,f.Y)(c.A,{id:"yRzU8K",defaultMessage:"Avg Latency"}),isLoading:s}),(0,f.Y)(O,{icon:(0,f.Y)(d.CheckCircleIcon,{}),iconColor:e.colors.green600,iconBgColor:e.colors.green100,value:`${i.toFixed(2)}%`,label:(0,f.Y)(c.A,{id:"961sxj",defaultMessage:"Success Rate"}),isLoading:s}),(0,f.Y)(O,{icon:(0,f.Y)(_.X,{}),iconColor:e.colors.red600,iconBgColor:e.colors.red100,value:(0,N.B4)(n),label:(0,f.Y)(c.A,{id:"oWtdfc",defaultMessage:"Failed Calls"}),isLoading:s})]})};const H=r.lazy(()=>Promise.all([n.e(4432),n.e(5714),n.e(8472)]).then(n.bind(n,38472)).then(e=>({default:e.ToolErrorRateChart}))),z=e=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(L.lh,{}),children:(0,f.Y)(H,{...e})}),B=()=>{const{getChartColor:e}=(0,N.yC)(),{toolNames:t,errorRateByTool:n,isLoading:o,error:i,hasData:a}=function(){const{experimentId:e,startTimeMs:t,endTimeMs:n}=(0,A.W)(),o=(0,r.useMemo)(()=>[(0,w.jm)(w.Mm.TYPE,w.du.TOOL)],[]),{data:i,isLoading:a,error:s}=(0,M.o4)({experimentId:e,startTimeMs:t,endTimeMs:n,viewType:w.mW.SPANS,metricName:w.Ub.SPAN_COUNT,aggregations:[{aggregation_type:w.DF.COUNT}],filters:o,dimensions:[w.it.SPAN_NAME,w.it.SPAN_STATUS]}),{toolNames:l,errorRateByTool:d}=(0,r.useMemo)(()=>{if(null===i||void 0===i||!i.data_points)return{toolNames:[],errorRateByTool:new Map};const e=new Map;for(const a of i.data_points){var t,n,o;const r=null===(t=a.dimensions)||void 0===t?void 0:t[w.it.SPAN_NAME];if(!r)continue;const i=(null===(n=a.values)||void 0===n?void 0:n[w.DF.COUNT])||0,s=null===(o=a.dimensions)||void 0===o?void 0:o[w.it.SPAN_STATUS];e.has(r)||e.set(r,{error:0,total:0});const l=e.get(r);l.total+=i,s===w.Fp.ERROR&&(l.error+=i)}const r=new Map;for(const[i,{error:a,total:s}]of e)r.set(i,s>0?a/s*100:0);return{toolNames:Array.from(e.keys()).sort(),errorRateByTool:r}},[null===i||void 0===i?void 0:i.data_points]);return{toolNames:l,errorRateByTool:d,isLoading:a,error:s,hasData:l.length>0}}();return o?(0,f.Y)(L.lh,{}):i?(0,f.Y)(L.nN,{}):a?(0,f.Y)(E,{children:t.map((t,o)=>{var r;return(0,f.Y)(z,{toolName:t,lineColor:e(o),overallErrorRate:null!==(r=n.get(t))&&void 0!==r?r:0},t)})}):null},$=r.lazy(()=>Promise.all([n.e(4432),n.e(5910)]).then(n.bind(n,25910)).then(e=>({default:e.ToolUsageChart}))),j=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(L.lh,{}),children:(0,f.Y)($,{})}),V=r.lazy(()=>Promise.all([n.e(4432),n.e(5714),n.e(5679)]).then(n.bind(n,55679)).then(e=>({default:e.ToolLatencyChart}))),W=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(L.lh,{}),children:(0,f.Y)(V,{})}),K=r.lazy(()=>n.e(8462).then(n.bind(n,18462)).then(e=>({default:e.ToolPerformanceSummary}))),q=()=>(0,f.Y)(r.Suspense,{fallback:(0,f.Y)(L.lh,{}),children:(0,f.Y)(K,{})});let Q=function(e){return e.Usage="usage",e.Quality="quality",e.ToolCalls="tool-calls",e}({});const J=Q.Usage;var Z={name:"3z2sxu",styles:"display:flex;flex-direction:column;flex:1;overflow:hidden"},G={name:"l2hjmg",styles:"display:flex;flex-direction:column;flex:1;min-height:0"},X={name:"9jwnf3",styles:"flex:1;overflow-y:auto"},ee={name:"9jwnf3",styles:"flex:1;overflow-y:auto"},te={name:"9jwnf3",styles:"flex:1;overflow-y:auto"};const ne=()=>{const{experimentId:e}=(0,s.g)(),{theme:t}=(0,l.u)(),[n,i]=(()=>{const{experimentId:e,overviewTab:t}=(0,s.g)(),n=(0,s.Zp)(),o=(0,s.zy)();return[Object.values(Q).includes(t)?t:J,(0,r.useCallback)(t=>{n(`/experiments/${e}/overview/${t}${o.search}`,{replace:!0})},[e,n,o.search])]})();a()(e,"Experiment ID must be defined");const[h]=(0,m.VA)(),T=(0,g.U)(),{startTime:S,endTime:y}=(0,r.useMemo)(()=>(0,m.UY)(T.dateNow,h),[T.dateNow,h]),C=S?new Date(S).getTime():void 0,w=y?new Date(y).getTime():void 0,L=(0,M.fc)(C,w),k=(0,r.useMemo)(()=>(0,N.yB)(C,w,L),[C,w,L]);return(0,f.Y)("div",{css:Z,children:(0,f.FD)(d.Tabs.Root,{componentId:"mlflow.experiment.overview.tabs",value:n,onValueChange:e=>i(e),valueHasNoPii:!0,css:G,children:[(0,f.FD)(d.Tabs.List,{children:[(0,f.Y)(d.Tabs.Trigger,{value:Q.Usage,children:(0,f.Y)(c.A,{id:"ecUdab",defaultMessage:"Usage"})}),(0,f.Y)(d.Tabs.Trigger,{value:Q.Quality,children:(0,f.Y)(c.A,{id:"lRO4km",defaultMessage:"Quality"})}),(0,f.Y)(d.Tabs.Trigger,{value:Q.ToolCalls,children:(0,f.Y)(c.A,{id:"a9kRlY",defaultMessage:"Tool calls"})})]}),(0,f.Y)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:t.spacing.sm},""),children:(0,f.Y)(u.$,{excludeOptions:["ALL"],refreshButtonComponentId:"mlflow.experiment.overview.refresh-button"})}),(0,f.FD)(A.F,{experimentId:e,startTimeMs:C,endTimeMs:w,timeIntervalSeconds:L,timeBuckets:k,children:[(0,f.Y)(d.Tabs.Content,{value:Q.Usage,css:X,children:(0,f.FD)(R,{children:[(0,f.Y)(v,{}),(0,f.FD)(E,{children:[(0,f.Y)(p,{}),(0,f.Y)(b,{})]}),(0,f.FD)(E,{children:[(0,f.Y)(Y,{}),(0,f.Y)(x,{})]})]})}),(0,f.Y)(d.Tabs.Content,{value:Q.Quality,css:ee,children:(0,f.Y)(R,{children:(0,f.Y)(I,{})})}),(0,f.Y)(d.Tabs.Content,{value:Q.ToolCalls,css:te,children:(0,f.FD)(R,{children:[(0,f.Y)(P,{}),(0,f.Y)(q,{}),(0,f.Y)(B,{}),(0,f.FD)(E,{children:[(0,f.Y)(j,{}),(0,f.Y)(W,{})]})]})})]})]})})};var oe=()=>(0,f.Y)(g.k,{children:(0,f.Y)(ne,{})})},69983:function(e,t,n){n.d(t,{F:function(){return a},W:function(){return s}});var o=n(46709),r=n(73408);const i=(0,o.createContext)(null),a=({children:e,experimentId:t,startTimeMs:n,endTimeMs:a,timeIntervalSeconds:s,timeBuckets:l})=>{const d=(0,o.useMemo)(()=>({experimentId:t,startTimeMs:n,endTimeMs:a,timeIntervalSeconds:s,timeBuckets:l}),[t,n,a,s,l]);return(0,r.Y)(i.Provider,{value:d,children:e})};function s(){const e=(0,o.useContext)(i);if(!e)throw new Error("useOverviewChartContext must be used within an OverviewChartProvider");return e}},76256:function(e,t,n){n.d(t,{L:function(){return r},S:function(){return i}});var o=n(43617);function r(e,t){return(0,o.N4)(t)}const i=o.N4},79444:function(e,t,n){n.d(t,{U:function(){return d},k:function(){return l}});var o=n(76118),r=n(46709),i=n(73408);const a=()=>({dateNow:new Date,lastRefreshTime:Date.now(),refresh:()=>{}}),s=(0,r.createContext)(a()),l=({config:e,children:t})=>{const n=a(),l=(0,o.merge)({},n,e),[d,c]=r.useState(l.lastRefreshTime),u=(0,r.useMemo)(()=>new Date(d),[d]),m=(0,r.useCallback)(()=>{c(Date.now())},[]);return(0,i.Y)(s.Provider,{value:{...l,dateNow:u,lastRefreshTime:d,refresh:m},children:t})},d=()=>{const e=(0,r.useContext)(s);return e||a()}},83110:function(e,t,n){n.d(t,{B4:function(){return c},NM:function(){return s},RZ:function(){return g},YL:function(){return u},fq:function(){return l},pH:function(){return a},yB:function(){return d},yC:function(){return m}});var o=n(46709),r=n(54313),i=n(27757);function a(e=1,t=.2){const[n,r]=(0,o.useState)(null),i=(0,o.useCallback)(o=>null===n||n===o?e:t,[n,e,t]),a=(0,o.useCallback)(e=>{r(e.value)},[]),s=(0,o.useCallback)(()=>{r(null)},[]);return{hoveredItem:n,getOpacity:i,handleLegendMouseEnter:a,handleLegendMouseLeave:s}}function s(e,t){return(0,o.useMemo)(()=>{const n=new Map;for(const i of e){var o;const e=null===(o=i.dimensions)||void 0===o?void 0:o[r.Ad];if(e){const o=new Date(e).getTime();n.set(o,t(i))}}return n},[e,t])}function l(e,t){let n;return n=t<=60?{hour:"2-digit",minute:"2-digit"}:t<=3600?{month:"numeric",day:"numeric",hour:"2-digit"}:t<=86400?{month:"numeric",day:"numeric"}:{month:"short",year:"2-digit"},new Date(e).toLocaleString([],n)}function d(e,t,n){if(!e||!t||n<=0)return[];const o=1e3*n,r=[];for(let i=Math.floor(e/o)*o;i<=t;i+=o)r.push(i);return r}function c(e){return e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toLocaleString()}function u(e){return e<1e3?`${e.toFixed(2)}ms`:`${(e/1e3).toFixed(2)}s`}function m(){const{theme:e}=(0,i.u)(),t=(0,o.useMemo)(()=>[e.colors.blue500,e.colors.green500,e.colors.yellow500,e.colors.red500,e.colors.blue300,e.colors.green300,e.colors.yellow300,e.colors.red300,e.colors.blue400,e.colors.green400,e.colors.yellow400,e.colors.red400,e.colors.blue600,e.colors.green600,e.colors.yellow600,e.colors.red600,e.colors.blue700,e.colors.green700,e.colors.yellow700,e.colors.red700],[e]),n=(0,o.useCallback)(e=>t[e%t.length],[t]);return{chartColors:t,getChartColor:n}}function g(e,t){const[n,r]=(0,o.useState)(e),[i,a]=(0,o.useState)(null),[s,l]=(0,o.useState)(null),[d,c]=(0,o.useState)(!1),[u,m]=(0,o.useState)(!1),g=(0,o.useRef)(e);(0,o.useEffect)(()=>{g.current!==e&&(r(e),m(!1),a(null),l(null),g.current=e)},[e]);const f=(0,o.useCallback)(e=>{e.activeLabel&&(a(e.activeLabel),l(e.activeLabel),c(!0))},[]),h=(0,o.useCallback)(e=>{d&&e.activeLabel&&l(e.activeLabel)},[d]),v=(0,o.useCallback)(()=>{if(!d||null===i||null===s)return void c(!1);let n=e.findIndex(e=>e[t]===i),o=e.findIndex(e=>e[t]===s);n>o&&([n,o]=[o,n]),n>=0&&o>=0&&o-n>=1&&(r(e.slice(n,o+1)),m(!0)),a(null),l(null),c(!1)},[d,i,s,e,t]),T=(0,o.useCallback)(()=>{r(e),m(!1),a(null),l(null)},[e]);return{zoomedData:n,isZoomed:u,refAreaLeft:i,refAreaRight:s,handleMouseDown:f,handleMouseMove:h,handleMouseUp:v,zoomOut:T}}},84411:function(e,t,n){n.d(t,{$:function(){return p}});var o=n(68248),r=n(46709),i=n(82716),a=n(27757),s=n(79081),l=n(4168),d=n(42747),c=n(92338),u=n(14429),m=n(76118),g=n(16453),f=n(79444),h=n(39595),v=n(92388),T=n(73408);const p=r.memo(function({excludeOptions:e,refreshButtonComponentId:t="mlflow.experiment-evaluation-monitoring.refresh-date-button"}){const n=(0,d.tz)(),{theme:p}=(0,a.u)(),S=(0,h.jE)(),b=(0,v.C)({queryKey:[l.TH]}),[y,Y]=(0,u.VA)(),C=(0,r.useMemo)(()=>{const t=(0,c.p)(n);return null!==e&&void 0!==e&&e.length?t.filter(t=>!e.includes(t.key)):t},[n,e]),x=n.formatMessage({id:"BJvcsS",defaultMessage:"Time Range"}),w=(0,f.U)();return(0,T.FD)("div",{css:(0,o.AH)({display:"flex",gap:p.spacing.sm,alignItems:"center"},""),children:[(0,T.FD)(i.DialogCombobox,{componentId:"mlflow.experiment-evaluation-monitoring.date-selector",label:x,value:y.startTimeLabel?[y.startTimeLabel]:[u.oy],children:[(0,T.Y)(i.DialogComboboxTrigger,{renderDisplayedValue:e=>{var t;return null===(t=C.find(t=>t.key===e))||void 0===t?void 0:t.label},allowClear:!(0,m.isNil)(y.startTimeLabel)&&y.startTimeLabel!==u.oy,onClear:()=>{Y({startTimeLabel:u.oy})},"data-testid":"time-range-select-dropdown"}),(0,T.Y)(i.DialogComboboxContent,{children:(0,T.Y)(i.DialogComboboxOptionList,{children:C.map(e=>(0,T.Y)(i.DialogComboboxOptionListSelectItem,{checked:y.startTimeLabel===e.key||e.key===u.oy&&(0,m.isNil)(y.startTimeLabel),title:e.label,"data-testid":`time-range-select-${e}`,value:e.key,onChange:()=>{Y({...y,startTimeLabel:e.key})},children:e.label},e.key))})})]}),"CUSTOM"===y.startTimeLabel&&(0,T.Y)(T.FK,{children:(0,T.Y)(g.cv,{id:"date-picker-range",includeTime:!0,selected:{from:new Date(y.startTime),to:y.endTime?new Date(y.endTime):w.dateNow},onChange:e=>{const t=e.target.value;Y({...y,startTime:null!==t&&void 0!==t&&t.from?t.from.toISOString():void 0,endTime:null!==t&&void 0!==t&&t.to?t.to.toISOString():void 0})},startDatePickerProps:{componentId:"experiment-evaluation-monitoring-start-date-picker",datePickerProps:{disabled:{after:w.dateNow}},value:y.startTime?new Date(y.startTime):void 0},endDatePickerProps:{componentId:"experiment-evaluation-monitoring-end-date-picker",datePickerProps:{disabled:{after:w.dateNow}},value:y.endTime?new Date(y.endTime):void 0}})}),(0,T.Y)(s.T,{componentId:"mlflow.experiment-evaluation-monitoring.trace-info-hover-request-time",content:n.formatMessage({id:"Arvaod",defaultMessage:"Showing data up to {date}."},{date:w.dateNow.toLocaleString(navigator.language,{timeZoneName:"short"})}),children:(0,T.Y)(a.B,{type:"link",componentId:t,disabled:Boolean(b),onClick:()=>{w.refresh(),(0,l.BL)({queryClient:S})},children:(0,T.Y)(i.RefreshIcon,{})})})]})})},90935:function(e,t,n){n.d(t,{J:function(){return r}});var o=n(36476);async function r(e){if(e instanceof o.Un){var t;const n=await(null===(t=e.response)||void 0===t?void 0:t.json());e.message=null===n||void 0===n?void 0:n.message}throw e}},92338:function(e,t,n){function o(e){return[{key:"LAST_HOUR",label:e.formatMessage({id:"bjoGjg",defaultMessage:"Last hour"})},{key:"LAST_24_HOURS",label:e.formatMessage({id:"JChRnq",defaultMessage:"Last 24 hours"})},{key:"LAST_7_DAYS",label:e.formatMessage({id:"eQsXm7",defaultMessage:"Last 7 days"})},{key:"LAST_30_DAYS",label:e.formatMessage({id:"p1H1KR",defaultMessage:"Last 30 days"})},{key:"LAST_YEAR",label:e.formatMessage({id:"EI7moF",defaultMessage:"Last year"})},{key:"ALL",label:e.formatMessage({id:"HeNa8H",defaultMessage:"All"})},{key:"CUSTOM",label:e.formatMessage({id:"TpmJlu",defaultMessage:"Custom"})}]}n.d(t,{p:function(){return o}})}}]);