# c-icap configuration for virus scanning

# Port to listen on
Port 1344

# Server admin
ServerAdmin admin@localhost

# Server name
ServerName icap-server

# Temporary directory
TmpDir /var/tmp

# Maximum number of threads
MaxServers 10
MinSpareThreads 5
MaxSpareThreads 10
ThreadsPerChild 10
MaxRequestsPerChild 1000

# Keep alive timeout
KeepAliveTimeout 30

# Access log
AccessLog /var/log/c-icap/access.log

# Server log
ServerLog /var/log/c-icap/server.log

# Debug level: 0-10 (higher = more verbose)
DebugLevel 1

# Modules and Services directories
ModulesDir /usr/lib/c_icap
ServicesDir /usr/local/lib/c_icap

# Load virus scan module
Service squidclamav squidclamav.so

# Service aliases
ServiceAlias avscan squidclamav
ServiceAlias echo squidclamav

# TLS Configuration is added dynamically by start.sh if certs exist
# Generate certs with: just generate-certs
