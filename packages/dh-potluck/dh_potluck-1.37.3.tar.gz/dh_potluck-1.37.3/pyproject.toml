[tool.poetry]
name = "dh-potluck"
version = "1.37.3"
authors = []
description = ""
readme = "PYPI_README.md"
package-mode = true

[tool.poetry.dependencies]
python = "^3.10"
flask = "^3.0.2"
marshmallow = "^3.18.0"
sqlalchemy = ">=1.4.45 <3.0.0"
ddtrace = ">=2.5.3 <=4.3.0"
boltons = "^20.2.1"
werkzeug = "^3.1.5"
requests = "^2.32.4"
flask-limiter = "^2.7.0"
json-log-formatter = "^0.3.0"
flask-sqlalchemy = "^3.0.0"
flask-smorest = "< 1.0.0"
confluent-kafka = "~2.11.1"
mailchimp-transactional = "~1.0.56"
mixpanel = "^4.10.0"
boto3 = "^1.40.32"
flask-redis = "^0.4.0"
mysqlclient = "^2.0"
launchdarkly-server-sdk = "^9.13.1"
puremagic = "^1.30"

[tool.poetry.group.dev.dependencies]
flake8 = "^5.0.4"
pytest = "^8.3.5"
flake8-quotes = "^1.0"
responses = "^0.19.0"
freezegun = "^1.2.2"
redis = "^3.4.1"
black = "^24.3.0"
isort = "^5.10.1"
mypy = "^0.982"
types-boto3 = "^1.40.32"
types-requests = "^2.28.11.2"
pytest-stub = "^1.1.0"
sqlalchemy-stubs = "^0.4"
cryptography = "^44.0.1"
types-mysqlclient = "^2.2.0.20240311"

[tool.black]
line-length = 100
skip-string-normalization = true
target-version = ['py310']

[tool.isort]
line_length = 100
include_trailing_comma = true
multi_line_output = 3

[tool.mypy]
incremental = true
no_implicit_optional = true
disallow_any_generics = true

# Disabling the tests directory:
[[tool.mypy.overrides]]
module = "tests.*"
ignore_errors = true
ignore_missing_imports = true

# Enabling our own Modules:
[[tool.mypy.overrides]]
module = "dh_potluck.*"
disallow_untyped_defs = false

# 3rd Party Modules:
[[tool.mypy.overrides]]
module = [
    "boltons.*",
    "celery.*",
    "confluent_kafka.*",
    "confluent_kafka.cimpl",
    "flask_redis",
    "flask_smorest",
    "flask_sqlalchemy",
    "json_log_formatter",
    "mailchimp_transactional",
    "mixpanel",
    "pkg_resources",
    "redis",
    "redis.*",
]
ignore_missing_imports = true

[tool.pytest.ini_options]
filterwarnings = [
    "error",
    "ignore:The '__version__' attribute is deprecated and will be removed in Flask 3.1.:DeprecationWarning",
    "ignore:pkg_resources is deprecated as an API:DeprecationWarning",
    "ignore:ImportHookFinder\\.find_spec\\(\\) not found; falling back to find_module\\(\\):ImportWarning"
]
