<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils: https://docutils.sourceforge.io/" />
<title>README.rst</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 9511 2024-01-13 09:50:07Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
Despite the name, some widely supported CSS2 features are used.

See https://docutils.sourceforge.io/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: gray; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic, pre.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<a class="reference external image-reference" href="https://odoo-community.org/get-involved?utm_source=readme">
<img alt="Odoo Community Association" src="https://odoo-community.org/readme-banner-image" />
</a>
<div class="section" id="invoicing-and-accounting-entries-for-brazil">
<h1>Invoicing and accounting entries for Brazil</h1>
<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! This file is generated by oca-gen-addon-readme !!
!! changes will be overwritten.                   !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! source digest: sha256:f43914632ee4e0f925c9f98d27ad6dfec1925d2ce22512776bea971669cef02d
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/license-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/l10n-brazil/tree/16.0/l10n_br_account"><img alt="OCA/l10n-brazil" src="https://img.shields.io/badge/github-OCA%2Fl10n--brazil-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/l10n-brazil-16-0/l10n-brazil-16-0-l10n_br_account"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/l10n-brazil&amp;target_branch=16.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
<div class="section" id="visao-geral">
<h2>Visão Geral</h2>
<p>O módulo <tt class="docutils literal">l10n_br_account</tt> integra o motor fiscal brasileiro
(<tt class="docutils literal">l10n_br_fiscal</tt>) ao framework contábil nativo do Odoo (módulo
<tt class="docutils literal">account</tt>). Ele integra a complexa lógica da tributação e dos
documentos fiscais do Brasil com as faturas e lançamentos contábeis
conforme as normas de contabilidade brasileiras.</p>
<p>O módulo atende desde a automação na emissão de notas para empresas do
Simples Nacional até os cenários contábeis mais exigentes do regime
normal (Lucro Real/Presumido).</p>
</div>
<div class="section" id="arquitetura-e-integracao-decorator-pattern-inherits">
<h2>Arquitetura e Integração: Decorator Pattern (<tt class="docutils literal">_inherits</tt>)</h2>
<p>A arquitetura do módulo se baseia no mecanismo de herança por composição
<tt class="docutils literal">_inherits</tt> do Odoo para criar uma composição dinâmica entre os
modelos fiscais e contábeis:</p>
<ul class="simple">
<li><strong>account.move</strong> herda de <strong>l10n_br_fiscal.document</strong></li>
<li><strong>account.move.line</strong> herda de <strong>l10n_br_fiscal.document.line</strong></li>
</ul>
<p>Esta abordagem, análoga ao <em>Decorator Pattern</em>, oferece as seguintes
vantagens:</p>
<ol class="arabic simple">
<li><strong>Gerenciamento Unificado</strong>: Permite controlar o Documento Fiscal
diretamente pela interface da Fatura do Odoo. Campos fiscais (CFOP,
NCM, valores de impostos) são acessados e computados de forma
transparente, como se fossem nativos do <tt class="docutils literal">account.move.line</tt>.</li>
<li><strong>Baixíssima Redundância de Dados</strong>: A herança por composição evita a
duplicação de centenas de campos fiscais nas tabelas contábeis. A
“fonte da verdade” fiscal é sempre o registro em
<tt class="docutils literal">l10n_br_fiscal.document</tt>, garantindo um banco de dados normalizado
e consistente.</li>
<li><strong>Modularidade e Manutenção</strong>: A lógica fiscal complexa permanece
encapsulada no <tt class="docutils literal">l10n_br_fiscal</tt>. Para assegurar a reatividade dos
campos computados na interface da fatura, o módulo utiliza um <em>mixin</em>
especializado (<tt class="docutils literal">l10n_br_account.decorator.mixin</tt>) que gerencia a
herança de métodos e campos dinâmicos.</li>
</ol>
</div>
<div class="section" id="principais-funcionalidades-e-casos-de-uso">
<h2>Principais Funcionalidades e Casos de Uso</h2>
</div>
<div class="section" id="uso-simplificado-calculo-dos-impostos-e-criacao-dos-documentos-fiscais">
<h2>Uso Simplificado: Cálculo dos impostos e criação dos Documentos Fiscais</h2>
<p>O módulo <tt class="docutils literal">l10n_br_account</tt> é a peça chave para automatizar a emissão
de documentos fiscais a partir de qualquer fluxo de negócio que gere uma
fatura no Odoo, como:</p>
<ul class="simple">
<li>Ordens de Venda (<tt class="docutils literal">sale.order</tt>)</li>
<li>Ordens de Compra (<tt class="docutils literal">purchase.order</tt>)</li>
<li>Movimentações de Estoque (<tt class="docutils literal">stock.picking</tt>)</li>
<li>Contratos (<tt class="docutils literal">contract.contract</tt>), entre outros.</li>
</ul>
<p>A <strong>Operação Fiscal</strong> pré-configurada orquestra o preenchimento
automático de todos os dados necessários, permitindo a geração de NF-e,
NFS-e e outros documentos com mínima intervenção.</p>
</div>
<div class="section" id="uso-avancado-lancamentos-contabeis-corretos-para-as-empresas-do-regime-normal">
<h2>Uso Avançado: Lançamentos contábeis corretos para as empresas do Regime Normal</h2>
<p>Para empresas no Lucro Real ou Presumido, o <tt class="docutils literal">l10n_br_account</tt> habilita
uma gestão contábil e fiscal precisa e aderente à legislação.</p>
<ul class="simple">
<li><strong>Lançamentos Contábeis de Impostos</strong>: Conecta os impostos fiscais
(<tt class="docutils literal">l10n_br_fiscal.tax</tt>) aos contábeis (<tt class="docutils literal">account.tax</tt>), garantindo
que a validação de uma fatura gere os lançamentos corretos para ICMS,
IPI, PIS, COFINS, etc., em suas respectivas contas (custo,
recuperável, despesa).</li>
<li><strong>Operações Sem Impacto Financeiro</strong>: Suporta operações como “Remessa
para Industrialização”, permitindo a emissão do documento fiscal
obrigatório e o lançamento correto dos impostos, mas sem gerar contas
a pagar ou a receber, mantendo a integridade fiscal e contábil.</li>
<li><strong>Composição de Valores Financeiros</strong>: Gerencia a correta composição
do valor financeiro das faturas. Por exemplo, assegura que o valor do
IPI, quando não recuperável, seja somado ao contas a pagar do
fornecedor.</li>
<li><strong>Importação de Documentos (XML)</strong>: Facilita a importação de
documentos de fornecedores, criando simultaneamente o
<tt class="docutils literal">l10n_br_fiscal.document</tt> com os dados fiscais e a fatura de
fornecedor (<tt class="docutils literal">account.move</tt>) pronta para validação e pagamento.</li>
</ul>
</div>
<div class="section" id="escopo-e-delimitacao-do-modulo">
<h2>Escopo e Delimitação do Módulo</h2>
<p>O nome <tt class="docutils literal">l10n_br_account</tt> deriva do módulo <tt class="docutils literal">account</tt>, que ele
estende. É importante notar que o módulo <tt class="docutils literal">account</tt> do Odoo, em sua
essência, é focado em faturamento, embora contenha os conceitos
fundamentais de planos de contas e lançamentos contábeis.</p>
<p>Para uma contabilidade completa de uma empresa no regime normal, mesmo
utilizando o Odoo Enterprise, é necessária a instalação de dezenas de
módulos adicionais da OCA, provenientes de diversos repositórios da OCA.
O <tt class="docutils literal">l10n_br_account</tt>, apesar do nome, <strong>não substitui</strong> este
ecossistema. Ele se concentra na ponte fiscal-contábil. Funções como
conciliação avançada (através de módulos como <tt class="docutils literal">account_reconcile</tt>),
gestão de ordens de pagamento, integração bancária (CNAB) e importação
de extratos são tratadas por dezenas de outros módulos específicos da
OCA…</p>
<p>Por outro lado, é importante ressaltar que os autores deste módulo
possuem clientes do regime normal com uma contabilidade
significativamente mais completa do que a oferecida nativamente pelo
Odoo Enterprise, baseando-se exclusivamente em módulos de código aberto
da OCA. Alcançar tal nível de sofisticação, no entanto, exige anos de
experiência em implementação e uma escolha estratégica da versão do
Odoo. É importante evitar versões muito recentes, para as quais o
ecossistema de módulos da OCA ainda não atingiu a maturidade e
estabilidade necessárias após o processo de migração (uma versão nova do
Odoo mal tem 500 módulos da OCA migrados depois de 6 meses, mas tem
quase 2000 depois de um ano e quase 3000 depois de 3 anos).</p>
<p>Vale a pena mencionar que lançamentos de Custo da Mercadoria Vendida
(CMV) e outros lançamentos de contabilidade de estoque IFRS/IAS2, são
tipicamente realizados através da combinação do módulo nativo
<tt class="docutils literal">stock_account</tt>, do <tt class="docutils literal">l10n_br_stock_account</tt> (deste mesmo repo) e da
ativação do modo “anglo-saxon” no seu plano de contas.</p>
</div>
<div class="section" id="detalhes-sobre-o-modelo-de-dados">
<h2>Detalhes sobre o modelo de dados</h2>
</div>
<div class="section" id="cardinalidade-documentos-fiscais-e-lancamentos-contabeis">
<h2>Cardinalidade: Documentos Fiscais e Lançamentos Contábeis</h2>
<p>A arquitetura suporta cenários onde um único lançamento financeiro
(<tt class="docutils literal">account.move</tt>) agrupa múltiplos documentos fiscais, como uma fatura
única para pagar vários Conhecimentos de Transporte (CT-e). Esta
flexibilidade é garantida por três campos-chave:</p>
<ul class="simple">
<li><strong>account.move.fiscal_document_id</strong>: O campo <tt class="docutils literal">Many2one</tt> que
implementa o <tt class="docutils literal">_inherits</tt>. Representa o documento fiscal “principal”
ou em edição na interface da fatura.</li>
<li><strong>account.move.line.fiscal_document_line_id</strong>: O pilar da arquitetura.
Permite que <strong>cada linha</strong> da fatura aponte para uma linha de um
documento fiscal distinto. É isso que possibilita agregar múltiplos
documentos em um único <tt class="docutils literal">account.move</tt>.</li>
<li><strong>account.move.fiscal_document_ids</strong>: Campo <tt class="docutils literal">One2many</tt> computado que
agrega todos os documentos fiscais vinculados às linhas da fatura,
oferecendo uma visão completa e consolidada quando o lançamento tem
mais de um documento fiscal.</li>
</ul>
<p>A flexibilidade do design é bidirecional. O sistema também gerencia
nativamente cenários onde <strong>um lançamento contábil (``account.move``)
não possui nenhum documento fiscal associado</strong>. Isso é fundamental para
operações puramente contábeis ou não fiscais, como:</p>
<ul class="simple">
<li>Lançamentos de folha de pagamento.</li>
<li>Operações financeiras ou contábeis em empresas de um grupo
multinacional que não operam no Brasil.</li>
</ul>
<p>Além disso, mesmo dentro de uma fatura fiscalizada, a associação é
granular. Apenas as linhas de produto (<tt class="docutils literal">invoice_line_ids</tt> com
<tt class="docutils literal"><span class="pre">display_type='product'</span></tt>) são vinculadas a uma
<tt class="docutils literal">l10n_br_fiscal.document.line</tt>. Linhas de impostos, de contas a
pagar/receber, ou linhas de anotação/seção permanecem como lançamentos
puramente contábeis, sem linha de documento fiscal específica.</p>
</div>
<div class="section" id="observacao-sobre-a-normalizacao-do-modelo-de-dados">
<h2>Observação sobre a Normalização do Modelo de Dados</h2>
<p>Idealmente, o modelo de dados teria redundância zero. Contudo, para
simplificar a injeção de mixins fiscais — em especial o
<tt class="docutils literal">l10n_br_fiscal.document.line.mixin</tt> — e alavancar a lógica nativa do
Odoo, foi uma decisão de design manter a nomenclatura de um pequeno e
controlado conjunto de campos, como <tt class="docutils literal">partner_id</tt>, <tt class="docutils literal">company_id</tt>,
<tt class="docutils literal">user_id</tt>, <tt class="docutils literal">currency_id</tt>, <tt class="docutils literal">product_id</tt>, <tt class="docutils literal">quantity</tt>,
<tt class="docutils literal">price_unit</tt> e <tt class="docutils literal">name</tt>.</p>
<p>Como consequência, existe uma redundância mínima e gerenciada.
Considerando os milhares de campos necessários para a diversidade de
documentos fiscais brasileiros, apenas cerca de quatro campos do
<tt class="docutils literal">account.move</tt> e quatro do <tt class="docutils literal">account.move.line</tt> são efetivamente
duplicados. Para garantir a integridade, estes campos (apelidados de
<em>shadow fields</em>) são cuidadosamente sincronizados em tempo real,
inclusive durante a edição de novos registros em memória (fase
<tt class="docutils literal">NewId</tt>), assegurando total consistência entre a fatura e o documento
fiscal.</p>
</div>
<div class="section" id="a-separacao-estrategica-dos-mixins-fiscais">
<h2>A Separação Estratégica dos Mixins Fiscais</h2>
<p>No caso do <tt class="docutils literal">account.move</tt>, o objetivo era obter os campos do
<tt class="docutils literal">l10n_br_fiscal.document</tt> sem duplicá-los (o que o <tt class="docutils literal">_inherits</tt> faz
perfeitamente), mas também precisávamos de seus métodos (como
<tt class="docutils literal">_compute_fiscal_tax_ids</tt> ou <tt class="docutils literal">_compute_tax_fields</tt>). Se usássemos
<tt class="docutils literal">_inherit</tt> no mixin principal (<tt class="docutils literal">l10n_br_fiscal.document.mixin</tt>),
teríamos os métodos, mas os campos seriam duplicados, quebrando o
princípio de normalização.</p>
<p>Por outro lado, modelos como <tt class="docutils literal">sale.order</tt> e <tt class="docutils literal">purchase.order</tt> não são
uma representação de um documento fiscal, mas sim precursores dele.
Portanto, eles podem usar uma herança simples (<tt class="docutils literal">_inherit</tt>) diretamente
no mixin principal (<tt class="docutils literal">l10n_br_fiscal.document.mixin</tt>), pois precisam
tanto dos campos quanto dos métodos para preparar os dados que serão
posteriormente utilizados na geração do documento fiscal.</p>
</div>
<div class="section" id="modelo-uml-simplificado">
<h2>Modelo UML Simplificado</h2>
<p><img alt="UML account.move" src="https://raw.githubusercontent.com/OCA/l10n-brazil/16.0/l10n_br_account/static/img/account_move.png" /></p>
<p><img alt="UML account.move.line" src="https://raw.githubusercontent.com/OCA/l10n-brazil/16.0/l10n_br_account/static/img/account_move_line.png" /></p>
</div>
<div class="section" id="aviso-importante-pre-requisitos-e-complexidade">
<h2>Aviso Importante: Pré-requisitos e Complexidade</h2>
<p>Para utilizar o <tt class="docutils literal">l10n_br_account</tt> de forma eficaz, é necessário ter
domínio aprofundado de dois ecossistemas complexos: o módulo <tt class="docutils literal">account</tt>
nativo do Odoo e o motor <tt class="docutils literal">l10n_br_fiscal</tt> deste repositório.</p>
<p>O <tt class="docutils literal">account</tt> é o maior e mais intrincado módulo do Odoo, constituindo
por si só um ERP financeiro completo, e não apenas um simples software
de emissão de notas para microempresas. Por sua vez, o
<tt class="docutils literal">l10n_br_fiscal</tt> é o maior módulo entre os mais de 3000 disponíveis na
OCA. Este módulo, <tt class="docutils literal">l10n_br_account</tt>, está também entre os três mais
complexos da localização brasileira e exige um uso avançado do ORM do
Odoo para gerenciar a dualidade documento fiscal/lançamento contábil.</p>
<p>A implementação bem-sucedida de um ERP estrangeiro no Brasil é uma
tarefa que demanda profissionais altamente qualificados, com anos de
experiência em programação backend (Python) e implantação de verdadeiros
sistemas ERP. Uma implementação não se resume a baixar e instalar módulo
(apenas 1% do trabalho); envolve análise de processos, configuração,
migração de dados e customizações, migração de modulos OCA a partir de
outras versões… Subestimar essa complexidade invariavelmente leva a
projetos problemáticos e custos elevados no longo prazo.</p>
<p>Este aviso serve para alinhar expectativas e reforçar que o sucesso de
uma implantação Odoo no Brasil depende de expertise técnica e funcional
aprofundada. Infelizmente, este mercado atrai aventureiros que
subestimam essa complexidade ou que vendem projetos acreditando ser
possível terceirizar a execução sem grande compromisso com a entrega,
explorando a falta de informação do cliente. Este cenário caracteriza um
“market for lemons”, onde a assimetria de informação torna difícil
distinguir entre fornecedores qualificados e despreparados, impedindo o
desenvolvimento de um mercado de implementação maduro.</p>
<p>Agravando a situação, onde se esperaria uma garantia criteriosa de
qualidade, o ecossistema corporativo “oficial” investe pesadamente em
propaganda para mascarar essa realidade, promovendo uma visão onde a
consultoria de implementação é tratada como uma commodity. Esse modelo,
focado em comissões pela venda de licenças (muitas vezes desnecessárias
ao utilizar o ecossistema da OCA), alimenta um mercado paralelo notório
de “parceiros fantoches/bucha de canhão” que compram certificações
oficiais de empresas estrangeiras para simular uma competência que não
possuem. Cuidado com profissionais que ostentam certificações compradas
para transferir a responsabilidade da implementação sem o devido suporte
ou conhecimento real. Não se deixe enganar por narrativas que
simplificam a complexidade do projeto para priorizar a venda de
licenças!</p>
</div>
<div class="section" id="conclusao">
<h2>Conclusão</h2>
<p>O <tt class="docutils literal">l10n_br_account</tt> possui um design robusto que unifica as complexas
lógicas fiscal e contábil do Brasil dentro do Odoo. Sua arquitetura,
projetada por especialistas para especialistas, oferece uma plataforma
flexível e confiável, capaz de sustentar operações de alta complexidade
e garantir a conformidade fiscal e contábil das empresas que utilizam a
localização brasileira da OCA.</p>
<p><strong>Table of contents</strong></p>
</div>
<div class="section" id="installation">
<h2>Installation</h2>
<p>Este modulo depende dos módulos:</p>
<ul class="simple">
<li>l10n_br_coa (que depende do módulo account)</li>
<li>l10n_br_fiscal</li>
</ul>
</div>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>Antes de seguir este guia, é fundamental que você:</p>
<ol class="arabic simple">
<li><strong>Tenha configurado sua empresa</strong> com o país “Brasil”. A maioria dos
campos fiscais só aparecerá neste contexto.</li>
<li>Tenha configurado o regime fiscal da sua empresa.</li>
<li>Tenha configurado um Plano de Contas, idealmente deriavdo do plano
base do módulo l10n_br_coa.</li>
<li><strong>Esteja familiarizado com o processo de faturamento padrão do Odoo</strong>
através do módulo <tt class="docutils literal">account</tt>.</li>
<li><strong>Compreenda os conceitos básicos do módulo ``l10n_br_fiscal``</strong>,
especialmente o que são Operações Fiscais
(<tt class="docutils literal">l10n_br_fiscal.operation</tt>) e como o sistema seleciona e calcula
os impostos com base nelas.</li>
</ol>
</div>
<div class="section" id="usage">
<h2>Usage</h2>
<div class="section" id="passo-a-passo-criando-uma-fatura-fiscal">
<h3>Passo a Passo: Criando uma Fatura Fiscal</h3>
<p>O processo se inicia a partir da fatura padrão do Odoo, agora “decorada”
com os campos fiscais necessários.</p>
<ol class="arabic simple">
<li><strong>Navegue até Faturamento</strong> Acesse o menu
<tt class="docutils literal">Faturamento &gt; Clientes &gt; Faturas</tt>.</li>
<li><strong>Crie uma Nova Fatura</strong> Clique no botão <tt class="docutils literal">Criar</tt>.</li>
<li><strong>Selecione o Cliente</strong> No campo <tt class="docutils literal">Cliente</tt>, selecione um parceiro
configurado para o Brasil. O cadastro do cliente contenha as
informações fiscais corretas (CNPJ/CPF, perfil fiscal, endereço,
etc.). Nos dados de demonstração, a <strong>AMD do Brasil</strong> é um excelente
exemplo.</li>
<li><strong>Preencha os Dados Fiscais do Cabeçalho</strong> Com a instalação do
módulo, novos campos fiscais aparecerão no cabeçalho da fatura.<ul>
<li><strong>Tipo de Documento</strong>: Selecione o modelo do documento fiscal. Para
uma NF-e, por exemplo, escolha <strong>``55 - Nota Fiscal Eletrônica``</strong>.</li>
<li><strong>Operação Fiscal</strong>: Este é um campo chave. Ele define a natureza
da transação. Selecione uma operação compatível, como
<strong>``Venda de Mercadoria``</strong>.</li>
</ul>
</li>
<li><strong>Adicione as Linhas da Fatura</strong> Na aba <tt class="docutils literal">Linhas da Fatura</tt>, clique
em <tt class="docutils literal">Adicionar uma linha</tt>.<ul>
<li>Selecione um produto. Usando os dados de demonstração, você pode
escolher o produto <strong>``[E-COM08] Storage Box``</strong>.</li>
<li>Observe que, ao selecionar o produto, os campos fiscais da linha,
como <tt class="docutils literal">Operação Fiscal da Linha</tt> e <tt class="docutils literal">Impostos</tt>, são preenchidos
automaticamente com base nas regras da Operação Fiscal principal.
Os impostos são calculados e exibidos em tempo real.</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="visualizando-e-editando-os-detalhes-fiscais-da-linha">
<h3>Visualizando e Editando os Detalhes Fiscais da Linha</h3>
<p>A grade de linhas da fatura oferece uma visão simplificada. Para acessar
todos os detalhes fiscais de uma linha ou para editar manualmente algum
campo (como um NCM ou CST específico para aquela operação), você pode
usar o modo de edição em pop-up.</p>
<ul class="simple">
<li>Clique no ícone de <strong>“abrir registro externo” (um quadrado com uma
seta)</strong>, localizado à esquerda da linha do produto na grade editável.</li>
<li>Uma janela pop-up se abrirá, exibindo o formulário completo da linha.
Nele, você encontrará a aba <strong>``Impostos``</strong>, que contém o
detalhamento completo dos cálculos para cada tributo (ICMS, IPI, PIS,
COFINS, etc.).</li>
</ul>
</div>
<div class="section" id="verificando-os-lancamentos-contabeis">
<h3>Verificando os Lançamentos Contábeis</h3>
<p>Após preencher a fatura, você pode (e deve) inspecionar os lançamentos
contábeis que serão gerados.</p>
<ol class="arabic simple">
<li>Acesse a aba <strong>``Lançamentos Contábeis``</strong>.</li>
<li>Nesta aba, você verá todas as contas que serão movimentadas,
incluindo as linhas específicas para cada imposto (débito de impostos
a recuperar, crédito de impostos a recolher, etc.), refletindo o
resultado dos cálculos do motor fiscal.</li>
</ol>
<!--  -->
<blockquote>
<strong>Nota Importante</strong>: Para usuários da versão Community do Odoo, a aba
<tt class="docutils literal">Lançamentos Contábeis</tt> pode estar oculta por padrão. A instalação
do módulo <strong>``account_usability``</strong> (disponível no repositório
<tt class="docutils literal"><span class="pre">OCA/account-financial-tools</span></tt>) é fortemente recomendada para
torná-la visível e facilitar a análise contábil.</blockquote>
<p>Após a conferência, você pode <tt class="docutils literal">Confirmar</tt> a fatura para gerar os
lançamentos contábeis e prosseguir com a transmissão do documento
fiscal, caso seja um documento eletrônico.</p>
</div>
<div class="section" id="acessando-a-visao-fiscal-detalhada">
<h3>Acessando a Visão Fiscal Detalhada</h3>
<p>No canto superior direito do formulário da fatura, você encontrará um
<em>smart button</em> chamado <strong>Detalhe Fiscal</strong>.</p>
<p>Clicar neste botão permite navegar diretamente para a tela do
<tt class="docutils literal">l10n_br_fiscal.document</tt>, que oferece uma visão completa e focada nos
aspectos puramente fiscais. Nesta tela, é possível consultar detalhes
aprofundados, gerenciar o ciclo de vida do documento (cancelamento,
carta de correção) e, para documentos eletrônicos, acompanhar todo o
histórico de comunicação e o status de transmissão junto à SEFAZ.</p>
</div>
</div>
<div class="section" id="known-issues-roadmap">
<h2>Known issues / Roadmap</h2>
</div>
<div class="section" id="changelog">
<h2>Changelog</h2>
</div>
<div class="section" id="bug-tracker">
<h2>Bug Tracker</h2>
<p>Bugs are tracked on <a class="reference external" href="https://github.com/OCA/l10n-brazil/issues">GitHub Issues</a>.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
<a class="reference external" href="https://github.com/OCA/l10n-brazil/issues/new?body=module:%20l10n_br_account%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
<p>Do not contact contributors directly about support or help with technical issues.</p>
</div>
<div class="section" id="credits">
<h2>Credits</h2>
<div class="section" id="authors">
<h3>Authors</h3>
<ul class="simple">
<li>Akretion</li>
</ul>
</div>
<div class="section" id="contributors">
<h3>Contributors</h3>
<ul class="simple">
<li><a class="reference external" href="https://akretion.com/pt-BR">Akretion</a>:<ul>
<li>Renato Lima &lt;<a class="reference external" href="mailto:renato.lima&#64;akretion.com.br">renato.lima&#64;akretion.com.br</a>&gt;</li>
<li>Raphaël Valyi &lt;<a class="reference external" href="mailto:raphael.valyi&#64;akretion.com.br">raphael.valyi&#64;akretion.com.br</a>&gt;</li>
</ul>
</li>
<li><a class="reference external" href="https://www.kmee.com.br">KMEE</a>:<ul>
<li>Luis Felipe Mileo &lt;<a class="reference external" href="mailto:mileo&#64;kmee.com.br">mileo&#64;kmee.com.br</a>&gt;</li>
</ul>
</li>
<li><a class="reference external" href="https://www.escodoo.com.br">Escodoo</a>:<ul>
<li>Marcel Savegnago &lt;<a class="reference external" href="mailto:marcel.savegnago&#64;escodoo.com.br">marcel.savegnago&#64;escodoo.com.br</a>&gt;</li>
</ul>
</li>
<li><a class="reference external" href="https://engenere.one">Engenere</a>:<ul>
<li>Antônio S. Pereira Neto &lt;<a class="reference external" href="mailto:neto&#64;engenere.one">neto&#64;engenere.one</a>&gt;</li>
<li>Felipe Motter Pereira &lt;<a class="reference external" href="mailto:felipe&#64;engenere.one">felipe&#64;engenere.one</a>&gt;</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="maintainers">
<h3>Maintainers</h3>
<p>This module is maintained by the OCA.</p>
<a class="reference external image-reference" href="https://odoo-community.org">
<img alt="Odoo Community Association" src="https://odoo-community.org/logo.png" />
</a>
<p>OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.</p>
<p>Current <a class="reference external" href="https://odoo-community.org/page/maintainer-role">maintainers</a>:</p>
<p><a class="reference external image-reference" href="https://github.com/renatonlima"><img alt="renatonlima" src="https://github.com/renatonlima.png?size=40px" /></a> <a class="reference external image-reference" href="https://github.com/rvalyi"><img alt="rvalyi" src="https://github.com/rvalyi.png?size=40px" /></a></p>
<p>This module is part of the <a class="reference external" href="https://github.com/OCA/l10n-brazil/tree/16.0/l10n_br_account">OCA/l10n-brazil</a> project on GitHub.</p>
<p>You are welcome to contribute. To learn how please visit <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>.</p>
</div>
</div>
</div>
</div>
</body>
</html>
