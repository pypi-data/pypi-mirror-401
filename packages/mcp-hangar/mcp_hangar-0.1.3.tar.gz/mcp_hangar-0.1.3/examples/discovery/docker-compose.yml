# Example docker-compose.yml with MCP discovery labels
# Run: docker-compose up -d

version: '3.8'

services:
  # MCP provider with discovery labels
  fetch-service:
    image: ghcr.io/modelcontextprotocol/server-fetch:latest
    labels:
      mcp.hangar.enabled: "true"
      mcp.hangar.name: "fetch-service"
      mcp.hangar.mode: "http"
      mcp.hangar.port: "3000"
      mcp.hangar.group: "http-tools"
      mcp.hangar.health-path: "/health"
    networks:
      - mcp-network

  # Another MCP provider
  memory-service:
    image: ghcr.io/modelcontextprotocol/server-memory:latest
    labels:
      mcp.hangar.enabled: "true"
      mcp.hangar.name: "memory-service"
      mcp.hangar.mode: "http"
      mcp.hangar.port: "3000"
      mcp.hangar.group: "storage-tools"
    networks:
      - mcp-network

  # MCP Hangar registry
  mcp-hangar:
    build: ../..
    ports:
      - "8000:8000"
    volumes:
      - ./config.yaml:/app/config.yaml:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      LOG_LEVEL: INFO
    depends_on:
      - fetch-service
      - memory-service
    networks:
      - mcp-network

networks:
  mcp-network:
    driver: bridge

