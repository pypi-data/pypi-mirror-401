FROM node:20-alpine

LABEL org.opencontainers.image.title="MCP SQLite Server"
LABEL org.opencontainers.image.description="MCP server for SQLite database operations"

# Install build dependencies for better-sqlite3
RUN apk add --no-cache python3 make g++

WORKDIR /app

RUN npm install -g mcp-server-sqlite

# Create data directory with open permissions
RUN mkdir -p /data && chmod 777 /data

# Set database path via environment variable (--db arg is ignored by mcp-server-sqlite)
ENV SQLITE_DB_PATH=/data/database.db

ENTRYPOINT ["mcp-server-sqlite"]

