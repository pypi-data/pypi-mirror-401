[project]
name = "onlymaps"
dynamic = ["version"]
authors = [
  {email = "manosstoumpos@gmail.com"},
  {name = "Manos Stoumpos"}
]
description = "A Python micro-ORM"
keywords = ["python", "orm", "sql", "postgresql", "mysql"]
readme = "README.md"
license = {text = "MIT"}
requires-python = ">=3.11"
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent"
]
dependencies = [
  "pydantic==2.12.3"
]

[project.urls]
"Homepage" = "https://github.com/manoss96/onlymaps"
"Bug Tracker" = "https://github.com/manoss96/onlymaps/issues"
"Documentation" = "https://onlymaps.rtfd.io"
"Changelog" = "https://github.com/manoss96/onlymaps/blob/main/CHANGELOG.md"

[project.optional-dependencies]
psycopg = [
  "psycopg[binary] == 3.2.10"
]
pymysql = [
  "pymysql == 1.1.2",
  "types-PyMySQL == 1.1.0.20250916"
]
mariadb = [
  "mariadb == 1.1.14"
]
pymssql = [
  "pymssql == 2.3.8"
]
oracledb = [
  "oracledb == 3.4.1"
]
duckdb = [
  "duckdb == 1.4.3"
]
aiomysql = [
  "aiomysql == 0.3.2"
]
aiosqlite = [
  "aiosqlite == 0.21.0"
]

all = [
  "psycopg[binary] == 3.2.10",
  "pymysql == 1.1.2",
  "types-PyMySQL == 1.1.0.20250916",
  "mariadb == 1.1.14",
  "pymssql == 2.3.8",
  "oracledb == 3.4.1",
  "duckdb == 1.4.3",
  "aiomysql == 0.3.2",
  "aiosqlite == 0.21.0"
]

dev = [
  "pytest==9.0.1",
  "pytest-asyncio==1.3.0",
  "testcontainers[postgres,mysql,mssql,oracle-free]==4.13.2",
  "coverage==7.2.1",
  "mypy==1.18.2",
  "pylint==3.3.1",
  "pylint-pydantic==0.3.2",
  "black==24.10.0",
  "isort==5.13.2",
  "invoke==2.2.1"
]

[build-system]
requires = ["setuptools>=64", "setuptools_scm>=8"]
build-backend = "setuptools.build_meta"

[tool.setuptools_scm]
write_to = "onlymaps/_version.py"
version_scheme = "guess-next-dev"
local_scheme = "node-and-date"

[tool.mypy]
python_version = "3.11"
plugins = "pydantic.mypy"
disallow_untyped_defs = true

[[tool.mypy.overrides]]
module = [
  "onlymaps.asyncio.*",
  "onlymaps._version.py",
  "mariadb.*",
  "aiomysql.*",
  "testcontainers.*"
]
ignore_missing_imports = true


[tool.pylint]
load-plugins = ["pylint_pydantic"]
ignore-patterns = [".*\\.pyi"]
ignore-paths = [
  "onlymaps/asyncio/.*",
  "onlymaps/_version.py"
]
disable = ["too-few-public-methods"]
max-locals = 20
max-args = 10
max-positional-arguments = 10
max-attributes = 12
max-returns = 10
max-branches = 20


[tool.isort]
profile = "black"

[tool.pytest.ini_options]
pythonpath = ["."]
asyncio_mode = "auto"
asyncio_default_test_loop_scope= "function"
asyncio_default_fixture_loop_scope = "function"

[tool.coverage.report]
exclude_also = [
  "if TYPE_CHECKING:",
  "pass"
]