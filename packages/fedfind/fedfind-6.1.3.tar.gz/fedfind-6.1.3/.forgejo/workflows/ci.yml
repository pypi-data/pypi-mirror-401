name: CI via Tox
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  tox:
    runs-on: fedora
    permissions:
      contents: read
      pull-requests: read
    container:
      image: quay.io/fedora/fedora:latest
    steps:
      - name: Install required packages
        run: dnf -y install nodejs tox git
      - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8
        with:
          fetch-depth: 0
      - name: Install Python interpreters
        run: for py in 3.6 3.9 3.10 3.11 3.12 3.13; do dnf -y install python$py; done
      - name: Test with tox
        run: tox
