{
  "name": "routine_with_escaped_string_params",
  "description": "A routine demonstrating proper escaping of string parameters vs non-string parameters. String params use escaped quotes in headers and body, while integers/numbers do not need escaping.",
  "incognito": true,
  "parameters": [
    {
      "name": "api_key",
      "type": "string",
      "required": true,
      "description": "API key for authentication (string, needs escaping)"
    },
    {
      "name": "search_query",
      "type": "string",
      "required": true,
      "description": "Search query string (needs escaping)"
    },
    {
      "name": "user_agent",
      "type": "string",
      "required": false,
      "description": "User agent string (needs escaping)",
      "default": "Mozilla/5.0"
    },
    {
      "name": "page_size",
      "type": "integer",
      "required": false,
      "description": "Number of results per page (integer, no escaping needed)",
      "default": 10
    },
    {
      "name": "timeout_ms",
      "type": "integer",
      "required": false,
      "description": "Timeout in milliseconds (integer, no escaping needed)",
      "default": 5000
    },
    {
      "name": "price_threshold",
      "type": "number",
      "required": false,
      "description": "Price threshold (number, no escaping needed)",
      "default": 99.99
    }
  ],
  "operations": [
    {
      "type": "navigate",
      "url": "https://example.com/search?q={{search_query}}"
    },
    {
      "type": "sleep",
      "timeout_seconds": 1.5
    },
    {
      "type": "fetch",
      "endpoint": {
        "url": "https://api.example.com/v1/search?query={{search_query}}&limit={{page_size}}",
        "method": "POST",
        "headers": {
          "Authorization": "\"{{api_key}}\"",
          "User-Agent": "\"{{user_agent}}\"",
          "X-Search-Query": "\"{{search_query}}\"",
          "X-Page-Size": "{{page_size}}",
          "X-Timeout-Ms": "{{timeout_ms}}",
          "Content-Type": "application/json"
        },
        "body": {
          "query": "\"{{search_query}}\"",
          "api_key": "\"{{api_key}}\"",
          "page_size": "{{page_size}}",
          "timeout_ms": "{{timeout_ms}}",
          "threshold": "{{price_threshold}}",
          "metadata": {
            "user_agent": "\"{{user_agent}}\"",
            "timestamp": "{{epoch_milliseconds}}"
          }
        },
        "credentials": "include"
      },
      "session_storage_key": "search_results"
    },
    {
      "type": "return",
      "session_storage_key": "search_results"
    }
  ]
}