[build-system]
requires = ["maturin>=1.4,<2.0"]
build-backend = "maturin"

[project]
name = "embex"
description = "Embex: A Universal Vector Database ORM"
readme = "README.md"
version = "0.1.17"
authors = [{name = "BridgeRust", email = "hello@kologojosias.com"}]
urls = { Homepage = "https://github.com/bridgerust/bridgerust/tree/main/bindings/python/embex", Repository = "https://github.com/bridgerust/bridgerust/tree/main/bindings/python/embex", Issues = "https://github.com/bridgerust/bridgerust/issues" }
requires-python = ">=3.12"
classifiers = [
    "Programming Language :: Rust",
    "Programming Language :: Python :: Implementation :: CPython",
    "Programming Language :: Python :: Implementation :: PyPy",
]
dependencies = [
    "pydantic>=2.0",
]

[project.scripts]
embex = "embex.cli:main"

[project.optional-dependencies]
all = []
qdrant = []
pinecone = []
chroma = []
lancedb = []
pgvector = []
dev = [
    "sphinx>=9.1.0",
    "sphinx-rtd-theme>=1.3",
    "pytest-asyncio>=1.3.0",
]

[tool.maturin]
features = ["pyo3/extension-module"]
module-name = "embex"

profile = "release"
strip = true
exclude = [
    "*.md",
    "!README.md",
    "docs/",
    "tests/",
    "examples/",
    "benchmarks/",
    ".github/",
    ".vscode/",
    "*.pyc",
    "__pycache__/",
    ".pytest_cache/",
    "*.pyi",
    "uv.lock",
]
manifest-path = "bindings/python/embex/Cargo.toml"

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
addopts = "-v --tb=short"
markers = [
    "unit: Unit tests",
    "integration: Integration tests requiring database",
    "slow: Slow running tests",
]
