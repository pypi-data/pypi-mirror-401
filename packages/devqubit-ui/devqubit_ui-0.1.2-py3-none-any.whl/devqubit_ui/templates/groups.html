{% extends "base.html" %}

{% block title %}Groups - devqubit{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Run Groups</h1>
</div>

<div class="card mb-2">
    <form hx-get="/groups"
          hx-target="#groups-table"
          hx-swap="innerHTML"
          hx-indicator="#loading-indicator">
        <div class="form-row">
            <div class="form-group">
                <label for="project">Project</label>
                <select name="project" id="project" hx-trigger="change" hx-get="/groups" hx-target="#groups-table">
                    <option value="">All projects</option>
                    {% for p in projects %}
                    <option value="{{ p }}" {% if filters.project == p %}selected{% endif %}>{{ p }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group" style="display: flex; align-items: flex-end; gap: 0.5rem;">
                <button type="submit" class="btn btn-primary">Filter</button>
                <span id="loading-indicator" class="htmx-indicator">
                    <span class="spinner"></span>
                </span>
            </div>
        </div>
    </form>
</div>

<div class="card">
    <div id="groups-table">
        {% include "_groups_table.html" %}
    </div>
</div>
{% endblock %}
