# File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.

from typing import List, Union
from datetime import datetime
from typing_extensions import Literal, TypeAlias

from .job import Job
from .source import Source
from .upload import Upload
from .._models import BaseModel
from .job_file import JobFile

__all__ = [
    "NewEventWebhookEvent",
    "Data",
    "DataNotificationPayloadJobCompleted",
    "DataNotificationPayloadJobFailed",
    "DataNotificationPayloadUploadCompleted",
    "DataNotificationPayloadUploadFailed",
]


class DataNotificationPayloadJobCompleted(BaseModel):
    """Payload data structure for job.completed events"""

    files: List[JobFile]
    """List of files generated by the job"""

    job: Job


class DataNotificationPayloadJobFailed(BaseModel):
    """Payload data structure for job.failed and job.cancelled events"""

    job: Job


class DataNotificationPayloadUploadCompleted(BaseModel):
    """Payload data structure for upload.completed events"""

    source: Source

    upload: Upload


class DataNotificationPayloadUploadFailed(BaseModel):
    """Payload data structure for upload.failed and upload.expired events"""

    upload: Upload


Data: TypeAlias = Union[
    DataNotificationPayloadJobCompleted,
    DataNotificationPayloadJobFailed,
    DataNotificationPayloadUploadCompleted,
    DataNotificationPayloadUploadFailed,
]


class NewEventWebhookEvent(BaseModel):
    id: str
    """Unique identifier of the notification"""

    data: Data
    """Event-specific payload data"""

    date: datetime
    """Timestamp when the notification was sent"""

    event: Literal[
        "job.completed", "job.failed", "job.cancelled", "upload.completed", "upload.failed", "upload.expired"
    ]
    """Type of event that triggered the notification."""
