from libuseful.lib_usermng import *
from synchronizer_rpc.data.EnumDefine import *
from libuseful.lib_logger import *
import grpc
import synchronizer_rpc.proto.syncProc_pb2 as cApiMsg
import synchronizer_rpc.proto.syncProc_pb2_grpc as cApi
from ..SVCProvider import SVCProvider
from ..StubGRPC import StubGRPC
from synchronizer_rpc.data.CStatus import CStatus
from typing import Callable

__all__ = ['add_service_StatusPvd']

class StatusPvd(cApi.CommenderServicer, SVCProvider):
    SVC_NAME: str
    @property
    def procs(self): ...
    def stop(self) -> None: ...
    def make_ErrorDataMsg(self, errno: EErrorDesp = None, msg: str = 'None'): ...
    def wait_unsubscribe(self, uid: str): ...
    def unsubscribe(self, req: cApiMsg.BasicReq, context: grpc.aio.ServicerContext) -> cApiMsg.BoolResp: ...
    def Ping(self, req: cApiMsg.BasicReq, context: grpc.aio.ServicerContext) -> cApiMsg.BoolResp: ...
    def DoneInit(self, req: cApiMsg.DoneReq, context: grpc.aio.ServicerContext) -> cApiMsg.BoolResp: ...
    def DoneStart(self, req: cApiMsg.DoneReq, context: grpc.aio.ServicerContext) -> cApiMsg.BoolResp: ...
    def DoneStop(self, req: cApiMsg.DoneReq, context: grpc.aio.ServicerContext) -> cApiMsg.BoolResp: ...
    def DonePPSon(self, req: cApiMsg.DoneReq, context: grpc.aio.ServicerContext) -> cApiMsg.BoolResp: ...
    def Done(self) -> None: ...
    def __init__(self, user_mng: UserManager, status: CStatus, procs: dict, cb_connection: Callable[[str, bool], None] = None) -> None: ...
    def __del__(self) -> None: ...

class StatusPvd_Sync(StatusPvd):
    def subscribe(self, req: cApiMsg.BasicReq, context: grpc.aio.ServicerContext): ...

class StatusPvd_ASync(StatusPvd):
    async def subscribe(self, req: cApiMsg.BasicReq, context: grpc.aio.ServicerContext): ...

def add_service_StatusPvd(server: grpc.Server, stub: StubGRPC, user_mng: UserManager, status: CStatus, procs: dict, async_mode: bool = False, cb_connection: Callable[[str, bool], None] = None): ...
