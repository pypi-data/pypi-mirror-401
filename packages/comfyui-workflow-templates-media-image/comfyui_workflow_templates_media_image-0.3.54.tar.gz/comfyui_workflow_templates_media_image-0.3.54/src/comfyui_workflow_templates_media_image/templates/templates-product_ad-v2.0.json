{
  "id": "c28dc1c5-217d-4ee0-8baf-1929aaf5162e",
  "revision": 0,
  "last_node_id": 18,
  "last_link_id": 29,
  "nodes": [
    {
      "id": 18,
      "type": "ImageBatch",
      "pos": [
        13173.13786277583,
        470
      ],
      "size": [
        186.8621372241705,
        54.07495555706066
      ],
      "flags": {
        "collapsed": false
      },
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "image1",
          "type": "IMAGE",
          "link": 27
        },
        {
          "name": "image2",
          "type": "IMAGE",
          "link": 28
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            24
          ]
        }
      ],
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "ImageBatch"
      },
      "widgets_values": []
    },
    {
      "id": 2,
      "type": "LoadImage",
      "pos": [
        12500,
        930
      ],
      "size": [
        277.7486114575398,
        401.9161721263047
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            19
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "Load Product Image",
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "comfy_gpu.png",
        "image"
      ]
    },
    {
      "id": 3,
      "type": "GeminiImage2Node",
      "pos": [
        13550,
        470
      ],
      "size": [
        384.2057291666667,
        373.33333333333337
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 24
        },
        {
          "name": "files",
          "shape": 7,
          "type": "GEMINI_INPUT_FILES",
          "link": null
        },
        {
          "name": "prompt",
          "type": "STRING",
          "widget": {
            "name": "prompt"
          },
          "link": 29
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            10
          ]
        },
        {
          "name": "STRING",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "GeminiImage2Node"
      },
      "widgets_values": [
        "",
        "gemini-3-pro-image-preview",
        611482562925396,
        "randomize",
        "auto",
        "4K",
        "IMAGE+TEXT",
        "Status: Completed\nPrice: $0.2475\nTime elapsed: 76s"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [
        12500.645333985722,
        463.0647416496788
      ],
      "size": [
        268.375511297599,
        386.8404557997061
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            18,
            27
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "Load Ad Image",
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "reference_ad.png",
        "image"
      ]
    },
    {
      "id": 17,
      "type": "GetImageSize",
      "pos": [
        12840,
        470
      ],
      "size": [
        220,
        136
      ],
      "flags": {
        "collapsed": true
      },
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 18
        }
      ],
      "outputs": [
        {
          "name": "width",
          "type": "INT",
          "links": [
            16
          ]
        },
        {
          "name": "height",
          "type": "INT",
          "links": [
            17
          ]
        },
        {
          "name": "batch_size",
          "type": "INT",
          "links": null
        }
      ],
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "GetImageSize"
      },
      "widgets_values": [
        "width: 2000, height: 2752\n batch size: 1"
      ]
    },
    {
      "id": 16,
      "type": "ResizeAndPadImage",
      "pos": [
        12840,
        540
      ],
      "size": [
        210,
        122
      ],
      "flags": {
        "collapsed": true
      },
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 19
        },
        {
          "name": "target_width",
          "type": "INT",
          "widget": {
            "name": "target_width"
          },
          "link": 16
        },
        {
          "name": "target_height",
          "type": "INT",
          "widget": {
            "name": "target_height"
          },
          "link": 17
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            28
          ]
        }
      ],
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "ResizeAndPadImage"
      },
      "widgets_values": [
        512,
        512,
        "white",
        "area"
      ]
    },
    {
      "id": 11,
      "type": "PrimitiveStringMultiline",
      "pos": [
        12840,
        740
      ],
      "size": [
        210,
        110
      ],
      "flags": {
        "collapsed": true
      },
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            13
          ]
        }
      ],
      "title": "Prompt Template",
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "PrimitiveStringMultiline"
      },
      "widgets_values": [
        "Objective: Create a composite commercial image by synthesizing layout inputs with subject inputs. Target Product: {user_input}\n\n1. Inputs\nReference Input 1 (Style & Layout): Acts as the strict structural blueprint. This dictates composition, graphic elements, lighting direction, and text layout.\n\nReference Input 2 (Subject): Provides the primary subject matter (product shape, texture, branding).\n\n2. Execution Instructions\nPhase A: Scene & Design Analysis\nEnvironmental Scan: Analyze the perspective, depth, and lighting environment of [Input 1].\n\nDNA Deconstruction: Identify font styles, graphic shapes, and specific noise/grain levels.\n\nPhase B: Object Replacement\nRemoval: Remove the main product currently featured in [Input 1].\n\nInsertion: Insert the product isolated from [Input 2] into the exact focal point and scale defined by the original layout.\n\nPhase C: Text Modification (Content & Style)\nCondition Check: Analyze [Input 1] for existing Copy text elements (excluding text physically on the product).\n\nIf Copy Text Exists: Replace the existing copy with text relevant to the target product. You must replicate the exact font, weight, kerning, and drop-shadows of the original.\n\nIf No Copy Text Exists: Strictly do not generate any text. Preserve the negative space exactly as it appears in [Input 1].\n\nPhase D: Harmonize & Finish\nLighting: Adjust lighting, cast shadows, and reflections on the inserted product to match the environment.\n\nTexture: Apply the original image's texture (film grain, halftone, print artifacts) to the new elements to ensure a cohesive \"print ad\" look.\n\n3. Final Output\nAspect Ratio: Must match Input 1.\n\nQuality: A seamless, professional advertisement where the design layout is preserved, but the subject and color story are synthesized according to the user's preference."
      ]
    },
    {
      "id": 14,
      "type": "RegexReplace",
      "pos": [
        13150,
        690
      ],
      "size": [
        210,
        292
      ],
      "flags": {
        "collapsed": false
      },
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "string",
          "type": "STRING",
          "widget": {
            "name": "string"
          },
          "link": 13
        },
        {
          "name": "replace",
          "type": "STRING",
          "widget": {
            "name": "replace"
          },
          "link": 15
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            29
          ]
        }
      ],
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "RegexReplace"
      },
      "widgets_values": [
        "",
        "{user_input}",
        "",
        true,
        false,
        false,
        0
      ]
    },
    {
      "id": 15,
      "type": "PrimitiveStringMultiline",
      "pos": [
        12830,
        820
      ],
      "size": [
        289.7916666666667,
        319.58333333333337
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            15
          ]
        }
      ],
      "title": "Describe the Product and Ad Copy",
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76",
        "Node name for S&R": "PrimitiveStringMultiline"
      },
      "widgets_values": [
        "A ComfyUI branded RTX PRO 6000. This ad is promoting Comfy Cloud. The header 1 says \"The Comfy Cloud\". The smaller copy should inform that Comfy Cloud switched to Blackwell RTX 6000 Pros, which are approimately twice as fast as A100s. They also have 96GB of VRAM and 180GB of RAM, which will unlock much heavier workflows such as video upscaling."
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 9,
      "type": "SaveImage",
      "pos": [
        13960,
        470
      ],
      "size": [
        540,
        890
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 10
        }
      ],
      "outputs": [],
      "properties": {
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65,
        "cnr_id": "comfy-core",
        "ver": "0.3.76"
      },
      "widgets_values": [
        "ComfyUI"
      ]
    }
  ],
  "links": [
    [
      10,
      3,
      0,
      9,
      0,
      "IMAGE"
    ],
    [
      13,
      11,
      0,
      14,
      0,
      "STRING"
    ],
    [
      15,
      15,
      0,
      14,
      1,
      "STRING"
    ],
    [
      16,
      17,
      0,
      16,
      1,
      "INT"
    ],
    [
      17,
      17,
      1,
      16,
      2,
      "INT"
    ],
    [
      18,
      1,
      0,
      17,
      0,
      "IMAGE"
    ],
    [
      19,
      2,
      0,
      16,
      0,
      "IMAGE"
    ],
    [
      24,
      18,
      0,
      3,
      0,
      "IMAGE"
    ],
    [
      27,
      1,
      0,
      18,
      0,
      "IMAGE"
    ],
    [
      28,
      16,
      0,
      18,
      1,
      "IMAGE"
    ],
    [
      29,
      14,
      0,
      3,
      2,
      "STRING"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.5740289393689426,
      "offset": [
        -11363.88901008699,
        40.65727056433181
      ]
    },
    "frontendVersion": "1.33.10",
    "workflowRendererVersion": "LG",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}