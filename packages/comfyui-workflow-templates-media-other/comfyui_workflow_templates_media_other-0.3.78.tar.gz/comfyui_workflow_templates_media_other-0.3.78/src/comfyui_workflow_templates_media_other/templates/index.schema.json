{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ComfyUI Workflow Templates Index",
  "description": "Schema for validating the index.json file containing workflow template metadata",
  "type": "array",
  "items": {
    "$ref": "#/definitions/templateCategory"
  },
  "definitions": {
    "templateCategory": {
      "type": "object",
      "required": ["moduleName", "title", "templates"],
      "properties": {
        "isEssential": {
          "type": "boolean",
          "description": "Whether the category is Getting Started"
        },
        "moduleName": {
          "type": "string",
          "description": "Module identifier for the category",
          "pattern": "^[a-zA-Z0-9_-]+$"
        },
        "title": {
          "type": "string",
          "description": "Display name for the category"
        },
        "category": {
          "type": "string",
          "description": "Category of the template"
        },
        "type": {
          "type": "string",
          "enum": ["image", "video", "audio", "3d"],
          "description": "Optional type hint for the category"
        },
        "templates": {
          "type": "array",
          "description": "Array of workflow templates in this category",
          "items": {
            "$ref": "#/definitions/templateInfo"
          }
        },
        "icon": {
          "type" : "string",
          "description": "Icon for the category"
        }
      },
      "additionalProperties": false
    },
    "templateInfo": {
      "type": "object",
      "required": ["name", "mediaType", "mediaSubtype", "description"],
      "properties": {
        "openSource": {
          "type": "boolean",
          "description": "Whether the template is Open Source"
        },
        "name": {
          "type": "string",
          "description": "Workflow filename without .json extension",
          "pattern": "^[a-zA-Z0-9._-]+$"
        },
        "title": {
          "type": "string",
          "description": "Optional display title for the template"
        },
        "tutorialUrl": {
          "type": "string",
          "format": "uri",
          "description": "Optional URL to tutorial or documentation"
        },
        "mediaType": {
          "type": "string",
          "enum": ["image", "video", "audio", "3d"],
          "description": "Type of output media this workflow produces"
        },
        "mediaSubtype": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9]+$",
          "description": "File extension/format of the thumbnail (e.g., webp, mp3, mp4)"
        },
        "thumbnailVariant": {
          "type": "string",
          "enum": ["compareSlider", "hoverDissolve", "hoverZoom", "zoomHover"],
          "description": "Optional thumbnail hover effect"
        },
        "description": {
          "type": "string",
          "description": "Brief description of what the workflow does"
        },
        "tags": {
          "type": "array",
          "description": "Array of tags for categorizing and filtering templates",
          "items": {
            "type": "string"
          }
        },
        "models": {
          "type": "array",
          "description": "Array of model names used by this workflow",
          "items": {
            "type": "string"
          }
        },
        "date": {
          "type": "string",
          "format": "date",
          "description": "Date when the template was created or last updated (YYYY-MM-DD format)"
        },
        "size": {
          "type": "number",
          "description": "Size of the template in bytes"
        },
        "vram": {
          "type": "number",
          "description": "VRAM of the template in bytes"
        },
        "searchRanking": {
          "type": "number",
          "minimum": 0,
          "maximum": 1000,
          "description": "Search ranking score for prioritizing templates in search results (0-1000, higher = better ranking)"
        },
        "status": {
          "type": "string",
          "enum": ["active", "archived", "deprecated"],
          "description": "Status of the template: active, archived, deprecated"
        },
        "requiresCustomNodes": {
          "type": "array",
          "description": "Array of custom node package IDs required for this template (from Custom Node Registry)",
          "items": {
            "type": "string"
          }
        },
      "usage": {
        "type": "number",
        "description": "Usage count of the category"
      },
      "searchRank": {
        "type": "number",
        "description": "Search ranking score for prioritizing templates in search results (0-1000, higher = better ranking)"
      },
      "includeOnDistributions": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": ["cloud", "local", "desktop", "mac", "windows"]
        },
        "description": "Distributions on which the template is included"
      }
      },
      "additionalProperties": false
    }
  }
}