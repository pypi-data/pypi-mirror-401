{
  "id": "88ac5dad-efd7-40bb-84fe-fbaefdee1fa9",
  "revision": 0,
  "last_node_id": 77,
  "last_link_id": 138,
  "nodes": [
    {
      "id": 59,
      "type": "SaveAudioMP3",
      "pos": [
        1508.0409984041914,
        -341.42319894431466
      ],
      "size": [
        575.875,
        298.671875
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "audio",
          "type": "AUDIO",
          "link": 138
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "SaveAudioMP3",
        "cnr_id": "comfy-core",
        "ver": "0.3.34"
      },
      "widgets_values": [
        "audio/ComfyUI",
        "V0"
      ]
    },
    {
      "id": 74,
      "type": "12b82ce4-ea55-42f8-9d19-3db74d8ca70e",
      "pos": [
        834.8349585680651,
        -342.74893463824935
      ],
      "size": [
        639.859375,
        555.734375
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [
        {
          "label": "vocal volume multiplier",
          "name": "multiplier",
          "type": "FLOAT",
          "widget": {
            "name": "multiplier"
          },
          "link": null
        },
        {
          "label": "music tags",
          "name": "tags",
          "type": "STRING",
          "widget": {
            "name": "tags"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            138
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "-1",
            "multiplier"
          ],
          [
            "-1",
            "tags"
          ],
          [
            "-1",
            "lyrics"
          ],
          [
            "-1",
            "seconds"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.3.65"
      },
      "widgets_values": [
        1,
        "synthwave, techno, synthpop, futuristic, electro, with liquid drum & bass drive.\nRestless, confident, dreamy mood at 128 BPM.\nAnalog bass, pulsating arps, percussive synth stabs, gated drums.\nQuick build,  then explosive drum burst, then clean fade.\nBreathy, rhythmic female vocals, minimal emotion, metallic echo.",
        "Verse\nNeon rain on my screen,\nDreams compile in silver sheen.\nNo weight, just motion,\nI’m plugged into emotion.\n\nChorus\nComfy Cloud — breathing light,\nCode and color, spark and wire.\nDrift through data, feel alive,\nIn your circuits, I arrive.",
        60
      ]
    },
    {
      "id": 77,
      "type": "MarkdownNote",
      "pos": [
        80,
        300
      ],
      "size": [
        730,
        1046
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "About ACE Step and Multi-language Input",
      "properties": {},
      "widgets_values": [
        "Currently, multi-language support in ACE-Step V1 is implemented by uniformly converting all languages to English characters. At present, in ComfyUI, we haven't implemented the step of converting multiple languages into English. This is because if we need to implement the corresponding conversion, we have to add additional ComfyUI core dependencies, which may lead to unresolved dependency conflicts.\n\nSo, currently, if you need to input multi-language text, you have to convert it into English characters to complete this process manually. Then, at the beginning of the corresponding `lyrics`, input the abbreviation of the corresponding language code.\n\nFor example, use `[zh]` for Chinese, `[ja]` for Japanese, `[ko]` for Korean, and so on. For specific language input, please check the examples in the instructions. \n\nFor example, Chinese `[zh]`, Japanese `[ja]`, Korean `[ko]`, etc.\n\nExample:\n\n```\n[verse]\n\n[zh]wo3zou3guo4shen1ye4de5jie1dao4\n[zh]leng3feng1chui1luan4si1nian4de5piao4liang4wai4tao4\n[zh]ni3de5wei1xiao4xiang4xing1guang1hen3xuan4yao4\n[zh]zhao4liang4le5wo3gu1du2de5mei3fen1mei3miao3\n\n[chorus]\n\n[verse]​\n[ko]hamkke si-kkeuleo-un sesang-ui sodong-eul pihae​\n[ko]honja ogsang-eseo dalbich-ui eolyeompus-ileul balaboda​\n[ko]niga salang-eun lideum-i ganghan eum-ag gatdago malhaess-eo​\n[ko]han ta han tamada ma-eum-ui ondoga eolmana heojeonhanji ijge hae\n\n[bridge]\n[es]cantar mi anhelo por ti sin ocultar\n[es]como poesía y pintura, lleno de anhelo indescifrable\n[es]tu sombra es tan terca como el viento, inborrable\n[es]persiguiéndote en vuelo, brilla como cruzar una mar de nubes\n\n[chorus]\n[fr]que tu sois le vent qui souffle sur ma main\n[fr]un contact chaud comme la douce pluie printanière\n[fr]que tu sois le vent qui s'entoure de mon corps\n[fr]un amour profond qui ne s'éloignera jamais\n\n```\n\n"
      ],
      "color": "#432",
      "bgcolor": "#000"
    },
    {
      "id": 75,
      "type": "MarkdownNote",
      "pos": [
        82.6664201947749,
        -338.65026679167113
      ],
      "size": [
        732,
        571.296875
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Note: how to use this workflow",
      "properties": {},
      "widgets_values": [
        "[Tutorial](https://docs.comfy.org/tutorials/audio/ace-step/ace-step-v1) \n\nThe AceStep requires `tags` and `lyrics` to generate music. `Tags` are for the music rhythm and type, and `lyrics` literally mean the words of the song.\n \n## For Comfy Cloud users\n\nIf you are using [cloud.comfy.org](https://cloud.comfy.org/):\n1. For the first run, you can just click the run button to see what happens. \n\n2. Try to updating the `tags(top one)`, and `lyrics(bottom one)` to have fun with it\n\n## For Local Uers\n\nDownload the following model and save it to the **ComfyUI/models/checkpoints** folder.\n[ace_step_v1_3.5b.safetensors](https://huggingface.co/Comfy-Org/ACE-Step_ComfyUI_repackaged/blob/main/all_in_one/ace_step_v1_3.5b.safetensors)\n\n## Report Issues\n\nIf you have any problems running this workflow, please report template-related issues via this link: [report the template issue here](https://github.com/Comfy-Org/workflow_templates/issues)"
      ],
      "color": "#432",
      "bgcolor": "#000"
    }
  ],
  "links": [
    [
      138,
      74,
      0,
      59,
      0,
      "AUDIO"
    ]
  ],
  "groups": [],
  "definitions": {
    "subgraphs": [
      {
        "id": "12b82ce4-ea55-42f8-9d19-3db74d8ca70e",
        "version": 1,
        "state": {
          "lastGroupId": 7,
          "lastNodeId": 73,
          "lastLinkId": 142,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Text-to-Song AceStep (Simplified)",
        "inputNode": {
          "id": -10,
          "bounding": [
            -220,
            150,
            161.376953125,
            120
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            1350,
            260,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "afaa227b-8330-4e86-924d-a43f69949572",
            "name": "multiplier",
            "type": "FLOAT",
            "linkIds": [
              138
            ],
            "label": "vocal volume multiplier",
            "pos": [
              -78.623046875,
              170
            ]
          },
          {
            "id": "b822bfa5-91ca-46c3-a9a8-38dd21023c11",
            "name": "tags",
            "type": "STRING",
            "linkIds": [
              139
            ],
            "label": "music tags",
            "pos": [
              -78.623046875,
              190
            ]
          },
          {
            "id": "c5fe61ef-5ed0-4c23-b8dc-e4895681cfd6",
            "name": "lyrics",
            "type": "STRING",
            "linkIds": [
              141
            ],
            "pos": [
              -78.623046875,
              210
            ]
          },
          {
            "id": "7681279c-73de-4fd6-a573-1fc45b2add7f",
            "name": "seconds",
            "type": "FLOAT",
            "linkIds": [
              142
            ],
            "pos": [
              -78.623046875,
              230
            ]
          }
        ],
        "outputs": [
          {
            "id": "64b3e663-3fea-4f74-a75e-77030e6a01cf",
            "name": "AUDIO",
            "type": "AUDIO",
            "linkIds": [
              126
            ],
            "localized_name": "AUDIO",
            "pos": [
              1370,
              280
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 49,
            "type": "LatentApplyOperationCFG",
            "pos": [
              940,
              -160
            ],
            "size": [
              290,
              50
            ],
            "flags": {
              "collapsed": false
            },
            "order": 8,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 113
              },
              {
                "localized_name": "operation",
                "name": "operation",
                "type": "LATENT_OPERATION",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  121
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LatentApplyOperationCFG",
              "cnr_id": "comfy-core",
              "ver": "0.3.34"
            },
            "widgets_values": []
          },
          {
            "id": 64,
            "type": "LoadAudio",
            "pos": [
              180,
              340
            ],
            "size": [
              370,
              140
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "AUDIO",
                "name": "AUDIO",
                "type": "AUDIO",
                "links": [
                  136
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LoadAudio",
              "cnr_id": "comfy-core",
              "ver": "0.3.34"
            },
            "widgets_values": [
              "ace_step_example.flac",
              null,
              null
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 68,
            "type": "VAEEncodeAudio",
            "pos": [
              180,
              180
            ],
            "size": [
              370,
              46
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "audio",
                "name": "audio",
                "type": "AUDIO",
                "link": 136
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 137
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "VAEEncodeAudio",
              "cnr_id": "comfy-core",
              "ver": "0.3.34"
            },
            "widgets_values": []
          },
          {
            "id": 18,
            "type": "VAEDecodeAudio",
            "pos": [
              1080,
              270
            ],
            "size": [
              164.2388671875,
              46
            ],
            "flags": {
              "collapsed": false
            },
            "order": 6,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 122
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 83
              }
            ],
            "outputs": [
              {
                "localized_name": "AUDIO",
                "name": "AUDIO",
                "type": "AUDIO",
                "links": [
                  126
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "VAEDecodeAudio",
              "cnr_id": "comfy-core",
              "ver": "0.3.32"
            },
            "widgets_values": []
          },
          {
            "id": 44,
            "type": "ConditioningZeroOut",
            "pos": [
              600,
              70
            ],
            "size": [
              204.134765625,
              26
            ],
            "flags": {
              "collapsed": true
            },
            "order": 7,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "conditioning",
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 108
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  120
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ConditioningZeroOut",
              "cnr_id": "comfy-core",
              "ver": "0.3.32"
            },
            "widgets_values": []
          },
          {
            "id": 51,
            "type": "ModelSamplingSD3",
            "pos": [
              590,
              -40
            ],
            "size": [
              330,
              60
            ],
            "flags": {
              "collapsed": false
            },
            "order": 2,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 115
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  113
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ModelSamplingSD3",
              "cnr_id": "comfy-core",
              "ver": "0.3.34"
            },
            "widgets_values": [
              5.000000000000001
            ]
          },
          {
            "id": 50,
            "type": "LatentOperationTonemapReinhard",
            "pos": [
              590,
              -160
            ],
            "size": [
              330,
              58
            ],
            "flags": {},
            "order": 9,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "multiplier",
                "name": "multiplier",
                "type": "FLOAT",
                "widget": {
                  "name": "multiplier"
                },
                "link": 138
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT_OPERATION",
                "name": "LATENT_OPERATION",
                "type": "LATENT_OPERATION",
                "links": [
                  114
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LatentOperationTonemapReinhard",
              "cnr_id": "comfy-core",
              "ver": "0.3.34"
            },
            "widgets_values": [
              1
            ]
          },
          {
            "id": 52,
            "type": "KSampler",
            "pos": [
              940,
              -40
            ],
            "size": [
              290,
              262
            ],
            "flags": {},
            "order": 10,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 121
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 117
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 120
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 119
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "slot_index": 0,
                "links": [
                  122
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "KSampler",
              "cnr_id": "comfy-core",
              "ver": "0.3.34"
            },
            "widgets_values": [
              1089723283857463,
              "randomize",
              50,
              5,
              "euler",
              "simple",
              1
            ]
          },
          {
            "id": 17,
            "type": "EmptyAceStepLatentAudio",
            "pos": [
              180,
              50
            ],
            "size": [
              370,
              82
            ],
            "flags": {},
            "order": 5,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "seconds",
                "name": "seconds",
                "type": "FLOAT",
                "widget": {
                  "name": "seconds"
                },
                "link": 142
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  119
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "EmptyAceStepLatentAudio",
              "cnr_id": "comfy-core",
              "ver": "0.3.32"
            },
            "widgets_values": [
              60,
              1
            ]
          },
          {
            "id": 40,
            "type": "CheckpointLoaderSimple",
            "pos": [
              180,
              -160
            ],
            "size": [
              370,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  115
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  80
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  83,
                  137
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "CheckpointLoaderSimple",
              "cnr_id": "comfy-core",
              "ver": "0.3.32",
              "models": [
                {
                  "name": "ace_step_v1_3.5b.safetensors",
                  "url": "https://huggingface.co/Comfy-Org/ACE-Step_ComfyUI_repackaged/resolve/main/all_in_one/ace_step_v1_3.5b.safetensors?download=true",
                  "directory": "checkpoints"
                }
              ]
            },
            "widgets_values": [
              "ace_step_v1_3.5b.safetensors"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 14,
            "type": "TextEncodeAceStepAudio",
            "pos": [
              590,
              120
            ],
            "size": [
              340,
              500
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 80
              },
              {
                "localized_name": "tags",
                "name": "tags",
                "type": "STRING",
                "widget": {
                  "name": "tags"
                },
                "link": 139
              },
              {
                "localized_name": "lyrics",
                "name": "lyrics",
                "type": "STRING",
                "widget": {
                  "name": "lyrics"
                },
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  108,
                  117
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "TextEncodeAceStepAudio",
              "cnr_id": "comfy-core",
              "ver": "0.3.32"
            },
            "widgets_values": [
              "synthwave, techno, synthpop, futuristic, electro, with liquid drum & bass drive.\nRestless, confident, dreamy mood at 128 BPM.\nAnalog bass, pulsating arps, percussive synth stabs, gated drums.\nQuick build,  then explosive drum burst, then clean fade.\nBreathy, rhythmic female vocals, minimal emotion, metallic echo.",
              "Verse\nNeon rain on my screen,\nDreams compile in silver sheen.\nNo weight, just motion,\nI’m plugged into emotion.\n\nChorus\nComfy Cloud — breathing light,\nCode and color, spark and wire.\nDrift through data, feel alive,\nIn your circuits, I arrive.",
              0.9900000000000002
            ]
          }
        ],
        "groups": [
          {
            "id": 1,
            "title": "Load model here",
            "bounding": [
              170,
              -230,
              390,
              180
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "Latent",
            "bounding": [
              170,
              -30,
              390,
              280
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "Adjust the vocal volume",
            "bounding": [
              580,
              -230,
              350,
              140
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "For repainting",
            "bounding": [
              170,
              270,
              390,
              223.60000610351562
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 113,
            "origin_id": 51,
            "origin_slot": 0,
            "target_id": 49,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 114,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 49,
            "target_slot": 1,
            "type": "LATENT_OPERATION"
          },
          {
            "id": 136,
            "origin_id": 64,
            "origin_slot": 0,
            "target_id": 68,
            "target_slot": 0,
            "type": "AUDIO"
          },
          {
            "id": 137,
            "origin_id": 40,
            "origin_slot": 2,
            "target_id": 68,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 122,
            "origin_id": 52,
            "origin_slot": 0,
            "target_id": 18,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 83,
            "origin_id": 40,
            "origin_slot": 2,
            "target_id": 18,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 108,
            "origin_id": 14,
            "origin_slot": 0,
            "target_id": 44,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 115,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 51,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 121,
            "origin_id": 49,
            "origin_slot": 0,
            "target_id": 52,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 117,
            "origin_id": 14,
            "origin_slot": 0,
            "target_id": 52,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 120,
            "origin_id": 44,
            "origin_slot": 0,
            "target_id": 52,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 119,
            "origin_id": 17,
            "origin_slot": 0,
            "target_id": 52,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 80,
            "origin_id": 40,
            "origin_slot": 1,
            "target_id": 14,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 126,
            "origin_id": 18,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "AUDIO"
          },
          {
            "id": 138,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 50,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 139,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 14,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 141,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 14,
            "target_slot": 2,
            "type": "STRING"
          },
          {
            "id": 142,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 17,
            "target_slot": 0,
            "type": "FLOAT"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      }
    ]
  },
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.44597694796838705,
      "offset": [
        1448.8888351815401,
        826.7901973410861
      ]
    },
    "frontendVersion": "1.35.7",
    "node_versions": {
      "comfy-core": "0.3.34",
      "ace-step": "06f751d65491c9077fa2bc9b06d2c6f2a90e4c56"
    },
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true,
    "workflowRendererVersion": "Vue"
  },
  "version": 0.4
}