import{_ as Ke}from"./hcYt5xb6.js";import{A as Je}from"./CzLssp15.js";import{_ as Xe,a as Ye,b as Ze,c as et}from"./COjiOs1v.js";import{R as tt,D as Ie,e as $e,h as st,B as at,S as nt,G as ot,E as v,k as V,U as it,H as rt,u as lt,V as R,m as ct,W as ut,c as J,o as I,b as i,a as C,w as c,g as e,d as Q,t as D,I as L,v as F,L as ce,y as dt,J as ft,K as mt,X as ve,Y as pt}from"./BzhixHsn.js";import{_ as vt}from"./pRipWecN.js";import{u as _t,_ as ht,a as gt,b as yt}from"./BlnvEJqx.js";import{_ as wt}from"./BiXAZkt9.js";import{_ as St,a as xt,b as Ce,c as bt,d as kt}from"./DC3gMtZB.js";import{_ as Tt}from"./DB-9e68Q.js";import{_ as At,a as Ct,b as Mt,c as It,d as $t}from"./C9XbPd6k.js";import{_ as Et,a as Rt}from"./DjusaS8W.js";import{_ as Dt}from"./D0aoH_0m.js";import{_ as Nt}from"./Di109XjC.js";import{u as Ot}from"./2JFTuhAN.js";import{u as Ut}from"./D01W4VS-.js";import{P as Vt,a as Lt}from"./D_Xbx0JF.js";import{P as Pt}from"./C-zlyDS5.js";import"./BSaEE8c4.js";import"./DdeO54y7.js";import"./Bp3-KBkO.js";import"./DKMWZZOl.js";import"./XCOtPLqC.js";import"./Dosvfmhb.js";import"./CCA1r4XF.js";import"./lcKie01k.js";import"./qyVZgQpg.js";import"./4isL45Eu.js";import"./2RVX2kid.js";import"./C-9Ampo3.js";import"./C-xhCs27.js";import"./Bi0Cqvs9.js";import"./C56gk0qC.js";import"./BmCC6msl.js";import"./vJ3Jskde.js";import"./CeWx-USI.js";import"./B9I6JWJy.js";import"./DQj8dpKz.js";import"./BEcuULY5.js";import"./DkVjT0nP.js";import"./DlAUqK2U.js";import"./DzpHhHXI.js";import"./RCxqQWZp.js";import"./BYr6U6oc.js";import"./CawQPbYo.js";import"./Dx78NuNM.js";import"./EdM3CJ8e.js";import"./D0pu0OPX.js";import"./BdE42Imj.js";import"./C8B8ONuC.js";import"./Le8goM6p.js";import"./CHPRih2d.js";import"./DU0NpF9R.js";import"./DhvzP0AS.js";const zt=tt("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function Ee(M){const u=M.split(`
`),l=[];for(const h of u){if(!h.startsWith("data:"))continue;let a=h.slice(5);a.startsWith(" ")&&(a=a.slice(1)),l.push(a)}return l}function Bt(M){const u=Ee(M);return u.length===0?!1:u.join(`
`).trim()==="[DONE]"}const Ft=M=>{if(!M||M.length===0)return;const u=M.map(l=>{const h={};return l.url&&(h.url=l.url),h.url?(l.alt&&(h.alt=l.alt),l.mimeType&&(h.mime_type=l.mimeType),typeof l.size=="number"&&(h.size=l.size),l.fileKey&&(h.file_key=l.fileKey),h.id=l.id,h):null}).filter(Boolean);return u.length?u:void 0};function qt(){const{$api:M}=Ie(),{t:u,locale:l}=$e(),h=async(x,P,X,d,b,Y,N,z)=>{try{const k={content:x,language:l.value,...P&&{conversation_id:P}},m=Ft(z);m&&(k.images=m);const y=await M("/v1/chat",{method:"POST",body:k,responseType:"stream"});if(!y||typeof y.pipeThrough!="function")throw new Error("Streaming not supported, falling back to sync mode");const $=y.pipeThrough(new TextDecoderStream).getReader();let w="";const n={onChunk:X,onComplete:d,onError:b,onAgentStep:Y,onReasoningTrace:N};for(;;){const{value:W,done:ue}=await $.read();if(ue){if(w.trim().length>0&&await Me(w,n))return;break}w+=W,w=w.replace(/\r\n/g,`
`);let Z;for(;(Z=w.indexOf(`

`))!==-1;){const ne=w.slice(0,Z);if(w=w.slice(Z+2),await Me(ne,n))return}}}catch(k){if(k?.statusCode===403||k?.response?.status===403){const m=k?.data?.detail||k?.response?.data?.detail;m?.error;const y=m?.assistant_status;let $=u("chat.assistantNotAvailable");y&&($=`${$} (${u("chat.assistantStatus")}: ${y})`),b?.($);return}u("chat.unknownError"),k instanceof TypeError&&k.message.includes("fetch")?u("chat.networkError"):k instanceof Error&&k.message;try{const m=await a(x,P);d&&d(m.message)}catch(m){if(m?.statusCode===403||m?.response?.status===403){const w=(m?.data?.detail||m?.response?.data?.detail)?.assistant_status;let n=u("chat.assistantNotAvailable");w&&(n=`${n} (${u("chat.assistantStatus")}: ${w})`),b?.(n);return}const y=m instanceof Error?m.message:u("chat.sendFailed");b?.(y)}}},a=async(x,P)=>{const X={content:x,language:l.value,...P&&{conversation_id:P}};return await M("/v1/chat/sync",{method:"POST",body:X})};return{sendStreamingMessage:h,sendSyncMessage:a}}async function Me(M,u){const l=Ee(M);if(l.length===0)return!1;const h=l.join(`
`).trim();if(!h)return!1;if(Bt(M))return!0;try{const a=JSON.parse(h);if(a.type==="error")return u?.onError?.(a.data?.error||"Unknown error occurred"),!0;if(a.type==="content_chunk"&&a.data&&u?.onChunk?.(a.data),a.type==="reasoning_trace"&&a.data&&u?.onReasoningTrace&&u.onReasoningTrace(a.data),a.type==="reasoning_traces"&&a.data?.traces&&u?.onReasoningTrace){for(const x of a.data.traces)x.thought&&u.onReasoningTrace({content:x.thought,is_final:!1});u.onReasoningTrace({content:"",is_final:!0})}if((a.type==="agent_action"||a.type==="agent_observation")&&u?.onAgentStep){const x={type:a.type,tool:a.data?.tool,tool_display_name:a.data?.tool_display_name,observation:a.data?.observation,description:a.data?.description,timestamp:Date.now()};u.onAgentStep(x)}if(a.type==="assistant_message_complete"&&a.data)return u?.onComplete?.(a.data),!0}catch{}return!1}const Ht={class:"relative flex h-screen flex-col overflow-hidden"},jt={key:0,class:"flex items-center gap-2"},Qt={key:0},Wt={class:"mx-auto max-w-3xl space-y-6"},Gt={class:"space-y-3"},Kt={class:"flex items-center gap-2"},Jt={class:"text-muted-foreground text-xs break-all"},Xt=["title"],Yt={class:"bg-background/95 pointer-events-none absolute right-0 bottom-0 left-0 z-50 border-t border-transparent backdrop-blur-sm"},Zt={class:"pointer-events-auto p-4 md:p-5"},es={class:"mx-auto max-w-3xl"},ts={key:0,class:"mb-3 rounded-xl border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 shadow-sm dark:border-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"},ss={class:"flex items-center gap-2"},sa=st({__name:"[id]",setup(M){const l=at().params.id,h=nt(),a=ot(),x=_t(),P=Ot(),X=async()=>{if(!n.value||!h.user)return;const t=n.value.is_pinned;try{t?(await K(`/v1/assistants/${n.value.id}/pin`,{method:"DELETE"}),n.value.is_pinned=!1,re(o("assistants.unpinned"))):(await K(`/v1/assistants/${n.value.id}/pin`,{method:"POST"}),n.value.is_pinned=!0,re(o("assistants.pinned")))}catch{T(o("common.error"))}},d=v([]),b=v(""),Y=v(),N=v(!1),z=v(!1),k=v(),m=v(l),y=v(null),$=v(null),w=v(!1),n=v(null),W=v(!1),ue=V(()=>a.config.ui_show_pin_button!==!1),Z=V(()=>a.config.ui_show_share_button!==!1),ne=V(()=>a.config.ui_show_message_share_button!==!1),_e=V(()=>a.config.ui_show_create_button!==!1),oe=v(!1),q=v(""),ee=v(!1),he=v("CONVERSATION"),de=it("(min-width: 768px)"),fe=t=>{t.extra_data||(t.extra_data={});const s=t.extra_data;return Array.isArray(s.agent_execution)||(s.agent_execution=[]),s.agent_execution},E=v(!0),G=v(),te=v(),ge=v(!1);let B=null,se=null;const ae=()=>{E.value&&(se&&clearTimeout(se),se=setTimeout(()=>{le()},50))},Re=()=>{if(!G.value)return;const{scrollTop:t,scrollHeight:s,clientHeight:r}=G.value,_=s-t-r<30;E.value=_,ge.value=s>r+50},De=()=>{Re()},ye=()=>{typeof window>"u"||typeof ResizeObserver>"u"||(B||(B=new ResizeObserver(()=>{E.value&&ae()})),te.value&&B.observe(te.value))},we=(t="smooth")=>{E.value=!0,R(()=>{le(t)})},Se=()=>{E.value=!1},xe=async()=>{if(typeof window>"u")return;await R();const t=te.value;if(!t)return;const s=Array.from(t.querySelectorAll("img"));s.length&&await Promise.all(s.map(r=>r.complete?Promise.resolve(!0):new Promise(p=>{const _=()=>p(!0);r.addEventListener("load",_,{once:!0}),r.addEventListener("error",_,{once:!0})}))),typeof requestAnimationFrame<"u"&&await new Promise(r=>requestAnimationFrame(()=>requestAnimationFrame(r)))},ie=()=>{if(y.value)return y.value;const t={id:`assistant-temp-${Date.now()}`,content:"",message_type:"ASSISTANT",created_at:new Date().toISOString(),status:"STREAMING",extra_data:{media:[]}};return d.value.push(t),y.value=t,t},Ne=t=>{if(!y.value){d.value.push(t);return}Object.assign(y.value,t,{status:"FINAL"}),y.value=null},be=()=>{const t=y.value;if(!t)return;const s=d.value.indexOf(t);s!==-1&&d.value.splice(s,1),y.value=null},Oe=async t=>{try{n.value=await K(`/v1/assistants/${t}`)}catch{return null}},Ue=async()=>{const t=x.state.conversations[l];t?.assistant&&(n.value=t.assistant)},{sendStreamingMessage:Ve}=qt(),{showError:T,showSuccess:re}=Ut(),{$api:K}=Ie(),{t:o}=$e(),me=V(()=>n.value?.status==="ACTIVE"),Le=V(()=>n.value?n.value.status!=="ACTIVE":!1),Pe=V(()=>n.value?.model?.capabilities?n.value.model.capabilities.includes("vision"):!1),ke=V(()=>n.value?n.value.status==="INACTIVE"?o("chat.assistantInactive"):n.value.status==="DRAFT"?o("chat.assistantDraft"):"":"");V(()=>y.value?.content??"");const H=v(!1),ze=async()=>{try{const t=await K(`/v1/conversations/${l}`);return $.value=t,Oe($.value.assistant_id),t}catch{return T(o("chat.fetchConversationFailed")),null}},Be=async()=>{w.value=!0;try{const s=(await K(`/v1/conversations/${l}/messages`)).items||[];return d.value=s,await xe(),we("auto"),s}catch{return T(o("chat.fetchHistoryFailed")),[]}finally{w.value=!1}},Fe=t=>typeof window>"u"?`/share/${t}`:`${window.location.origin}/share/${t}`,Te=async(t,s)=>{ee.value=!0;try{const r=await K("/v1/share-links",{method:"POST",body:t}),p=Fe(r.id);if(q.value=p,he.value=s,oe.value=!0,typeof navigator<"u"&&navigator.clipboard)try{await navigator.clipboard.writeText(p),re(o("chat.share.linkCopiedClipboard"))}catch{}}catch{T(o("chat.share.createFailed"))}finally{ee.value=!1}},qe=async()=>{if(!ee.value){if(!m.value){T(o("chat.share.conversationNotReady"));return}await Te({conversation_id:m.value,scope:"CONVERSATION"},"CONVERSATION")}},He=async t=>{if(ee.value)return;if(!m.value){T(o("chat.share.conversationNotReady"));return}if(t.message_type!=="ASSISTANT"){T(o("chat.share.selectAssistantReply"));return}const s=d.value.findIndex(p=>p.id===t.id);if(s<=0){T(o("chat.share.userQuestionMissing"));return}let r=null;for(let p=s-1;p>=0;p-=1){const _=d.value[p];if(_&&_.message_type==="USER"){r=_;break}}if(!r){T(o("chat.share.matchingUserQuestionMissing"));return}await Te({conversation_id:m.value,scope:"MESSAGE",start_message_id:r.id,end_message_id:t.id},"MESSAGE")},je=async()=>{if(q.value){if(typeof navigator>"u"||!navigator.clipboard){T(o("chat.share.copyNotSupported"));return}try{await navigator.clipboard.writeText(q.value),re(o("chat.share.linkCopied"))}catch{T(o("chat.share.copyFailed"))}}};rt(async()=>{const t=x.state.conversations[l];if(Ue(),ye(),t?.userMessage&&t.isTransitioning){W.value=!0;const s={...t.userMessage,message_type:t.userMessage.message_type==="USER"?"USER":"ASSISTANT"};d.value.push(s);const r=s.extra_data?.images;We(t.userMessage.content,r),x.completeTransition(l),x.clearConversationData(l)}else{W.value=!1;const[s]=await Promise.all([ze(),Be()])}$.value&&lt({title:$.value.title}),R(()=>{Y.value?.focus()})}),ct(te,(t,s)=>{B&&s&&B.unobserve(s),t&&ye()});const Ae=async t=>{if(!b.value.trim()||N.value||!n.value)return;if(!me.value){T(ke.value);return}const s=b.value.trim();b.value="",N.value=!0,z.value=!0;const r={id:Date.now().toString(),content:s,message_type:"USER",created_at:new Date().toISOString(),extra_data:t&&t.length>0?{images:t}:void 0};d.value.push(r),R(()=>{le("smooth"),setTimeout(()=>{Se()},300)}),await pe(s,r,t)},Qe=async t=>{const s=(t||"").trim();s&&(b.value=s,await R(),await Ae())},We=async(t,s)=>{if(!n.value)return;N.value=!0,z.value=!0,R(()=>{le("smooth"),setTimeout(()=>{Se()},300)});const r=d.value[d.value.length-1];if(r&&r.message_type==="USER"){const p=s??r.extra_data?.images;await pe(t,r,p)}else{const p={id:Date.now().toString(),content:t,message_type:"USER",created_at:new Date().toISOString(),extra_data:s&&s.length>0?{images:s}:void 0};await pe(t,p,s)}},pe=async(t,s,r)=>{try{H.value=!0;const p=ie();fe(p).length=0;let _="";await Ve(t,m.value||void 0,f=>{const A=ie(),S=f?.content??"";if(S&&(A.content+=S,H.value=!1),f?.media?.length){const g=A.extra_data?.media??[];A.extra_data={...A.extra_data||{},media:[...g,...f.media]},H.value=!1}E.value&&ae()},async f=>{if(H.value=!1,z.value=!1,f.user_message_id&&s.id!==f.user_message_id){const S=d.value.findIndex(g=>g.id===s.id);if(S!==-1){const g=d.value[S];if(g){const O={...g,id:f.user_message_id};d.value[S]=O,s.id=f.user_message_id}}}Ne(f);const A=xe();if(W.value&&m.value&&d.value.filter(g=>g.message_type==="ASSISTANT").length===1)try{await P.generateTitle(m.value),W.value=!1}catch{}N.value=!1,await A,R(()=>{E.value&&ae()})},f=>{H.value=!1;const A=d.value.findIndex(g=>g.id===s.id);A!==-1&&d.value.splice(A,1),be(),z.value=!1,N.value=!1;const S=f.includes("Insufficient balance")||f.includes("balance")||f.toLowerCase().includes("insufficient");T(S?f:`${o("chat.sendFailed")}: ${f}`)},f=>{const A=ie();fe(A).push(f),E.value&&R(()=>{ae()})},f=>{const A=ie(),S=fe(A);if(f.content){_+=f.content;const g=S.findIndex(j=>j.type==="agent_thought"&&j.description==="Model reasoning process"),O={type:"agent_thought",thought:_,description:"Model reasoning process",timestamp:Date.now()};g>=0?S[g]=O:S.push(O)}if(f.is_final&&_){const g=_.trim(),O=S.findIndex(j=>j.type==="agent_thought"&&j.description==="Model reasoning process");O>=0&&(S[O]={type:"agent_thought",thought:g,description:"Model reasoning process",timestamp:Date.now()}),_=""}E.value&&R(()=>{ae()})},r)}catch(p){H.value=!1;const _=d.value.findIndex(f=>f.id===s.id);_!==-1&&d.value.splice(_,1),be(),z.value=!1,N.value=!1,T(`${o("chat.sendFailed")}: ${p instanceof Error?p.message:o("chat.unknownError")}`)}},le=(t="smooth")=>{if(G.value){G.value.scrollTo({top:G.value.scrollHeight,behavior:t});return}k.value&&k.value.scrollIntoView({behavior:t})};return ut(()=>{x.clearConversationData(l),se&&clearTimeout(se),B&&(B.disconnect(),B=null)}),(t,s)=>{const r=Ke,p=Je,_=Ye,f=et,A=vt,S=ht,g=gt,O=wt,j=yt;return I(),J("div",Ht,[i(A,null,{right:c(()=>[e(n)?(I(),J("div",jt,[e(h).user&&e(ue)?(I(),F(e(ce),{key:0,variant:"outline",size:"icon",title:e(n).is_pinned?e(o)("assistants.unpin"):e(o)("assistants.pin"),onClick:X},{default:c(()=>[e(n).is_pinned?(I(),F(e(Vt),{key:0,class:"text-primary fill-primary h-4 w-4"})):(I(),F(e(Lt),{key:1,class:"h-4 w-4"}))]),_:1},8,["title"])):L("",!0),e(Z)?(I(),F(e(Dt),{key:1},{default:c(()=>[i(e(Et),null,{default:c(()=>[i(e(Rt),{"as-child":""},{default:c(()=>[i(e(ce),{variant:"outline",size:e(de)?"sm":"icon",class:"border-amber-200 text-amber-600 transition-colors hover:bg-amber-50 dark:border-amber-800 dark:text-amber-400 dark:hover:bg-amber-950",disabled:e(ee)||!e(m),onClick:qe},{default:c(()=>[i(e(zt),{class:dt(["h-4 w-4",{"mr-2":e(de)}])},null,8,["class"]),e(de)?(I(),J("span",Qt,D(e(o)("chat.share.button")),1)):L("",!0)]),_:1},8,["size","disabled"])]),_:1})]),_:1})]),_:1})):L("",!0),e(_e)?(I(),F(e(Xe),{key:2},{default:c(()=>[i(_,{"as-child":""},{default:c(()=>[i(e(ce),{variant:"outline",size:"icon",title:e(o)("chat.newConversation")},{default:c(()=>[i(e(Pt))]),_:1},8,["title"])]),_:1}),i(e(Ze),null,{default:c(()=>[i(f,{"as-child":""},{default:c(()=>[i(r,{to:`/chatwith/${e(n).id}`},{default:c(()=>[Q(D(e(o)("chat.actions.withCurrentAssistant")),1)]),_:1},8,["to"])]),_:1}),i(f,null,{default:c(()=>[i(r,{to:"/assistants"},{default:c(()=>[Q(D(e(o)("chat.actions.chooseAnotherAssistant")),1)]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0)])):L("",!0)]),default:c(()=>[i(e(St),null,{default:c(()=>[i(e(xt),null,{default:c(()=>[i(e(Ce),{class:"hidden md:block"},{default:c(()=>[i(e(Tt),{"as-child":""},{default:c(()=>[i(r,{to:"/assistants"},{default:c(()=>[Q(D(e(o)("chat.breadcrumbAssistants")),1)]),_:1})]),_:1})]),_:1}),i(e(bt),{class:"hidden md:block"}),i(e(Ce),null,{default:c(()=>[i(e(kt),{class:"flex items-center"},{default:c(()=>[i(p,{assistant:e(n),class:"mr-1 inline-block size-4 align-middle"},null,8,["assistant"]),Q(" "+D(e(n)?.name||e(o)("common.loading")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),C("div",{ref_key:"scrollContainer",ref:G,class:"min-h-0 flex-1 overflow-y-auto scroll-smooth pb-[200px]",onScroll:De},[C("div",{ref_key:"scrollContent",ref:te,class:"p-4 md:p-6"},[C("div",Wt,[i(S,{assistant:e(n),"show-welcome":e(d).length===0&&!e(w)},null,8,["assistant","show-welcome"]),e(w)?(I(),F(g,{key:0,assistant:e(n),message:e(o)("chat.loadingHistory")},null,8,["assistant","message"])):L("",!0),(I(!0),J(ft,null,mt(e(d),U=>(I(),F(O,{key:U.id,message:U,assistant:e(n),"enable-share":e(ne),"enable-followups":!0,onShare:He,onQuote:s[0]||(s[0]=Ge=>{b.value=`> ${Ge}

${e(b)}`,("nextTick"in t?t.nextTick:e(R))(()=>e(Y).value?.focus())}),onFollowup:Qe},null,8,["message","assistant","enable-share"]))),128)),e(H)?(I(),F(g,{key:1,assistant:e(n),"is-streaming":e(z)},null,8,["assistant","is-streaming"])):L("",!0),C("div",{ref_key:"messagesEnd",ref:k},null,512)])],512)],544),i(e($t),{open:e(oe),"onUpdate:open":s[2]||(s[2]=U=>ve(oe)?oe.value=U:null)},{default:c(()=>[i(e(At),{class:"sm:max-w-[480px]"},{default:c(()=>[i(e(Ct),null,{default:c(()=>[i(e(Mt),null,{default:c(()=>[Q(D(e(o)(e(he)==="CONVERSATION"?"chat.share.titleConversation":"chat.share.titleMessage")),1)]),_:1}),i(e(It),null,{default:c(()=>[Q(D(e(o)("chat.share.description")),1)]),_:1})]),_:1}),C("div",Gt,[C("div",Kt,[i(e(Nt),{modelValue:e(q),"onUpdate:modelValue":s[1]||(s[1]=U=>ve(q)?q.value=U:null),readonly:"",class:"flex-1"},null,8,["modelValue"]),i(e(ce),{variant:"secondary",onClick:je},{default:c(()=>[Q(D(e(o)("chat.share.copy")),1)]),_:1})]),C("p",Jt,D(e(q)),1)])]),_:1})]),_:1},8,["open"]),i(pt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-4 scale-95"},{default:c(()=>[!e(E)&&e(ge)&&e(d).length>0?(I(),J("button",{key:0,class:"bg-foreground/90 text-background hover:bg-foreground border-border/20 absolute bottom-28 left-1/2 z-40 flex h-8 w-8 -translate-x-1/2 items-center justify-center rounded-full border shadow-lg backdrop-blur-sm transition-all duration-200",title:e(o)("chat.scrollToBottom"),onClick:s[3]||(s[3]=U=>we("smooth"))},[...s[5]||(s[5]=[C("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],8,Xt)):L("",!0)]),_:1}),C("div",Yt,[C("div",Zt,[C("div",es,[e(Le)?(I(),J("div",ts,[C("div",ss,[s[6]||(s[6]=C("span",{class:"text-lg"},"⚠️",-1)),C("span",null,D(e(ke)),1)])])):L("",!0),i(j,{ref_key:"chatInputRef",ref:Y,modelValue:e(b),"onUpdate:modelValue":s[4]||(s[4]=U=>ve(b)?b.value=U:null),disabled:!e(me),"send-disabled":e(N)||!e(b).trim()||!e(me),"supports-vision":e(Pe),onSend:Ae},null,8,["modelValue","disabled","send-disabled","supports-vision"])])])])])}}});export{sa as default};
