import{_ as f}from"./Di_95mgX.js";import{_ as y}from"./C-jt9Ih2.js";import{R as P,h as b,e as h,D as _,k as n,E as x,i as l,Q as s,v as A,o as I}from"./BzhixHsn.js";import{u as w}from"./G5O1m7ek.js";import{C}from"./EdM3CJ8e.js";import{S as N}from"./BdE42Imj.js";import"./4isL45Eu.js";import"./C9XbPd6k.js";import"./BTANIQ8V.js";import"./Di109XjC.js";import"./CRjpF7qy.js";import"./IgXGHcdR.js";import"./COjiOs1v.js";import"./Bp3-KBkO.js";import"./DKMWZZOl.js";import"./XCOtPLqC.js";import"./Bi0Cqvs9.js";import"./C56gk0qC.js";import"./BmCC6msl.js";import"./vJ3Jskde.js";import"./BYr6U6oc.js";import"./C-zlyDS5.js";import"./KyMCIHQI.js";import"./C8B8ONuC.js";import"./CW7RC7pq.js";import"./DhvzP0AS.js";import"./DzpHhHXI.js";import"./2RVX2kid.js";import"./C-9Ampo3.js";import"./C-xhCs27.js";import"./Le8goM6p.js";import"./_XME2JEy.js";import"./BkS3akZz.js";import"./BLw_G03o.js";import"./B9I6JWJy.js";import"./CHh9YBUH.js";import"./zIw-xwcH.js";import"./BVAf69h5.js";import"./BmLyE0U0.js";import"./CMS48I6h.js";const T=P("plug-zap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]),fe=b({__name:"model-providers",setup(E){const{t:e}=h(),{$api:m}=_(),{data:p}=w("/v1/admin/provider-templates",{server:!1}),c=n(()=>{const i={};return(p.value??[]).forEach(a=>{i[a.id]=a}),i}),u=n(()=>(p.value??[]).map(i=>({label:i.display_name,value:i.id}))),d=x(null),v=async(i,a)=>{try{if(i.key==="test-connection"){const r=await m(`/v1/admin/providers/${a.id}/test-connection`,{method:"POST"});if(r?.ok)s.success(e("admin.pages.modelProviders.actions.testConnectionSuccess"));else{const t=r?.message||r?.detail||e("admin.pages.modelProviders.actions.testConnectionFailed");s.error(t)}return}if(i.key==="discover-models"){const r=await m(`/v1/admin/providers/${a.id}/discover-models`,{method:"GET"});s.success(e("admin.pages.modelProviders.actions.discoverModelsSuccess",{count:(r??[]).length}));return}}catch(r){s.error(r?.data?.detail||r?.message||e("common.error"))}},g=n(()=>({title:e("admin.pages.modelProviders.title"),description:e("admin.pages.modelProviders.description"),apiEndpoint:"/v1/admin/providers",onFormChange:({formData:i,mode:a,setValues:r})=>{if(a!=="create")return;const t=i?.template_id||"";if(!t){d.value=null;return}if(t===d.value)return;const o=c.value[t];!o||!r||(r({template_id:o.id,name:o.id,display_name:o.display_name,description:o.description??"",website:o.website??"",api_base_url:o.api_base_url,interface_type:o.interface_type,litellm_provider:o.litellm_provider??""}),d.value=t)},customActions:[{key:"test-connection",label:e("admin.pages.modelProviders.actions.testConnection"),icon:l(T,{class:"h-4 w-4"}),variant:"default"},{key:"discover-models",label:e("admin.pages.modelProviders.actions.discoverModels"),icon:l(N,{class:"h-4 w-4"}),variant:"secondary"}],columns:[{accessorKey:"display_name",header:e("admin.pages.modelProviders.columns.displayName"),cell:i=>{const a=i.getValue();return a?l("button",{class:"text-primary font-medium cursor-pointer text-left focus:outline-none focus:ring-2 focus:ring-primary/40 rounded-full bg-muted/30 hover:bg-muted/60 hover:underline px-2 py-0.5 transition-colors",onClick:()=>i.table.options.meta?.triggerRowAction?.({key:"view",label:"view"},i.row.original)},a):"-"}},{accessorKey:"api_base_url",header:e("admin.pages.modelProviders.fields.apiBaseUrl"),cell:i=>{const a=i.getValue();return a?l("div",{class:"flex items-center gap-2"},[l("span",{class:"truncate max-w-[200px]",title:a},a.length>30?a.substring(0,30)+"...":a),l("button",{class:"text-muted-foreground hover:text-foreground p-1 rounded hover:bg-muted transition-colors",title:e("common.copy"),onClick:r=>{r.stopPropagation(),navigator.clipboard.writeText(a),s.success(e("common.copied"))}},l(C,{class:"h-3 w-3"}))]):"-"}},{accessorKey:"status",header:e("admin.pages.modelProviders.columns.status"),cell:i=>{const a=i.getValue(),r=a==="ACTIVE"?"default":a==="MAINTENANCE"?"outline":"secondary",t=a==="ACTIVE"?"active":a==="MAINTENANCE"?"maintenance":"inactive";return l(f,{variant:r},()=>e(`admin.pages.modelProviders.status.${t}`))}},{accessorKey:"created_at",header:e("admin.pages.modelProviders.columns.createdAt"),cell:i=>{const a=i.getValue();return new Date(a).toLocaleDateString()}}],detailFields:[{name:"name",label:e("admin.pages.modelProviders.fields.providerId"),type:"text"},{name:"display_name",label:e("admin.pages.modelProviders.fields.displayName"),type:"text"},{name:"description",label:e("admin.pages.modelProviders.fields.description"),type:"textarea"},{name:"website",label:e("admin.pages.modelProviders.fields.website"),type:"text"},{name:"api_base_url",label:e("admin.pages.modelProviders.fields.apiBaseUrl"),type:"text"},{name:"interface_type",label:e("admin.pages.modelProviders.fields.interfaceType"),type:"text"},{name:"litellm_provider",label:e("admin.pages.modelProviders.fields.litellmProvider"),type:"text"},{name:"status",label:e("admin.pages.modelProviders.fields.statusLabel"),type:"text"},{name:"created_at",label:e("admin.pages.modelProviders.columns.createdAt"),type:"datetime"}],formFields:[{name:"template_id",label:e("admin.pages.modelProviders.fields.providerTemplate"),type:"select",required:!1,options:u.value,placeholder:e("admin.pages.modelProviders.fields.providerTemplatePlaceholder"),help:e("admin.pages.modelProviders.fields.providerTemplateHelp")},{name:"name",label:e("admin.pages.modelProviders.fields.providerId"),type:"text",required:!0,placeholder:e("admin.pages.modelProviders.fields.providerIdPlaceholder"),htmlName:"provider_id",autocomplete:"off"},{name:"display_name",label:e("admin.pages.modelProviders.fields.displayName"),type:"text",required:!0,placeholder:e("admin.pages.modelProviders.fields.displayNamePlaceholder")},{name:"description",label:e("admin.pages.modelProviders.fields.description"),type:"textarea",placeholder:e("admin.pages.modelProviders.fields.descriptionPlaceholder")},{name:"website",label:e("admin.pages.modelProviders.fields.website"),type:"text",placeholder:"https://example.com"},{name:"api_base_url",label:e("admin.pages.modelProviders.fields.apiBaseUrl"),type:"text",placeholder:"https://api.example.com/v1"},{name:"api_key",label:e("admin.pages.modelProviders.fields.apiKey"),type:"password",required:!1,placeholder:e("admin.pages.modelProviders.fields.apiKeyPlaceholder"),help:e("admin.pages.modelProviders.fields.apiKeyPlaceholder")+" (not required for local HuggingFace embeddings)",htmlName:"provider_api_key",autocomplete:"new-password"},{name:"interface_type",label:e("admin.pages.modelProviders.fields.interfaceType"),type:"select",required:!0,options:[{label:"Anthropic",value:"ANTHROPIC"},{label:"DashScope",value:"DASHSCOPE"},{label:"Google",value:"GOOGLE"},{label:"OpenAI",value:"OPENAI"},{label:"xAI",value:"XAI"},{label:"HuggingFace (local embeddings)",value:"HUGGINGFACE"}],defaultValue:"OPENAI"},{name:"litellm_provider",label:e("admin.pages.modelProviders.fields.litellmProvider"),type:"text",required:!1,placeholder:e("admin.pages.modelProviders.fields.litellmProviderPlaceholder"),help:e("admin.pages.modelProviders.fields.litellmProviderHelp")},{name:"status",label:e("admin.pages.modelProviders.fields.statusLabel"),type:"select",required:!0,options:[{label:e("admin.pages.modelProviders.status.active"),value:"ACTIVE"},{label:e("admin.pages.modelProviders.status.inactive"),value:"INACTIVE"},{label:e("admin.pages.modelProviders.status.maintenance"),value:"MAINTENANCE"}],defaultValue:"ACTIVE"}]}));return(i,a)=>{const r=y;return I(),A(r,{config:g.value,onRowAction:v},null,8,["config"])}}});export{fe as default};
