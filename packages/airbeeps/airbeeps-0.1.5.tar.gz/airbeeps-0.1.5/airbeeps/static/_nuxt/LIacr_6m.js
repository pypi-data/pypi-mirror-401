import{_ as m,a as _}from"./CRjpF7qy.js";import{_ as w}from"./Co_Pqrtl.js";import{_ as p,a as c}from"./DfqdNhl2.js";import{R as D,h as O,e as R,f as $,k as T,c as r,o as f,I as z,g as t,t as n,a as o,b as e,w as s,d,J as I,K as q,a1 as h}from"./BzhixHsn.js";import{u as B}from"./G5O1m7ek.js";import{Z as L}from"./D0pu0OPX.js";import{C as N}from"./BoBF9D-p.js";import"./BmLyE0U0.js";import"./CMS48I6h.js";const M=D("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),V={class:"flex flex-1 flex-col gap-4 p-4"},F={key:0,class:"flex h-96 items-center justify-center"},S={key:1,class:"space-y-6"},H={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},U={class:"text-2xl font-bold"},Z={class:"text-muted-foreground text-xs"},E={class:"text-2xl font-bold"},J={class:"text-2xl font-bold"},K={class:"text-2xl font-bold"},P={class:"grid gap-4 md:grid-cols-2"},G={class:"flex h-[200px] items-end gap-1 pt-4"},Q={class:"bg-popover text-popover-foreground absolute bottom-full left-1/2 z-10 mb-2 hidden -translate-x-1/2 rounded border p-2 text-xs whitespace-nowrap shadow-md group-hover:block"},W={class:"font-bold"},X={class:"flex h-[200px] items-end gap-1 pt-4"},Y={class:"bg-popover text-popover-foreground absolute bottom-full left-1/2 z-10 mb-2 hidden -translate-x-1/2 rounded border p-2 text-xs whitespace-nowrap shadow-md group-hover:block"},tt={class:"font-bold"},ft=O({__name:"analytics",async setup(et){let x,y;const{t:j}=R(),{data:a,status:C}=([x,y]=$(()=>B("/api/v1/admin/analytics/stats")),x=await x,y(),x),v=u=>new Intl.NumberFormat("en-US").format(u),b=(u,l)=>l===0?0:Math.max(4,u/l*100),k=T(()=>a.value?.daily_tokens?Math.max(...a.value.daily_tokens.map(u=>u["Input Tokens"]+u["Output Tokens"])):0),A=T(()=>a.value?.daily_requests?Math.max(...a.value.daily_requests.map(u=>u.value)):0);return(u,l)=>(f(),r("div",V,[t(C)==="pending"?(f(),r("div",F,n(t(j)("common.loading")),1)):t(a)?(f(),r("div",S,[o("div",H,[e(t(_),null,{default:s(()=>[e(t(p),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(c),{class:"text-sm font-medium"},{default:s(()=>[...l[0]||(l[0]=[d("Total Tokens",-1)])]),_:1}),e(t(L),{class:"h-4 w-4 text-amber-500"})]),_:1}),e(t(m),null,{default:s(()=>[o("div",U,n(v(t(a).total_input_tokens+t(a).total_output_tokens)),1),o("p",Z,n(v(t(a).total_input_tokens))+" in / "+n(v(t(a).total_output_tokens))+" out ",1)]),_:1})]),_:1}),e(t(_),null,{default:s(()=>[e(t(p),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(c),{class:"text-sm font-medium"},{default:s(()=>[...l[1]||(l[1]=[d("Total Requests",-1)])]),_:1}),e(t(M),{class:"h-4 w-4 text-blue-500"})]),_:1}),e(t(m),null,{default:s(()=>[o("div",E,n(v(t(a).total_requests)),1)]),_:1})]),_:1}),e(t(_),null,{default:s(()=>[e(t(p),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(c),{class:"text-sm font-medium"},{default:s(()=>[...l[2]||(l[2]=[d("Avg Latency",-1)])]),_:1}),e(t(N),{class:"h-4 w-4 text-green-500"})]),_:1}),e(t(m),null,{default:s(()=>[o("div",J,n(t(a).avg_execution_time_ms)+" ms",1)]),_:1})]),_:1}),e(t(_),null,{default:s(()=>[e(t(p),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(c),{class:"text-sm font-medium"},{default:s(()=>[...l[3]||(l[3]=[d("Total Time",-1)])]),_:1}),e(t(N),{class:"h-4 w-4 text-purple-500"})]),_:1}),e(t(m),null,{default:s(()=>[o("div",K,n((t(a).total_execution_time_ms/1e3/60).toFixed(1))+" min ",1)]),_:1})]),_:1})]),o("div",P,[e(t(_),{class:"col-span-1"},{default:s(()=>[e(t(p),null,{default:s(()=>[e(t(c),null,{default:s(()=>[...l[4]||(l[4]=[d("Daily Token Usage (30 Days)",-1)])]),_:1}),e(t(w),null,{default:s(()=>[...l[5]||(l[5]=[d("Input vs Output tokens",-1)])]),_:1})]),_:1}),e(t(m),null,{default:s(()=>[o("div",G,[(f(!0),r(I,null,q(t(a).daily_tokens,(i,g)=>(f(),r("div",{key:g,class:"group relative flex flex-1 flex-col justify-end gap-0.5"},[o("div",{class:"w-full rounded-t-sm bg-amber-500/80",style:h({height:b(i["Output Tokens"],t(k))+"%"})},null,4),o("div",{class:"w-full rounded-b-sm bg-amber-500/30",style:h({height:b(i["Input Tokens"],t(k))+"%"})},null,4),o("div",Q,[o("div",W,n(i.date),1),o("div",null,"Input: "+n(i["Input Tokens"]),1),o("div",null,"Output: "+n(i["Output Tokens"]),1)])]))),128))])]),_:1})]),_:1}),e(t(_),{class:"col-span-1"},{default:s(()=>[e(t(p),null,{default:s(()=>[e(t(c),null,{default:s(()=>[...l[6]||(l[6]=[d("Daily Requests (30 Days)",-1)])]),_:1}),e(t(w),null,{default:s(()=>[...l[7]||(l[7]=[d("Number of assistant responses",-1)])]),_:1})]),_:1}),e(t(m),null,{default:s(()=>[o("div",X,[(f(!0),r(I,null,q(t(a).daily_requests,(i,g)=>(f(),r("div",{key:g,class:"group relative flex-1 rounded-sm bg-blue-500/50 transition-colors hover:bg-blue-500/80",style:h({height:b(i.value,t(A))+"%"})},[o("div",Y,[o("div",tt,n(i.name),1),o("div",null,"Requests: "+n(i.value),1)])],4))),128))])]),_:1})]),_:1})])])):z("",!0)]))}});export{ft as default};
