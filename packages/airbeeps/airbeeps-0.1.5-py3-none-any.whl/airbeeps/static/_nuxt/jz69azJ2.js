import{_ as T,a as N}from"./BSaEE8c4.js";import{_ as A}from"./Di_95mgX.js";import{h as F,e as K,a7 as z,k as c,E as n,i as o,m as B,c as M,o as Q,a as d,b as p,t as g,g as l,w as j,d as q,L as O,Q as H}from"./BzhixHsn.js";import{u as J,D as U}from"./BTANIQ8V.js";import{u as W}from"./G5O1m7ek.js";import{E as X}from"./zIw-xwcH.js";import{S as Y}from"./BVAf69h5.js";import{L as Z}from"./CeWx-USI.js";import{P as aa}from"./C-zlyDS5.js";import"./Di109XjC.js";import"./4isL45Eu.js";import"./CRjpF7qy.js";import"./IgXGHcdR.js";import"./COjiOs1v.js";import"./Bp3-KBkO.js";import"./DKMWZZOl.js";import"./XCOtPLqC.js";import"./Bi0Cqvs9.js";import"./C56gk0qC.js";import"./BmCC6msl.js";import"./vJ3Jskde.js";import"./BYr6U6oc.js";import"./KyMCIHQI.js";import"./C8B8ONuC.js";import"./CW7RC7pq.js";import"./DhvzP0AS.js";import"./DzpHhHXI.js";import"./BmLyE0U0.js";import"./CMS48I6h.js";const ea={class:"space-y-6"},sa={class:"flex items-center justify-between"},ta={class:"text-2xl font-bold"},na={class:"text-muted-foreground"},La=F({__name:"index",setup(ia){const{t:e}=K(),t=z(),{data:k}=W("/v1/admin/all-models?capabilities=chat",{server:!1}),x=c(()=>(k.value??[]).map(a=>({label:a.display_name,value:a.id}))),R=J("/v1/admin/assistants"),v=n([]),f=n(0),u=n(!1),h=n(""),y=n({}),_=[{id:"updated_at",desc:!0}],m=n([..._]),r=n({pageIndex:0,pageSize:10}),C=c(()=>[{accessorKey:"name",header:e("admin.pages.assistants.columns.name"),cell:a=>{const s=a.row.original;return o("div",{class:"flex items-center gap-2"},[o(T,{class:"w-8 h-8"},()=>[o(N,{src:s.avatar_url||""})]),o("button",{class:"text-primary font-medium cursor-pointer text-left focus:outline-none focus:ring-2 focus:ring-primary/40 rounded-full bg-muted/30 hover:bg-muted/60 hover:underline px-2 py-0.5 transition-colors",onClick:()=>t.push(`/admin/assistants/${s.id}`)},s.name)])}},{accessorKey:"model.display_name",header:e("admin.pages.assistants.columns.model")},{accessorKey:"mode",header:"Mode",cell:a=>{const s=a.getValue()||"GENERAL",b=s==="RAG"?"RAG":"General";return o(A,{variant:s==="RAG"?"default":"secondary"},()=>b)}},{accessorKey:"status",header:e("admin.pages.assistants.columns.status"),cell:a=>{const s=a.getValue(),w={ACTIVE:{key:"active",variant:"default"},INACTIVE:{key:"inactive",variant:"secondary"},DRAFT:{key:"draft",variant:"outline"}}[s]||{key:s.toLowerCase(),variant:"secondary"};return o(A,{variant:w.variant},()=>e(`admin.pages.assistants.status.${w.key}`))}},{accessorKey:"created_at",header:e("admin.pages.assistants.columns.createdAt"),cell:a=>{const s=a.getValue();return new Date(s).toLocaleDateString()}}]),I=c(()=>[{key:"view",label:e("admin.pages.assistants.actions.view"),icon:X},{key:"edit",label:e("admin.pages.assistants.actions.edit"),icon:Y},{key:"translations",label:e("admin.pages.assistants.actions.translations"),icon:Z}]),E=c(()=>({model:{type:"select",label:e("admin.pages.assistants.filters.model"),placeholder:e("admin.pages.assistants.filters.modelPlaceholder"),options:x.value},mode:{type:"select",label:"Mode",placeholder:"Select mode",options:[{label:"General",value:"GENERAL"},{label:"RAG",value:"RAG"}]},status:{type:"select",label:e("admin.pages.assistants.filters.status"),placeholder:e("admin.pages.assistants.filters.statusPlaceholder"),options:[{label:e("admin.pages.assistants.status.active"),value:"ACTIVE"},{label:e("admin.pages.assistants.status.inactive"),value:"INACTIVE"},{label:e("admin.pages.assistants.status.draft"),value:"DRAFT"}]},created_at:{type:"daterange",label:e("admin.pages.assistants.filters.createdAt")}})),i=async()=>{u.value=!0;try{const a={page:r.value.pageIndex+1,size:r.value.pageSize,search:h.value||void 0,sort_by:m.value[0]?.id,sort_desc:m.value[0]?.desc,...y.value},s=await R.getList(a);v.value=s.items,f.value=s.total}catch{H.error(e("admin.pages.assistants.loadDataFailed"))}finally{u.value=!1}},S=a=>{h.value=a,r.value.pageIndex=0,i()},V=a=>{y.value={...a},r.value.pageIndex=0,i()},D=a=>{m.value=a,i()},G=a=>{r.value=a,i()},P=(a,s)=>{switch(a.key){case"view":t.push(`/admin/assistants/${s.id}`);break;case"edit":t.push(`/admin/assistants/${s.id}/edit`);break;case"translations":t.push(`/admin/assistants/${s.id}/translations`);break}},$=()=>{t.push("/admin/assistants/create")},L=()=>{i()};return B(()=>t.currentRoute.value.path,()=>{t.currentRoute.value.path==="/admin/assistants"&&i()}),(a,s)=>(Q(),M("div",ea,[d("div",sa,[d("div",null,[d("h1",ta,g(l(e)("admin.pages.assistants.title")),1),d("p",na,g(l(e)("admin.pages.assistants.description")),1)]),p(l(O),{onClick:$,"data-testid":"create-assistant-btn"},{default:j(()=>[p(l(aa),{class:"mr-2 h-4 w-4"}),q(" "+g(l(e)("admin.pages.assistants.createButton")),1)]),_:1})]),p(U,{data:v.value,columns:C.value,"total-count":f.value,loading:u.value,selectable:!1,"can-create":!1,"show-filters":!0,filters:E.value,"row-actions":I.value,"bulk-actions":[],"initial-page-size":10,"initial-sorting":_,"empty-message":l(e)("admin.pages.assistants.emptyMessage"),onRefresh:L,onSearch:S,onFilter:V,onSort:D,onPaginate:G,onRowAction:P},null,8,["data","columns","total-count","loading","filters","row-actions","empty-message"])]))}});export{La as default};
