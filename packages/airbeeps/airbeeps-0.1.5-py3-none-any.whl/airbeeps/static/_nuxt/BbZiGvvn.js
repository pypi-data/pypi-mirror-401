import{h as z,ab as fs,ac as _s,v as L,o as C,w as o,x as Ve,ad as Fe,g as e,ae as gs,e as hs,D as ps,G as vs,f as ws,k as m,E as _,m as ys,c as N,I as we,b as a,d,t as u,a as r,M as Ss,X as ye,J as Se,K as Ce,L as Cs}from"./BzhixHsn.js";import{_ as be,a as ke}from"./CRjpF7qy.js";import{_ as Ee}from"./Co_Pqrtl.js";import{_ as xe,a as Te}from"./DfqdNhl2.js";import{_ as g}from"./4isL45Eu.js";import{_ as p}from"./_XME2JEy.js";import{_ as bs,a as ks,b as Es}from"./4TAfYWvs.js";import{_ as Le,a as Ue,d as Me,b as Ae,c as Oe}from"./Bi0Cqvs9.js";import{u as xs}from"./D01W4VS-.js";import{u as Ie}from"./G5O1m7ek.js";import{L as Ts}from"./B9I6JWJy.js";import"./vJ3Jskde.js";import"./BkS3akZz.js";import"./DKMWZZOl.js";import"./C56gk0qC.js";import"./Bp3-KBkO.js";import"./BmCC6msl.js";import"./BmLyE0U0.js";import"./CMS48I6h.js";const[_a,Ls]=_s("SelectGroup");var Us=z({__name:"SelectGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(U){const y=U,b=fs(void 0,"reka-select-group");return Ls({id:b}),(t,M)=>(C(),L(e(gs),Fe({role:"group"},y,{"aria-labelledby":e(b)}),{default:o(()=>[Ve(t.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Ms=Us;const De=z({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{}},setup(U){const y=U;return(b,t)=>(C(),L(e(Ms),Fe({"data-slot":"select-group"},y),{default:o(()=>[Ve(b.$slots,"default")]),_:3},16))}}),As={class:"space-y-6"},Os={class:"space-y-2"},Is={class:"text-muted-foreground text-sm"},Ds={class:"flex flex-wrap gap-2"},Vs={class:"flex items-center space-x-2"},Fs={class:"flex items-center space-x-2"},$s={class:"flex items-center space-x-2"},Bs={class:"flex items-center space-x-2"},Ns={class:"flex items-center space-x-2"},Gs={class:"flex items-center space-x-2"},Ps={class:"flex items-center space-x-2"},Ks={class:"flex items-center space-x-2"},Hs={class:"flex items-center space-x-2"},Qs={class:"flex items-center space-x-2"},Ws={class:"space-y-2"},Ys={class:"text-muted-foreground text-sm"},Rs={class:"flex items-center space-x-2"},O="conversation_title_model_id",I="__auto__",G="ui_show_share_button",P="ui_show_message_share_button",K="ui_show_message_feedback_buttons",H="ui_show_message_stats",Q="ui_show_pin_button",W="ui_show_create_button",Y="ui_show_assistant_dropdown",R="ui_show_agent_thinking",q="ui_show_chat_suggestions",j="ui_generate_followup_questions",J="ui_followup_question_count",X="ui_show_signup_terms",ga=z({__name:"system-config",async setup(U){let y,b;const{t}=hs(),{showError:M,showSuccess:D}=xs(),{$api:V}=ps(),Z=vs(),{data:$e,pending:qs,error:ee,refresh:F}=([y,b]=ws(()=>Ie("/v1/admin/config",{server:!1})),y=await y,b(),y),{data:se}=Ie("/v1/admin/all-models?capabilities=chat",{server:!1}),Be=m(()=>{const s=[{label:t("admin.systemConfig.titleModel.emptyOption"),value:I}];return se.value&&s.push(...se.value.map(n=>({label:n.display_name||n.name,value:n.id}))),s}),f=m(()=>$e.value?.configs??[]),$=m(()=>f.value.find(s=>s.key===O)),k=_(I),Ne=m(()=>f.value.find(s=>s.key===G)),Ge=m(()=>f.value.find(s=>s.key===P)),Pe=m(()=>f.value.find(s=>s.key===K)),Ke=m(()=>f.value.find(s=>s.key===H)),He=m(()=>f.value.find(s=>s.key===Q)),Qe=m(()=>f.value.find(s=>s.key===W)),We=m(()=>f.value.find(s=>s.key===Y)),Ye=m(()=>f.value.find(s=>s.key===R)),Re=m(()=>f.value.find(s=>s.key===q)),qe=m(()=>f.value.find(s=>s.key===j)),je=m(()=>f.value.find(s=>s.key===J)),Je=m(()=>f.value.find(s=>s.key===X)),ae=_(!0),te=_(!0),oe=_(!0),ne=_(!0),ie=_(!0),le=_(!0),ue=_(!0),de=_(!0),ce=_(!0),B=_(!1),T=_("3"),re=_(!1);ys(f,s=>{const i=s.find(l=>l.key===O)?.value,w=typeof i=="string"?i.trim():"";!i||!w||w.toLowerCase()==="null"?k.value=I:k.value=w;const S=s.find(l=>l.key===G);ae.value=S===void 0||String(S.value).toLowerCase()!=="false";const v=s.find(l=>l.key===P);te.value=v===void 0||String(v.value).toLowerCase()!=="false";const E=s.find(l=>l.key===K);oe.value=E===void 0||String(E.value).toLowerCase()!=="false";const x=s.find(l=>l.key===H);ne.value=x===void 0||String(x.value).toLowerCase()!=="false";const me=s.find(l=>l.key===Q);ie.value=me===void 0||String(me.value).toLowerCase()!=="false";const fe=s.find(l=>l.key===W);le.value=fe===void 0||String(fe.value).toLowerCase()!=="false";const _e=s.find(l=>l.key===Y);ue.value=_e===void 0||String(_e.value).toLowerCase()!=="false";const ge=s.find(l=>l.key===R);de.value=ge===void 0||String(ge.value).toLowerCase()!=="false";const he=s.find(l=>l.key===q);ce.value=he===void 0||String(he.value).toLowerCase()!=="false";const pe=s.find(l=>l.key===j);B.value=pe!==void 0&&String(pe.value).toLowerCase()!=="false";const rs=s.find(l=>l.key===J),A=Number(rs?.value??3),ms=Number.isFinite(A)&&A>=1&&A<=5?Math.trunc(A):3;T.value=String(ms);const ve=s.find(l=>l.key===X);re.value=ve!==void 0&&String(ve.value).toLowerCase()!=="false"},{immediate:!0});const c=_(!1),Xe=async()=>{const s=k.value===I?null:k.value.trim()||null;c.value=!0;try{const n=$.value?{value:s,is_enabled:!0}:{key:O,value:s,description:t("admin.systemConfig.titleModel.heading"),is_public:!1,is_enabled:!0},i=$.value?`/v1/admin/config/${O}`:"/v1/admin/config",w=$.value?"PUT":"POST";await V(i,{method:w,body:n}),await F(),D(t("admin.systemConfig.messages.saveSuccess"))}catch(n){console.error("Failed to save system config",n),M(t("admin.systemConfig.messages.saveFailed"))}finally{c.value=!1}},h=async(s,n,i,w,S=!0)=>{c.value=!0;try{const v=n.value?{value:i,is_enabled:!0}:{key:s,value:i,description:w,is_public:S,is_enabled:!0},E=n.value?`/v1/admin/config/${s}`:"/v1/admin/config",x=n.value?"PUT":"POST";await V(E,{method:x,body:v}),await F(),S&&await Z.loadConfig(!0),D(t("admin.systemConfig.messages.saveSuccess"))}catch(v){M(v.message||t("admin.systemConfig.messages.saveFailed"))}finally{c.value=!1}},ze=async(s,n,i,w,S=!0)=>{c.value=!0;try{const v=n.value?{value:i,is_enabled:!0}:{key:s,value:i,description:w,is_public:S,is_enabled:!0},E=n.value?`/v1/admin/config/${s}`:"/v1/admin/config",x=n.value?"PUT":"POST";await V(E,{method:x,body:v}),await F(),S&&await Z.loadConfig(!0),D(t("admin.systemConfig.messages.saveSuccess"))}catch(v){M(v.message||t("admin.systemConfig.messages.saveFailed"))}finally{c.value=!1}},Ze=async s=>h(G,Ne,s,t("admin.systemConfig.ui.showShareDescription")),es=async s=>h(P,Ge,s,t("admin.systemConfig.ui.showMessageShareDescription")),ss=async s=>h(K,Pe,s,t("admin.systemConfig.ui.showMessageFeedbackDescription")),as=async s=>h(H,Ke,s,t("admin.systemConfig.ui.showMessageStatsDescription")),ts=async s=>h(Q,He,s,t("admin.systemConfig.ui.showPinDescription")),os=async s=>h(W,Qe,s,t("admin.systemConfig.ui.showCreateDescription")),ns=async s=>h(Y,We,s,t("admin.systemConfig.ui.showAssistantDropdownDescription")),is=async s=>h(R,Ye,s,t("admin.systemConfig.ui.showAgentThinkingDescription")),ls=async s=>h(q,Re,s,t("admin.systemConfig.ui.showChatSuggestionsDescription")),us=async s=>h(j,qe,s,t("admin.systemConfig.ui.generateFollowupQuestionsDescription")),ds=async s=>{const n=Number(s),i=Number.isFinite(n)&&n>=1&&n<=5?Math.trunc(n):3;T.value=String(i),await ze(J,je,i,t("admin.systemConfig.ui.followupQuestionCountDescription"))},cs=async s=>h(X,Je,s,t("admin.systemConfig.ui.showSignupTermsDescription"));return(s,n)=>(C(),N("div",As,[e(ee)?(C(),L(e(Es),{key:0,variant:"destructive"},{default:o(()=>[a(e(bs),null,{default:o(()=>[d(u(e(t)("common.error")),1)]),_:1}),a(e(ks),null,{default:o(()=>[d(u(e(ee)?.message||e(t)("admin.systemConfig.messages.saveFailed")),1)]),_:1})]),_:1})):we("",!0),a(e(ke),null,{default:o(()=>[a(e(xe),null,{default:o(()=>[a(e(Te),null,{default:o(()=>[d(u(e(t)("admin.systemConfig.titleModel.heading")),1)]),_:1}),a(e(Ee),null,{default:o(()=>[d(u(e(t)("admin.systemConfig.titleModel.description")),1)]),_:1})]),_:1}),a(e(be),null,{default:o(()=>[r("form",{class:"space-y-4",onSubmit:Ss(Xe,["prevent"])},[r("div",Os,[a(e(g),{for:"title-model-id"},{default:o(()=>[d(u(e(t)("admin.systemConfig.titleModel.label")),1)]),_:1}),a(e(Le),{modelValue:e(k),"onUpdate:modelValue":n[0]||(n[0]=i=>ye(k)?k.value=i:null)},{default:o(()=>[a(e(Ue),{id:"title-model-id"},{default:o(()=>[a(e(Me),{placeholder:e(t)("admin.systemConfig.titleModel.placeholder")},null,8,["placeholder"])]),_:1}),a(e(Ae),null,{default:o(()=>[a(e(De),null,{default:o(()=>[(C(!0),N(Se,null,Ce(e(Be),i=>(C(),L(e(Oe),{key:i.value,value:i.value},{default:o(()=>[d(u(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("p",Is,u(e(t)("admin.systemConfig.titleModel.helper")),1)]),r("div",Ds,[a(e(Cs),{type:"submit",disabled:e(c)},{default:o(()=>[e(c)?(C(),L(e(Ts),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):we("",!0),d(" "+u(e(t)("admin.systemConfig.actions.save")),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}),a(e(ke),null,{default:o(()=>[a(e(xe),null,{default:o(()=>[a(e(Te),null,{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.title")),1)]),_:1}),a(e(Ee),null,{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.description")),1)]),_:1})]),_:1}),a(e(be),{class:"space-y-4"},{default:o(()=>[r("div",Vs,[a(e(p),{id:"ui-show-share","model-value":e(ae),"onUpdate:modelValue":Ze,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-share"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showShareLabel")),1)]),_:1})]),r("div",Fs,[a(e(p),{id:"ui-show-message-share","model-value":e(te),"onUpdate:modelValue":es,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-message-share"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showMessageShareLabel")),1)]),_:1})]),r("div",$s,[a(e(p),{id:"ui-show-message-feedback","model-value":e(oe),"onUpdate:modelValue":ss,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-message-feedback"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showMessageFeedbackLabel")),1)]),_:1})]),r("div",Bs,[a(e(p),{id:"ui-show-message-stats","model-value":e(ne),"onUpdate:modelValue":as,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-message-stats"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showMessageStatsLabel")),1)]),_:1})]),r("div",Ns,[a(e(p),{id:"ui-show-pin","model-value":e(ie),"onUpdate:modelValue":ts,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-pin"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showPinLabel")),1)]),_:1})]),r("div",Gs,[a(e(p),{id:"ui-show-create","model-value":e(le),"onUpdate:modelValue":os,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-create"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showCreateLabel")),1)]),_:1})]),r("div",Ps,[a(e(p),{id:"ui-show-assistant-dropdown","model-value":e(ue),"onUpdate:modelValue":ns,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-assistant-dropdown"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showAssistantDropdownLabel")),1)]),_:1})]),r("div",Ks,[a(e(p),{id:"ui-show-agent-thinking","model-value":e(de),"onUpdate:modelValue":is,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-agent-thinking"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showAgentThinkingLabel")),1)]),_:1})]),r("div",Hs,[a(e(p),{id:"ui-show-chat-suggestions","model-value":e(ce),"onUpdate:modelValue":ls,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-chat-suggestions"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showChatSuggestionsLabel")),1)]),_:1})]),r("div",Qs,[a(e(p),{id:"ui-generate-followups","model-value":e(B),"onUpdate:modelValue":us,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-generate-followups"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.generateFollowupQuestionsLabel")),1)]),_:1})]),r("div",Ws,[a(e(g),{for:"ui-followup-count"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.followupQuestionCountLabel")),1)]),_:1}),a(e(Le),{modelValue:e(T),"onUpdate:modelValue":[n[1]||(n[1]=i=>ye(T)?T.value=i:null),ds],disabled:e(c)||!e(B)},{default:o(()=>[a(e(Ue),{id:"ui-followup-count",class:"max-w-xs"},{default:o(()=>[a(e(Me))]),_:1}),a(e(Ae),null,{default:o(()=>[a(e(De),null,{default:o(()=>[(C(),N(Se,null,Ce([1,2,3,4,5],i=>a(e(Oe),{key:i,value:String(i)},{default:o(()=>[d(u(i),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),r("p",Ys,u(e(t)("admin.systemConfig.ui.followupQuestionCountDescription")),1)]),r("div",Rs,[a(e(p),{id:"ui-show-signup-terms","model-value":e(re),"onUpdate:modelValue":cs,disabled:e(c)},null,8,["model-value","disabled"]),a(e(g),{for:"ui-show-signup-terms"},{default:o(()=>[d(u(e(t)("admin.systemConfig.ui.showSignupTermsLabel")),1)]),_:1})])]),_:1})]),_:1})]))}});export{ga as default};
