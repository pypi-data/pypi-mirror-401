import{_ as xe}from"./2RVX2kid.js";import{h as ke,e as he,a9 as we,F as Ce,k as $,E as g,f as Ve,m as j,H as $e,c as x,o as _,a as l,v as V,I as k,b as s,w as i,d as u,g as e,t as n,L as A,M as Ae,y as M,J as oe,K as de,$ as Se,aa as Re,a3 as Ge,D as X,Q as P}from"./BzhixHsn.js";import{_ as Le,a as Ee}from"./DjusaS8W.js";import{_ as Pe}from"./CG_BwZdW.js";import{_ as Ue}from"./D0aoH_0m.js";import{_ as Y,a as Z}from"./CRjpF7qy.js";import{_ as Ne}from"./Co_Pqrtl.js";import{_ as ne,a as ue}from"./DfqdNhl2.js";import{_ as O}from"./Di109XjC.js";import{_ as b}from"./4isL45Eu.js";import{_ as ee}from"./_XME2JEy.js";import{_ as ae}from"./Le8goM6p.js";import{_ as T,a as J,d as z,b as B,c as S,C as Me}from"./Bi0Cqvs9.js";import{K as De}from"./BD64gq5u.js";import{_ as qe,a as Ie,b as Fe,c as je,d as Oe,e as Te,f as Je,g as ze}from"./B-FcqR0d.js";import{_ as Be}from"./BzTUrDmP.js";import{u as re}from"./G5O1m7ek.js";import{A as He}from"./CYrYAm7v.js";import{T as Qe}from"./C-xhCs27.js";import{C as me}from"./C56gk0qC.js";import{I as Ke}from"./DU0NpF9R.js";import{S as We}from"./CHh9YBUH.js";import"./C-9Ampo3.js";import"./Bp3-KBkO.js";import"./DKMWZZOl.js";import"./CCA1r4XF.js";import"./vJ3Jskde.js";import"./BkS3akZz.js";import"./BmCC6msl.js";import"./C8B8ONuC.js";import"./A-tu-Llp.js";import"./BmLyE0U0.js";import"./CMS48I6h.js";const Xe={class:"container mx-auto space-y-6 py-6"},Ye={class:"flex items-center justify-between"},Ze={class:"flex items-center gap-4"},ea={class:"text-2xl font-bold"},aa={class:"text-muted-foreground"},sa={key:0,class:"flex justify-center py-12"},ta={class:"space-y-4"},la={class:"space-y-2"},ia={class:"space-y-2"},oa={key:0,class:"text-destructive text-sm"},da={class:"space-y-2"},na={key:0,class:"text-destructive text-sm"},ua={class:"space-y-2"},ra={class:"space-y-4"},ma={class:"text-lg font-medium"},_a={class:"space-y-2"},pa={class:"flex items-center justify-between"},va={key:0,class:"bg-muted/40 space-y-2 rounded-md border p-3"},ca={class:"text-muted-foreground text-xs"},fa={class:"text-foreground line-clamp-3 text-sm whitespace-pre-wrap"},ga={key:2,class:"text-destructive text-sm"},ba={class:"text-muted-foreground text-sm"},ya={class:"space-y-2"},xa={key:0,class:"text-destructive text-sm"},ka={class:"text-muted-foreground text-sm"},ha={class:"space-y-2"},wa={class:"text-muted-foreground text-sm"},Ca={class:"space-y-4"},Va={class:"bg-muted/30 space-y-3 rounded-md border p-4"},$a={class:"flex items-center justify-between gap-3"},Aa={class:"flex items-center gap-2"},Sa={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ra={class:"space-y-2"},Ga={class:"space-y-2"},La={class:"space-y-2"},Ea={class:"space-y-4"},Pa={class:"bg-muted/30 space-y-3 rounded-md border p-4"},Ua={key:0,class:"text-muted-foreground text-sm"},Na={class:"flex items-center justify-between gap-3"},Ma={class:"space-y-2"},Da={class:"text-muted-foreground text-sm"},qa={class:"space-y-4"},Ia={class:"text-lg font-medium"},Fa={class:"flex items-center space-x-2"},ja=["disabled"],Oa={class:"space-y-2"},Ta={class:"flex items-center gap-1"},Ja={type:"button",class:"inline-flex cursor-help","aria-label":"status-help"},za={key:0,class:"text-destructive text-sm"},Ba={key:2,class:"max-w-4xl space-y-4"},Ha={class:"flex items-center justify-between"},Qa={class:"flex items-center gap-2"},Ka={key:0,class:"text-destructive text-sm"},Wa={class:"flex justify-end gap-3"},Xa={class:"text-muted-foreground"},Ya={class:"font-mono text-xs"},Za={class:"text-muted-foreground"},es={class:"text-muted-foreground"},as={class:"text-muted-foreground"},Ds=ke({__name:"edit",async setup(ss){let D,se;const{t:o}=he(),q=we(),H=Ce().params.id,{data:_e}=re("/v1/admin/all-models?capabilities=chat",{server:!1}),pe=$(()=>(_e.value??[]).map(t=>({label:t.display_name,value:t.id}))),I=g(!1),m=g(!1),Q=g(!1),f=g(null),C=g("GENERAL"),c=g(!0),h=g(!0),w=g({temperature:.7,max_tokens:2048,additional_params_text:"{}"}),{data:ve}=([D,se]=Ve(()=>re("/v1/admin/config",{server:!1})),D=await D,se(),D),F=$(()=>ve.value?.configs??[]),R=$(()=>{const t=F.value.find(a=>a.key==="assistant_generation_defaults")?.value;return{temperature:typeof t?.temperature=="number"?t.temperature:.7,max_tokens:typeof t?.max_tokens=="number"?t.max_tokens:2048,additional_params:t?.additional_params&&typeof t.additional_params=="object"?t.additional_params:{}}}),K=$(()=>{const t=F.value.find(a=>a.key==="assistant_rag_defaults")?.value;return{retrieval_count:typeof t?.retrieval_count=="number"?t.retrieval_count:5,fetch_k:t?.fetch_k,similarity_threshold:typeof t?.similarity_threshold=="number"?t.similarity_threshold:.7,context_max_tokens:typeof t?.context_max_tokens=="number"?t.context_max_tokens:1200,search_type:typeof t?.search_type=="string"?t.search_type:"similarity",mmr_lambda:typeof t?.mmr_lambda=="number"?t.mmr_lambda:.5,skip_smalltalk:!!t?.skip_smalltalk,skip_patterns:Array.isArray(t?.skip_patterns)?t.skip_patterns:[],multi_query:!!t?.multi_query,multi_query_count:typeof t?.multi_query_count=="number"?t.multi_query_count:3,rerank_top_k:t?.rerank_top_k,rerank_model_id:t?.rerank_model_id??void 0,hybrid_enabled:!!t?.hybrid_enabled,hybrid_corpus_limit:typeof t?.hybrid_corpus_limit=="number"?t.hybrid_corpus_limit:1e3}}),W=$(()=>{const t=F.value.find(a=>a.key==="ui_generate_followup_questions")?.value;return t===void 0?!1:String(t).toLowerCase()!=="false"}),U=$(()=>{const t=F.value.find(d=>d.key==="ui_followup_question_count")?.value,a=Number(t??3);return Number.isFinite(a)?Math.max(1,Math.min(5,Math.trunc(a))):3}),G=g(!0),N=g("__global__"),r=g({name:"",avatar_file_path:"",description:"",system_prompt:"",model_id:"",max_history_messages:void 0,is_public:!1,status:"DRAFT"}),p=g({}),y=g({knowledge_base_ids:[],rag_config:void 0}),te=$({get:()=>({knowledge_base_ids:y.value.knowledge_base_ids,rag_config:C.value==="RAG"?h.value?K.value:y.value.rag_config??K.value:void 0}),set:t=>{y.value.knowledge_base_ids=t?.knowledge_base_ids||[],h.value||(y.value.rag_config=t?.rag_config)}}),L=g(!1),ce=$(()=>{const t=(r.value.system_prompt||"").trim();return t?t.length<=220?t:`${t.slice(0,220)}â€¦`:o("admin.pages.assistants.create.modelConfig.systemPromptPlaceholder")}),fe=async()=>{I.value=!0;try{const{$api:t}=X(),a=await t(`/v1/admin/assistants/${H}`);f.value=a,r.value={name:a.name||"",avatar_file_path:a.avatar_file_path||"",description:a.description||"",system_prompt:a.system_prompt||"",model_id:a.model_id||"",max_history_messages:a.max_history_messages,is_public:a.is_public||!1,status:a.status||"DRAFT"},C.value=a.mode||(a.knowledge_base_ids?.length?"RAG":"GENERAL"),c.value=a.use_global_generation_defaults??!0,h.value=a.use_global_rag_defaults??!0,G.value=a.followup_questions_enabled??!0,N.value=typeof a.followup_questions_count=="number"?String(Math.max(1,Math.min(U.value,Math.trunc(a.followup_questions_count)))):"__global__",w.value={temperature:typeof a.temperature=="number"?a.temperature:R.value.temperature,max_tokens:typeof a.max_tokens=="number"?a.max_tokens:R.value.max_tokens,additional_params_text:JSON.stringify(a?.config?.additional_params??{},null,2)},y.value={knowledge_base_ids:a.knowledge_base_ids||[],rag_config:a.rag_config||void 0}}catch(t){console.error("Failed to load assistant data:",t),P.error(o("admin.pages.assistants.edit.loadFailed")),q.push("/admin/assistants")}finally{I.value=!1}};j(R,t=>{c.value&&(w.value={temperature:t.temperature,max_tokens:t.max_tokens,additional_params_text:JSON.stringify(t.additional_params??{},null,2)})},{immediate:!0}),j(c,t=>{if(t){const a=R.value;w.value={temperature:a.temperature,max_tokens:a.max_tokens,additional_params_text:JSON.stringify(a.additional_params??{},null,2)}}}),j(h,t=>{!t&&!y.value.rag_config&&(y.value.rag_config=K.value)}),j(C,t=>{t==="GENERAL"&&(y.value.knowledge_base_ids=[],y.value.rag_config=void 0,h.value=!0)});const ge=()=>{const t={};return(!r.value.name||r.value.name.length<2)&&(t.name=o("admin.pages.assistants.create.validation.nameMin")),(!r.value.system_prompt||r.value.system_prompt.length<10)&&(t.system_prompt=o("admin.pages.assistants.create.validation.systemPromptMin")),r.value.model_id||(t.model_id=o("admin.pages.assistants.create.validation.modelRequired")),r.value.status||(t.status=o("admin.pages.assistants.create.validation.statusRequired")),C.value==="RAG"&&(!y.value.knowledge_base_ids||y.value.knowledge_base_ids.length===0)&&(t.knowledge_base_ids="Select at least one knowledge base for RAG mode"),p.value=t,Object.keys(t).length===0},be=t=>{const a={name:o("admin.pages.assistants.create.basicInfo.nameLabel"),system_prompt:o("admin.pages.assistants.create.modelConfig.systemPromptLabel"),model_id:o("admin.pages.assistants.create.modelConfig.modelLabel"),status:o("admin.pages.assistants.create.publishSettings.statusLabel"),knowledge_base_ids:"Knowledge Base"},v=Object.keys(t).map(d=>a[d]||d);return v.length===1?`Please fill in the required field: ${v[0]}`:`Please fill in the required fields: ${v.join(", ")}`},le=async()=>{if(!ge()){P.error(be(p.value));return}m.value=!0;try{const{$api:t}=X(),a=()=>{const d=(w.value.additional_params_text||"").trim();if(!d)return{};const E=JSON.parse(d);if(E===null||typeof E!="object"||Array.isArray(E))throw new Error("Generation additional params must be a JSON object");return E},v={...r.value,mode:C.value,use_global_generation_defaults:c.value,use_global_rag_defaults:C.value==="RAG"?h.value:!0,knowledge_base_ids:C.value==="RAG"?y.value.knowledge_base_ids:[],followup_questions_enabled:G.value,followup_questions_count:G.value?N.value==="__global__"?null:Math.min(U.value,Math.max(1,Number(N.value))):null};c.value?(delete v.temperature,delete v.max_tokens):(v.temperature=w.value.temperature,v.max_tokens=w.value.max_tokens,v.config={...v.config||{},additional_params:a()}),C.value==="RAG"&&!h.value?v.rag_config=y.value.rag_config:delete v.rag_config,await t(`/v1/admin/assistants/${H}`,{method:"PUT",body:v}),P.success(o("admin.pages.assistants.edit.updateSuccess")),q.push("/admin/assistants")}catch(t){console.error("Update failed:",t),P.error(o("admin.pages.assistants.edit.updateFailed"))}finally{m.value=!1}},ye=async()=>{Q.value=!0;try{const{$api:t}=X();await t(`/v1/admin/assistants/${H}`,{method:"DELETE"}),P.success(o("admin.pages.assistants.edit.deleteSuccess")),q.push("/admin/assistants")}catch(t){console.error("Delete failed:",t),P.error(o("admin.pages.assistants.edit.deleteFailed"))}finally{Q.value=!1}},ie=()=>{q.push("/admin/assistants")};return $e(()=>{fe()}),(t,a)=>{const v=xe;return _(),x("div",Xe,[l("div",Ye,[l("div",Ze,[s(e(A),{variant:"ghost",size:"sm",onClick:ie},{default:i(()=>[s(e(He),{class:"mr-2 h-4 w-4"}),u(" "+n(e(o)("admin.back")),1)]),_:1}),l("div",null,[l("h1",ea,n(e(o)("admin.pages.assistants.edit.title")),1),l("p",aa,n(f.value?.name?e(o)("admin.pages.assistants.edit.editing",{name:f.value.name}):e(o)("admin.loading")),1)])]),s(e(ze),null,{default:i(()=>[s(e(Be),{"as-child":""},{default:i(()=>[s(e(A),{variant:"destructive",size:"sm",disabled:I.value},{default:i(()=>[s(e(Qe),{class:"mr-2 h-4 w-4"}),u(" "+n(e(o)("admin.delete")),1)]),_:1},8,["disabled"])]),_:1}),s(e(qe),null,{default:i(()=>[s(e(Ie),null,{default:i(()=>[s(e(Fe),null,{default:i(()=>[u(n(e(o)("admin.pages.assistants.edit.deleteConfirm.title")),1)]),_:1}),s(e(je),null,{default:i(()=>[u(n(e(o)("admin.pages.assistants.edit.deleteConfirm.description",{name:f.value?.name})),1)]),_:1})]),_:1}),s(e(Oe),null,{default:i(()=>[s(e(Te),null,{default:i(()=>[u(n(e(o)("admin.cancel")),1)]),_:1}),s(e(Je),{onClick:ye,disabled:Q.value,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:i(()=>[u(n(e(o)("admin.confirm")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),I.value?(_(),x("div",sa,[...a[21]||(a[21]=[l("div",{class:"border-primary h-8 w-8 animate-spin rounded-full border-b-2"},null,-1)])])):f.value?(_(),V(e(Z),{key:1,class:"max-w-4xl"},{default:i(()=>[s(e(ne),null,{default:i(()=>[s(e(ue),null,{default:i(()=>[u(n(e(o)("admin.pages.assistants.edit.title")),1)]),_:1}),s(e(Ne),null,{default:i(()=>[u(n(e(o)("admin.pages.assistants.edit.description")),1)]),_:1})]),_:1}),s(e(Y),null,{default:i(()=>[l("form",{onSubmit:Ae(le,["prevent"]),class:"space-y-6"},[l("div",ta,[l("div",la,[s(e(b),{for:"avatar"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.basicInfo.avatarLabel")),1)]),_:1}),s(v,{id:"avatar",modelValue:r.value.avatar_file_path,"onUpdate:modelValue":a[0]||(a[0]=d=>r.value.avatar_file_path=d),"initial-url":f.value?.avatar_url,disabled:m.value},null,8,["modelValue","initial-url","disabled"])]),l("div",ia,[s(e(b),{for:"name"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.basicInfo.nameLabel"))+" ",1),a[22]||(a[22]=l("span",{class:"text-destructive"},"*",-1))]),_:1}),s(e(O),{id:"name",modelValue:r.value.name,"onUpdate:modelValue":a[1]||(a[1]=d=>r.value.name=d),placeholder:e(o)("admin.pages.assistants.create.basicInfo.namePlaceholder"),class:M({"border-destructive":p.value.name}),disabled:m.value},null,8,["modelValue","placeholder","class","disabled"]),p.value.name?(_(),x("div",oa,n(p.value.name),1)):k("",!0)]),l("div",da,[s(e(b),{for:"description"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.basicInfo.descriptionLabel")),1)]),_:1}),s(e(ae),{id:"description",modelValue:r.value.description,"onUpdate:modelValue":a[2]||(a[2]=d=>r.value.description=d),placeholder:e(o)("admin.pages.assistants.create.basicInfo.descriptionPlaceholder"),rows:3,class:M({"border-destructive":p.value.description}),disabled:m.value},null,8,["modelValue","placeholder","class","disabled"]),p.value.description?(_(),x("div",na,n(p.value.description),1)):k("",!0)]),l("div",ua,[s(e(b),{for:"mode"},{default:i(()=>[...a[23]||(a[23]=[u("Mode",-1)])]),_:1}),s(e(T),{modelValue:C.value,"onUpdate:modelValue":a[3]||(a[3]=d=>C.value=d),disabled:m.value},{default:i(()=>[s(e(J),null,{default:i(()=>[s(e(z),{placeholder:"Select mode"})]),_:1}),s(e(B),null,{default:i(()=>[s(e(S),{value:"GENERAL"},{default:i(()=>[...a[24]||(a[24]=[u("General",-1)])]),_:1}),s(e(S),{value:"RAG"},{default:i(()=>[...a[25]||(a[25]=[u("RAG",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),a[26]||(a[26]=l("div",{class:"text-muted-foreground text-sm"}," Choose General for regular chat, or RAG to use knowledge bases. ",-1))])]),l("div",ra,[l("h3",ma,n(e(o)("admin.pages.assistants.create.modelConfig.title")),1),l("div",_a,[l("div",pa,[s(e(b),{for:"system_prompt"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.modelConfig.systemPromptLabel"))+" ",1),a[27]||(a[27]=l("span",{class:"text-destructive"},"*",-1))]),_:1}),s(e(A),{type:"button",variant:"ghost",size:"icon",class:"h-8 w-8",onClick:a[4]||(a[4]=d=>L.value=!L.value),"aria-expanded":L.value,"aria-controls":"system_prompt"},{default:i(()=>[L.value?(_(),V(e(Me),{key:1,class:"h-4 w-4"})):(_(),V(e(me),{key:0,class:"h-4 w-4"}))]),_:1},8,["aria-expanded"])]),L.value?(_(),V(e(ae),{key:1,id:"system_prompt",modelValue:r.value.system_prompt,"onUpdate:modelValue":a[6]||(a[6]=d=>r.value.system_prompt=d),placeholder:e(o)("admin.pages.assistants.create.modelConfig.systemPromptPlaceholder"),rows:8,class:M({"border-destructive":p.value.system_prompt}),disabled:m.value},null,8,["modelValue","placeholder","class","disabled"])):(_(),x("div",va,[l("div",ca,n(e(o)("admin.pages.assistants.create.modelConfig.systemPromptPlaceholder")),1),l("div",fa,n(ce.value),1),s(e(A),{type:"button",variant:"outline",size:"sm",class:"mt-1",onClick:a[5]||(a[5]=d=>L.value=!0)},{default:i(()=>[s(e(me),{class:"mr-1 h-4 w-4"}),u(" "+n(e(o)("common.expand")||"Expand"),1)]),_:1})])),p.value.system_prompt?(_(),x("div",ga,n(p.value.system_prompt),1)):k("",!0),l("div",ba,n(e(o)("admin.pages.assistants.create.modelConfig.systemPromptHelp")),1)]),l("div",ya,[s(e(b),{for:"model_id"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.modelConfig.modelLabel"))+" ",1),a[28]||(a[28]=l("span",{class:"text-destructive"},"*",-1))]),_:1}),s(e(T),{modelValue:r.value.model_id,"onUpdate:modelValue":a[7]||(a[7]=d=>r.value.model_id=d),disabled:m.value},{default:i(()=>[s(e(J),{class:M({"border-destructive":p.value.model_id})},{default:i(()=>[s(e(z),{placeholder:e(o)("admin.pages.assistants.create.modelConfig.modelPlaceholder")},null,8,["placeholder"])]),_:1},8,["class"]),s(e(B),null,{default:i(()=>[(_(!0),x(oe,null,de(pe.value,d=>(_(),V(e(S),{key:d.value,value:d.value},{default:i(()=>[u(n(d.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),p.value.model_id?(_(),x("div",xa,n(p.value.model_id),1)):k("",!0),l("div",ka,n(e(o)("admin.pages.assistants.create.modelConfig.modelHelp")),1)]),l("div",ha,[s(e(b),{for:"max_history_messages"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.modelConfig.maxHistoryLabel")),1)]),_:1}),s(e(O),{id:"max_history_messages",modelValue:r.value.max_history_messages,"onUpdate:modelValue":a[8]||(a[8]=d=>r.value.max_history_messages=d),modelModifiers:{number:!0},type:"number",placeholder:"10",min:"0",max:"100",disabled:m.value,class:"max-w-xs"},null,8,["modelValue","disabled"]),l("div",wa,n(e(o)("admin.pages.assistants.create.modelConfig.maxHistoryHelp")),1)])]),l("div",Ca,[a[34]||(a[34]=l("h3",{class:"text-lg font-medium"},"Generation",-1)),l("div",Va,[l("div",$a,[a[30]||(a[30]=l("div",{class:"text-sm font-semibold"},"Use global generation defaults",-1)),l("div",Aa,[c.value?k("",!0):(_(),V(e(A),{key:0,type:"button",variant:"outline",size:"sm",disabled:m.value,onClick:a[9]||(a[9]=d=>c.value=!0)},{default:i(()=>[...a[29]||(a[29]=[u(" Reset to global ",-1)])]),_:1},8,["disabled"])),s(e(ee),{id:"use-global-generation","model-value":c.value,"onUpdate:modelValue":a[10]||(a[10]=d=>c.value=d),disabled:m.value},null,8,["model-value","disabled"])])]),l("div",Sa,[l("div",Ra,[s(e(b),{for:"gen-temperature"},{default:i(()=>[...a[31]||(a[31]=[u("Temperature",-1)])]),_:1}),s(e(O),{id:"gen-temperature",type:"number","model-value":c.value?R.value.temperature:w.value.temperature,disabled:m.value||c.value,min:"0",max:"2",step:"0.1","onUpdate:modelValue":a[11]||(a[11]=d=>w.value.temperature=Number(d))},null,8,["model-value","disabled"])]),l("div",Ga,[s(e(b),{for:"gen-max-tokens"},{default:i(()=>[...a[32]||(a[32]=[u("Max tokens",-1)])]),_:1}),s(e(O),{id:"gen-max-tokens",type:"number","model-value":c.value?R.value.max_tokens:w.value.max_tokens,disabled:m.value||c.value,min:"1",max:"100000","onUpdate:modelValue":a[12]||(a[12]=d=>w.value.max_tokens=Number(d))},null,8,["model-value","disabled"])])]),l("div",La,[s(e(b),{for:"gen-additional"},{default:i(()=>[...a[33]||(a[33]=[u("Additional params (JSON)",-1)])]),_:1}),s(e(ae),{id:"gen-additional","model-value":c.value?JSON.stringify(R.value.additional_params||{},null,2):w.value.additional_params_text,disabled:m.value||c.value,rows:6,class:"font-mono text-xs","onUpdate:modelValue":a[13]||(a[13]=d=>w.value.additional_params_text=String(d))},null,8,["model-value","disabled"])])])]),l("div",Ea,[a[38]||(a[38]=l("h3",{class:"text-lg font-medium"},"Follow-up Questions",-1)),l("div",Pa,[W.value?k("",!0):(_(),x("div",Ua,[...a[35]||(a[35]=[u(" Disabled globally in System Config. Enable ",-1),l("strong",null,"Generate Follow-up Questions",-1),u(" to use this feature. ",-1)])])),l("div",Na,[a[36]||(a[36]=l("div",{class:"text-sm font-semibold"},"Enable follow-up questions",-1)),s(e(ee),{id:"assistant-followups-enabled","model-value":G.value,"onUpdate:modelValue":a[14]||(a[14]=d=>G.value=d),disabled:m.value||!W.value},null,8,["model-value","disabled"])]),l("div",Ma,[s(e(b),{for:"assistant-followups-count"},{default:i(()=>[...a[37]||(a[37]=[u("Follow-up count",-1)])]),_:1}),s(e(T),{modelValue:N.value,"onUpdate:modelValue":a[15]||(a[15]=d=>N.value=d),disabled:m.value||!W.value||!G.value},{default:i(()=>[s(e(J),{id:"assistant-followups-count",class:"max-w-xs"},{default:i(()=>[s(e(z))]),_:1}),s(e(B),null,{default:i(()=>[s(e(S),{value:"__global__"},{default:i(()=>[u(" Use global ("+n(U.value)+") ",1)]),_:1}),(_(!0),x(oe,null,de(Array.from({length:U.value},(d,E)=>E+1),d=>(_(),V(e(S),{key:d,value:String(d)},{default:i(()=>[u(n(d),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),l("div",Da," Max allowed: "+n(U.value)+" (set in System Config). ",1)])])]),l("div",qa,[l("h3",Ia,n(e(o)("admin.pages.assistants.create.publishSettings.title")),1),l("div",Fa,[Se(l("input",{id:"is_public",type:"checkbox","onUpdate:modelValue":a[16]||(a[16]=d=>r.value.is_public=d),disabled:m.value,class:"text-primary focus:ring-primary h-4 w-4 rounded border-gray-300"},null,8,ja),[[Re,r.value.is_public]]),s(e(b),{for:"is_public",class:"cursor-pointer text-sm"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.publishSettings.isPublicLabel")),1)]),_:1})]),l("div",Oa,[l("div",Ta,[s(e(b),{for:"status"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.publishSettings.statusLabel"))+" ",1),a[39]||(a[39]=l("span",{class:"text-destructive"},"*",-1))]),_:1}),s(e(Ue),null,{default:i(()=>[s(e(Le),null,{default:i(()=>[s(e(Ee),{"as-child":""},{default:i(()=>[l("button",Ja,[s(e(Ke),{class:"text-muted-foreground h-3.5 w-3.5"})])]),_:1}),s(e(Pe),{side:"right",class:"max-w-xs text-left"},{default:i(()=>[...a[40]||(a[40]=[l("div",{class:"space-y-1"},[l("div",null,[l("strong",null,"Active:"),u(" Working normally and available to users")]),l("div",null,[l("strong",null,"Inactive:"),u(" Paused and unavailable to users")]),l("div",null,[l("strong",null,"Draft:"),u(" Configuration incomplete, visible only to admins ")])],-1)])]),_:1})]),_:1})]),_:1})]),s(e(T),{modelValue:r.value.status,"onUpdate:modelValue":a[17]||(a[17]=d=>r.value.status=d),disabled:m.value},{default:i(()=>[s(e(J),{class:M({"border-destructive":p.value.status})},{default:i(()=>[s(e(z),{placeholder:e(o)("admin.pages.assistants.create.publishSettings.statusPlaceholder")},null,8,["placeholder"])]),_:1},8,["class"]),s(e(B),null,{default:i(()=>[s(e(S),{value:"ACTIVE"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.publishSettings.statuses.active")),1)]),_:1}),s(e(S),{value:"INACTIVE"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.publishSettings.statuses.inactive")),1)]),_:1}),s(e(S),{value:"DRAFT"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.create.publishSettings.statuses.draft")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),p.value.status?(_(),x("div",za,n(p.value.status),1)):k("",!0)])])],32)]),_:1})]),_:1})):k("",!0),f.value&&C.value==="RAG"?(_(),x("div",Ba,[l("div",Ha,[a[43]||(a[43]=l("div",{class:"text-lg font-medium"},"RAG",-1)),l("div",Qa,[s(e(b),{for:"use-global-rag",class:"text-sm"},{default:i(()=>[...a[41]||(a[41]=[u("Use global RAG defaults",-1)])]),_:1}),h.value?k("",!0):(_(),V(e(A),{key:0,type:"button",variant:"outline",size:"sm",disabled:m.value,onClick:a[18]||(a[18]=d=>h.value=!0)},{default:i(()=>[...a[42]||(a[42]=[u(" Reset to global ",-1)])]),_:1},8,["disabled"])),s(e(ee),{id:"use-global-rag","model-value":h.value,"onUpdate:modelValue":a[19]||(a[19]=d=>h.value=d),disabled:m.value},null,8,["model-value","disabled"])])]),p.value.knowledge_base_ids?(_(),x("div",Ka,n(p.value.knowledge_base_ids),1)):k("",!0),s(De,{modelValue:te.value,"onUpdate:modelValue":a[20]||(a[20]=d=>te.value=d),disabled:m.value,settingsReadOnly:h.value},null,8,["modelValue","disabled","settingsReadOnly"])])):k("",!0),f.value?(_(),V(e(Z),{key:3,class:"max-w-4xl"},{default:i(()=>[s(e(Y),{class:"pt-6"},{default:i(()=>[l("div",Wa,[s(e(A),{variant:"outline",onClick:ie,disabled:m.value},{default:i(()=>[s(e(Ge),{class:"mr-2 h-4 w-4"}),u(" "+n(e(o)("admin.cancel")),1)]),_:1},8,["disabled"]),s(e(A),{onClick:le,disabled:m.value},{default:i(()=>[s(e(We),{class:"mr-2 h-4 w-4"}),u(" "+n(e(o)("admin.save")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})):k("",!0),f.value?(_(),V(e(Z),{key:4,class:"max-w-4xl"},{default:i(()=>[s(e(ne),null,{default:i(()=>[s(e(ue),{class:"text-lg"},{default:i(()=>[u(n(e(o)("admin.pages.assistants.edit.metadata.title")),1)]),_:1})]),_:1}),s(e(Y),{class:"grid grid-cols-2 gap-4 text-sm"},{default:i(()=>[l("div",null,[l("div",Xa,n(e(o)("admin.pages.assistants.edit.metadata.id")),1),l("div",Ya,n(f.value.id),1)]),l("div",null,[l("div",Za,n(e(o)("admin.pages.assistants.edit.metadata.createdAt")),1),l("div",null,n(new Date(f.value.created_at).toLocaleString()),1)]),l("div",null,[l("div",es,n(e(o)("admin.pages.assistants.edit.metadata.updatedAt")),1),l("div",null,n(new Date(f.value.updated_at).toLocaleString()),1)]),l("div",null,[l("div",as,n(e(o)("admin.pages.assistants.edit.metadata.owner")),1),l("div",null,n(f.value.owner_name||f.value.owner_id||e(o)("admin.pages.assistants.edit.metadata.system")),1)])]),_:1})]),_:1})):k("",!0)])}}});export{Ds as default};
