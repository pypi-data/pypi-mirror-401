import{_ as Pe}from"./pRipWecN.js";import{_ as Re}from"./hcYt5xb6.js";import{R as Te,h as fe,c as u,o,y,g as e,N as Ue,x as De,e as Ee,a8 as Ge,u as qe,S as Me,G as Ne,k as z,E as k,H as D,W as Ve,b as r,a as i,I as p,d as f,t as d,J as S,K as P,v as c,w as l,O as E,L as v,a2 as Be,Q as R,D as Fe}from"./BzhixHsn.js";import{_ as ee,a as te}from"./CRjpF7qy.js";import{_ as oe,a as se}from"./DfqdNhl2.js";import{_ as ae,a as re}from"./BSaEE8c4.js";import{_ as le}from"./DdeO54y7.js";import{_ as ie}from"./Di_95mgX.js";import{_ as je}from"./Di109XjC.js";import{u as He}from"./Dosvfmhb.js";import{u as ne}from"./G5O1m7ek.js";import{a as de}from"./4NrzHMof.js";import{a as G,P as ce}from"./D_Xbx0JF.js";import{S as Ie}from"./BdE42Imj.js";import{P as Oe}from"./C-zlyDS5.js";import{C as We}from"./CW7RC7pq.js";import{U as Ke}from"./2RVX2kid.js";import{C as Qe}from"./DhvzP0AS.js";import{S as q}from"./BEcuULY5.js";import{S as ue}from"./BVAf69h5.js";import{C as me}from"./EdM3CJ8e.js";import{D as Je}from"./C8B8ONuC.js";import"./lcKie01k.js";import"./qyVZgQpg.js";import"./C9XbPd6k.js";import"./4isL45Eu.js";import"./Bi0Cqvs9.js";import"./C56gk0qC.js";import"./Bp3-KBkO.js";import"./DKMWZZOl.js";import"./BmCC6msl.js";import"./vJ3Jskde.js";import"./CeWx-USI.js";import"./B9I6JWJy.js";import"./COjiOs1v.js";import"./XCOtPLqC.js";import"./DQj8dpKz.js";import"./CCA1r4XF.js";import"./BmLyE0U0.js";import"./CMS48I6h.js";import"./C-9Ampo3.js";import"./C-xhCs27.js";const Xe=Te("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),pe=fe({__name:"CardFooter",props:{class:{}},setup(M){const m=M;return(N,T)=>(o(),u("div",{"data-slot":"card-footer",class:y(e(Ue)("flex items-center px-6 [.border-t]:pt-6",m.class))},[De(N.$slots,"default")],2))}}),Ye={class:"absolute inset-0 flex flex-col overflow-hidden rounded-[inherit]"},Ze={class:"mx-auto flex w-full max-w-[1600px] flex-1 flex-col overflow-y-auto px-4 py-6"},et={key:0,class:"bg-muted/20 border-border/50 mb-8 flex-shrink-0 rounded-2xl border p-6"},tt={class:"text-primary mb-4 flex items-center gap-2 text-lg font-semibold"},ot={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},st={class:"flex min-w-0 items-center gap-3"},at={class:"flex min-w-0 flex-col"},rt=["href","onClick"],lt={key:1},it={key:0,class:"text-muted-foreground mt-1 flex items-center gap-1 truncate text-xs"},nt={key:0,class:"mb-4 flex flex-wrap gap-1"},dt={class:"text-muted-foreground line-clamp-3 text-sm"},ct={class:"mb-4 flex-shrink-0 space-y-6"},ut={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center"},mt={class:"text-2xl font-bold"},pt={class:"flex w-full items-center gap-2 md:w-auto"},ft={class:"relative w-full max-w-sm"},ht={class:"group relative"},vt={key:0,class:"from-background via-background absolute top-0 bottom-2 left-0 z-10 flex items-center bg-gradient-to-r to-transparent pr-6"},gt={key:1,class:"from-background via-background absolute top-0 right-0 bottom-2 z-10 flex items-center bg-gradient-to-l to-transparent pl-6"},_t={class:"pr-2 pb-4"},xt={key:0,class:"flex justify-center py-12"},bt={key:1,class:"py-12 text-center"},yt={class:"text-destructive mb-4"},wt={key:2,class:"py-12 text-center"},kt={class:"mb-2 text-lg font-semibold"},Ct={class:"text-muted-foreground"},$t={key:3,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},At={class:"flex min-w-0 items-center gap-3"},Lt={class:"flex min-w-0 flex-col"},zt=["href","onClick"],St={key:1},Pt={key:0,class:"text-muted-foreground mt-1 flex items-center gap-1 truncate text-xs"},Rt={key:0,class:"mb-4 flex flex-wrap gap-1"},Tt={class:"text-muted-foreground line-clamp-3 text-sm"},ko=fe({__name:"index",setup(M){const{t:m}=Ee(),T=Ge().origin;qe({title:m("pageTitle.assistants")});const{isMobile:Ut}=He(),he=Me(),ve=Ne(),h=z(()=>he.currentUser),V=k(!0);D(async()=>{const a=(await ve.getConfig()).allow_user_create_assistants;V.value=String(a).toLowerCase()!=="false"});const ge=z(()=>!!(h.value?.is_superuser&&V.value)),g=k(void 0),x=k(void 0),C=k(""),_e=[{value:"GENERAL",label:"General",icon:q},{value:"RAG",label:"RAG",icon:Je}],xe=z(()=>{const s={sort_by:"usage_count",order:"desc"};return g.value&&(s.mode=g.value),x.value&&(s.scope=x.value),C.value&&(s.search=C.value),s}),{data:$,pending:be,error:ye,refresh:B}=ne("/v1/assistants",{query:xe,lazy:!0}),{data:U,refresh:F}=ne("/v1/assistants",{query:{scope:"pinned",limit:100},lazy:!0});D(()=>{h.value&&F()});const we=z(()=>$.value??[]),ke=z(()=>U.value??[]),Ce=de(we),j=de(ke),$e={chat:"assistants.capabilities.chat",completion:"assistants.capabilities.completion",embedding:"assistants.capabilities.embedding",vision:"assistants.capabilities.vision",audio:"assistants.capabilities.audio",function_calling:"assistants.capabilities.function_calling",tool_use:"assistants.capabilities.tool_use",code:"assistants.capabilities.code",image_generation:"assistants.capabilities.image_generation"},Ae={chat:"bg-stone-100 text-stone-800 border-stone-200",completion:"bg-amber-50 text-amber-700 border-amber-200",embedding:"bg-yellow-50 text-yellow-700 border-yellow-200",vision:"bg-orange-100 text-orange-900 border-orange-300",audio:"bg-amber-200 text-amber-900 border-amber-300",function_calling:"bg-orange-100 text-orange-800 border-orange-200",tool_use:"bg-amber-100 text-amber-800 border-amber-200",code:"bg-yellow-100 text-yellow-800 border-yellow-200",image_generation:"bg-emerald-50 text-emerald-800 border-emerald-200"},H=s=>{const a=$e[s];return a?m(a):s},I=s=>Ae[s]||"bg-orange-50 text-orange-700 border-orange-200",O=async(s,a)=>{a.stopPropagation(),await E(`/assistants/${s.id}/edit`)},W=async(s,a)=>{a.stopPropagation(),await E(`/assistants/create?source_id=${s.id}`)},K=async(s,a)=>{if(a.stopPropagation(),!h.value){R.error(m("auth.loginRequired"));return}const{$api:b}=Fe(),_=s.is_pinned,t=(n,L,ze)=>{if(!n.value)return;const Z=n.value.find(Se=>Se.id===L);Z&&(Z.is_pinned=ze)};t($,s.id,!_),t(U,s.id,!_);try{_?(await b(`/v1/assistants/${s.id}/pin`,{method:"DELETE"}),R.success(m("assistants.unpinned"))):(await b(`/v1/assistants/${s.id}/pin`,{method:"POST"}),R.success(m("assistants.pinned"))),F(),x.value==="pinned"&&_&&B()}catch{R.error(m("common.error")),t($,s.id,_),t(U,s.id,_)}},Q=s=>{g.value=s,x.value=void 0},Le=s=>{x.value=s,g.value=void 0},w=k(null),J=k(!1),X=k(!1),A=()=>{if(!w.value)return;const{scrollLeft:s,scrollWidth:a,clientWidth:b}=w.value;J.value=s>0,X.value=Math.ceil(s+b)<a},Y=s=>{if(!w.value)return;const a=300,b=s==="left"?w.value.scrollLeft-a:w.value.scrollLeft+a;w.value.scrollTo({left:b,behavior:"smooth"})};return D(()=>{A(),setTimeout(A,100),window.addEventListener("resize",A)}),Ve(()=>{window.removeEventListener("resize",A)}),(s,a)=>{const b=Pe,_=Re;return o(),u("div",Ye,[r(b),i("div",Ze,[!g.value&&!x.value&&!C.value&&e(j).length>0?(o(),u("div",et,[i("h2",tt,[r(e(G),{class:"h-4 w-4"}),f(" "+d(e(m)("assistants.pinned")),1)]),i("div",ot,[(o(!0),u(S,null,P(e(j),t=>(o(),c(e(te),{key:t.id,class:y(["group bg-background relative cursor-pointer transition-all hover:scale-[1.02] hover:shadow-md",t.status==="DRAFT"?"cursor-not-allowed opacity-60":""])},{default:l(()=>[r(e(oe),null,{default:l(()=>[i("div",st,[r(e(ae),{class:"size-10 flex-shrink-0"},{default:l(()=>[t.avatar_url?(o(),c(e(re),{key:0,src:t.avatar_url,alt:t.name},null,8,["src","alt"])):p("",!0),r(e(le),null,{default:l(()=>[f(d(t.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),i("div",at,[r(e(se),{class:"truncate text-base leading-tight font-medium"},{default:l(()=>[t.status!=="DRAFT"?(o(),c(_,{key:0,to:`/chatwith/${t.id}`,custom:""},{default:l(({href:n,navigate:L})=>[i("a",{href:`${e(T)}${n}`,class:"focus:outline-none",onClick:L},[a[6]||(a[6]=i("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)),f(" "+d(t.name),1)],8,rt)]),_:2},1032,["to"])):(o(),u("span",lt,d(t.name),1))]),_:2},1024),t.model?(o(),u("div",it,[r(e(q),{class:"h-3 w-3 opacity-70"}),f(" "+d(t.model.name),1)])):p("",!0)])])]),_:2},1024),r(e(ee),null,{default:l(()=>[t.model?.capabilities?.length?(o(),u("div",nt,[(o(!0),u(S,null,P(t.model.capabilities,n=>(o(),c(e(ie),{key:n,variant:"outline",class:y(["h-5 px-1 py-0 text-[10px]",I(n)])},{default:l(()=>[f(d(H(n)),1)]),_:2},1032,["class"]))),128))])):p("",!0),i("p",dt,d(t.description),1)]),_:2},1024),r(e(pe),{class:"relative z-10 flex justify-start gap-1 px-6 pt-0 pb-4"},{default:l(()=>[h.value?(o(),c(e(v),{key:0,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",title:t.is_pinned?e(m)("assistants.unpin"):e(m)("assistants.pin"),onClick:n=>K(t,n)},{default:l(()=>[t.is_pinned?(o(),c(e(ce),{key:0,class:"h-4 w-4 fill-current"})):(o(),c(e(G),{key:1,class:"h-4 w-4"}))]),_:2},1032,["title","onClick"])):p("",!0),h.value&&t.owner_id===h.value.id?(o(),c(e(v),{key:1,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>O(t,n)},{default:l(()=>[r(e(ue),{class:"h-4 w-4"})]),_:1},8,["onClick"])):p("",!0),h.value&&t.owner_id!==h.value.id?(o(),c(e(v),{key:2,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",title:e(m)("assistants.copy"),onClick:n=>W(t,n)},{default:l(()=>[r(e(me),{class:"h-4 w-4"})]),_:1},8,["title","onClick"])):p("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))])])):p("",!0),i("div",ct,[i("div",ut,[i("h1",mt,d(g.value?g.value==="RAG"?"RAG":"General":"All Assistants"),1),i("div",pt,[i("div",ft,[r(e(Ie),{class:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),r(e(je),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=t=>C.value=t),placeholder:s.$t("assistants.searchPlaceholder"),class:"pl-8"},null,8,["modelValue","placeholder"])]),ge.value?(o(),c(e(v),{key:0,onClick:a[1]||(a[1]=t=>("navigateTo"in s?s.navigateTo:e(E))("/assistants/create"))},{default:l(()=>[r(e(Oe),{class:"mr-2 h-4 w-4"}),f(" "+d(e(m)("assistants.create")),1)]),_:1})):p("",!0)])]),i("div",ht,[J.value?(o(),u("div",vt,[r(e(v),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full shadow-sm",onClick:a[2]||(a[2]=t=>Y("left"))},{default:l(()=>[r(e(We),{class:"h-4 w-4"})]),_:1})])):p("",!0),i("div",{ref_key:"scrollContainer",ref:w,class:"flex w-full max-w-full items-center gap-2 overflow-x-auto scroll-smooth pb-2 [-ms-overflow-style:'none'] [scrollbar-width:'none'] [&::-webkit-scrollbar]:hidden",onScroll:A},[r(e(v),{variant:"ghost",class:y(["h-9 flex-shrink-0 rounded-full px-4 transition-all",!g.value&&!x.value?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"]),onClick:a[3]||(a[3]=t=>Q(void 0))},{default:l(()=>[r(e(Xe),{class:"mr-2 h-4 w-4"}),a[7]||(a[7]=f(" All ",-1))]),_:1},8,["class"]),r(e(v),{variant:"ghost",class:y(["h-9 flex-shrink-0 rounded-full px-4 transition-all",x.value==="mine"?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"]),onClick:a[4]||(a[4]=t=>Le("mine"))},{default:l(()=>[r(e(Ke),{class:"mr-2 h-4 w-4"}),f(" "+d(e(m)("assistants.myAssistants")),1)]),_:1},8,["class"]),(o(),u(S,null,P(_e,t=>r(e(v),{key:t.value,variant:"ghost",class:y(["h-9 flex-shrink-0 rounded-full px-4 transition-all",g.value===t.value?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"]),onClick:n=>Q(t.value)},{default:l(()=>[(o(),c(Be(t.icon),{class:"mr-2 h-4 w-4"})),f(" "+d(t.label),1)]),_:2},1032,["class","onClick"])),64))],544),X.value?(o(),u("div",gt,[r(e(v),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full shadow-sm",onClick:a[5]||(a[5]=t=>Y("right"))},{default:l(()=>[r(e(Qe),{class:"h-4 w-4"})]),_:1})])):p("",!0)])]),i("div",_t,[e(be)?(o(),u("div",xt,[...a[8]||(a[8]=[i("div",{class:"border-primary h-8 w-8 animate-spin rounded-full border-b-2"},null,-1)])])):e(ye)?(o(),u("div",bt,[i("p",yt,d(s.$t("assistants.failedToLoad")),1),r(e(v),{variant:"outline",onClick:e(B)},{default:l(()=>[f(d(s.$t("assistants.tryAgain")),1)]),_:1},8,["onClick"])])):!e($)||e($).length===0?(o(),u("div",wt,[a[9]||(a[9]=i("div",{class:"mb-4"},[i("svg",{class:"text-muted-foreground mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),i("h3",kt,d(s.$t("assistants.noAssistants")),1),i("p",Ct,d(s.$t("assistants.noAssistantsDescription")),1)])):(o(),u("div",$t,[(o(!0),u(S,null,P(e(Ce),t=>(o(),c(e(te),{key:t.id,class:y(["group relative cursor-pointer transition-all hover:scale-[1.02] hover:shadow-md",t.status==="DRAFT"?"cursor-not-allowed opacity-60":""])},{default:l(()=>[r(e(oe),null,{default:l(()=>[i("div",At,[r(e(ae),{class:"size-10 flex-shrink-0"},{default:l(()=>[t.avatar_url?(o(),c(e(re),{key:0,src:t.avatar_url,alt:t.name},null,8,["src","alt"])):p("",!0),r(e(le),null,{default:l(()=>[f(d(t.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),i("div",Lt,[r(e(se),{class:"truncate text-base leading-tight font-medium"},{default:l(()=>[t.status!=="DRAFT"?(o(),c(_,{key:0,to:`/chatwith/${t.id}`,custom:""},{default:l(({href:n,navigate:L})=>[i("a",{href:`${e(T)}${n}`,class:"focus:outline-none",onClick:L},[a[10]||(a[10]=i("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)),f(" "+d(t.name),1)],8,zt)]),_:2},1032,["to"])):(o(),u("span",St,d(t.name),1))]),_:2},1024),t.model?(o(),u("div",Pt,[r(e(q),{class:"h-3 w-3 opacity-70"}),f(" "+d(t.model.name),1)])):p("",!0)])])]),_:2},1024),r(e(ee),null,{default:l(()=>[t.model?.capabilities?.length?(o(),u("div",Rt,[(o(!0),u(S,null,P(t.model.capabilities,n=>(o(),c(e(ie),{key:n,variant:"outline",class:y(["h-5 px-1 py-0 text-[10px]",I(n)])},{default:l(()=>[f(d(H(n)),1)]),_:2},1032,["class"]))),128))])):p("",!0),i("p",Tt,d(t.description),1)]),_:2},1024),r(e(pe),{class:"relative z-10 flex justify-start gap-1 px-6 pt-0 pb-4"},{default:l(()=>[h.value?(o(),c(e(v),{key:0,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",title:t.is_pinned?e(m)("assistants.unpin"):e(m)("assistants.pin"),onClick:n=>K(t,n)},{default:l(()=>[t.is_pinned?(o(),c(e(ce),{key:0,class:"h-4 w-4 fill-current"})):(o(),c(e(G),{key:1,class:"h-4 w-4"}))]),_:2},1032,["title","onClick"])):p("",!0),h.value&&t.owner_id===h.value.id?(o(),c(e(v),{key:1,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>O(t,n)},{default:l(()=>[r(e(ue),{class:"h-4 w-4"})]),_:1},8,["onClick"])):p("",!0),h.value&&t.owner_id!==h.value.id?(o(),c(e(v),{key:2,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",title:e(m)("assistants.copy"),onClick:n=>W(t,n)},{default:l(()=>[r(e(me),{class:"h-4 w-4"})]),_:1},8,["title","onClick"])):p("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))]))])])])}}});export{ko as default};
