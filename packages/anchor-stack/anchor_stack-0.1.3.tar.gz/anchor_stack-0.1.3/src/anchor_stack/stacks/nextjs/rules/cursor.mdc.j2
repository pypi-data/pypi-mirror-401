---
description: {{ app_name | pascal_case }} é¡¹ç›®å¼€å‘è§„èŒƒ - Next.js å‰ç«¯
globs: ["src/**/*.ts", "src/**/*.tsx", "**/*.json"]
alwaysApply: true
---

# {{ app_name | pascal_case }} - å¼€å‘è§„èŒƒ

> Anchor Stack v{{ stack_version }} | Next.js {{ dependencies.next }} + React {{ dependencies.react }}

## ğŸš¨ ç¦æ­¢äº‹é¡¹

- âŒ `console.log()` â†’ ä½¿ç”¨ `logger.info()` / `logger.error()`
- âŒ `process.env.XXX` â†’ ä½¿ç”¨ `config.appName` / `getServerConfig()`
- âŒ ä¿®æ”¹ `src/lib/core/*` æ–‡ä»¶
- âŒ åˆ é™¤ `anchor.config.json`
- âŒ ç¡¬ç¼–ç é…ç½®å€¼æˆ–å¯†é’¥
- âŒ API è·¯ç”±ä¸­çœç•¥é”™è¯¯å¤„ç†

## ğŸ“ æ—¥å¿—

```typescript
import { logger } from '@/lib/core/logger';

// âœ… æ­£ç¡®
logger.info('User logged in', { userId: 123 });
logger.error('Payment failed', { error: err.message });

// âŒ é”™è¯¯
console.log('debug');
```

## âš™ï¸ é…ç½®

```typescript
import { config, getServerConfig } from '@/lib/core/config';

// âœ… å®¢æˆ·ç«¯é…ç½®
const appName = config.appName;

// âœ… æœåŠ¡ç«¯é…ç½® (Server Components / API Routes)
const apiKey = getServerConfig().apiKey;

// âŒ é”™è¯¯
const bad = process.env.API_KEY;
```

## ğŸ“ ç›®å½•ç»“æ„

| ç›®å½• | ç”¨é€” |
|------|------|
| `src/app/` | Next.js App Router é¡µé¢ |
| `src/app/api/` | API è·¯ç”± |
| `src/components/` | React ç»„ä»¶ |
| `src/components/ui/` | UI åŸºç¡€ç»„ä»¶ |
| `src/lib/core/` | âš ï¸ æ ¸å¿ƒæ¨¡å— (å‹¿æ”¹) |
| `src/lib/utils/` | å·¥å…·å‡½æ•° |
| `src/services/` | ä¸šåŠ¡é€»è¾‘ |
| `src/types/` | TypeScript ç±»å‹ |

## ğŸ”§ æ–°å¢é¡µé¢

åˆ›å»º `src/app/[è·¯ç”±]/page.tsx`:

```typescript
import { logger } from '@/lib/core/logger';

export default function AboutPage() {
  logger.info('About page rendered');
  return <main><h1>About</h1></main>;
}
```

## ğŸ”§ æ–°å¢ API

åˆ›å»º `src/app/api/[è·¯ç”±]/route.ts`:

```typescript
import { NextRequest } from 'next/server';
import { logger } from '@/lib/core/logger';
import { apiSuccess, apiError } from '@/lib/utils/api-response';

export async function GET(request: NextRequest) {
  logger.info('GET /api/example');
  try {
    return apiSuccess({ data: [] });
  } catch (error) {
    logger.error('Failed', { error: String(error) });
    return apiError('Internal error', 500);
  }
}
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

```typescript
import { apiError, apiSuccess } from '@/lib/utils/api-response';

// 400 - è¯·æ±‚é”™è¯¯
return apiError('Email is required', 400);

// 404 - èµ„æºä¸å­˜åœ¨
return apiError('User not found', 404);

// 500 - æœåŠ¡å™¨é”™è¯¯
return apiError('Internal server error', 500);
```

## ğŸ“‹ å‘½ä»¤

```bash
npm run dev      # å¼€å‘æœåŠ¡å™¨
npm run build    # æ„å»º
npm run lint     # ä»£ç æ£€æŸ¥
```
