---
description: {{ app_name | pascal_case }} é¡¹ç›®å¼€å‘è§„èŒƒ - FastAPI åç«¯
globs: ["src/**/*.py", "tests/**/*.py"]
alwaysApply: true
---

# {{ app_name | pascal_case }} - å¼€å‘è§„èŒƒ

> Anchor Stack v{{ stack_version }} | FastAPI {{ dependencies.fastapi }}

## ğŸš¨ ç¦æ­¢äº‹é¡¹

- âŒ `print()` â†’ ä½¿ç”¨ `logger.info()` / `logger.error()`
- âŒ `os.getenv()` â†’ ä½¿ç”¨ `settings.database_url`
- âŒ ä¿®æ”¹ `src/app/core/*` æ–‡ä»¶
- âŒ åˆ é™¤ `anchor.config.json`
- âŒ ç¡¬ç¼–ç é…ç½®å€¼
- âŒ åœ¨è·¯ç”±ä¸­å†™å¤æ‚ä¸šåŠ¡é€»è¾‘

## ğŸ“ æ—¥å¿—

```python
from app.core.logger import logger

# âœ… æ­£ç¡®
logger.info("User created", user_id=123)
logger.error("Failed", error=str(e))

# âŒ é”™è¯¯
print("debug")
```

## âš™ï¸ é…ç½®

```python
from app.core.config import settings

# âœ… æ­£ç¡®
db_url = settings.database_url

# âŒ é”™è¯¯
import os
db_url = os.getenv("DATABASE_URL")
```

## ğŸ“ ç›®å½•ç»“æ„

| ç›®å½• | ç”¨é€” |
|------|------|
| `src/app/api/v1/` | API è·¯ç”± |
| `src/app/core/` | âš ï¸ æ ¸å¿ƒæ¨¡å— (å‹¿æ”¹) |
| `src/app/models/` | SQLAlchemy æ¨¡å‹ |
| `src/app/schemas/` | Pydantic Schema |
| `src/app/services/` | ä¸šåŠ¡é€»è¾‘ |
| `tests/` | æµ‹è¯•æ–‡ä»¶ |

## ğŸ”§ æ–°å¢ API

1. åˆ›å»º Schema: `src/app/schemas/[æ¨¡å—].py`
2. åˆ›å»ºè·¯ç”±: `src/app/api/v1/[æ¨¡å—].py`
3. æ³¨å†Œè·¯ç”±: `src/app/api/v1/router.py`

```python
# src/app/api/v1/items.py
from fastapi import APIRouter
from app.core.logger import logger

router = APIRouter()

@router.get("")
async def list_items():
    logger.info("Listing items")
    return []
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

```python
from fastapi import HTTPException

raise HTTPException(status_code=404, detail="Not found")
```

## ğŸ“‹ å‘½ä»¤

```bash
cd src && uv run uvicorn app.main:app --reload  # å¼€å‘
uv run pytest                                    # æµ‹è¯•
uv run ruff check src/                           # æ£€æŸ¥
```
