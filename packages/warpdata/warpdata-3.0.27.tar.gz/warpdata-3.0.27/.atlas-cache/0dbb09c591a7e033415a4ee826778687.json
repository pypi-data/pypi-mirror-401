{
  "input_hash": "0dbb09c591a7e033415a4ee826778687",
  "tags": [
    "python",
    "duckdb-integration",
    "parquet-processing",
    "remote-data-access",
    "s3-storage",
    "thread-safety",
    "lazy-evaluation"
  ],
  "summary": "This folder provides the execution layer for querying datasets, specifically implementing a DuckDB-based engine for scanning remote and local Parquet files. It abstracts connection management, S3 configuration, and URI resolution to provide a unified interface for data retrieval.",
  "concepts": [
    "lazy-query-execution",
    "parquet-scanning",
    "connection-pooling",
    "uri-resolution"
  ],
  "purpose": "feature",
  "domain": "data-querying",
  "tech_stack": [
    "python-3.10",
    "duckdb",
    "httpfs"
  ],
  "patterns": [
    "adapter-pattern",
    "singleton-pattern",
    "thread-local-storage",
    "lazy-initialization"
  ],
  "key_abstractions": [
    "DuckDBEngine",
    "get_engine",
    "DuckDBPyRelation",
    "TableDescriptor"
  ],
  "responsibilities": [
    "Manage thread-local DuckDB connections to ensure thread safety during concurrent queries.",
    "Configure DuckDB extensions like httpfs for S3 and HTTP access.",
    "Resolve custom URI schemes (e.g., local://) into standard file paths.",
    "Generate lazy DuckDB relations from single or multiple Parquet shards.",
    "Extract and describe schemas from Parquet metadata or manifest descriptors.",
    "Execute raw SQL queries against the configured DuckDB environment."
  ],
  "entry_points": [
    "duckdb.py"
  ],
  "internal_deps": [
    "warpdata.config.settings",
    "warpdata.util.errors",
    "warpdata.manifest.model"
  ],
  "external_deps": [
    "duckdb",
    "threading",
    "typing"
  ],
  "complexity": "medium",
  "quality": {
    "has_tests": false,
    "has_types": true,
    "has_docs": true,
    "has_error_handling": true,
    "test_coverage": "none",
    "code_smells": []
  }
}