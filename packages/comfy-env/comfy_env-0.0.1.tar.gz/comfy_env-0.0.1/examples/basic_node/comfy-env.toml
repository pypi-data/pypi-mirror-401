# Example isolation configuration for a ComfyUI custom node.
#
# This file defines the isolated Python environment for your node.
# The comfyui-isolation library will auto-discover this file.
#
# Usage in your node:
#     bridge = WorkerBridge.from_config_file(
#         node_dir=Path(__file__).parent,
#         worker_script=Path(__file__).parent / "worker.py",
#     )

[env]
# Unique name for this environment (used for caching)
name = "example-node"

# Python version
python = "3.10"

# CUDA version: "auto" (detect), "12.4", "12.8", or null (CPU only)
cuda = "auto"

# Optional: specific PyTorch version (if not specified, latest from index is used)
# pytorch_version = "2.4.1"


[packages]
# Required packages
requirements = [
    "torch",
    "torchvision",
    "pillow",
    "numpy",
]

# Optional: path to additional requirements.txt (relative to this file's directory)
# requirements_file = "requirements.txt"


[sources]
# Custom wheel repositories (passed as --find-links to pip)
# wheel_sources = [
#     "https://my-custom-wheels.github.io/",
# ]

# Extra package indexes (passed as --extra-index-url to pip)
# index_urls = [
#     "https://test.pypi.org/simple/",
# ]


[variables]
# Define variables for substitution in requirements.
# You can reference these with {variable_name} syntax.
#
# Auto-populated variables (no need to define):
#   {cuda_version} - e.g., "12.4"
#   {cuda_short} - e.g., "124"
#   {pytorch_version} - e.g., "2.9.1"
#   {pytorch_short} - e.g., "291" (version without dots)
#   {pytorch_mm} - e.g., "29" (major.minor without dot, for wheel names)
#
# Example:
#   pytorch_version = "2.4.1"
#   pytorch3d_version = "0.7.8+5043d15pt{pytorch_version}cu{cuda_short}"
#   flex_gemm = "0.0.1+cu{cuda_short}torch{pytorch_mm}"
