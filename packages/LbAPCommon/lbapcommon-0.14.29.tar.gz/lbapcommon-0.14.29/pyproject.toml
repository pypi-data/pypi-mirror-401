
[build-system]
requires = ["setuptools>=61.0", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"


[project]
name = "LbAPCommon"
description = "Common utilities used by LHCb DPA WP2 related software"
keywords = ["LHCb HEP CERN"]
readme = "README.md"
authors = [
    {name = "LHCb"},
]
classifiers = [
    "Development Status :: 3 - Alpha",
    "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)",
    "Programming Language :: Python :: 3",
]
requires-python = ">=3.12"
dependencies = [
    "awkward>=2.1.1",
    "boost-histogram",
    "hist",
    "jinja2",
    "lxml",
    "matplotlib",
    "numpy",
    "pandas",
    "pyyaml",
    "requests",
    "setuptools",
    "uproot>=5.0.0",
    "networkx",
    "pydantic>2",
    "lbdiracwrappers",
    "cwl-utils",
    "cwltool",
]
dynamic = ["version"]

[tool.setuptools_scm]

[project.urls]
Homepage = "https://gitlab.cern.ch/lhcb-dpa/analysis-productions/LbAPCommon"
"Bug Reports" = "https://gitlab.cern.ch/lhcb-dpa/analysis-productions/LbAPCommon/issues"
Source = "https://gitlab.cern.ch/lhcb-dpa/analysis-productions/LbAPCommon"

[project.optional-dependencies]
testing = [
    "pytest",
    "pytest-cov",
    "pytest-timeout",
    "flaky",
]

[tool.ruff]
lint.select = ["E", "F", "B", "I", "PLE"]
lint.ignore = ["B905", "B008", "B006", "B904"]
line-length = 150
src = ["src", "tests"]
exclude = ["tests/data/data-pkg-repo/"]

[tool.pytest]
addopts = [
  "--cov=LbAPCommon",
  "--cov-report=term-missing"
]

[project.scripts]
dirac-production-yaml-to-cwl = "LbAPCommon.prod_request_to_cwl:main"
