<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- å…¶ä»–ä»£ç ä¸å˜ï¼Œæ–°å¢è¿™è¡Œ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text x=%220%22 y=%2290%22 font-size=%2290%22>ğŸ“Š</text></svg>" type="image/svg+xml">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­–ç•¥ç®¡ç†</title>
    <style>
        /* æ ·å¼ä¸ä¹‹å‰ä¸€è‡´ï¼Œçœç•¥é‡å¤éƒ¨åˆ† */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Microsoft YaHei", Arial, sans-serif; margin: 20px; background-color: #f8f9fa; }
        h1 { text-align: center; margin: 20px 0; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; }
        .table-section { 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
            padding: 20px; 
            margin-bottom: 30px;
        }
        .section-title { 
            font-size: 18px; 
            font-weight: bold; 
            margin-bottom: 15px; 
            color: #2c3e50; 
            padding-bottom: 10px; 
            border-bottom: 1px solid #eee;
        }
        .position-table, .strategy-table { 
            width: 100%; 
            border-collapse: collapse; 
            font-size: 14px;
        }
        .position-table th, .strategy-table th { 
            background-color: #f1f3f5; 
            color: #212529; 
            padding: 12px 10px; 
            text-align: left; 
            border: 1px solid #dee2e6;
            position: sticky;
            top: 0;
        }
        .position-table td, .strategy-table td { 
            padding: 10px; 
            border: 1px solid #dee2e6; 
        }
        .position-table tr:hover, .strategy-table tr:hover { 
            background-color: #f8f9fa; 
        }
        .pos-long { background-color: #fff5f5; }
        .pos-short { background-color: #f0f7ff; }
        .profit-positive { color: #dc3545; font-weight: 500; }
        .profit-negative { color: #007bff; font-weight: 500; }
        .price-up { color: #dc3545; }
        .price-down { color: #007bff; }
        .strategy-name { 
            font-weight: bold; 
            background-color: #e8f4f8; 
            padding: 5px 10px; 
            border-radius: 4px;
        }
        .contract-item { padding-left: 20px; }
        button { 
            padding: 4px 10px; 
            border: none; 
            border-radius: 3px; 
            cursor: pointer; 
            font-size: 13px;
            margin-right: 5px;
        }
        button.enable { background-color: #28a745; color: white; }
        button.pause { background-color: #dc3545; color: white; }
        button.strategy-btn { margin-left: 10px; }
    </style>
</head>
<body>
    <h1>ç­–ç•¥ç®¡ç†</h1>
    <div class="container">
        <!-- æŒä»“æ˜ç»†è¡¨æ ¼ -->
        <div class="table-section">
            <div class="section-title">æŒä»“æ˜ç»†</div>
            <table class="position-table">
                <tr>
                    <th>åˆçº¦å</th>
                    <th>å¤š/ç©º</th>
                    <th>æ•°é‡ï¼ˆæ‰‹ï¼‰</th>
                    <th>å¼€ä»“å‡ä»·</th>
                    <th>æµ®åŠ¨ç›ˆäº</th>
                    <th>æœ€æ–°ä»·</th>
                </tr>
                <tbody id="position-table-body"></tbody>
            </table>
        </div>

        <!-- ç­–ç•¥-åˆçº¦ç®¡ç†è¡¨æ ¼ -->
        <div class="table-section">
            <div class="section-title">ç­–ç•¥-åˆçº¦ç®¡ç†</div>
            <table class="strategy-table">
                <tr>
                    <th>ç­–ç•¥å</th>
                    <th>åŒ…å«åˆçº¦</th>
                    <th>æ“ä½œ</th>
                </tr>
                <tbody id="strategy-table-body"></tbody>
            </table>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
    <script>
        const socket = io.connect(document.domain + ':' + location.port, {
            transports: ['polling'],  // ç¦ç”¨ WebSocketï¼Œåªç”¨é•¿è½®è¯¢
            reconnection: true,
            reconnectionAttempts: 100,  // æœ€å¤šé‡è¿100æ¬¡
            reconnectionDelay: 1000,    // é‡è¿é—´éš”1ç§’
            reconnectionDelayMax: 5000, // æœ€å¤§é‡è¿é—´éš”5ç§’
            pingTimeout: 120000,        // ä¸åç«¯ä¸€è‡´ï¼ˆ120ç§’ï¼‰
            pingInterval: 30000         // ä¸åç«¯ä¸€è‡´ï¼ˆ30ç§’ï¼‰
        });

        // ç›‘å¬è¿æ¥çŠ¶æ€ï¼Œæ‰“å°æ—¥å¿—
        socket.on('connect', function() {
            console.log("âœ… WebSocket è¿æ¥æˆåŠŸ");
            socket.emit('request_initial_data'); // è¿æ¥æˆåŠŸåè¯·æ±‚åˆå§‹æ•°æ®
        });

        socket.on('connect_error', (error) => {
            console.error("âŒ è¿æ¥é”™è¯¯ï¼ˆå¯èƒ½æ˜¯æ•°æ®è§£æå¤±è´¥ï¼‰ï¼š", error);
        });


        // ç›‘å¬è¿æ¥çŠ¶æ€ï¼Œæ‰“å°è¯¦ç»†åŸå› 
        socket.on('disconnect', function(reason) {
            console.error(`âš ï¸ WebSocket æ–­å¼€åŸå› ï¼š${reason}`);
            // å¸¸è§åŸå› ï¼šping è¶…æ—¶ï¼ˆåç«¯æ²¡æ”¶åˆ°å‰ç«¯ pingï¼‰ã€æœåŠ¡å™¨è¿‡è½½ã€ç½‘ç»œæ³¢åŠ¨
            if (reason === 'ping timeout') {
                console.error("âŒ æ–­å¼€åŸå› ï¼šping è¶…æ—¶ï¼ˆç½‘ç»œä¸ç¨³å®šæˆ–åç«¯å‹åŠ›å¤§ï¼‰");
            } else if (reason === 'transport close') {
                console.error("âŒ æ–­å¼€åŸå› ï¼šä¼ è¾“é€šé“å…³é—­ï¼ˆç½‘ç»œä¸­æ–­ï¼‰");
            }
        });
        // å­˜å‚¨åˆçº¦IDä¸æŒä»“è¡Œçš„æ˜ å°„ï¼ˆç”¨äºå¿«é€Ÿæ›´æ–°ï¼‰
        const positionMap = new Map(); // key: "åˆçº¦ID_å¤šç©º", value: è¡ŒDOM

        // åˆå§‹åŒ–ï¼šæ¥æ”¶å…¨é‡æ•°æ®
        socket.on('initial_data', function(data) {
            console.log("åˆå§‹æ•°æ®åˆçº¦åˆ—è¡¨ï¼š", data.flatMap(s => s.contracts.map(c => c.name)));
            // éªŒè¯æ•°æ®æ˜¯å¦ä¸ºæ•°ç»„
            if (!Array.isArray(data)) {
                console.error("åˆå§‹æ•°æ®ä¸æ˜¯æ•°ç»„ï¼", data);
                return;
            }
            // é€ä¸ªæ‰“å°ç­–ç•¥ï¼Œæ’æŸ¥å¼‚å¸¸åˆçº¦
            data.forEach((strategy, sIdx) => {
                //console.log(`ç­–ç•¥${sIdx}ï¼š`, strategy);
                if (strategy.contracts && Array.isArray(strategy.contracts)) {
                    strategy.contracts.forEach((contract, cIdx) => {
                        //console.log(`ç­–ç•¥${sIdx}-åˆçº¦${cIdx}ï¼š`, contract);
                        // æ£€æŸ¥å…³é”®å­—æ®µæ˜¯å¦å­˜åœ¨
                        const requiredFields = ['name', 'pos_long', 'float_profit_long', 'latest_price'];
                        requiredFields.forEach(field => {
                            if (contract[field] === undefined) {
                                console.error(`åˆçº¦${cIdx}ç¼ºå°‘å­—æ®µï¼š${field}`);
                            }
                        });
                    });
                } else {
                    console.error(`ç­–ç•¥${sIdx}æ— åˆæ³•åˆçº¦åˆ—è¡¨`);
                }
            });
            // éªŒè¯æ¯ä¸ªç­–ç•¥æ˜¯å¦åŒ…å«å¿…è¦å­—æ®µ
            const validStrategies = data.filter(strategy => {
                const hasContracts = strategy.contracts && Array.isArray(strategy.contracts);
                if (!hasContracts) console.error("ç­–ç•¥ç¼ºå°‘åˆçº¦åˆ—è¡¨ï¼š", strategy);
                return hasContracts;
            });
            // åªæ¸²æŸ“åˆæ³•æ•°æ®
            renderPositionTable(validStrategies);
            renderStrategyTable(validStrategies);
        });

        // å•ç‹¬å†™ç›‘å¬å‡½æ•°ï¼Œé¿å…è¢«è¦†ç›–
        function handleBatchUpdates(batchData) {
            batchData.forEach(strategy => {
                // æ›´æ–°ç­–ç•¥è¡¨æ ¼çŠ¶æ€
                const strategyRow = document.querySelector(`tr[data-strategy-id="${strategy.id}"]`);
                if (strategyRow) {
                    strategy.contracts.forEach(contract => {
                        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
                        const statusElem = strategyRow.querySelector(`.contract-item[data-contract-id="${contract.id}"] .contract-status`);
                        if (statusElem) {
                            statusElem.textContent = contract.status === 'enable' ? 'å·²å¯ç”¨' : 'å·²æš‚åœ';
                            statusElem.style.color = contract.status === 'enable' ? '#28a745' : '#6c757d';
                        }
                        // æ›´æ–°æŒä»“æ•°æ®
                        addOrUpdatePositionRow(contract);
                    });
                }
            });
        }

        // ç»‘å®šæ‰¹é‡äº‹ä»¶ç›‘å¬ï¼ˆç¡®ä¿ä¸è¢«å…¶ä»–ä»£ç è¦†ç›–ï¼‰
        socket.off('batch_strategy_updates'); // å…ˆç§»é™¤æ—§ç›‘å¬ï¼Œé¿å…é‡å¤
        socket.on('batch_strategy_updates', handleBatchUpdates);

        // ä¼˜åŒ–ç­–ç•¥æ›´æ–°ç›‘å¬ï¼ˆç¡®ä¿æ”¶åˆ°å°±æ›´ï¼‰
        // ç›‘å¬åç«¯æ‰¹é‡æ›´æ–°äº‹ä»¶ï¼ˆå”¯ä¸€æ•°æ®æºï¼‰
        socket.on('batch_strategy_updates', function(batchData) {
            console.log(`ğŸ“¥ æ”¶åˆ°æ‰¹é‡æ›´æ–°ï¼š${batchData.length} ä¸ªç­–ç•¥`);
            
            // éå†æ‰€æœ‰ç­–ç•¥çš„æ›´æ–°æ•°æ®
            batchData.forEach(strategy => {
                console.log(`  å¤„ç†ç­–ç•¥ï¼š${strategy.id}ï¼ˆ${strategy.name || 'æœªå‘½å'}ï¼‰`);
                
                // éå†ç­–ç•¥ä¸‹çš„æ‰€æœ‰åˆçº¦
                strategy.contracts.forEach(contract => {
                    console.log(`  - åˆçº¦ ${contract.name}ï¼šçŠ¶æ€=${contract.status}ï¼Œæœ€æ–°ä»·=${contract.latest_price}`);
                    
                    // 1. æ›´æ–°ç­–ç•¥ç®¡ç†è¡¨æ ¼çš„åˆçº¦çŠ¶æ€
                    const strategyRow = document.querySelector(`.strategy-table tbody tr[data-strategy-id="${strategy.id}"]`);
                    if (strategyRow) {
                        // æ‰¾åˆ°å½“å‰åˆçº¦å¯¹åº”çš„DOMå…ƒç´ 
                        const contractItem = strategyRow.querySelector(`.contract-item[data-contract-id="${contract.id}"]`);
                        if (contractItem) {
                            // æ›´æ–°çŠ¶æ€æ–‡æœ¬å’Œé¢œè‰²
                            const statusElem = contractItem.querySelector('.contract-status');
                            if (statusElem) {
                                statusElem.textContent = contract.status === 'enable' ? 'å·²å¯ç”¨' : 'å·²æš‚åœ';
                                statusElem.style.color = contract.status === 'enable' ? '#28a745' : '#6c757d';
                            }
                            
                            // ï¼ˆå¯é€‰ï¼‰æ›´æ–°å…¶ä»–ç­–ç•¥è¡¨æ ¼å­—æ®µï¼ˆå¦‚æœ€æ–°ä»·ï¼‰
                            const priceElem = contractItem.querySelector('.contract-price');
                            if (priceElem) {
                                priceElem.textContent = contract.latest_price.toFixed(2);
                            }
                        } else {
                            console.warn(`  æœªæ‰¾åˆ°åˆçº¦DOMï¼š${contract.id}ï¼ˆç­–ç•¥${strategy.id}ï¼‰`);
                        }
                    } else {
                        console.warn(`  æœªæ‰¾åˆ°ç­–ç•¥è¡ŒDOMï¼š${strategy.id}`);
                    }
                    
                    // 2. æ›´æ–°æŒä»“è¡¨æ ¼æ•°æ®
                    addOrUpdatePositionRow(contract);
                });
            });
        });

        // ä¿ç•™æ—§äº‹ä»¶ç›‘å¬ï¼ˆå…¼å®¹æ‰‹åŠ¨ç‚¹å‡»æ¨é€ï¼Œå¯é€‰ï¼‰
        socket.on('strategy_update', function(updatedStrategy) {
            console.log("âœ… æ”¶åˆ°å•æ¡ç­–ç•¥æ›´æ–°ï¼š", updatedStrategy.id);
            // å¤ç”¨æ‰¹é‡æ›´æ–°çš„å¤„ç†é€»è¾‘
            const batchData = [updatedStrategy];
            batchData.forEach(updatedStrategy => {
                // ï¼ˆå¤åˆ¶ä¸Šé¢æ‰¹é‡äº‹ä»¶ä¸­çš„å¤„ç†ä»£ç ï¼Œç¡®ä¿å•æ¡æ›´æ–°ä¹Ÿèƒ½ç”Ÿæ•ˆï¼‰
                const strategyId = updatedStrategy.id;
                const strategyRow = document.querySelector(`.strategy-table tbody tr[data-strategy-id="${strategyId}"]`);
                updatedStrategy.contracts.forEach(contract => {
                    addOrUpdatePositionRow(contract);
                    if (strategyRow) {
                        const contractItem = strategyRow.querySelector(`.contract-item[data-contract-id="${contract.id}"]`);
                        if (contractItem) {
                            const statusElem = contractItem.querySelector('.contract-status');
                            if (statusElem) {
                                statusElem.textContent = contract.status === 'enable' ? 'å·²å¯ç”¨' : 'å·²æš‚åœ';
                                statusElem.style.color = contract.status === 'enable' ? '#28a745' : '#6c757d';
                            }
                        }
                    }
                });
            });
        });

        // åˆå§‹åŒ–æ¸²æŸ“æŒä»“è¡¨æ ¼
        function renderPositionTable(strategies) {
            const tbody = document.getElementById('position-table-body');
            tbody.innerHTML = '';
            positionMap.clear();

            strategies.forEach(strategy => {
                strategy.contracts.forEach(contract => {
                    addOrUpdatePositionRow(contract); // å¤ç”¨æ›´æ–°é€»è¾‘
                });
            });
        }

        // åˆå§‹åŒ–æ¸²æŸ“ç­–ç•¥è¡¨æ ¼
        function renderStrategyTable(strategies) {
            const tbody = document.getElementById('strategy-table-body');
            tbody.innerHTML = '';

            strategies.forEach(strategy => {
                renderStrategyRow(strategy); // æ¸²æŸ“å•æ¡ç­–ç•¥è¡Œ
            });
        }

        // æŒä»“è¡¨æ ¼æ›´æ–°å‡½æ•°ï¼ˆé…å¥—å®Œæ•´å®ç°ï¼‰
        // æŒä»“è¡¨æ ¼æ›´æ–°å‡½æ•°ï¼ˆé…å¥—å®Œæ•´å®ç°ï¼‰
        function addOrUpdatePositionRow(contract) {
            const positionTbody = document.getElementById('position-table-body');
            if (!positionTbody) {
                console.error("æŒä»“è¡¨æ ¼tbodyä¸å­˜åœ¨");
                return;
            }

            // ç”Ÿæˆå”¯ä¸€è¡Œé”®ï¼ˆåŸºäºåˆçº¦ID+å¤šç©ºæ–¹å‘ï¼Œé¿å…é‡å¤ï¼‰
            const longKey = `pos_${contract.id}_long`;
            const shortKey = `pos_${contract.id}_short`;

            // æ›´æ–°å¤šå¤´æŒä»“è¡Œ
            let longRow = document.querySelector(`tr[data-key="${longKey}"]`);
            if (!longRow) {
                longRow = document.createElement('tr');
                longRow.dataset.key = longKey;
                positionTbody.appendChild(longRow);
            }
            // ç§»é™¤æœ€åä¸€åˆ—çŠ¶æ€æ•°æ®
            longRow.innerHTML = `
                <td>${contract.name}</td>
                <td>å¤šå¤´</td>
                <td>${contract.pos_long}</td>
                <td>${contract.open_price_long ? contract.open_price_long.toFixed(2) : '-'}</td>
                <td>${contract.float_profit_long >= 0 ? '+' : ''}${contract.float_profit_long.toFixed(2)}</td>
                <td>${contract.latest_price.toFixed(2)}</td>
            `;

            // æ›´æ–°ç©ºå¤´æŒä»“è¡Œ
            let shortRow = document.querySelector(`tr[data-key="${shortKey}"]`);
            if (!shortRow) {
                shortRow = document.createElement('tr');
                shortRow.dataset.key = shortKey;
                positionTbody.appendChild(shortRow);
            }
            // ç§»é™¤æœ€åä¸€åˆ—çŠ¶æ€æ•°æ®
            shortRow.innerHTML = `
                <td>${contract.name}</td>
                <td>ç©ºå¤´</td>
                <td>${contract.pos_short}</td>
                <td>${contract.open_price_short ? contract.open_price_short.toFixed(2) : '-'}</td>
                <td>${contract.float_profit_short >= 0 ? '+' : ''}${contract.float_profit_short.toFixed(2)}</td>
                <td>${contract.latest_price.toFixed(2)}</td>
            `;
        }

        // æ¸²æŸ“å•æ¡ç­–ç•¥è¡Œï¼ˆç”¨äºåˆå§‹åŒ–å’Œæ›´æ–°ï¼‰
        function renderStrategyRow(strategy) {
            let row = document.querySelector(`.strategy-table tbody tr[data-strategy-id="${strategy.id}"]`);
            if (!row) {
                row = document.createElement('tr');
                document.getElementById('strategy-table-body').appendChild(row);
            }

            // ç”Ÿæˆå¤šä¸ªåˆçº¦çš„ HTMLï¼ˆå¾ªç¯æ¸²æŸ“ç­–ç•¥ä¸‹æ‰€æœ‰åˆçº¦ï¼‰
            let contractHtml = '';
            strategy.contracts.forEach(contract => {
                contractHtml += `
                    <div class="contract-item" data-contract-id="${contract.id}" style="margin: 5px 0; padding: 3px; border-bottom: 1px dashed #eee;">
                        ${contract.name} 
                        <span class="contract-status" style="margin-left:10px; font-size:12px; color: ${contract.status === 'enable' ? '#28a745' : '#6c757d'}">
                            ${contract.status === 'enable' ? 'å·²å¯ç”¨' : 'å·²æš‚åœ'}
                        </span>
                        <button class="enable" onclick="setContractStatus('${strategy.id}', '${contract.id}', 'enable')">å¯ç”¨</button>
                        <button class="pause" onclick="setContractStatus('${strategy.id}', '${contract.id}', 'pause')">æš‚åœ</button>
                    </div>
                `;
            });

            // å¡«å……ç­–ç•¥è¡Œå†…å®¹ï¼ˆåŒ…å«å¤šä¸ªåˆçº¦ï¼‰
            row.innerHTML = `
                <td class="strategy-name">${strategy.name}</td>
                <td><div class="contract-list">${contractHtml}</div></td>
                <td>
                    <button class="enable strategy-btn" onclick="setStrategyStatus('${strategy.id}', 'enable')">å¯ç”¨ç­–ç•¥</button>
                    <button class="pause strategy-btn" onclick="setStrategyStatus('${strategy.id}', 'pause')">æš‚åœç­–ç•¥</button>
                </td>
            `;

            // æœ€åè®¾ç½® data-strategy-idï¼ˆé¿å…è¢« innerHTML è¦†ç›–ï¼‰
            row.setAttribute('data-strategy-id', strategy.id);
        }

        // æ ¹æ®ç­–ç•¥æ›´æ–°æŒä»“è¡¨æ ¼
        function updatePositionByStrategy(strategy) {
            strategy.contracts.forEach(contract => {
                addOrUpdatePositionRow(contract); // å¤ç”¨æ–°å¢/æ›´æ–°é€»è¾‘
            });
        }

        // æ›´æ–°ç­–ç•¥è¡¨æ ¼ä¸­çš„å•ä¸ªç­–ç•¥è¡Œ
        function updateStrategyTable(strategy) {
            renderStrategyRow(strategy); // å¤ç”¨æ¸²æŸ“é€»è¾‘
        }

        // ç­–ç•¥çº§æ“ä½œ
        // ç­–ç•¥çº§æ“ä½œ
        function setStrategyStatus(strategyId, status) {
            console.log(`è§¦å‘ç­–ç•¥çŠ¶æ€åˆ‡æ¢ï¼š${strategyId} â†’ ${status}`);
            
            // å‰ç«¯å…ˆä¸´æ—¶æ›´æ–°ï¼ˆæ— éœ€ç­‰åç«¯æ¨é€ï¼‰
            const strategyRow = document.querySelector(`.strategy-table tbody tr[data-strategy-id="${strategyId}"]`);
            if (strategyRow) {
                // æ›´æ–°è¯¥ç­–ç•¥ä¸‹æ‰€æœ‰åˆçº¦çš„çŠ¶æ€æ˜¾ç¤º
                const contractItems = strategyRow.querySelectorAll('.contract-item');
                contractItems.forEach(item => {
                    const statusElem = item.querySelector('.contract-status');
                    if (statusElem) {
                        statusElem.textContent = status === 'enable' ? 'å·²å¯ç”¨' : 'å·²æš‚åœ';
                        statusElem.style.color = status === 'enable' ? '#28a745' : '#6c757d';
                    }
                });
            }
            
            // å‘é€è¯·æ±‚ç»™åç«¯
            socket.emit('update_strategy_status', {
                strategy_id: strategyId,
                status: status
            });
        }

        // ä¿ç•™ç‚¹å‡»å³æ—¶åé¦ˆï¼ˆå…³é”®æå‡ä½“éªŒï¼‰
        function setContractStatus(strategyId, contractId, status) {
            console.log(`è§¦å‘åˆçº¦çŠ¶æ€åˆ‡æ¢ï¼š${contractId} â†’ ${status}`);
            // å‰ç«¯å…ˆä¸´æ—¶æ›´æ–°ï¼ˆæ— éœ€ç­‰åç«¯æ¨é€ï¼‰
            const strategyRow = document.querySelector(`.strategy-table tbody tr[data-strategy-id="${strategyId}"]`);
            const contractItem = strategyRow?.querySelector(`.contract-item[data-contract-id="${contractId}"]`);
            const statusElem = contractItem?.querySelector('.contract-status');
            if (statusElem) {
                statusElem.textContent = status === 'enable' ? 'å·²å¯ç”¨' : 'å·²æš‚åœ';
                statusElem.style.color = status === 'enable' ? '#28a745' : '#6c757d';
            }
            // å‘é€è¯·æ±‚ç»™åç«¯
            socket.emit('update_contract_status', {
                strategy_id: strategyId,
                contract_id: contractId,
                status: status
            });
        }

        // è¯·æ±‚åˆå§‹æ•°æ®
        window.onload = function() {
            socket.emit('request_initial_data');
        };
    </script>
</body>
</html>
