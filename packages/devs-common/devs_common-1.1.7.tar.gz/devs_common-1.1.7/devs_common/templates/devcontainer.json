{
  "name": "${localEnv:DEVCONTAINER_NAME:Project}",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "TZ": "${localEnv:TZ:UTC}"
    }
  },
  "runArgs": [
    "--cap-add=NET_ADMIN",
    "--cap-add=NET_RAW"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "vscode.git",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "ms-python.debugpy",
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.black-formatter",
        "ms-python.isort",
        "Anthropic.claude-code"
      ],
      "settings": {
        "editor.formatOnSave": false,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": "explicit"
        },
        "editor.detectIndentation": false,
        "editor.insertSpaces": true,
        "editor.tabSize": 2,
        "[python]": {
          "editor.formatOnSave": true,
          "editor.formatOnType": true,
          "editor.tabSize": 4,
          "editor.codeActionsOnSave": {
            "source.organizeImports": "never"
          }
        },
        "python.defaultInterpreterPath": "/home/node/.devs-venv/workspace-venv/bin/python",
        "python.terminal.activateEnvironment": true,
        "python.interpreter.infoVisibility": "never",
        "python.venvFolders": [".devs-venv"],
        "python.languageServer": "Pylance",
        "python.analysis.typeCheckingMode": "off",
        "python.analysis.autoImportCompletions": true,
        "python.analysis.diagnosticSeverityOverrides": {
          "reportUnusedImport": "information",
          "reportUnusedVariable": "information"
        },
        "pylint.enabled": false,
        "gitlens.mode": "zen",
        "python.analysis.diagnosticMode": "openFilesOnly",
        "settingsSync.ignoredExtensions": [],
        "settingsSync.keybindingsPerPlatform": false,
        "extensions.autoCheckUpdates": false,
        "extensions.autoUpdate": false,
        "extensions.ignoreRecommendations": true,
        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.profiles.linux": {
          "bash": {
            "path": "bash",
            "icon": "terminal-bash"
          },
          "zsh": {
            "path": "zsh"
          }
        }
      }
    }
  },
  "remoteUser": "node",
  "mounts": [
    "source=claude-code-bashhistory,target=/commandhistory,type=volume",
    "source=${localEnv:HOME}/.devs/claudeconfig,target=/home/node/claudeconfig,type=bind",
    "source=${localEnv:HOME}/.devs/codexconfig,target=/home/node/codexconfig,type=bind",
    "source=${localEnv:DEVS_ENV_MOUNT_PATH},target=/home/node/.devs-env,type=bind",
    "source=${localEnv:DEVS_BRIDGE_MOUNT_PATH},target=/home/node/bridge,type=bind",
    // Remove the extensions mount to get fresh state each time
    // "source=${localEnv:WORKSPACE_FOLDER_NAME}-vscode-extensions,target=/home/node/.vscode-server/extensions,type=volume",
    // .vscode-server includes extension state which we don't want to keep
    // "source=${localEnv:WORKSPACE_FOLDER_NAME}-vscode-data,target=/home/node/.vscode-server,type=volume",
    "source=${localEnv:WORKSPACE_FOLDER_NAME}-vscode-downloads,target=/home/node/.vscode-extensions-cache-volume,type=volume"
  ],
  "remoteEnv": {
    "NODE_OPTIONS": "--max-old-space-size=4096",
    "POWERLEVEL9K_DISABLE_GITSTATUS": "true",
    "LANG": "en_US.UTF-8",
    "LC_ALL": "en_US.UTF-8",
    "GIT_REMOTE_URL": "${localEnv:GIT_REMOTE_URL}",
    "WORKSPACE_FOLDER_NAME": "${localEnv:WORKSPACE_FOLDER_NAME}",
    "DEVS_DEBUG": "${localEnv:DEVS_DEBUG}",
    "DEVS_LIVE_MODE": "${localEnv:DEVS_LIVE_MODE}",
    "DEVS_ENV_MOUNT_PATH": "${localEnv:DEVS_ENV_MOUNT_PATH}",
    "DEVS_BRIDGE_MOUNT_PATH": "${localEnv:DEVS_BRIDGE_MOUNT_PATH}"
  },
  "workspaceFolder": "/workspaces/${localEnv:WORKSPACE_FOLDER_NAME}",
  "postCreateCommand": "/usr/local/bin/post-create-wrapper.sh",
  "forwardPorts": [],
  "portsAttributes": {
    "3306": {
      "onAutoForward": "ignore"
    },
    "6379": {
      "onAutoForward": "ignore"
    }
  }
}