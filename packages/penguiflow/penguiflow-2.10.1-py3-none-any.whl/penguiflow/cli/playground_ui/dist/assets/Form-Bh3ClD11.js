import{J as Ra,K as De,L as Ta,M as Ia,N as Oa,O as Ca,P as Da,Q as Ka,p as ja,a as H,b as Ke,s as Ba,u as Ja,f as v,i as m,e as c,h as x,j as ce,g as e,c as ea,t as u,l as aa,n as r,F as o,m as k,R as D,w as W,D as S,A as h,o as pe,r as Pa,d as Qa,x as Va,S as Wa,T as Ga}from"./index-DW7rebFp.js";function ta(l,d,U=!1){if(l.multiple){if(d==null)return;if(!Oa(d))return Ca();for(var L of l.options)L.selected=d.includes(be(L));return}for(L of l.options){var K=be(L);if(Da(K,d)){L.selected=!0;return}}(!U||d!==void 0)&&(l.selectedIndex=-1)}function Ha(l){var d=new MutationObserver(()=>{ta(l,l.__value)});d.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ka(()=>{d.disconnect()})}function ra(l,d,U=d){var L=new WeakSet,K=!0;Ra(l,"change",q=>{var X=q?"[selected]":":checked",T;if(l.multiple)T=[].map.call(l.querySelectorAll(X),be);else{var se=l.querySelector(X)??l.querySelector("option:not([disabled])");T=se&&be(se)}U(T),De!==null&&L.add(De)}),Ta(()=>{var q=d();if(l===document.activeElement){var X=Ia??De;if(L.has(X))return}if(ta(l,q,K),K&&q===void 0){var T=l.querySelector(":checked");T!==null&&(q=be(T),U(q))}l.__value=q,K=!1}),Ha(l)}function be(l){return"__value"in l?l.__value:l.value}var Ua=v('<h3 class="form-title svelte-y841dk"> </h3>'),Xa=v('<p class="form-description svelte-y841dk"> </p>'),Ya=v('<span class="required svelte-y841dk">*</span>'),Za=v('<label class="svelte-y841dk"> <!></label>'),$a=v('<input class="svelte-y841dk"/>'),er=v('<input type="number" class="svelte-y841dk"/>'),ar=v('<textarea rows="3" class="svelte-y841dk"></textarea>'),rr=v("<option> </option>"),tr=v('<select class="svelte-y841dk"><option>Select...</option><!></select>'),nr=v("<option> </option>"),sr=v('<select multiple class="svelte-y841dk"></select>'),vr=v('<label class="checkbox-label svelte-y841dk"><input type="checkbox" class="svelte-y841dk"/> <span> </span></label>'),lr=v('<label class="radio-label svelte-y841dk"><input type="radio" class="svelte-y841dk"/> <span> </span></label>'),ur=v('<div class="radio-group svelte-y841dk"></div>'),ir=v('<input type="date" class="svelte-y841dk"/>'),or=v('<input type="datetime-local" class="svelte-y841dk"/>'),_r=v('<input type="time" class="svelte-y841dk"/>'),mr=v('<input type="range" class="svelte-y841dk"/> <span class="range-value"> </span>',1),dr=v('<input type="color" class="svelte-y841dk"/>'),cr=v("<span> </span>"),pr=v('<div class="file-list svelte-y841dk"></div>'),br=v('<input type="file" class="svelte-y841dk"/> <!>',1),yr=v('<span class="help-text svelte-y841dk"> </span>'),fr=v('<span class="error-text svelte-y841dk"> </span>'),hr=v("<div><!> <!> <!> <!></div>"),gr=v('<button type="button" class="btn-cancel svelte-y841dk"> </button>'),xr=v('<form><!> <!> <div class="form-fields svelte-y841dk"></div> <div class="form-actions svelte-y841dk"><!> <button type="submit" class="btn-submit svelte-y841dk"> </button></div></form>');function qr(l,d){ja(d,!0);const U=[];let L=H(d,"title",3,""),K=H(d,"description",3,""),q=H(d,"fields",19,()=>[]),X=H(d,"submitLabel",3,"Submit"),T=H(d,"cancelLabel",3,void 0),se=H(d,"layout",3,"vertical"),je=H(d,"onResult",3,void 0),n=Ke({}),j=Ba(Ke({})),N=Ke({});Ja(()=>{for(const t of q())n[t.name]===void 0&&t.default!==void 0&&(n[t.name]=t.default)});function na(){Qa(j,{},!0);let t=!0;for(const a of q()){const s=n[a.name],i=Array.isArray(s)&&s.length===0;if(a.required&&(s===void 0||s===""||s===null||i)){e(j)[a.name]=`${a.label||a.name} is required`,t=!1;continue}const b=a.validation;b&&s!==void 0&&s!==""&&(b.min!==void 0&&typeof s=="number"&&s<Number(b.min)&&(e(j)[a.name]=`Minimum value is ${b.min}`,t=!1),b.max!==void 0&&typeof s=="number"&&s>Number(b.max)&&(e(j)[a.name]=`Maximum value is ${b.max}`,t=!1),b.minLength!==void 0&&typeof s=="string"&&s.length<Number(b.minLength)&&(e(j)[a.name]=`Minimum length is ${b.minLength}`,t=!1),b.pattern&&typeof s=="string"&&!new RegExp(String(b.pattern)).test(s)&&(e(j)[a.name]=b.message||"Invalid format",t=!1))}return t}function sa(){for(const a of q())N[a.name]=!0;if(!na())return;const t={...n};je()?.(t)}function va(){je()?.({_cancelled:!0})}function ge(t){return t?.map(a=>typeof a=="string"?{value:a,label:a}:a)??[]}function ye(t,a){const s=t.validation?.[a];if(typeof s=="number")return s;if(typeof s=="string"){const i=Number(s);return Number.isNaN(i)?void 0:i}}function la(t,a){const s=a?Array.from(a).map(i=>({name:i.name,size:i.size,type:i.type})):[];n[t]=s}var fe=xr();let Be;var Je=c(fe);{var ua=t=>{var a=Ua(),s=c(a);u(()=>k(s,L())),r(t,a)};m(Je,t=>{L()&&t(ua)})}var Pe=x(Je,2);{var ia=t=>{var a=Xa(),s=c(a);u(()=>k(s,K())),r(t,a)};m(Pe,t=>{K()&&t(ia)})}var Qe=x(Pe,2);ce(Qe,21,q,pe,(t,a,s)=>{const i=ea(()=>`field-${e(a).name}`),b=ea(()=>N[e(a).name]&&e(j)[e(a).name]);var xe=hr();let We;var Ge=c(xe);{var ca=p=>{var _=Za(),A=c(_),ke=x(A);{var qe=z=>{var y=Ya();r(z,y)};m(ke,z=>{e(a).required&&z(qe)})}u(()=>{o(_,"for",e(i)),k(A,`${(e(a).label||e(a).name)??""} `)}),r(p,_)};m(Ge,p=>{e(a).type!=="checkbox"&&e(a).type!=="switch"&&p(ca)})}var He=x(Ge,2);{var pa=p=>{var _=$a();u(()=>{o(_,"type",e(a).type),o(_,"id",e(i)),o(_,"placeholder",e(a).placeholder),_.required=e(a).required,_.disabled=e(a).disabled}),D("blur",_,()=>N[e(a).name]=!0),W(_,()=>n[e(a).name],A=>n[e(a).name]=A),r(p,_)},ba=p=>{var _=S(),A=h(_);{var ke=z=>{var y=er();u((ve,we)=>{o(y,"id",e(i)),o(y,"placeholder",e(a).placeholder),y.required=e(a).required,y.disabled=e(a).disabled,o(y,"min",ve),o(y,"max",we)},[()=>ye(e(a),"min"),()=>ye(e(a),"max")]),D("blur",y,()=>N[e(a).name]=!0),W(y,()=>n[e(a).name],ve=>n[e(a).name]=ve),r(z,y)},qe=z=>{var y=S(),ve=h(y);{var we=Y=>{var M=ar();u(()=>{o(M,"id",e(i)),o(M,"placeholder",e(a).placeholder),M.required=e(a).required,M.disabled=e(a).disabled}),D("blur",M,()=>N[e(a).name]=!0),W(M,()=>n[e(a).name],Se=>n[e(a).name]=Se),r(Y,M)},ga=Y=>{var M=S(),Se=h(M);{var xa=Z=>{var E=tr(),le=c(E);le.value=le.__value="";var Le=x(le);ce(Le,17,()=>ge(e(a).options),pe,(ue,F)=>{var f=rr(),G=c(f),B={};u(()=>{k(G,e(F).label),B!==(B=e(F).value)&&(f.value=(f.__value=e(F).value)??"")}),r(ue,f)}),u(()=>{o(E,"id",e(i)),E.required=e(a).required,E.disabled=e(a).disabled}),D("blur",E,()=>N[e(a).name]=!0),ra(E,()=>n[e(a).name],ue=>n[e(a).name]=ue),r(Z,E)},ka=Z=>{var E=S(),le=h(E);{var Le=F=>{var f=sr();ce(f,21,()=>ge(e(a).options),pe,(G,B)=>{var $=nr(),J=c($),P={};u(()=>{k(J,e(B).label),P!==(P=e(B).value)&&($.value=($.__value=e(B).value)??"")}),r(G,$)}),u(()=>{o(f,"id",e(i)),f.disabled=e(a).disabled}),D("blur",f,()=>N[e(a).name]=!0),ra(f,()=>n[e(a).name],G=>n[e(a).name]=G),r(F,f)},ue=F=>{var f=S(),G=h(f);{var B=J=>{var P=vr(),ee=c(P),Ne=x(ee,2),Ae=c(Ne);u(()=>{o(ee,"id",e(i)),ee.disabled=e(a).disabled,k(Ae,e(a).label||e(a).name)}),Wa(ee,()=>n[e(a).name],Q=>n[e(a).name]=Q),r(J,P)},$=J=>{var P=S(),ee=h(P);{var Ne=Q=>{var ie=ur();ce(ie,21,()=>ge(e(a).options),pe,(ze,ae)=>{var he=lr(),g=c(he),w,oe=x(g,2),Me=c(oe);u(()=>{o(g,"name",e(a).name),g.disabled=e(a).disabled,w!==(w=e(ae).value)&&(g.value=(g.__value=e(ae).value)??""),k(Me,e(ae).label)}),Ga(U,[s],g,()=>(e(ae).value,n[e(a).name]),Ee=>n[e(a).name]=Ee),r(ze,he)}),r(Q,ie)},Ae=Q=>{var ie=S(),ze=h(ie);{var ae=g=>{var w=ir();u(()=>{o(w,"id",e(i)),w.required=e(a).required,w.disabled=e(a).disabled}),D("blur",w,()=>N[e(a).name]=!0),W(w,()=>n[e(a).name],oe=>n[e(a).name]=oe),r(g,w)},he=g=>{var w=S(),oe=h(w);{var Me=re=>{var I=or();u(()=>{o(I,"id",e(i)),I.required=e(a).required,I.disabled=e(a).disabled}),D("blur",I,()=>N[e(a).name]=!0),W(I,()=>n[e(a).name],Fe=>n[e(a).name]=Fe),r(re,I)},Ee=re=>{var I=S(),Fe=h(I);{var qa=te=>{var O=_r();u(()=>{o(O,"id",e(i)),O.required=e(a).required,O.disabled=e(a).disabled}),D("blur",O,()=>N[e(a).name]=!0),W(O,()=>n[e(a).name],Re=>n[e(a).name]=Re),r(te,O)},wa=te=>{var O=S(),Re=h(O);{var Sa=ne=>{var _e=mr(),V=h(_e),Te=x(V,2),Ie=c(Te);u((R,C)=>{o(V,"id",e(i)),o(V,"min",R),o(V,"max",C),V.disabled=e(a).disabled,k(Ie,n[e(a).name])},[()=>ye(e(a),"min")??0,()=>ye(e(a),"max")??100]),W(V,()=>n[e(a).name],R=>n[e(a).name]=R),r(ne,_e)},La=ne=>{var _e=S(),V=h(_e);{var Te=R=>{var C=dr();u(()=>{o(C,"id",e(i)),C.disabled=e(a).disabled}),W(C,()=>n[e(a).name],Oe=>n[e(a).name]=Oe),r(R,C)},Ie=R=>{var C=S(),Oe=h(C);{var Na=Ce=>{var Xe=br(),me=h(Xe);me.__change=de=>la(e(a).name,de.currentTarget.files);var Aa=x(me,2);{var za=de=>{var Ye=pr();ce(Ye,21,()=>n[e(a).name],pe,(Ma,Ze)=>{var $e=cr(),Ea=c($e);u(Fa=>k(Ea,`${e(Ze).name??""} (${Fa??""} KB)`),[()=>Math.round(e(Ze).size/1024)]),r(Ma,$e)}),r(de,Ye)};m(Aa,de=>{Array.isArray(n[e(a).name])&&n[e(a).name].length>0&&de(za)})}u(()=>{o(me,"id",e(i)),me.required=e(a).required,me.disabled=e(a).disabled}),r(Ce,Xe)};m(Oe,Ce=>{e(a).type==="file"&&Ce(Na)},!0)}r(R,C)};m(V,R=>{e(a).type==="color"?R(Te):R(Ie,!1)},!0)}r(ne,_e)};m(Re,ne=>{e(a).type==="range"?ne(Sa):ne(La,!1)},!0)}r(te,O)};m(Fe,te=>{e(a).type==="time"?te(qa):te(wa,!1)},!0)}r(re,I)};m(oe,re=>{e(a).type==="datetime"?re(Me):re(Ee,!1)},!0)}r(g,w)};m(ze,g=>{e(a).type==="date"?g(ae):g(he,!1)},!0)}r(Q,ie)};m(ee,Q=>{e(a).type==="radio"?Q(Ne):Q(Ae,!1)},!0)}r(J,P)};m(G,J=>{e(a).type==="checkbox"||e(a).type==="switch"?J(B):J($,!1)},!0)}r(F,f)};m(le,F=>{e(a).type==="multiselect"?F(Le):F(ue,!1)},!0)}r(Z,E)};m(Se,Z=>{e(a).type==="select"?Z(xa):Z(ka,!1)},!0)}r(Y,M)};m(ve,Y=>{e(a).type==="textarea"?Y(we):Y(ga,!1)},!0)}r(z,y)};m(A,z=>{e(a).type==="number"?z(ke):z(qe,!1)},!0)}r(p,_)};m(He,p=>{["text","email","password","url","tel"].includes(e(a).type)?p(pa):p(ba,!1)})}var Ue=x(He,2);{var ya=p=>{var _=yr(),A=c(_);u(()=>k(A,e(a).helpText)),r(p,_)};m(Ue,p=>{e(a).helpText&&!e(b)&&p(ya)})}var fa=x(Ue,2);{var ha=p=>{var _=fr(),A=c(_);u(()=>k(A,e(j)[e(a).name])),r(p,_)};m(fa,p=>{e(b)&&p(ha)})}u(()=>We=aa(xe,1,"form-field svelte-y841dk",null,We,{half:e(a).width==="half",third:e(a).width==="third",error:e(b)})),r(t,xe)});var oa=x(Qe,2),Ve=c(oa);{var _a=t=>{var a=gr();a.__click=va;var s=c(a);u(()=>k(s,T())),r(t,a)};m(Ve,t=>{T()&&t(_a)})}var ma=x(Ve,2),da=c(ma);u(()=>{Be=aa(fe,1,"artifact-form svelte-y841dk",null,Be,{horizontal:se()==="horizontal",inline:se()==="inline"}),k(da,X())}),D("submit",fe,t=>{t.preventDefault(),sa()}),r(l,fe),Pa()}Va(["change","click"]);export{qr as default};
