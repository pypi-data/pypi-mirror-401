# User Guide - How to Use Coding Agent Plugin

## ğŸš€ Real User Workflow

### Step 1: Initialize Environment
```bash
agentic-coder init
```

### Step 2: Create a New Project
```bash
# Create project structure
agentic-coder project create "fastapi-login" --description "FastAPI with JWT"

# Run the agent to build it
agentic-coder project run "Build a FastAPI login backend with JWT authentication"
```

**What Happens:**
1. `project create` sets up the folder and database entry.
2. `project run` starts the autonomous agent:
   - Planning agent creates a detailed plan
   - If `--interactive` flag is used, you can review and approve the plan
   - Files are generated in `projects/fastapi-login/`

### Step 3: Navigate to Your Project
```bash
agentic-coder project switch fastapi-login
cd projects/fastapi-login/
```

### Step 4: Make Improvements (Iterative Development)
```bash
# Major feature addition (Autonomous Mode)
agentic-coder project run "Add email verification system"

# Quick file modification (Direct Mode)
agentic-coder improve "add docstrings to auth.py"
```

**What Happens:**
1. Plugin loads your existing project from current directory
2. Analyzes all files in the project
3. Makes targeted modifications (doesn't rewrite everything)
4. Auto-commits each change to git
5. Saves conversation history to `.agent_context/conversation.json`

### Step 4: View Change History
```bash
# Check git log
git log --oneline

# View conversation history
cat .agent_context/conversation.json
```

## ğŸ“ Project Structure Explained

### User Code (What You Work With)
```
app/                    # Your actual application
â”œâ”€â”€ main.py            # Main entry point
â”œâ”€â”€ models.py          # Database models
â”œâ”€â”€ auth.py            # Authentication logic
â””â”€â”€ requirements.txt   # Dependencies
```

### Hidden Context (Agent Internal)
```
.agent_context/        # Hidden from user view
â”œâ”€â”€ planning.md        # Initial plan
â”œâ”€â”€ tasks.md          # Task tracking
â”œâ”€â”€ execution.md      # Execution log
â”œâ”€â”€ conversation.json # Improvement history
â””â”€â”€ logs/             # Detailed logs
```

## ğŸ”„ Complete Workflow Example

```bash
# 1. Create project
python3 -m coding_agent_plugin.cli.main create "FastAPI Todo App" --interactive

# Review plan â†’ Approve

# 2. Navigate to project
cd projects/fastapi_todo_app/

# 3. Run the app
cd app
pip install -r requirements.txt
uvicorn main:app --reload

# 4. Make improvements
cd ..
python3 -m coding_agent_plugin.cli.main improve --interactive

> add authentication
âœ“ Done

> add tests
âœ“ Done

> add logging
âœ“ Done

> exit

# 5. Check what changed
git log --oneline
# Output:
# abc1234 improve: add logging
# def5678 improve: add tests
# ghi9012 improve: add authentication
# jkl3456 Initial commit: project generated by coding-agent

# 6. Deploy your app
# Your code is in app/ directory, ready to deploy!
```

## âœ… Best Practices

### DO:
1. âœ… Use `--interactive` for initial creation (review plan first)
2. âœ… Navigate to project directory before using `improve`
3. âœ… Make small, incremental improvements
4. âœ… Check git log to track changes
5. âœ… Test after each improvement

### DON'T:
1. âŒ Don't modify `.agent_context/` files manually
2. âŒ Don't make too many changes in one improve command
3. âŒ Don't delete git history (you'll lose undo capability)

## ğŸ¯ Key Features for Users

### 1. Persistent Storage
- All your code is in `projects/{project_name}/app/`
- Internal files are hidden in `.agent_context/`
- Git repository tracks all changes
- Each improvement is a separate commit

### 2. Incremental Improvements
- Don't need to regenerate entire project
- Make targeted changes to specific files
- Preserve your existing code
- Easy to undo (git revert)

## ğŸ¤– Modes of Operation

### 1. Direct Mode (`--mode direct`)
Best for quick tasks, single-file scripts, or specific modifications.
- **Agent**: `CodingAgent`
- **Behavior**: Takes your prompt and immediately writes code. No planning phase.
- **Use Case**: "Create a script to parse CSV", "Fix the bug in main.py".

### 2. Autonomous Mode (`--mode autonomous`)
Best for building full applications or complex features.
- **Agent**: `OrchestratorAgent` (manages Planner, Coder, Task, etc.)
- **Behavior**:
    1.  **Planning**: Analyzes request, creates `planning.md`.
    2.  **Tasking**: Initializes `tasks.md`.
    3.  **Execution**: Iterates through tasks, writing code, running commands, and updating status.
- **Use Case**: "Build a Todo App with FastAPI and React", "Refactor the entire backend".

### 3. Multi-Project Support
```bash
# Create multiple projects
agentic-coder create "Frontend Dashboard"
agentic-coder create "Backend API"
agentic-coder create "Mobile App"

# Each in its own directory:
projects/
â”œâ”€â”€ frontend_dashboard/
â”œâ”€â”€ backend_api/
â””â”€â”€ mobile_app/
```

### 4. Template Support (Coming Soon)
```bash
# Use pre-built templates
agentic-coder create --template fastapi-crud "My API"
agentic-coder create --template nextjs-auth "My App"
```

## ğŸ”§ Environment Setup

### Required
```bash
# .env file
LLM_API_KEY=your_api_key_here
LLM_MODEL=gpt-4o
LLM_BASE_URL=https://api.openai.com/v1  # Optional
```

### Optional
```bash
# Configuration file (future feature)
~/.coding-agent/config.yaml
```

## ğŸ†˜ Troubleshooting

### "Not a agentic-coder project!"
**Problem:** Running `improve` outside a project directory
**Solution:** 
```bash
cd projects/your_project_name/
python3 -m coding_agent_plugin.cli.main improve "your request"
```

### Git initialization failed
**Problem:** Git not installed or permission issues
**Solution:** Install git or use `--no-git` flag
```bash
agentic-coder create "App" --no-git
```

### Planning failed
**Problem:** Invalid API key or model
**Solution:** Check your `.env` file
```bash
cat .env  # Verify LLM_API_KEY is correct
```

## ğŸ“Š Understanding Costs

Each operation uses LLM tokens:
- **Create**: ~5,000-15,000 tokens (~$0.10-$0.30 with GPT-4)
- **Improve**: ~2,000-5,000 tokens per request (~$0.04-$0.10)

Use cheaper models to reduce costs:
```bash
# .env
LLM_MODEL=gpt-3.5-turbo  # Much cheaper than GPT-4
```

## ğŸ“ Learning Path

### Beginner
1. Create simple projects with templates
2. Use `--interactive` mode
3. Make one improvement at a time

### Intermediate
4. Create custom projects with detailed prompts
5. Use `improve --file` for targeted changes
6. Chain multiple improvements

### Advanced
7. Create custom templates
8. Use cheaper LLM models
9. Integrate with CI/CD pipelines
