# プラン別ガイド

J-Quants APIには4つのプランがあります。このページでは、どのプランを選ぶべきかを解説します。

## プラン一覧

| プラン | 月額料金 | リクエスト上限 | データ遅延 | おすすめの人 |
|--------|----------|---------------|-----------|-------------|
| **Free** | ¥0 | 5回/分 | 12週間 | まず試したい人 |
| **Light** | ¥1,650 | 60回/分 | リアルタイム | 個人投資家 |
| **Standard** | ¥3,300 | 120回/分 | リアルタイム | アクティブ投資家 |
| **Premium** | ¥16,500 | 500回/分 | リアルタイム | プロ・システムトレーダー |

## プラン別機能一覧 {#プラン別機能一覧}

### Free / Light で使える機能

| 機能 | 説明 | コード例 |
|------|------|---------|
| 日足株価 | 全銘柄の株価データ | `ticker.history("30d")` |
| 企業情報 | 会社名・業種・市場 | `ticker.info` |
| 銘柄検索 | 会社名で検索 | `pjq.search("トヨタ")` |
| 財務概要 | 決算データ（概要） | `ticker.financials` |
| 取引カレンダー | 祝日・取引日判定 | `market.is_trading_day()` |
| 決算発表日 | 決算発表予定 | `market.earnings_calendar()` |

**Light以上で追加される機能：**

| 機能 | 説明 | コード例 |
|------|------|---------|
| TOPIX | TOPIX指数の株価 | `Index.topix().history()` |
| 投資部門別売買 | 機関投資家の売買動向 | `market.investor_trades()` |

### Standard で使える機能

Lightの全機能に加えて：

| 機能 | 説明 | コード例 |
|------|------|---------|
| 日経225 | 日経平均株価 | `Index.nikkei225().history()` |
| 業種分類 | TOPIX-17/33業種 | `market.sectors_17` |
| 信用取引残高 | 信用買い・売り残 | `market.margin_interest()` |
| 空売り比率 | 空売りの割合 | `market.short_ratio()` |
| 空売り残高 | 空売りの残高 | `market.short_positions()` |
| 信用規制情報 | 日々公表・増担保 | `market.margin_alerts()` |
| 日経225オプション | 指数オプション | `IndexOptions.nikkei225()` |

### Premium で使える機能

Standardの全機能に加えて：

| 機能 | 説明 | コード例 |
|------|------|---------|
| 前場株価 | 午前の取引データ | `ticker.history_am()` |
| 配当情報 | 配当金の履歴 | `ticker.dividends` |
| 詳細財務 | BS/PL/CF詳細 | `ticker.financial_details` |
| 売買内訳 | 現物・信用・空売りの内訳 | `market.breakdown("7203")` |
| 先物 | 日経225先物など | `Futures("NK225M").history()` |
| オプション | 個別オプション | `Options("NK225C40000").history()` |

## どのプランを選ぶべきか

### Freeプラン

**こんな人におすすめ：**

- プログラミングの勉強をしたい
- J-Quantsを試してみたい
- 12週間前のデータでも問題ない

**注意点：**

- データが12週間遅延
- リクエスト制限が厳しい（5回/分）

### Lightプラン

**こんな人におすすめ：**

- 個人投資家として株価データを活用したい
- TOPIXや投資家動向を見たい
- 月1,650円なら払える

**注意点：**

- 日経225は使えない
- 信用取引・空売りデータは使えない

### Standardプラン

**こんな人におすすめ：**

- 日経225を使いたい
- 信用取引・空売りの情報を見たい
- アクティブに投資している

**注意点：**

- 配当情報・先物・オプションは使えない

### Premiumプラン

**こんな人におすすめ：**

- すべての機能を使いたい
- 先物・オプションを取引している
- システムトレードを構築したい

## エラーが出たら

### TierError が発生する場合

```
TierError: history_am() requires premium tier, but you have light
```

このエラーは、あなたのプランでは使えない機能を呼び出したときに発生します。

**対処法：**

1. [プラン別機能一覧](#プラン別機能一覧)で、その機能に必要なプランを確認
2. 必要であればプランをアップグレード
3. または、その機能を使わないようにコードを修正

### プランの設定方法

環境変数でプランを設定できます：

```bash
export JQUANTS_TIER=light     # light, standard, premium のいずれか
```

!!! tip "プランを設定するメリット"
    プランを設定しておくと、APIを呼び出す前にエラーが発生するので、無駄なリクエストを減らせます。

## プランの変更

プランの変更は[J-Quantsダッシュボード](https://application.jpx-jquants.com/)から行えます。

- アップグレード：いつでも可能
- ダウングレード：次の請求サイクルから適用
