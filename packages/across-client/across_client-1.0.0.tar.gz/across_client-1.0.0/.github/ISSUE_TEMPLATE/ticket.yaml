name: Ticket
description: A ticket that relates to a tech spec requirement that will be refined during planning.
projects: ["NASA-ACROSS/22"]

body:
  - type: markdown
    attributes:
      value: |
        Please use this template to describe a piece of work that has gone through the requirement gathering process.

  - type: textarea
    id: description
    validations:
      required: true
    attributes:
      label: "Description"
      description: |
        Describe the piece of work to be accomplished, usually describes the purpose or goal and why it is important.
      placeholder: |
        The purpose of this ticket is to provide the ability for users of the system to register
        themselves. This is a dependency to allow users to be able to log in and use the system.

  - type: input
    id: references
    attributes:
      label: "References"
      description: Recommended section to provide links to feature design or tech spec

  - type: textarea
    id: stakeholders
    attributes:
      label: "Stakeholders"
      description: Please reference the stakeholders for this ticket
      placeholder: "@NASA-ACROSS/developers"

  - type: textarea
    id: interfaces
    attributes:
      label: "Interfaces"
      description: Are there interfaces that need to be defined?
      placeholder: |
        ```py
        class UserCreate:
          first_name: str
          last_name: str
          email: EmailStr
        ```

  - type: textarea
    id: database
    attributes:
      label: "Database"
      description: |
        Are the database schema changes or additions?
      placeholder: |
        ```txt
        user
        ------------------------
        first_name: varchar(255)
        last_name: varchar(255)
        email: varchar(100)
        ```

  - type: textarea
    id: functional_requirements
    validations:
      required: true
    attributes:
      label: "Functional Requirements (FR)"
      description: |
        What does the ticket need to do?
        What are the steps to implement the requirements?

        This should be as detailed as needed for anyone to be able to contribute.
      placeholder: |
        1. Create a new route `POST /user` in the `routes/user/router.py` file to create a new user.
        2. Add the `UserCreate` schema to the `schemas.py` file.
        3. The route should take the `UserCreate` schema as the `POST` body.
        4. The initial type validation should be handled by the pydantic model/schema.
        5. A new `create` method should be added to the `UserService`.
          1. The `create` method should check to see if the user already exists by `email` by using the existing `exists` method on `UserService`
          2. If a user exists a `DuplicateUserException` should be raised.
          3. Otherwise, create the user in the db by converting the `UserCreate` schema into the `User` db model.
          4. Return the newly created user.
        6. Return a `200` HTTP status along with the newly created user.

  - type: textarea
    id: non_functional_requirements
    attributes:
      label: "Non-Functional Requirements (NFR)"
      description: |
        What constraints exist for this ticket? All constraints must be quantifiable.
      placeholder: |
        1. Creating a user does not take longer than 1 second.

  - type: textarea
    id: acceptance_criteria
    attributes:
      label: "Acceptance Criteria"
      description: |
        What needs to happen functionally for this work to pass review?
        Usually a combination of FRs and NFRs as test cases written in plain text.
        This should follow test description formats. "Should...when..."
      placeholder: |
        1. Should return a status code of `200` when a new user is created successfully.
        2. Should return new user information when a user is created successfully.
        3. Should raise a `422` exception when an email is not sent in the body.
        4. Should raise a `422` exception when an email is not correctly formatted.
        5. Should raise a `409` exception when a user already exists with the provided `email`.

  - type: markdown
    attributes:
      value: |
        Finally, make sure to add the type of the ticket as "Task" or "Feature" to help tracking of issues.