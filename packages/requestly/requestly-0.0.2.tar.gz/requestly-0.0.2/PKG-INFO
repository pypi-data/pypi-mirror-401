Metadata-Version: 2.4
Name: requestly
Version: 0.0.2
Summary: æœåŠ¡å™¨æ¥å£æœ¬åœ°ä»£ç†å·¥å…·
Author-email: Seven <1162584980@qq.com>
Maintainer-email: Seven <1162584980@qq.com>
License-Expression: MIT
Keywords: requestly,mitmproxy,cli,proxy
Classifier: Environment :: Console
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Utilities
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: click
Requires-Dist: mitmproxy
Provides-Extra: dev
Requires-Dist: build; extra == "dev"
Requires-Dist: twine; extra == "dev"
Requires-Dist: pytest; extra == "dev"
Requires-Dist: ruff; extra == "dev"
Requires-Dist: black; extra == "dev"

# requestly macOS æœ¬åœ°è½¬å‘å·¥å…· - å®Œæ•´ä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

âœ… å°†è¿œç¨‹ API è¯·æ±‚è‡ªåŠ¨è½¬å‘åˆ°æœ¬åœ°å¼€å‘æœåŠ¡å™¨  
âœ… æ”¯æŒ HTTPS/HTTP åè®®  
âœ… çº¯ Python å®ç°ï¼Œæ— éœ€å¤–éƒ¨å‘½ä»¤  
âœ… ä¸€é”®è‡ªåŠ¨å®‰è£…/é‡è£…è¯ä¹¦  
âœ… çµæ´»çš„é…ç½®æ–‡ä»¶æ”¯æŒ  
âœ… å®æ—¶è½¬å‘æ—¥å¿—æ˜¾ç¤º  
âœ… ä¸“ä¸º macOS ä¼˜åŒ–  

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install mitmproxy click
```

### 2. åˆ›å»ºé…ç½®æ–‡ä»¶

åˆ›å»º `config.json`:

```json
{
    "local_server": {
        "scheme": "http",
        "host": "127.0.0.1",
        "port": 8080
    },
    "rules": [
        {
            "description": "è´¢åŠ¡ç³»ç»ŸAPI",
            "remote": "https://sit-finance.xtt.xyz/settle/admin/settleBillRule/page"
        },
        {
            "description": "ç”¨æˆ·æœåŠ¡API - è‡ªå®šä¹‰ç«¯å£",
            "remote": "https://api.example.com/api/v1/users",
            "local": {
                "port": 3000
            }
        },
        {
            "description": "äº§å“æœåŠ¡API - å®Œå…¨è‡ªå®šä¹‰",
            "remote": "https://api.example.com/api/v1/products",
            "local": {
                "scheme": "https",
                "host": "localhost",
                "port": 3001
            }
        }
    ]
}
```

**é…ç½®å­—æ®µè¯´æ˜:**

- **local_server** (å¿…å¡«): é»˜è®¤æœ¬åœ°æœåŠ¡å™¨é…ç½®
  - `scheme`: åè®® (http/https)ï¼Œé»˜è®¤ `http`
  - `host`: åœ°å€ï¼Œé»˜è®¤ `127.0.0.1`
  - `port`: ç«¯å£ï¼Œé»˜è®¤ `8080`

- **rules** (å¿…å¡«): è½¬å‘è§„åˆ™æ•°ç»„
  - `description`: è§„åˆ™æè¿°ï¼ˆå¯é€‰ï¼Œæ¨èå¡«å†™ï¼Œæ–¹ä¾¿ç®¡ç†ï¼‰
  - `remote`: è¿œç¨‹ URLï¼ˆå¿…å¡«ï¼‰
  - `local`: æœ¬åœ°ç›®æ ‡é…ç½®ï¼ˆå¯é€‰ï¼‰
    - å¦‚æœä¸é…ç½®ï¼Œä½¿ç”¨ `local_server` çš„é…ç½®
    - å¯ä»¥åªè¦†ç›–éƒ¨åˆ†å­—æ®µï¼ˆå¦‚åªæ”¹ç«¯å£ï¼‰
    - æ”¯æŒ `scheme`ã€`host`ã€`port` ä¸‰ä¸ªå­—æ®µ

**é…ç½®ä¼˜åŠ¿:**

âœ… è¯­ä¹‰æ¸…æ™°ï¼š`local_server` vs `remote`  
âœ… å±‚æ¬¡åˆ†æ˜ï¼šæœ¬åœ°é…ç½®åµŒå¥—åœ¨ `local` å¯¹è±¡ä¸­  
âœ… å¯è¯»æ€§å¼ºï¼š`rules` å‡†ç¡®æè¿°è½¬å‘è§„åˆ™  
âœ… æ”¯æŒæ³¨é‡Šï¼š`description` å­—æ®µä¾¿äºå›¢é˜Ÿåä½œ  
âœ… çµæ´»è¦†ç›–ï¼šå¯åªè¦†ç›–éœ€è¦çš„å­—æ®µ

### 3. å®‰è£…è¯ä¹¦

```bash
# è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
python mitm_proxy.py install-cert --auto

# ä»…æŸ¥çœ‹å®‰è£…è¯´æ˜
python mitm_proxy.py install-cert
```

### 4. å¯åŠ¨ä»£ç†

```bash
# åŸºæœ¬å¯åŠ¨
python mitm_proxy.py start config.json

# è‡ªå®šä¹‰ç«¯å£
python mitm_proxy.py start config.json --listen-port 9999

# æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
python mitm_proxy.py start config.json -v
```
