Metadata-Version: 2.4
Name: isage-rag
Version: 0.1.0.0
Summary: SAGE RAG Framework - Document loaders, chunkers, retrievers for RAG pipelines
Author-email: IntelliStream Team <shuhao_zhang@hust.edu.cn>
License-Expression: MIT
Project-URL: Homepage, https://github.com/intellistream/sage-rag
Project-URL: Repository, https://github.com/intellistream/sage-rag
Keywords: RAG,retrieval,document-loader,chunker,retriever,LLM,AI
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pydantic>=2.0.0
Requires-Dist: typing-extensions>=4.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: ruff>=0.4.0; extra == "dev"
Dynamic: license-file

# SAGE RAG

**Document Loading, Chunking, Retrieval, and RAG Pipeline Orchestration**

[![PyPI version](https://badge.fury.io/py/isage-rag.svg)](https://badge.fury.io/py/isage-rag)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)

**SAGE RAG** æ˜¯ä» [SAGE](https://github.com/intellistream/SAGE) æ¡†æ¶ä¸­æå–çš„ç‹¬ç«‹ RAG ç»„ä»¶ï¼Œæä¾›å®Œæ•´çš„æ–‡æ¡£åŠ è½½ã€æ–‡æœ¬åˆ†å—ã€æ£€ç´¢ã€é‡æ’åºå’Œ RAG ç®¡é“ç¼–æ’èƒ½åŠ›ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“„ Document Loading
- **DocumentLoader** æŠ½è±¡æ¥å£ - ç»Ÿä¸€çš„æ–‡æ¡£åŠ è½½æ¥å£
- æ”¯æŒå¤šç§æ ¼å¼ï¼š
  - çº¯æ–‡æœ¬ (TextLoader)
  - PDF (PDFLoader)
  - Word æ–‡æ¡£ (DocxLoader)
  - Markdown (MarkdownLoader)
  - HTML (HTMLLoader)
- **Document** æ•°æ®ç±»å‹ - æ ‡å‡†åŒ–æ–‡æ¡£è¡¨ç¤º

### âœ‚ï¸ Text Chunking
- **TextChunker** æŠ½è±¡æ¥å£ - æ–‡æœ¬åˆ†å—ç­–ç•¥
- å¤šç§åˆ†å—ç®—æ³•ï¼š
  - å­—ç¬¦çº§åˆ†å— (CharacterSplitter)
  - å¥å­çº§åˆ†å— (SentenceSplitter)
  - Token çº§åˆ†å— (TokenTextSplitter, SentenceTransformersTokenTextSplitter)
  - è¯­ä¹‰åˆ†å— (SemanticChunker)
- **Chunk** æ•°æ®ç±»å‹ - åŒ…å«å…ƒæ•°æ®çš„æ–‡æœ¬å—

### ğŸ” Retrieval
- **Retriever** æŠ½è±¡æ¥å£ - æ£€ç´¢ç­–ç•¥
- æ”¯æŒå¤šç§åç«¯ï¼š
  - SageVDB (isage-vdb)
  - ChromaDB
  - Milvus
  - FAISS
- **RetrievalResult** æ•°æ®ç±»å‹ - æ£€ç´¢ç»“æœè¡¨ç¤º

### ğŸ¯ Reranking
- **Reranker** æŠ½è±¡æ¥å£ - é‡æ’åºç­–ç•¥
- ç®—æ³•æ”¯æŒï¼š
  - Cross-encoder reranking
  - LLM-based reranking
  - Hybrid reranking

### ğŸ”„ RAG Pipeline
- **RAGPipeline** - ç«¯åˆ°ç«¯ RAG æµç¨‹ç¼–æ’
- æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ç»„åˆ
- å†…ç½®è¯„ä¼°æŒ‡æ ‡

## ï¿½ï¿½ å®‰è£…

### åŸºç¡€å®‰è£…
```bash
pip install isage-rag
```

### å®Œæ•´å®‰è£…ï¼ˆåŒ…å«æ‰€æœ‰å¯é€‰åŠŸèƒ½ï¼‰
```bash
pip install isage-rag[all]
```

### æŒ‰éœ€å®‰è£…
```bash
# æ–‡æ¡£åŠ è½½
pip install isage-rag[loaders]

# æ–‡æœ¬åˆ†å—
pip install isage-rag[chunking]

# å‘é‡æ£€ç´¢
pip install isage-rag[retrieval]

# é‡æ’åº
pip install isage-rag[reranking]

# LLM ç”Ÿæˆ
pip install isage-rag[generation]

# è¯„ä¼°æŒ‡æ ‡
pip install isage-rag[evaluation]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ–‡æ¡£åŠ è½½

```python
from sage.libs.rag.interface import create_document_loader

# åŠ è½½ PDF æ–‡æ¡£
loader = create_document_loader("pdf")
documents = loader.load("path/to/document.pdf")

for doc in documents:
    print(f"Page {doc.metadata['page']}: {doc.content[:100]}...")
```

### 2. æ–‡æœ¬åˆ†å—

```python
from sage.libs.rag.interface import create_text_chunker

# åˆ›å»ºåˆ†å—å™¨
chunker = create_text_chunker("sentence_transformers")

# åˆ†å—æ–‡æ¡£
chunks = chunker.chunk(documents, chunk_size=512, overlap=50)
print(f"Total chunks: {len(chunks)}")
```

### 3. æ„å»º RAG ç®¡é“

```python
from sage.libs.rag.interface import create_rag_pipeline

# åˆ›å»ºå®Œæ•´ RAG ç®¡é“
pipeline = create_rag_pipeline("default")

# é…ç½®ç»„ä»¶
pipeline.configure(
    loader="pdf",
    chunker="sentence_transformers",
    retriever="sagedb",
    reranker="cross_encoder",
    generator="openai"
)

# æ‰§è¡Œ RAG æŸ¥è¯¢
response = pipeline.query(
    "What are the main findings?",
    documents=["path/to/doc1.pdf", "path/to/doc2.pdf"]
)
print(response.answer)
```

### 4. ä½¿ç”¨æ¥å£æŠ½è±¡

```python
from sage.libs.rag.interface import DocumentLoader, TextChunker, Retriever

# å®ç°è‡ªå®šä¹‰æ–‡æ¡£åŠ è½½å™¨
class CustomLoader(DocumentLoader):
    def load(self, source: str) -> list[Document]:
        # è‡ªå®šä¹‰åŠ è½½é€»è¾‘
        pass

# æ³¨å†Œåˆ°å·¥å‚
from sage.libs.rag.interface import register_document_loader
register_document_loader("custom", CustomLoader)

# ä½¿ç”¨å·¥å‚åˆ›å»º
loader = create_document_loader("custom")
```

## ğŸ—ï¸ æ¶æ„

```
sage.libs.rag/
â”œâ”€â”€ interface/              # å…¬å…±æ¥å£ï¼ˆä» sage-libs å¯¼å…¥ï¼‰
â”‚   â”œâ”€â”€ base.py            # DocumentLoader, TextChunker, Retriever, Reranker, RAGPipeline
â”‚   â”œâ”€â”€ factory.py         # å·¥å‚å‡½æ•°å’Œæ³¨å†Œè¡¨
â”‚   â””â”€â”€ __init__.py        # å…¬å…± API
â”œâ”€â”€ document_loaders/      # æ–‡æ¡£åŠ è½½å™¨å®ç°
â”‚   â”œâ”€â”€ text_loader.py
â”‚   â”œâ”€â”€ pdf_loader.py
â”‚   â”œâ”€â”€ docx_loader.py
â”‚   â””â”€â”€ markdown_loader.py
â”œâ”€â”€ chunk/                 # æ–‡æœ¬åˆ†å—å®ç°
â”‚   â”œâ”€â”€ character_splitter.py
â”‚   â”œâ”€â”€ sentence_splitter.py
â”‚   â””â”€â”€ token_splitter.py
â”œâ”€â”€ retrieval/            # æ£€ç´¢å®ç°
â”‚   â”œâ”€â”€ sagedb_retriever.py
â”‚   â”œâ”€â”€ chroma_retriever.py
â”‚   â””â”€â”€ milvus_retriever.py
â”œâ”€â”€ reranking/            # é‡æ’åºå®ç°
â”‚   â”œâ”€â”€ cross_encoder.py
â”‚   â””â”€â”€ llm_reranker.py
â”œâ”€â”€ pipeline/             # RAG ç®¡é“ç¼–æ’
â”‚   â”œâ”€â”€ default_pipeline.py
â”‚   â””â”€â”€ custom_pipeline.py
â””â”€â”€ types/                # æ•°æ®ç±»å‹å®šä¹‰
    â”œâ”€â”€ document.py
    â”œâ”€â”€ chunk.py
    â””â”€â”€ retrieval_result.py
```

## ğŸ”Œ ä¸ SAGE é›†æˆ

è™½ç„¶ `isage-rag` å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†å®ƒä¸ SAGE æ¡†æ¶æ·±åº¦é›†æˆï¼š

```python
# åœ¨ SAGE é¡¹ç›®ä¸­ä½¿ç”¨ï¼ˆé€šè¿‡ sage-libsï¼‰
from sage.libs.rag.interface import create_rag_pipeline

# æ¥å£å±‚åœ¨ sage-libsï¼Œå®ç°åœ¨ isage-rag
pipeline = create_rag_pipeline("default")
```

åœ¨ SAGE é¡¹ç›®çš„ `pyproject.toml` ä¸­ï¼š
```toml
[project.optional-dependencies]
rag = ["isage-rag>=0.1.0"]
```

å®‰è£… SAGE æ—¶è‡ªåŠ¨åŒ…å« RAGï¼š
```bash
pip install sage-libs[rag]
# æˆ–
pip install sage-libs[all]
```

## ğŸ“š æ–‡æ¡£

- [å®Œæ•´æ–‡æ¡£](https://sage-docs.org/rag)
- [API å‚è€ƒ](https://sage-docs.org/rag/api)
- [ç¤ºä¾‹é›†åˆ](https://github.com/intellistream/sage-examples)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## ğŸ“„ è®¸å¯è¯

Apache License 2.0 - è¯¦è§ [LICENSE](LICENSE)

## ğŸ”— ç›¸å…³é¡¹ç›®

- [SAGE](https://github.com/intellistream/SAGE) - ä¸»æ¡†æ¶
- [sage-libs](https://github.com/intellistream/SAGE/tree/main/packages/sage-libs) - æ¥å£å±‚
- [isage-agentic](https://github.com/intellistream/sage-agentic) - Agent æ¡†æ¶
- [isage-vdb](https://github.com/intellistream/sageVDB) - å‘é‡æ•°æ®åº“
- [isage-anns](https://github.com/intellistream/sage-anns) - ANN ç®—æ³•åº“

## ğŸ“§ è”ç³»

- **å›¢é˜Ÿ**: IntelliStream Team
- **é‚®ç®±**: shuhao_zhang@hust.edu.cn
- **GitHub**: https://github.com/intellistream/sage-rag
