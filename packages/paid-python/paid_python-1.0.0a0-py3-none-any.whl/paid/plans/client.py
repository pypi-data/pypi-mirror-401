# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.plan import Plan
from ..types.plan_group import PlanGroup
from ..types.plan_with_features import PlanWithFeatures
from ..types.usage_summaries_response import UsageSummariesResponse
from .raw_client import AsyncRawPlansClient, RawPlansClient


class PlansClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawPlansClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawPlansClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawPlansClient
        """
        return self._raw_client

    def get_by_id(self, plan_id: str, *, request_options: typing.Optional[RequestOptions] = None) -> Plan:
        """
        Parameters
        ----------
        plan_id : str
            The ID of the plan

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        Plan
            Success response

        Examples
        --------
        from paid import Paid

        client = Paid(
            token="YOUR_TOKEN",
        )
        client.plans.get_by_id(
            plan_id="planId",
        )
        """
        _response = self._raw_client.get_by_id(plan_id, request_options=request_options)
        return _response.data

    def get_usage(
        self,
        plan_id: str,
        *,
        external_id: str,
        limit: typing.Optional[int] = None,
        offset: typing.Optional[int] = None,
        start_time: typing.Optional[dt.datetime] = None,
        end_time: typing.Optional[dt.datetime] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UsageSummariesResponse:
        """
        Parameters
        ----------
        plan_id : str
            The ID of the plan

        external_id : str
            The external ID of the customer

        limit : typing.Optional[int]
            Maximum number of usage summaries to return (1-1000)

        offset : typing.Optional[int]
            Number of usage summaries to skip for pagination

        start_time : typing.Optional[dt.datetime]
            Filter usage summaries starting from this time (ISO 8601 format). Returns summaries that overlap with the time range.

        end_time : typing.Optional[dt.datetime]
            Filter usage summaries up to this time (ISO 8601 format). Returns summaries that overlap with the time range.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UsageSummariesResponse
            Success response

        Examples
        --------
        import datetime

        from paid import Paid

        client = Paid(
            token="YOUR_TOKEN",
        )
        client.plans.get_usage(
            plan_id="planId",
            external_id="externalId",
            limit=1,
            offset=1,
            start_time=datetime.datetime.fromisoformat(
                "2024-01-15 09:30:00+00:00",
            ),
            end_time=datetime.datetime.fromisoformat(
                "2024-01-15 09:30:00+00:00",
            ),
        )
        """
        _response = self._raw_client.get_usage(
            plan_id,
            external_id=external_id,
            limit=limit,
            offset=offset,
            start_time=start_time,
            end_time=end_time,
            request_options=request_options,
        )
        return _response.data

    def get_group_by_id(
        self, plan_group_id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> PlanGroup:
        """
        Parameters
        ----------
        plan_group_id : str
            The ID of the plan group

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PlanGroup
            Success response

        Examples
        --------
        from paid import Paid

        client = Paid(
            token="YOUR_TOKEN",
        )
        client.plans.get_group_by_id(
            plan_group_id="planGroupId",
        )
        """
        _response = self._raw_client.get_group_by_id(plan_group_id, request_options=request_options)
        return _response.data

    def get_group_plans(
        self, plan_group_id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> typing.List[PlanWithFeatures]:
        """
        Parameters
        ----------
        plan_group_id : str
            The ID of the plan group

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        typing.List[PlanWithFeatures]
            Success response

        Examples
        --------
        from paid import Paid

        client = Paid(
            token="YOUR_TOKEN",
        )
        client.plans.get_group_plans(
            plan_group_id="planGroupId",
        )
        """
        _response = self._raw_client.get_group_plans(plan_group_id, request_options=request_options)
        return _response.data


class AsyncPlansClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawPlansClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawPlansClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawPlansClient
        """
        return self._raw_client

    async def get_by_id(self, plan_id: str, *, request_options: typing.Optional[RequestOptions] = None) -> Plan:
        """
        Parameters
        ----------
        plan_id : str
            The ID of the plan

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        Plan
            Success response

        Examples
        --------
        import asyncio

        from paid import AsyncPaid

        client = AsyncPaid(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.plans.get_by_id(
                plan_id="planId",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_by_id(plan_id, request_options=request_options)
        return _response.data

    async def get_usage(
        self,
        plan_id: str,
        *,
        external_id: str,
        limit: typing.Optional[int] = None,
        offset: typing.Optional[int] = None,
        start_time: typing.Optional[dt.datetime] = None,
        end_time: typing.Optional[dt.datetime] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UsageSummariesResponse:
        """
        Parameters
        ----------
        plan_id : str
            The ID of the plan

        external_id : str
            The external ID of the customer

        limit : typing.Optional[int]
            Maximum number of usage summaries to return (1-1000)

        offset : typing.Optional[int]
            Number of usage summaries to skip for pagination

        start_time : typing.Optional[dt.datetime]
            Filter usage summaries starting from this time (ISO 8601 format). Returns summaries that overlap with the time range.

        end_time : typing.Optional[dt.datetime]
            Filter usage summaries up to this time (ISO 8601 format). Returns summaries that overlap with the time range.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UsageSummariesResponse
            Success response

        Examples
        --------
        import asyncio
        import datetime

        from paid import AsyncPaid

        client = AsyncPaid(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.plans.get_usage(
                plan_id="planId",
                external_id="externalId",
                limit=1,
                offset=1,
                start_time=datetime.datetime.fromisoformat(
                    "2024-01-15 09:30:00+00:00",
                ),
                end_time=datetime.datetime.fromisoformat(
                    "2024-01-15 09:30:00+00:00",
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_usage(
            plan_id,
            external_id=external_id,
            limit=limit,
            offset=offset,
            start_time=start_time,
            end_time=end_time,
            request_options=request_options,
        )
        return _response.data

    async def get_group_by_id(
        self, plan_group_id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> PlanGroup:
        """
        Parameters
        ----------
        plan_group_id : str
            The ID of the plan group

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PlanGroup
            Success response

        Examples
        --------
        import asyncio

        from paid import AsyncPaid

        client = AsyncPaid(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.plans.get_group_by_id(
                plan_group_id="planGroupId",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_group_by_id(plan_group_id, request_options=request_options)
        return _response.data

    async def get_group_plans(
        self, plan_group_id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> typing.List[PlanWithFeatures]:
        """
        Parameters
        ----------
        plan_group_id : str
            The ID of the plan group

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        typing.List[PlanWithFeatures]
            Success response

        Examples
        --------
        import asyncio

        from paid import AsyncPaid

        client = AsyncPaid(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.plans.get_group_plans(
                plan_group_id="planGroupId",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_group_plans(plan_group_id, request_options=request_options)
        return _response.data
