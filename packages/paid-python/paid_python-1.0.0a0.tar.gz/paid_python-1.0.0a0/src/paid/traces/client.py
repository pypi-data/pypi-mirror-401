# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.traces_response import TracesResponse
from .raw_client import AsyncRawTracesClient, RawTracesClient


class TracesClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawTracesClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawTracesClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawTracesClient
        """
        return self._raw_client

    def get_traces(
        self,
        *,
        limit: typing.Optional[int] = None,
        offset: typing.Optional[int] = None,
        start_time: typing.Optional[dt.datetime] = None,
        end_time: typing.Optional[dt.datetime] = None,
        external_customer_id: typing.Optional[str] = None,
        external_product_id: typing.Optional[str] = None,
        external_agent_id: typing.Optional[str] = None,
        metadata: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> TracesResponse:
        """
        Parameters
        ----------
        limit : typing.Optional[int]
            Maximum number of traces to return (1-1000)

        offset : typing.Optional[int]
            Number of traces to skip for pagination

        start_time : typing.Optional[dt.datetime]
            Filter traces starting from this time (ISO 8601 format)

        end_time : typing.Optional[dt.datetime]
            Filter traces up to this time (ISO 8601 format)

        external_customer_id : typing.Optional[str]
            Filter traces by external customer ID

        external_product_id : typing.Optional[str]
            Filter traces by external product ID

        external_agent_id : typing.Optional[str]
            DEPRECATED: Use externalProductId instead. Filter traces by external agent ID

        metadata : typing.Optional[str]
            Filter traces by metadata fields. Must be a valid JSON object (e.g., {"key1":"value1","key2":"value2"}). All specified fields must match (AND logic).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        TracesResponse
            Success response

        Examples
        --------
        import datetime

        from paid import Paid

        client = Paid(
            token="YOUR_TOKEN",
        )
        client.traces.get_traces(
            limit=1,
            offset=1,
            start_time=datetime.datetime.fromisoformat(
                "2024-01-15 09:30:00+00:00",
            ),
            end_time=datetime.datetime.fromisoformat(
                "2024-01-15 09:30:00+00:00",
            ),
            external_customer_id="externalCustomerId",
            external_product_id="externalProductId",
            external_agent_id="externalAgentId",
            metadata="metadata",
        )
        """
        _response = self._raw_client.get_traces(
            limit=limit,
            offset=offset,
            start_time=start_time,
            end_time=end_time,
            external_customer_id=external_customer_id,
            external_product_id=external_product_id,
            external_agent_id=external_agent_id,
            metadata=metadata,
            request_options=request_options,
        )
        return _response.data


class AsyncTracesClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawTracesClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawTracesClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawTracesClient
        """
        return self._raw_client

    async def get_traces(
        self,
        *,
        limit: typing.Optional[int] = None,
        offset: typing.Optional[int] = None,
        start_time: typing.Optional[dt.datetime] = None,
        end_time: typing.Optional[dt.datetime] = None,
        external_customer_id: typing.Optional[str] = None,
        external_product_id: typing.Optional[str] = None,
        external_agent_id: typing.Optional[str] = None,
        metadata: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> TracesResponse:
        """
        Parameters
        ----------
        limit : typing.Optional[int]
            Maximum number of traces to return (1-1000)

        offset : typing.Optional[int]
            Number of traces to skip for pagination

        start_time : typing.Optional[dt.datetime]
            Filter traces starting from this time (ISO 8601 format)

        end_time : typing.Optional[dt.datetime]
            Filter traces up to this time (ISO 8601 format)

        external_customer_id : typing.Optional[str]
            Filter traces by external customer ID

        external_product_id : typing.Optional[str]
            Filter traces by external product ID

        external_agent_id : typing.Optional[str]
            DEPRECATED: Use externalProductId instead. Filter traces by external agent ID

        metadata : typing.Optional[str]
            Filter traces by metadata fields. Must be a valid JSON object (e.g., {"key1":"value1","key2":"value2"}). All specified fields must match (AND logic).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        TracesResponse
            Success response

        Examples
        --------
        import asyncio
        import datetime

        from paid import AsyncPaid

        client = AsyncPaid(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.traces.get_traces(
                limit=1,
                offset=1,
                start_time=datetime.datetime.fromisoformat(
                    "2024-01-15 09:30:00+00:00",
                ),
                end_time=datetime.datetime.fromisoformat(
                    "2024-01-15 09:30:00+00:00",
                ),
                external_customer_id="externalCustomerId",
                external_product_id="externalProductId",
                external_agent_id="externalAgentId",
                metadata="metadata",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_traces(
            limit=limit,
            offset=offset,
            start_time=start_time,
            end_time=end_time,
            external_customer_id=external_customer_id,
            external_product_id=external_product_id,
            external_agent_id=external_agent_id,
            metadata=metadata,
            request_options=request_options,
        )
        return _response.data
