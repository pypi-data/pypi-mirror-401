var g=e=>{let i=parseInt(e.slice(1),16),t=i>>16&255,a=i>>8&255,l=i&255;return .2126*t+.7152*a+.0722*l>128};function h({model:e,el:i}){let t=document.createElement("div");t.tabIndex=-1,t.classList.add("horizontal-displayer"),t.style.height="50px",t.style.width=e.get("width"),t.style.overflowX="auto",t.addEventListener("scroll",()=>{e.set("scroll_left",t.scrollLeft),e.save_changes()});function a(){let s={...e.get("labels")},o=e.get("transcript");for(;t.firstChild;)t.removeChild(t.firstChild);o.forEach(r=>{let n=document.createElement("div");n.textContent=r.text,n.style.whiteSpace="nowrap",n.setAttribute("data-start",r.start.toString()),n.setAttribute("data-end",r.end.toString()),n.classList.add("transcript-segment"),n.classList.add(`${r.source}`),n.classList.add(`${r.status}`);let c=r.speaker,f=s[c]?s[c]:"#ffffff";n.style.backgroundColor=f,n.style.color=g(f)?"#000000":"#ffffff",t.appendChild(n),n.addEventListener("click",()=>{e.set("current_time",r.start),e.save_changes()})})}function l(s,o){let n=s.offsetLeft-o.offsetLeft+s.offsetWidth/2-o.clientWidth/2;o.scrollTo({left:n,behavior:"smooth"})}function d(){t.scrollTo({left:e.get("scroll_left")})}function p(){let s=e.get("current_time");t.querySelectorAll("div").forEach(r=>{let n=parseFloat(r.getAttribute("data-start")||"0"),c=parseFloat(r.getAttribute("data-end")||"0");s>=n&&s<c?(r.classList.add("active"),l(r,t)):r.classList.remove("active")})}return e.on("change:transcript",a),e.on("change:labels",a),a(),e.on("change:current_time",p),e.on("change:scroll_left",d),e.on("change:width",()=>{t.style.width=e.get("width")}),i.classList.add("ipyannote","ipyannote-transcript"),i.appendChild(t),()=>{}}var m={render:h};export{m as default};
