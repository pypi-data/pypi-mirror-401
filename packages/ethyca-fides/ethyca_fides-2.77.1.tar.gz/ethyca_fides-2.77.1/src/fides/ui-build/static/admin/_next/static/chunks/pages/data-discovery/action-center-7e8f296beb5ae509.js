(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{40741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return t(4582)}])},77213:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var s=t(24246),i=t(49617),a=t(88038),r=t.n(a),o=t(86677);t(27378);var l=t(25980),c=t(90867),d=t(42478),u=t(77830),g=()=>{let e=(0,o.useRouter)();return(0,s.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,s.jsxs)(i.xuv,{children:[(0,s.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,s.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,s.jsx)(i.wpx,{onClick:()=>{e.push(u.AD)},children:"Configure"})]}),(0,s.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:n,title:t,padded:a=!0,mainProps:u}=e,m=(0,l.hz)(),p=(0,o.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,y=!(m.flags.messagingConfiguration&&f),{data:x}=(0,d.JE)(void 0,{skip:y}),{data:h}=(0,c.PW)(void 0,{skip:y}),v=m.flags.messagingConfiguration&&(!x||!h)&&f;return(0,s.jsxs)(i.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,s.jsxs)(r(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(i.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[v?(0,s.jsx)(g,{}):null,n]})]})}},54762:function(e,n,t){"use strict";t.d(n,{l:function(){return o}});var s=t(24246),i=t(49617),a=t(62165),r=t(60240);let o=e=>{let{consentStatus:n}=e,{flags:t}=(0,a.hz)(),{assetConsentStatusLabels:o}=t;return o&&(null==n?void 0:n.status)===r.pF.ALERT?(0,s.jsx)(i.esZ,{title:null==n?void 0:n.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,s.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,s.jsx)(i.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,n,t){"use strict";t.d(n,{FU:function(){return c},JE:function(){return i},Ki:function(){return u},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return s},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:s,useGetActiveMessagingProviderQuery:i,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:u,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=t(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,n,t,s)=>{let i=await s({url:"messaging/default/active"});return i.error&&404===i.error.status?{data:null}:i},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},4582:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eu}});var s,i,a=t(24246),r=t(49617),o=t(27378),l=t(30952),c=t(25980),d=t(35287),u=t(77830),g=t(58754),m=t(9270),p=t(37059),f=t(16394),y=t(17245),x=t(67359);let h=()=>{let{resetPagination:e,pageIndex:n,pageSize:t,paginationProps:s}=(0,m.S)(),{searchQuery:i,updateSearch:l}=(0,y.Rx)(),c=(0,o.useMemo)(()=>[x.n.PENDING,x.n.IN_PROCESSING,x.n.PAUSED,x.n.RETRYING,x.n.ERROR],[]),[d,u]=(0,o.useState)(c),[g,f]=(0,o.useState)(!1),[h,v]=(0,o.useState)(c),[j,_]=(0,o.useState)(!1),C=(0,o.useCallback)(n=>{l(n),e()},[l,e]),w=(0,o.useCallback)(e=>{v(e)},[]),b=(0,o.useCallback)(e=>{_(e)},[]),k=(0,o.useCallback)(()=>{u(h),f(j),e()},[h,j,e]),E=(0,o.useCallback)(()=>{v(c),_(!1),u(c),f(!1),e()},[c,e]),S=[x.n.PENDING,x.n.IN_PROCESSING,x.n.COMPLETE,x.n.ERROR,x.n.PAUSED,x.n.RETRYING,x.n.SKIPPED],{data:N,isLoading:T,isFetching:I}=(0,p.$h)({page:n,size:t,search:i,statuses:d.length>0?d:void 0,return_dismissed:g},{pollingInterval:3e3,refetchOnFocus:!0,refetchOnReconnect:!0});return{searchQuery:i,updateSearch:C,statusFilters:h,updateStatusFilters:w,showDismissed:j,updateShowDismissed:b,applyFilters:k,resetAndApplyFilters:E,availableStatuses:S,listProps:(0,o.useMemo)(()=>({dataSource:(null==N?void 0:N.items)||[],loading:T,locale:{emptyText:(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"No tasks in progress"})}}),[null==N?void 0:N.items,T]),paginationProps:{...s,total:null==N?void 0:N.total},isLoading:T,isFetching:I}};var v=t(10969),j=t(60145),_=t(11558),C=t(70641),w=t(7317),b=t(85302),k=t(64892);function E(e,n,t){let s;let i=(0,j.j)(),a=t?.locale??i.locale??v._,r=(0,b.U)(e,n);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:r}),[l,c]=(0,w.d)(t?.in,...r>0?[n,e]:[e,n]),d=(0,_.u)(t?.roundingMethod??"round"),u=c.getTime()-l.getTime(),g=u/k.yJ,m=(u-((0,C.D)(c)-(0,C.D)(l)))/k.yJ,p=t?.unit;if("second"===(s=p||(g<1?"second":g<60?"minute":g<k.H_?"hour":m<k.fH?"day":m<k.UU?"month":"year"))){let e=d(u/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===s){let e=d(g);return a.formatDistance("xMinutes",e,o)}if("hour"===s){let e=d(g/60);return a.formatDistance("xHours",e,o)}if("day"===s){let e=d(m/k.H_);return a.formatDistance("xDays",e,o)}if("month"===s){let e=d(m/k.fH);return 12===e&&"month"!==p?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=d(m/k.UU);return a.formatDistance("xYears",e,o)}}var S=t(88340),N=t(41337),T=t(60240);let{Paragraph:I,Text:M,Title:A}=r.AntTypography,P=e=>"paused"===e?"Awaiting Processing":e.split("_").map(f.kC).join(" "),R=e=>{var n,t,s,i,o,l,c,d,u,g;let{task:m,...y}=e,x=(0,r.pmc)(),[h,{isLoading:v}]=(0,p.mL)(),[j,{isLoading:_}]=(0,p.QC)(),C=!!m.dismissed,w="error"===m.status&&m.action_type!==T.K8.DETECTION,{data:b}=(0,p.Ud)({page:1,size:1e3}),k=m.monitor_config_id?null==b?void 0:null===(n=b.items)||void 0===n?void 0:n.find(e=>e.key===m.monitor_config_id):void 0,R=k?(0,N.AZ)({connection_type:k.connection_type,name:null!==(i=k.name)&&void 0!==i?i:null,key:null!==(o=k.key)&&void 0!==o?o:null,saas_config:k.saas_config?{type:null!==(l=k.saas_config.type)&&void 0!==l?l:null,name:null!==(c=k.saas_config.name)&&void 0!==c?c:null,fides_key:null!==(d=k.saas_config.fides_key)&&void 0!==d?d:null}:null,secrets:(null===(s=k.secrets)||void 0===s?void 0:s.url)?{url:k.secrets.url}:null}):m.connection_type?(0,N.AZ)({connection_type:m.connection_type,name:null!==(u=m.connection_name)&&void 0!==u?u:m.connection_type?m.connection_type.toString():null,key:null,saas_config:null,secrets:null}):void 0,O=(null===(t=m.staged_resource_urns)||void 0===t?void 0:t.length)||0,D=["pending","in_processing","paused","retrying"].includes((m.status||"").toLowerCase()),q=m.field_count||O,z=(()=>{if(m.action_type===T.K8.CLASSIFICATION||m.action_type===T.K8.LLM_CLASSIFICATION){let e="complete"===m.status?"Classified":"Classifying";return"".concat(e," ").concat(q," ").concat((0,f._6)(q,"field","fields"))}if(m.action_type===T.K8.DETECTION)return"complete"===m.status?"Monitor scanned":"Monitor scanning";if(m.action_type===T.K8.PROMOTION){let e="complete"===m.status?"Approved":"Approving";return"".concat(e," ").concat(q," ").concat((0,f._6)(q,"field","fields"))}return m.action_type?m.action_type.replace(/_/g," "):"Task"})(),U=m.monitor_name||"Unknown monitor",F=async()=>{try{await h({taskId:m.id}).unwrap(),x({status:"success",description:"Task retry initiated successfully"})}catch(t){var e;let n=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||(null==t?void 0:t.message)||"Unknown error occurred";x({status:"error",description:"Failed to retry task: ".concat(n)})}},H=async()=>{try{await j({taskId:m.id}).unwrap(),x({status:"success",description:"Task dismissed successfully"})}catch(t){var e;let n=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||(null==t?void 0:t.message)||"Unknown error occurred";x({status:"error",description:"Failed to dismiss task: ".concat(n)})}};return(0,a.jsx)("div",{...y,className:"w-full",children:(0,a.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,a.jsx)(r.JGx,{span:14,className:"align-middle",children:(0,a.jsxs)(r.vyj,{direction:"vertical",size:4,children:[(0,a.jsxs)(r.vyj,{align:"center",size:8,wrap:!0,children:[R&&(0,a.jsx)(N.ZP,{data:R,size:24}),(0,a.jsx)(A,{level:5,className:"m-0",children:z}),!D&&(0,a.jsx)(r.j8w,{color:(e=>{switch(e){case"pending":case"retrying":case"skipped":default:return r.tAb.DEFAULT;case"in_processing":return r.tAb.INFO;case"complete":return r.tAb.SUCCESS;case"error":return r.tAb.ERROR;case"paused":return r.tAb.MARBLE}})(m.status),children:(g=m.status)?P(g):"Unknown"})]}),"error"===m.status&&(0,a.jsxs)(r.vyj,{children:[(0,a.jsx)(I,{type:"secondary",size:"sm",ellipsis:{rows:1,expandable:!0,symbol:"more",tooltip:!0},children:m.message||"Unknown error"}),m.message&&(0,a.jsx)(S.Z,{copyText:m.message,size:"small",className:"ml-1"})]})]})}),(0,a.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,a.jsx)(M,{type:"secondary",size:"sm",children:U})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:D?(0,a.jsx)(r.ZJQ,{size:"small"}):(0,a.jsx)(M,{type:"secondary",size:"sm",children:E(new Date(m.updated_at),new Date,{addSuffix:!0})})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:"error"===m.status&&(0,a.jsxs)(r.vyj,{size:0,split:(0,a.jsx)(r.htM,{type:"vertical"}),children:[w&&(0,a.jsx)(r.wpx,{type:"link",size:"small",loading:v,onClick:F,className:"p-0",children:"Retry"}),!C&&(0,a.jsx)(r.wpx,{type:"link",size:"small",loading:_,onClick:H,className:"p-0",children:"Dismiss"})]})})]})})},O=e=>"paused"===e?"Awaiting Processing":e.split("_").map(f.kC).join(" "),D=()=>{var e,n;let[t,s]=(0,o.useState)(!1),{searchQuery:i,updateSearch:c,statusFilters:d,updateStatusFilters:u,showDismissed:g,updateShowDismissed:m,applyFilters:p,resetAndApplyFilters:f,availableStatuses:y,listProps:x,paginationProps:v}=h(),j=(0,o.useCallback)(e=>{u(e)},[u]),_=(0,o.useCallback)(()=>{p(),s(!1)},[p]),C=(0,o.useCallback)(()=>{f(),s(!1)},[f]),w=(0,a.jsxs)(r.jqI,{vertical:!0,className:"min-w-[220px]",children:[(0,a.jsxs)(r.jqI,{vertical:!0,className:"gap-1.5 px-4 py-2",children:[(0,a.jsx)(r.E_O.Group,{value:d,onChange:j,className:"flex flex-col gap-1.5",children:y.map(e=>(0,a.jsx)(r.E_O,{value:e,children:O(e)},e))}),(0,a.jsx)(r.E_O,{checked:g,onChange:e=>m(e.target.checked),children:"Dismissed"})]}),(0,a.jsx)(r.htM,{className:"m-0"}),(0,a.jsxs)(r.jqI,{justify:"space-between",className:"px-4 py-2",children:[(0,a.jsx)(r.wpx,{size:"small",type:"text",onClick:C,className:"-ml-2",children:"Reset"}),(0,a.jsx)(r.wpx,{size:"small",type:"primary",onClick:_,children:"Apply"})]})]});return(0,a.jsxs)(r.jqI,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,a.jsxs)(r.jqI,{justify:"space-between",align:"center",children:[(0,a.jsx)("div",{className:"min-w-[300px]",children:(0,a.jsx)(l.f,{value:null!=i?i:"",onChange:c,placeholder:"Search by monitor name..."})}),(0,a.jsx)(r.bPF,{content:w,trigger:"click",placement:"bottomRight",open:t,onOpenChange:s,children:(0,a.jsx)(r.wpx,{icon:(0,a.jsx)(r.PJP._ME,{}),iconPosition:"end",children:"Filter"})})]}),(0,a.jsx)(r.krs,{...x,className:"h-full overflow-scroll",renderItem:e=>(0,a.jsx)(r.krs.Item,{children:(0,a.jsx)(R,{task:e})})}),(0,a.jsx)(r.B7X,{...v,showSizeChanger:{suffixIcon:(0,a.jsx)(r.PJP._ME,{})},hideOnSinglePage:(null===(e=v.pageSize)||void 0===e?void 0:e.toString())===(null===(n=v.pageSizeOptions)||void 0===n?void 0:n[0])})]})};var q=t(77213);let z=()=>(0,a.jsx)(q.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,a.jsx)(r.jqI,{justify:"center",align:"center",className:"h-full",children:(0,a.jsx)(r.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})});var U=t(79894),F=t.n(U);let H=()=>(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,a.jsx)(F(),{href:u.KH,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"primary",children:"Visit integrations"})})});var G=t(14908);(s=i||(i={})).ATTENTION_REQUIRED="attention-required",s.IN_PROGRESS="in-progress";var L=()=>{let{flags:e}=(0,c.hz)(),n=!!e.heliosV2,t=(0,o.useMemo)(()=>n?Object.values(i):["attention-required"],[n]),{activeTab:s,onTabChange:a}=(0,G.Z)({tabKeys:t});return{tabs:(0,o.useMemo)(()=>{let e=[{label:"Attention required",hash:"attention-required"}];return n&&e.push({label:"Activity",hash:"in-progress"}),e},[n]),activeTab:s,onTabChange:a}},J=t(83158),K=t(9110),B=t(62678),Z=t(31883),W=t(99824),Q=t(99089),V=t(63537);let Y=e=>{let n=(0,r.S37)(),[t]=(0,Q.rL)(),s=(0,r.UD8)();return{confirmAll:async(i,a)=>{let r=B.FieldActionType.PROMOTE,o=Date.now();if(!await n.confirm((0,V.nB)(W.Me[r],W.e_[r](a))))return;s.open({key:o,type:"loading",content:"".concat(W.T0[r]," ").concat(a," ").concat((0,f._6)(a,"field","fields"),"..."),duration:0});let l=await t({query:{confidence_bucket:[i]},path:{monitor_config_id:e,action_type:r},body:{excluded_resource_urns:[]}});if((0,Z.D4)(l)){s.open({key:o,type:"error",content:(0,V.v_)(r),duration:5});return}s.open({key:o,type:"success",content:"".concat(a," ").concat((0,f._6)(a,"field","fields")," approved â€” stronger governance, less busywork."),duration:10})}}},$=e=>{let{item:n,reviewHref:t,onConfirmAll:s}=e,i=[(0,a.jsx)(F(),{href:{pathname:t,query:{confidenceBucket:n.severity}},passHref:!0,children:(0,a.jsx)(r.wpx,{type:"text",size:"small",icon:(0,a.jsx)(r.PJP.ejL,{}),"aria-label":"Review ".concat(n.label," fields"),children:"Review"})},n.label)];return n.severity===J.$.HIGH&&s&&i.push((0,a.jsx)(r.wpx,{type:"text",size:"small",icon:(0,a.jsx)(r.PJP.WzW,{}),"aria-label":"Approve all ".concat(n.label," fields"),onClick:s,children:"Approve"},"confirm")),i},X=e=>{let{item:n,reviewHref:t,monitorId:s}=e,i=(0,V.Oq)(n.severity),{confirmAll:o}=Y(s);return(0,a.jsx)(r.V4A,{size:"small",styles:{body:{display:"none"}},title:(0,a.jsxs)(r.vyj,{children:[(0,a.jsx)(r.t3Z,{size:24,icon:(0,a.jsx)(r.QMR,{color:"black"})}),(0,a.jsxs)(r.lKn,{type:"secondary",className:"font-normal",children:[(0,f.pF)(n.count)," ",(0,f._6)(n.count,"field","fields")]}),(0,a.jsx)(r.lKn,{children:n.label}),i&&(0,a.jsx)(K.D,{severity:i,format:()=>null})]}),actions:$({item:n,reviewHref:t,onConfirmAll:()=>{o(n.severity,n.count)}})})};var ee=t(98145);let en=e=>{let{confidenceCounts:n,reviewHref:t,monitorId:s,...i}=e,l=(0,o.useMemo)(()=>[{label:ee.bI.HIGH,count:n.highConfidenceCount,severity:J.$.HIGH},{label:ee.bI.MEDIUM,count:n.mediumConfidenceCount,severity:J.$.MEDIUM},{label:ee.bI.LOW,count:n.lowConfidenceCount,severity:J.$.LOW}].filter(e=>e.count>0),[n]);return(0,a.jsx)(r.nxd,{dataSource:l,itemKey:e=>e.severity,columns:3,gutter:4,renderItem:e=>(0,a.jsx)(X,{item:e,reviewHref:t,monitorId:s}),...i})};var et=t(54762),es=t(42905),ei=t.n(es);let ea=(e,n)=>{let t=ee.v8.get(e);return t?(0,f._6)(n,t[0],t[1]):e},er=e=>{let{updates:n,isAssetList:t}=e,s=(0,o.useMemo)(()=>n?Object.entries(n).filter(e=>{let[n,t]=e;return null!==t&&t>0&&!ee.EP.includes(n)}).sort((e,n)=>{let t=ee.H6.indexOf(e[0]),s=ee.H6.indexOf(n[0]);return -1===t&&-1===s?0:-1===t?1:-1===s?-1:t-s}).map(e=>{let[n,t]=e;return"".concat((0,f.pF)(null!=t?t:0)," ").concat(ea(n,null!=t?t:0))}):[],[n]);if(!n)return null;if(t){let e=s.join(", ");return(0,a.jsxs)("span",{children:[e," detected."]})}let i=s.join(", ");return(0,a.jsx)("span",{children:i})};var eo=t(71985);let{Text:el}=r.AntTypography,ec={[eo.w.WEBSITE]:["asset","assets"],[eo.w.DATASTORE]:["field","fields"],[eo.w.INFRASTRUCTURE]:["system","systems"]},ed=e=>{let n,{monitorSummary:t,href:s,...i}=e,{flags:l}=(0,c.hz)(),{heliosV2:d}=l,{name:u,consent_status:g,total_updates:m,updates:p,last_monitored:y,secrets:x,key:h,connection_type:v,saas_config:j,monitorType:_,isTestMonitor:C}=t;if(_===eo.w.DATASTORE){var w,b,k;n={highConfidenceCount:null!==(w=null==p?void 0:p.classified_high_confidence)&&void 0!==w?w:0,mediumConfidenceCount:null!==(b=null==p?void 0:p.classified_medium_confidence)&&void 0!==b?b:0,lowConfidenceCount:null!==(k=null==p?void 0:p.classified_low_confidence)&&void 0!==k?k:0}}let[S,T]=(0,o.useState)(!1),I=!!n&&(n.highConfidenceCount>0||n.mediumConfidenceCount>0||n.lowConfidenceCount>0),M=_===eo.w.DATASTORE&&I&&!!h,A=y?(0,f.p6)(new Date(y)):void 0,P=y?E(new Date(y),new Date,{addSuffix:!0}):void 0,R=(0,f._6)(null!=m?m:0,ec[_][0],ec[_][1]);return(0,a.jsx)(r.krs.Item,{"data-testid":"monitor-result-".concat(h),...i,children:(0,a.jsxs)(r.jqI,{vertical:!0,className:"grow",children:[(0,a.jsxs)(r.bue,{gutter:{xs:6,lg:12},className:"items-center",children:[(0,a.jsx)(r.JGx,{span:d?14:17,children:(0,a.jsx)(r.krs.Item.Meta,{avatar:(0,a.jsx)(N.ZP,{data:{kind:N.hY.CONNECTION,connectionType:v,name:u,key:h,saasType:null==j?void 0:j.type,websiteUrl:null==x?void 0:x.url}}),title:(0,a.jsxs)(r.jqI,{align:"center",gap:4,className:ei()["monitor-result__title"],children:[(0,a.jsx)(F(),{href:s,"data-testid":"monitor-link",children:u}),(0,a.jsxs)(el,{type:"secondary",children:[(0,f.pF)(null!=m?m:0)," ",R]}),g&&(0,a.jsx)(et.l,{consentStatus:g}),C&&(0,a.jsx)(r.j8w,{color:"nectar",children:"test monitor"})]}),description:!!p&&(0,a.jsx)(er,{updates:p,isAssetList:_===eo.w.WEBSITE})})}),(0,a.jsx)(r.JGx,{span:5,className:"flex justify-end",children:!!P&&(0,a.jsx)(r.esZ,{title:A,children:(0,a.jsxs)(el,{type:"secondary","data-testid":"monitor-date",children:[(0,a.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),P]})})}),(0,a.jsxs)(r.JGx,{span:d?5:2,className:"flex items-center justify-end",children:[d&&M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.wpx,{type:"link",className:"p-0",icon:(0,a.jsx)(r.CHo,{isOpen:S}),iconPosition:"end",onClick:()=>T(!S),"aria-haspopup":"true","aria-expanded":S,"aria-controls":"confidence-row-".concat(h),"aria-label":"".concat(S?"Collapse":"Expand"," findings"),children:(0,a.jsxs)(r.vyj,{children:[(0,a.jsx)(r.QMR,{}),"Findings"]})}),(0,a.jsx)(r.htM,{type:"vertical",orientationMargin:0})]}),(0,a.jsx)(F(),{href:s,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(t.key),children:"Review"})},"review")]})]}),d&&M&&n&&(0,a.jsx)(r.RrR,{isExpanded:S,motionKey:"confidence-row-".concat(h),children:(0,a.jsx)(en,{confidenceCounts:n,reviewHref:s,monitorId:h,className:"mt-6",id:"confidence-row-".concat(h)})})]})})};var eu=()=>{var e,n,t;let s=(0,r.pmc)(),{tabs:f,activeTab:y,onTabChange:x}=L(),{flags:h}=(0,c.hz)(),{paginationProps:v,pageIndex:j,pageSize:_,resetPagination:C}=(0,m.S)(),[w,b]=(0,o.useState)(""),{webMonitor:k,heliosV2:E}=h,S=[...k?[eo.w.WEBSITE]:[],...E?[eo.w.DATASTORE]:[]],{data:N,isError:T,isLoading:I}=(0,p.Ud)({page:j,size:_,search:w,monitor_type:S.length>0?S:void 0});(0,o.useEffect)(()=>{C()},[w]),(0,o.useEffect)(()=>{T&&s({title:"Error fetching data",description:"Please try again later",status:"error"})},[T,s]);let M=(null==N?void 0:null===(e=N.items)||void 0===e?void 0:e.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[];return k||E?(0,a.jsxs)(d.Z,{title:"Action center",mainProps:{overflow:"hidden"},fullHeight:!0,children:[(0,a.jsx)(g.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}],isSticky:!1}),(0,a.jsx)(r.Niu,{"aria-label":"Action center tabs",mode:"horizontal",items:f.map(e=>({key:e.hash,label:e.label})),selectedKeys:[y],onClick:async e=>{let n=Object.values(i).find(n=>n===e.key);n&&await x(n)},className:"mb-4","data-testid":"action-center-tabs"}),y===i.IN_PROGRESS?(0,a.jsx)(D,{}):(0,a.jsxs)(r.jqI,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,a.jsx)(r.jqI,{className:"justify-between ",children:(0,a.jsx)(l.f,{value:w,onChange:b})}),(0,a.jsx)(r.krs,{loading:I,dataSource:M,locale:{emptyText:(0,a.jsx)(H,{})},className:"h-full overflow-y-auto overflow-x-clip",renderItem:e=>{let n=e.key&&e.monitorType?"".concat(u.vi,"/").concat(e.monitorType,"/").concat(e.key):"";return!!(null==e?void 0:e.key)&&(0,a.jsx)(ed,{monitorSummary:e,href:n},e.key)}}),(0,a.jsx)(r.B7X,{...v,total:(null==N?void 0:N.total)||0,showSizeChanger:{suffixIcon:(0,a.jsx)(r.PJP._ME,{})},hideOnSinglePage:(null===(n=v.pageSize)||void 0===n?void 0:n.toString())===(null===(t=v.pageSizeOptions)||void 0===t?void 0:t[0])})]})]}):(0,a.jsx)(z,{})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}},function(e){e.O(0,[431,7245,4589,8023,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);