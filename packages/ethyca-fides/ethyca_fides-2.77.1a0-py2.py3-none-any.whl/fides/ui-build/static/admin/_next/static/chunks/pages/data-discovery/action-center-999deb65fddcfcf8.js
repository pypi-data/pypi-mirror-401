(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{40741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return t(4582)}])},77213:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var s=t(24246),i=t(41725),a=t(88038),r=t.n(a),o=t(86677);t(27378);var l=t(25980),c=t(90867),d=t(42478),u=t(77830),g=()=>{let e=(0,o.useRouter)();return(0,s.jsx)(i.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,s.jsxs)(i.TJV,{children:[(0,s.jsxs)(i.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,s.jsx)(i.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,s.jsx)(i.zxk,{onClick:()=>{e.push(u.AD)},children:"Configure"})]}),(0,s.jsxs)(i.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:n,title:t,padded:a=!0,mainProps:u}=e,m=(0,l.hz)(),p=(0,o.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,y=!(m.flags.messagingConfiguration&&f),{data:h}=(0,d.JE)(void 0,{skip:y}),{data:x}=(0,c.PW)(void 0,{skip:y}),v=m.flags.messagingConfiguration&&(!h||!x)&&f;return(0,s.jsxs)(i.ad9,{"data-testid":t,direction:"column",h:"100vh",children:[(0,s.jsxs)(r(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(i.ad9,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[v?(0,s.jsx)(g,{}):null,n]})]})}},54762:function(e,n,t){"use strict";t.d(n,{l:function(){return o}});var s=t(24246),i=t(41725),a=t(62165),r=t(60240);let o=e=>{let{consentStatus:n}=e,{flags:t}=(0,a.hz)(),{assetConsentStatusLabels:o}=t;return o&&(null==n?void 0:n.status)===r.pF.ALERT?(0,s.jsx)(i.ua7,{title:null==n?void 0:n.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,s.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,s.jsx)(i.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,n,t){"use strict";t.d(n,{FU:function(){return c},JE:function(){return i},Ki:function(){return u},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return s},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:s,useGetActiveMessagingProviderQuery:i,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:u,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=t(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,n,t,s)=>{let i=await s({url:"messaging/default/active"});return i.error&&404===i.error.status?{data:null}:i},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},4582:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eu}});var s,i,a=t(24246),r=t(41725),o=t(27378),l=t(30952),c=t(25980),d=t(35287),u=t(77830),g=t(58754),m=t(9270),p=t(37059),f=t(16394),y=t(17245),h=t(67359);let x=()=>{let{resetPagination:e,pageIndex:n,pageSize:t,paginationProps:s}=(0,m.S)(),{searchQuery:i,updateSearch:l}=(0,y.Rx)(),c=(0,o.useMemo)(()=>[h.n.PENDING,h.n.IN_PROCESSING,h.n.PAUSED,h.n.RETRYING,h.n.ERROR],[]),[d,u]=(0,o.useState)(c),[g,f]=(0,o.useState)(!1),[x,v]=(0,o.useState)(c),[j,C]=(0,o.useState)(!1),_=(0,o.useCallback)(n=>{l(n),e()},[l,e]),k=(0,o.useCallback)(e=>{v(e)},[]),b=(0,o.useCallback)(e=>{C(e)},[]),S=(0,o.useCallback)(()=>{u(x),f(j),e()},[x,j,e]),w=(0,o.useCallback)(()=>{v(c),C(!1),u(c),f(!1),e()},[c,e]),E=[h.n.PENDING,h.n.IN_PROCESSING,h.n.COMPLETE,h.n.ERROR,h.n.PAUSED,h.n.RETRYING,h.n.SKIPPED],{data:T,isLoading:N,isFetching:I}=(0,p.$h)({page:n,size:t,search:i,statuses:d.length>0?d:void 0,return_dismissed:g},{pollingInterval:3e3,refetchOnFocus:!0,refetchOnReconnect:!0});return{searchQuery:i,updateSearch:_,statusFilters:x,updateStatusFilters:k,showDismissed:j,updateShowDismissed:b,applyFilters:S,resetAndApplyFilters:w,availableStatuses:E,listProps:(0,o.useMemo)(()=>({dataSource:(null==T?void 0:T.items)||[],loading:N,locale:{emptyText:(0,a.jsx)(r.HYy,{image:r.HYy.PRESENTED_IMAGE_SIMPLE,description:"No tasks in progress"})}}),[null==T?void 0:T.items,N]),paginationProps:{...s,total:null==T?void 0:T.total},isLoading:N,isFetching:I}};var v=t(10969),j=t(60145),C=t(11558),_=t(70641),k=t(7317),b=t(85302),S=t(64892);function w(e,n,t){let s;let i=(0,j.j)(),a=t?.locale??i.locale??v._,r=(0,b.U)(e,n);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:r}),[l,c]=(0,k.d)(t?.in,...r>0?[n,e]:[e,n]),d=(0,C.u)(t?.roundingMethod??"round"),u=c.getTime()-l.getTime(),g=u/S.yJ,m=(u-((0,_.D)(c)-(0,_.D)(l)))/S.yJ,p=t?.unit;if("second"===(s=p||(g<1?"second":g<60?"minute":g<S.H_?"hour":m<S.fH?"day":m<S.UU?"month":"year"))){let e=d(u/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===s){let e=d(g);return a.formatDistance("xMinutes",e,o)}if("hour"===s){let e=d(g/60);return a.formatDistance("xHours",e,o)}if("day"===s){let e=d(m/S.H_);return a.formatDistance("xDays",e,o)}if("month"===s){let e=d(m/S.fH);return 12===e&&"month"!==p?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=d(m/S.UU);return a.formatDistance("xYears",e,o)}}var E=t(88340),T=t(41337),N=t(60240);let{Paragraph:I,Text:M,Title:A}=r.Typography,P=e=>"paused"===e?"Awaiting Processing":e.split("_").map(f.kC).join(" "),R=e=>{var n,t,s,i,o,l,c,d,u,g;let{task:m,...y}=e,h=(0,r.p8r)(),[x,{isLoading:v}]=(0,p.mL)(),[j,{isLoading:C}]=(0,p.QC)(),_=!!m.dismissed,k="error"===m.status&&m.action_type!==N.K8.DETECTION,{data:b}=(0,p.Ud)({page:1,size:1e3}),S=m.monitor_config_id?null==b?void 0:null===(n=b.items)||void 0===n?void 0:n.find(e=>e.key===m.monitor_config_id):void 0,R=S?(0,T.AZ)({connection_type:S.connection_type,name:null!==(i=S.name)&&void 0!==i?i:null,key:null!==(o=S.key)&&void 0!==o?o:null,saas_config:S.saas_config?{type:null!==(l=S.saas_config.type)&&void 0!==l?l:null,name:null!==(c=S.saas_config.name)&&void 0!==c?c:null,fides_key:null!==(d=S.saas_config.fides_key)&&void 0!==d?d:null}:null,secrets:(null===(s=S.secrets)||void 0===s?void 0:s.url)?{url:S.secrets.url}:null}):m.connection_type?(0,T.AZ)({connection_type:m.connection_type,name:null!==(u=m.connection_name)&&void 0!==u?u:m.connection_type?m.connection_type.toString():null,key:null,saas_config:null,secrets:null}):void 0,O=(null===(t=m.staged_resource_urns)||void 0===t?void 0:t.length)||0,z=["pending","in_processing","paused","retrying"].includes((m.status||"").toLowerCase()),D=m.field_count||O,U=(()=>{if(m.action_type===N.K8.CLASSIFICATION||m.action_type===N.K8.LLM_CLASSIFICATION){let e="complete"===m.status?"Classified":"Classifying";return"".concat(e," ").concat(D," ").concat((0,f._6)(D,"field","fields"))}if(m.action_type===N.K8.DETECTION)return"complete"===m.status?"Monitor scanned":"Monitor scanning";if(m.action_type===N.K8.PROMOTION){let e="complete"===m.status?"Approved":"Approving";return"".concat(e," ").concat(D," ").concat((0,f._6)(D,"field","fields"))}return m.action_type?m.action_type.replace(/_/g," "):"Task"})(),q=m.monitor_name||"Unknown monitor",J=async()=>{try{await x({taskId:m.id}).unwrap(),h({status:"success",description:"Task retry initiated successfully"})}catch(t){var e;let n=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||(null==t?void 0:t.message)||"Unknown error occurred";h({status:"error",description:"Failed to retry task: ".concat(n)})}},H=async()=>{try{await j({taskId:m.id}).unwrap(),h({status:"success",description:"Task dismissed successfully"})}catch(t){var e;let n=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||(null==t?void 0:t.message)||"Unknown error occurred";h({status:"error",description:"Failed to dismiss task: ".concat(n)})}};return(0,a.jsx)("div",{...y,className:"w-full",children:(0,a.jsxs)(r.X2j,{gutter:12,className:"w-full",children:[(0,a.jsx)(r.JXS,{span:14,className:"align-middle",children:(0,a.jsxs)(r.TaI,{direction:"vertical",size:4,children:[(0,a.jsxs)(r.TaI,{align:"center",size:8,wrap:!0,children:[R&&(0,a.jsx)(T.ZP,{data:R,size:24}),(0,a.jsx)(A,{level:5,className:"m-0",children:U}),!z&&(0,a.jsx)(r.Vp9,{color:(e=>{switch(e){case"pending":case"retrying":case"skipped":default:return r.tAb.DEFAULT;case"in_processing":return r.tAb.INFO;case"complete":return r.tAb.SUCCESS;case"error":return r.tAb.ERROR;case"paused":return r.tAb.MARBLE}})(m.status),children:(g=m.status)?P(g):"Unknown"})]}),"error"===m.status&&(0,a.jsxs)(r.TaI,{children:[(0,a.jsx)(I,{type:"secondary",size:"sm",ellipsis:{rows:1,expandable:!0,symbol:"more",tooltip:!0},children:m.message||"Unknown error"}),m.message&&(0,a.jsx)(E.Z,{copyText:m.message,size:"small",className:"ml-1"})]})]})}),(0,a.jsx)(r.JXS,{span:4,className:"flex items-center justify-end",children:(0,a.jsx)(M,{type:"secondary",size:"sm",children:q})}),(0,a.jsx)(r.JXS,{span:3,className:"flex items-center justify-end",children:z?(0,a.jsx)(r.yCA,{size:"small"}):(0,a.jsx)(M,{type:"secondary",size:"sm",children:w(new Date(m.updated_at),new Date,{addSuffix:!0})})}),(0,a.jsx)(r.JXS,{span:3,className:"flex items-center justify-end",children:"error"===m.status&&(0,a.jsxs)(r.TaI,{size:0,split:(0,a.jsx)(r.izJ,{type:"vertical"}),children:[k&&(0,a.jsx)(r.zxk,{type:"link",size:"small",loading:v,onClick:J,className:"p-0",children:"Retry"}),!_&&(0,a.jsx)(r.zxk,{type:"link",size:"small",loading:C,onClick:H,className:"p-0",children:"Dismiss"})]})})]})})},O=e=>"paused"===e?"Awaiting Processing":e.split("_").map(f.kC).join(" "),z=()=>{var e,n;let[t,s]=(0,o.useState)(!1),{searchQuery:i,updateSearch:c,statusFilters:d,updateStatusFilters:u,showDismissed:g,updateShowDismissed:m,applyFilters:p,resetAndApplyFilters:f,availableStatuses:y,listProps:h,paginationProps:v}=x(),j=(0,o.useCallback)(e=>{u(e)},[u]),C=(0,o.useCallback)(()=>{p(),s(!1)},[p]),_=(0,o.useCallback)(()=>{f(),s(!1)},[f]),k=(0,a.jsxs)(r.kCb,{vertical:!0,className:"min-w-[220px]",children:[(0,a.jsxs)(r.kCb,{vertical:!0,className:"gap-1.5 px-4 py-2",children:[(0,a.jsx)(r.XZJ.Group,{value:d,onChange:j,className:"flex flex-col gap-1.5",children:y.map(e=>(0,a.jsx)(r.XZJ,{value:e,children:O(e)},e))}),(0,a.jsx)(r.XZJ,{checked:g,onChange:e=>m(e.target.checked),children:"Dismissed"})]}),(0,a.jsx)(r.izJ,{className:"m-0"}),(0,a.jsxs)(r.kCb,{justify:"space-between",className:"px-4 py-2",children:[(0,a.jsx)(r.zxk,{size:"small",type:"text",onClick:_,className:"-ml-2",children:"Reset"}),(0,a.jsx)(r.zxk,{size:"small",type:"primary",onClick:C,children:"Apply"})]})]});return(0,a.jsxs)(r.kCb,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,a.jsxs)(r.kCb,{justify:"space-between",align:"center",children:[(0,a.jsx)("div",{className:"min-w-[300px]",children:(0,a.jsx)(l.f,{value:null!=i?i:"",onChange:c,placeholder:"Search by monitor name..."})}),(0,a.jsx)(r.J2e,{content:k,trigger:"click",placement:"bottomRight",open:t,onOpenChange:s,children:(0,a.jsx)(r.zxk,{icon:(0,a.jsx)(r.PJP._ME,{}),iconPosition:"end",children:"Filter"})})]}),(0,a.jsx)(r.aVo,{...h,className:"h-full overflow-scroll",renderItem:e=>(0,a.jsx)(r.aVo.Item,{children:(0,a.jsx)(R,{task:e})})}),(0,a.jsx)(r.tlE,{...v,showSizeChanger:{suffixIcon:(0,a.jsx)(r.PJP._ME,{})},hideOnSinglePage:(null===(e=v.pageSize)||void 0===e?void 0:e.toString())===(null===(n=v.pageSizeOptions)||void 0===n?void 0:n[0])})]})};var D=t(77213);let U=()=>(0,a.jsx)(D.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,a.jsx)(r.kCb,{justify:"center",align:"center",className:"h-full",children:(0,a.jsx)(r.bZj,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})});var q=t(79894),J=t.n(q);let H=()=>(0,a.jsx)(r.HYy,{image:r.HYy.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,a.jsx)(J(),{href:u.KH,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.zxk,{type:"primary",children:"Visit integrations"})})});var F=t(14908);(s=i||(i={})).ATTENTION_REQUIRED="attention-required",s.IN_PROGRESS="in-progress";var L=()=>{let{flags:e}=(0,c.hz)(),n=!!e.heliosV2,t=(0,o.useMemo)(()=>n?Object.values(i):["attention-required"],[n]),{activeTab:s,onTabChange:a}=(0,F.Z)({tabKeys:t});return{tabs:(0,o.useMemo)(()=>{let e=[{label:"Attention required",hash:"attention-required"}];return n&&e.push({label:"Activity",hash:"in-progress"}),e},[n]),activeTab:s,onTabChange:a}},K=t(83158),B=t(9110),Z=t(62678),G=t(31883),X=t(99824),V=t(99089),W=t(63537);let Y=e=>{let n=(0,r.ddY)(),[t]=(0,V.rL)(),s=(0,r.UD8)();return{confirmAll:async(i,a)=>{let r=Z.FieldActionType.PROMOTE,o=Date.now();if(!await n.confirm((0,W.nB)(X.Me[r],X.e_[r](a))))return;s.open({key:o,type:"loading",content:"".concat(X.T0[r]," ").concat(a," ").concat((0,f._6)(a,"field","fields"),"..."),duration:0});let l=await t({query:{confidence_bucket:[i]},path:{monitor_config_id:e,action_type:r},body:{excluded_resource_urns:[]}});if((0,G.D4)(l)){s.open({key:o,type:"error",content:(0,W.v_)(r),duration:5});return}s.open({key:o,type:"success",content:"".concat(a," ").concat((0,f._6)(a,"field","fields")," approved â€” stronger governance, less busywork."),duration:10})}}},$=e=>{let{item:n,reviewHref:t,onConfirmAll:s}=e,i=[(0,a.jsx)(J(),{href:{pathname:t,query:{confidenceBucket:n.severity}},passHref:!0,children:(0,a.jsx)(r.zxk,{type:"text",size:"small",icon:(0,a.jsx)(r.PJP.ejL,{}),"aria-label":"Review ".concat(n.label," fields"),children:"Review"})},n.label)];return n.severity===K.$.HIGH&&s&&i.push((0,a.jsx)(r.zxk,{type:"text",size:"small",icon:(0,a.jsx)(r.PJP.WzW,{}),"aria-label":"Approve all ".concat(n.label," fields"),onClick:s,children:"Approve"},"confirm")),i},Q=e=>{let{item:n,reviewHref:t,monitorId:s}=e,i=(0,W.Oq)(n.severity),{confirmAll:o}=Y(s);return(0,a.jsx)(r.Zbd,{size:"small",styles:{body:{display:"none"}},title:(0,a.jsxs)(r.TaI,{children:[(0,a.jsx)(r.qEK,{size:24,icon:(0,a.jsx)(r.QMR,{color:"black"})}),(0,a.jsxs)(r.xvT,{type:"secondary",className:"font-normal",children:[(0,f.pF)(n.count)," ",(0,f._6)(n.count,"field","fields")]}),(0,a.jsx)(r.xvT,{children:n.label}),i&&(0,a.jsx)(B.D,{severity:i,format:()=>null})]}),actions:$({item:n,reviewHref:t,onConfirmAll:()=>{o(n.severity,n.count)}})})};var ee=t(98145);let en=e=>{let{confidenceCounts:n,reviewHref:t,monitorId:s,...i}=e,l=(0,o.useMemo)(()=>[{label:ee.bI.HIGH,count:n.highConfidenceCount,severity:K.$.HIGH},{label:ee.bI.MEDIUM,count:n.mediumConfidenceCount,severity:K.$.MEDIUM},{label:ee.bI.LOW,count:n.lowConfidenceCount,severity:K.$.LOW}].filter(e=>e.count>0),[n]);return(0,a.jsx)(r.nxd,{dataSource:l,itemKey:e=>e.severity,columns:3,gutter:4,renderItem:e=>(0,a.jsx)(Q,{item:e,reviewHref:t,monitorId:s}),...i})};var et=t(54762),es=t(42905),ei=t.n(es);let ea=(e,n)=>{let t=ee.v8.get(e);return t?(0,f._6)(n,t[0],t[1]):e},er=e=>{let{updates:n,isAssetList:t}=e,s=(0,o.useMemo)(()=>n?Object.entries(n).filter(e=>{let[n,t]=e;return null!==t&&t>0&&!ee.EP.includes(n)}).sort((e,n)=>{let t=ee.H6.indexOf(e[0]),s=ee.H6.indexOf(n[0]);return -1===t&&-1===s?0:-1===t?1:-1===s?-1:t-s}).map(e=>{let[n,t]=e;return"".concat((0,f.pF)(null!=t?t:0)," ").concat(ea(n,null!=t?t:0))}):[],[n]);if(!n)return null;if(t){let e=s.join(", ");return(0,a.jsxs)("span",{children:[e," detected."]})}let i=s.join(", ");return(0,a.jsx)("span",{children:i})};var eo=t(71985);let{Text:el}=r.Typography,ec={[eo.w.WEBSITE]:["asset","assets"],[eo.w.DATASTORE]:["field","fields"],[eo.w.INFRASTRUCTURE]:["system","systems"]},ed=e=>{let n,{monitorSummary:t,href:s,...i}=e,{flags:l}=(0,c.hz)(),{heliosV2:d}=l,{name:u,consent_status:g,total_updates:m,updates:p,last_monitored:y,secrets:h,key:x,connection_type:v,saas_config:j,monitorType:C,isTestMonitor:_}=t;if(C===eo.w.DATASTORE){var k,b,S;n={highConfidenceCount:null!==(k=null==p?void 0:p.classified_high_confidence)&&void 0!==k?k:0,mediumConfidenceCount:null!==(b=null==p?void 0:p.classified_medium_confidence)&&void 0!==b?b:0,lowConfidenceCount:null!==(S=null==p?void 0:p.classified_low_confidence)&&void 0!==S?S:0}}let[E,N]=(0,o.useState)(!1),I=!!n&&(n.highConfidenceCount>0||n.mediumConfidenceCount>0||n.lowConfidenceCount>0),M=C===eo.w.DATASTORE&&I&&!!x,A=y?(0,f.p6)(new Date(y)):void 0,P=y?w(new Date(y),new Date,{addSuffix:!0}):void 0,R=(0,f._6)(null!=m?m:0,ec[C][0],ec[C][1]);return(0,a.jsx)(r.aVo.Item,{"data-testid":"monitor-result-".concat(x),...i,children:(0,a.jsxs)(r.kCb,{vertical:!0,className:"grow",children:[(0,a.jsxs)(r.X2j,{gutter:{xs:6,lg:12},className:"items-center",children:[(0,a.jsx)(r.JXS,{span:d?14:17,children:(0,a.jsx)(r.aVo.Item.Meta,{avatar:(0,a.jsx)(T.ZP,{data:{kind:T.hY.CONNECTION,connectionType:v,name:u,key:x,saasType:null==j?void 0:j.type,websiteUrl:null==h?void 0:h.url}}),title:(0,a.jsxs)(r.kCb,{align:"center",gap:4,className:ei()["monitor-result__title"],children:[(0,a.jsx)(J(),{href:s,"data-testid":"monitor-link",children:u}),(0,a.jsxs)(el,{type:"secondary",children:[(0,f.pF)(null!=m?m:0)," ",R]}),g&&(0,a.jsx)(et.l,{consentStatus:g}),_&&(0,a.jsx)(r.Vp9,{color:"nectar",children:"test monitor"})]}),description:!!p&&(0,a.jsx)(er,{updates:p,isAssetList:C===eo.w.WEBSITE})})}),(0,a.jsx)(r.JXS,{span:5,className:"flex justify-end",children:!!P&&(0,a.jsx)(r.ua7,{title:A,children:(0,a.jsxs)(el,{type:"secondary","data-testid":"monitor-date",children:[(0,a.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),P]})})}),(0,a.jsxs)(r.JXS,{span:d?5:2,className:"flex items-center justify-end",children:[d&&M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zxk,{type:"link",className:"p-0",icon:(0,a.jsx)(r.CHo,{isOpen:E}),iconPosition:"end",onClick:()=>N(!E),"aria-haspopup":"true","aria-expanded":E,"aria-controls":"confidence-row-".concat(x),"aria-label":"".concat(E?"Collapse":"Expand"," findings"),children:(0,a.jsxs)(r.TaI,{children:[(0,a.jsx)(r.QMR,{}),"Findings"]})}),(0,a.jsx)(r.izJ,{type:"vertical",orientationMargin:0})]}),(0,a.jsx)(J(),{href:s,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.zxk,{type:"link",className:"p-0","data-testid":"review-button-".concat(t.key),children:"Review"})},"review")]})]}),d&&M&&n&&(0,a.jsx)(r.RrR,{isExpanded:E,motionKey:"confidence-row-".concat(x),children:(0,a.jsx)(en,{confidenceCounts:n,reviewHref:s,monitorId:x,className:"mt-6",id:"confidence-row-".concat(x)})})]})})};var eu=()=>{var e,n,t;let s=(0,r.p8r)(),{tabs:f,activeTab:y,onTabChange:h}=L(),{flags:x}=(0,c.hz)(),{paginationProps:v,pageIndex:j,pageSize:C,resetPagination:_}=(0,m.S)(),[k,b]=(0,o.useState)(""),{webMonitor:S,heliosV2:w,oktaMonitor:E}=x,T=[...S?[eo.w.WEBSITE]:[],...w?[eo.w.DATASTORE]:[],...E?[eo.w.INFRASTRUCTURE]:[]],{data:N,isError:I,isLoading:M}=(0,p.Ud)({page:j,size:C,search:k,monitor_type:T.length>0?T:void 0});(0,o.useEffect)(()=>{_()},[k]),(0,o.useEffect)(()=>{I&&s({title:"Error fetching data",description:"Please try again later",status:"error"})},[I,s]);let A=(null==N?void 0:null===(e=N.items)||void 0===e?void 0:e.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[];return S||w||E?(0,a.jsxs)(d.Z,{title:"Action center",mainProps:{overflow:"hidden"},fullHeight:!0,children:[(0,a.jsx)(g.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}],isSticky:!1}),(0,a.jsx)(r.v2r,{"aria-label":"Action center tabs",mode:"horizontal",items:f.map(e=>({key:e.hash,label:e.label})),selectedKeys:[y],onClick:async e=>{let n=Object.values(i).find(n=>n===e.key);n&&await h(n)},className:"mb-4","data-testid":"action-center-tabs"}),y===i.IN_PROGRESS?(0,a.jsx)(z,{}):(0,a.jsxs)(r.kCb,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,a.jsx)(r.kCb,{className:"justify-between ",children:(0,a.jsx)(l.f,{value:k,onChange:b})}),(0,a.jsx)(r.aVo,{loading:M,dataSource:A,locale:{emptyText:(0,a.jsx)(H,{})},className:"h-full overflow-y-auto overflow-x-clip",renderItem:e=>{let n=e.key&&e.monitorType?"".concat(u.vi,"/").concat(e.monitorType,"/").concat(e.key):"";return!!(null==e?void 0:e.key)&&(0,a.jsx)(ed,{monitorSummary:e,href:n},e.key)}}),(0,a.jsx)(r.tlE,{...v,total:(null==N?void 0:N.total)||0,showSizeChanger:{suffixIcon:(0,a.jsx)(r.PJP._ME,{})},hideOnSinglePage:(null===(n=v.pageSize)||void 0===n?void 0:n.toString())===(null===(t=v.pageSizeOptions)||void 0===t?void 0:t[0])})]})]}):(0,a.jsx)(U,{})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}},function(e){e.O(0,[431,7245,4589,8023,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);