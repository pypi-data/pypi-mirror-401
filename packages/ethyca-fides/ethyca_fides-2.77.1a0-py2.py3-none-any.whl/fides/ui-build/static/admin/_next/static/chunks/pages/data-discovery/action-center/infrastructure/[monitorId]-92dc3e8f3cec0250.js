(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7890],{58095:function(e,t,n){var i=n(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}},95372:function(e){e.exports=function(e,t,n,i){for(var r=e.length,l=n+(i?1:-1);i?l--:++l<r;)if(t(e[l],l,e))return l;return -1}},8817:function(e,t,n){var i=n(95372),r=n(1129),l=n(58263);e.exports=function(e,t,n){return t==t?l(e,t,n):i(e,r,n)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,n){var i=n(52485),r=n(58095),l=n(21796),s=n(65581),a=n(47111),o=n(43735);e.exports=function(e,t,n){var c=-1,u=r,d=e.length,f=!0,h=[],m=h;if(n)f=!1,u=l;else if(d>=200){var p=t?null:a(e);if(p)return o(p);f=!1,u=s,m=new i}else m=t?[]:h;e:for(;++c<d;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,f&&v==v){for(var x=m.length;x--;)if(m[x]===v)continue e;t&&m.push(v),h.push(g)}else u(m,v,n)||(m!==h&&m.push(v),h.push(g))}return h}},56632:function(e,t,n){var i=n(89278),r=n(80068),l=n(50098);e.exports=function(e){return function(t,n,s){var a=Object(t);if(!r(t)){var o=i(n,3);t=l(t),n=function(e){return o(a[e],e,a)}}var c=e(t,n,s);return c>-1?a[o?t[c]:c]:void 0}}},47111:function(e,t,n){var i=n(46151),r=n(50344),l=n(43735),s=i&&1/l(new i([,-0]))[1]==1/0?function(e){return new i(e)}:r;e.exports=s},58263:function(e){e.exports=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return -1}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),r=n(89278),l=n(47991),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return -1;var o=null==n?0:l(n);return o<0&&(o=s(a+o,0)),i(e,r(t,3),o)}},50344:function(e){e.exports=function(){}},94919:function(e,t,n){var i=n(91936),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},83766:function(e,t,n){var i=n(92198);e.exports=function(e){return e&&e.length?i(e):[]}},50755:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/infrastructure/[monitorId]",function(){return n(72734)}])},58754:function(e,t,n){"use strict";var i=n(24246),r=n(41725),l=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:s=!0,children:a,rightContent:o,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(r.kCb,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(r.Dxz,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,i.jsx)(l.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var i=n(24246),r=n(41725),l=n(72707),s=n.n(l);let a=e=>{let{data:{formattedTitle:t,description:n,name:l,primaryName:s}}=e;return(0,i.jsxs)(r.kCb,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:s||l}),s&&": ".concat(l)]}),(0,i.jsx)("em",{className:"overflow-hidden text-ellipsis",children:n})]})},o=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:s().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),u=e=>{let{options:t,...n}=e,l=null==t?void 0:t.map(e=>o(e)?{...e,options:e.options.map(c)}:c(e));return(0,i.jsx)(r.PhF,{options:l,filterOption:(e,t)=>{var n,i;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:a,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var i=n(24246),r=n(64925),l=n.n(r),s=n(27378),a=n(16134),o=n(30002),c=n(28079),u=n(57072);let d=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,a.C)(c.U3),{isLoading:n}=(0,u.MO)(),i=(0,a.C)(u.qb),{isLoading:r}=(0,o.te)();return{dataUses:t,dataSubjects:(0,a.C)(o.ZL),dataCategories:i,isLoading:e||n||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:r}=d(),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let r=t(a(e,n)),l=!!i.parent_key;return{name:i.name||void 0,primaryName:l&&(null==r?void 0:r.name)!==i.name&&(null==r?void 0:r.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:r,primaryName:l}=o(e,t,n);return r?l?(0,i.jsxs)(s.Fragment,{children:[(0,i.jsxs)("strong",{children:[l,":"]})," ",r]},e):(0,i.jsx)("strong",{children:r},e):e},u=t=>l()(e,{fides_key:t}),f=e=>l()(t,{fides_key:e}),h=e=>l()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:u,getDataUseDisplayName:e=>c(e,u,1),getDataUseDisplayNameProps:e=>o(e,u,1),getDataCategories:()=>t,getDataCategoryByKey:f,getDataCategoryDisplayName:e=>c(e,f,2),getDataCategoryDisplayNameProps:e=>o(e,f,2),getDataSubjects:()=>n,getDataSubjectByKey:h,getDataSubjectDisplayName:e=>{let t=h(e);return t?t.name:e},getDataSubjectDisplayNameProps:e=>{let t=h(e);return t?{name:t.name||e}:{}},getPrimaryKey:a,isLoading:r}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),r=n(41725),l=n(79894),s=n.n(l),a=n(27378);let{Text:o}=r.Typography,c=e=>{let{items:t,...n}=e,l=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let l=n===t.length-1,a={...e},c=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,i.jsx)(o,{style:{color:"inherit",maxWidth:l?void 0:400},ellipsis:!l,id:l?"breadcrumb-current-page":void 0,children:a.title})),c)?a.title=(0,i.jsx)(r.zxk,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,i.jsx)(s(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,i.jsx)(r.aGc,{items:l,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var i=n(27378),r=n(36866);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.h)(e),{pageIndex:n,pageSize:l,updatePageIndex:s,updatePageSize:a,pageSizeOptions:o,showSizeChanger:c}=t,u=(0,i.useMemo)(()=>({current:n,pageSize:l,showSizeChanger:c,pageSizeOptions:o.map(String),onChange:s,onShowSizeChange:(e,t)=>{a(t)}}),[n,l,c,o,s,a]);return{...t,paginationProps:u}}},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return i.Bd},L5:function(){return i.L5},MO:function(){return i.MO},qb:function(){return i.qb}});var i=n(5785)},72734:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var i=n(24246),r=n(86677),l=n(35287),s=n(77830),a=n(58754),o=n(41725),c=n(27378),u=n(30952),d=n(37059),f=n(16394),h=n(79283),m=n(34929),p=e=>{let{onSelectDataCategory:t,urn:n,...r}=e,{getDataUseDisplayNameProps:l,getDataUses:s}=(0,m.Z)(),a=s().filter(e=>e.active),[u,d]=(0,c.useState)(!1),f=a.map(e=>{let{name:t,primaryName:n}=l(e.fides_key);return{value:e.fides_key,label:(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:n||t}),n&&": ".concat(t)]}),name:t,primaryName:n,description:e.description||""}});return(0,i.jsx)(h.l,{options:f,prefix:(0,i.jsx)(o.zxk,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,i.jsx)(o.PJP.mm_,{}),disabled:r.disabled}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer -ml-5"},style:{"--ant-select-multiple-selector-bg-disabled":"transparent"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:u,onOpenChange:e=>d(e),onSelect:e=>{t(e),d(!1)},"data-classification-select":n,popupMatchSelectWidth:600,...r})},g=n(812),v=n(46628),x=n(70675),y=n(88708);let k=e=>{let{monitorId:t,system:n,allowIgnore:r,activeTab:l,addIcon:s=(0,i.jsx)(o.PJP.MCw,{}),ignoreIcon:a=(0,i.jsx)(o.PJP.uzw,{}),onPromoteSuccess:c}=e,[u,{isLoading:d}]=(0,x.Kj)(),[f,{isLoading:h}]=(0,x.Lm)(),[m,{isLoading:p}]=(0,x.RA)(),k=(0,o.p8r)(),b=async()=>{if(!n.urn){k((0,v.Vo)("Cannot promote: system URN is missing"));return}let e=await u({monitor_config_key:t,urn:n.urn});(0,g.D4)(e)?k((0,v.Vo)((0,g.e$)(e.error))):(k((0,v.t5)("".concat(n.name||"System"," has been promoted to the system inventory."))),c&&c())},j=async()=>{if(!n.urn){k((0,v.Vo)("Cannot ignore: system URN is missing"));return}let e=await f({monitor_config_key:t,urn:n.urn});(0,g.D4)(e)?k((0,v.Vo)((0,g.e$)(e.error))):(k((0,v.t5)("".concat(n.name||"System"," has been ignored."))),c&&c())},_=async()=>{if(!n.urn){k((0,v.Vo)("Cannot restore: system URN is missing"));return}let e=await m({monitor_config_key:t,urn:n.urn});(0,g.D4)(e)?k((0,v.Vo)((0,g.e$)(e.error))):(k((0,v.t5)("".concat(n.name||"System"," has been restored."))),c&&c())},C=d||h||p,w=l===y.A.IGNORED;return(0,i.jsxs)(o.TaI,{children:[r&&!w&&(0,i.jsx)(o.ua7,{title:"Ignore",children:(0,i.jsx)(o.zxk,{"data-testid":"ignore-btn",size:"small",onClick:j,disabled:!n.urn||C,loading:h,icon:a,"aria-label":"Ignore",children:!a&&"Ignore"})}),w?(0,i.jsx)(o.ua7,{title:n.urn?"Restore":"This system cannot be restored: URN is missing.",children:(0,i.jsx)(o.zxk,{"data-testid":"restore-btn",size:"small",onClick:_,disabled:!n.urn||C,loading:p,icon:(0,i.jsx)(o.PJP.CQM,{}),"aria-label":"Restore",children:"Restore"})}):(0,i.jsx)(o.ua7,{title:n.urn?"Add":"This system cannot be promoted: URN is missing.",children:(0,i.jsx)(o.zxk,{"data-testid":"add-btn",size:"small",onClick:b,disabled:!n.urn||C,loading:d,icon:s,"aria-label":"Add",children:!s&&"Add"})})]})},b=e=>{let{label:t,closable:n,onClose:r,isFromClassifier:l}=e;return(0,i.jsx)(o.Vp9,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:r,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:l&&(0,i.jsx)(o.QMR,{}),children:(0,i.jsx)(o.xvT,{size:"sm",children:t})})},j=e=>{var t,n,r,l,s;let{item:a,selected:u,onSelect:d,onNavigate:h,rowClickUrl:m,monitorId:g,activeTab:v,allowIgnore:x,onSetDataCategories:y,onSelectDataCategory:j,dataCategoriesDisabled:_,onPromoteSuccess:C}=e,w=null!==(n=null!==(t=a.urn)&&void 0!==t?t:a.id)&&void 0!==n?n:"",S=null==m?void 0:m(a),{metadata:N}=a,D=null!==(r=a.name)&&void 0!==r?r:"Uncategorized",R=null!==(l=null==N?void 0:N.app_type)&&void 0!==l?l:"System type",z=(0,c.useMemo)(()=>{if(null==N?void 0:N.vendor_logo_url)return N.vendor_logo_url;let e=a.vendor_id||D;if(e&&"Uncategorized"!==e)try{let t=(0,f.ge)(e);if(t)return(0,f.Ms)(t,36)}catch(e){}},[null==N?void 0:N.vendor_logo_url,a.vendor_id,D]),E=e=>{d&&w&&d(w,e)};return(0,i.jsx)(o.aVo.Item,{actions:[(0,i.jsx)(k,{monitorId:g,system:a,allowIgnore:x,activeTab:v,onPromoteSuccess:C},"actions")],children:(0,i.jsx)(o.aVo.Item.Meta,{avatar:(0,i.jsxs)(o.kCb,{align:"center",gap:"small",children:[(0,i.jsx)(o.XZJ,{checked:u,onChange:e=>E(e.target.checked),onClick:e=>e.stopPropagation()}),(0,i.jsx)(o.qEK,{size:18,src:z,icon:(0,i.jsx)(o.PJP.Zrf,{}),alt:D})]}),title:(0,i.jsxs)(o.kCb,{gap:"small",align:"center",wrap:"wrap",children:[(0,i.jsx)(o.zxk,{type:"text",size:"small",onClick:()=>{S&&h&&h(S)},children:(0,i.jsx)(o.xvT,{strong:!0,children:D})}),(0,i.jsx)(o.xvT,{type:"secondary",style:{fontWeight:400},children:R})]}),description:(0,i.jsx)(p,{mode:"multiple",value:null!==(s=a.preferred_data_categories)&&void 0!==s?s:[],urn:w,tagRender:e=>{var t;let n=!!(null===(t=a.classifications)||void 0===t?void 0:t.find(t=>t.label===e.value));return b({...e,isFromClassifier:n,onClose:()=>{if(y&&w){var t,n;y(w,null!==(n=null===(t=a.preferred_data_categories)||void 0===t?void 0:t.filter(t=>t!==e.value))&&void 0!==n?n:[])}}})},onSelectDataCategory:e=>{if(j)j(e);else if(y&&w){var t;let n=null!==(t=a.preferred_data_categories)&&void 0!==t?t:[];n.includes(e)||y(w,[...n,e])}},disabled:_})})},w)};var _=n(98145),C=n(83766),w=n.n(C);let S=e=>{let{statusFilters:t,setStatusFilters:n,vendorFilters:r,setVendorFilters:l,reset:s}=e,[a,u]=(0,c.useState)(t),[d,f]=(0,c.useState)(r),[h,m]=(0,c.useState)([_.oq.STATUS]);(0,c.useEffect)(()=>{u(t)},[t]),(0,c.useEffect)(()=>{f(r)},[r]);let p=(0,c.useMemo)(()=>_.sv.filter(e=>"all"!==e&&"known"!==e&&"unknown"!==e).map(e=>({title:_.bE[e],key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),g=(0,c.useMemo)(()=>_.sv.filter(e=>"known"===e||"unknown"===e).map(e=>({title:_.bE[e],key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),v=(0,c.useMemo)(()=>{let e=[];return p.length>0&&e.push({title:"Status",key:_.oq.STATUS,checkable:!0,selectable:!1,isLeaf:!1,children:p}),g.length>0&&e.push({title:"Vendor",key:_.oq.VENDOR,checkable:!0,selectable:!1,isLeaf:!1,children:g}),e},[p,g]),x=(0,c.useMemo)(()=>w()([...null!=a?a:[],...null!=d?d:[]]),[a,d]),y=(0,c.useMemo)(()=>{let e=0;return t&&(e+=new Set(t).size),r&&(e+=new Set(r).size),e},[t,r]);return(0,i.jsx)(o.wn$,{treeProps:{checkable:!0,checkedKeys:x,onCheck:e=>{let t=Array.isArray(e)?e:e.checked,n=[],i=[],r=Object.values(_.oq);t.forEach(e=>{let t=e.toString();if(r.some(e=>e===t))return;let l=_.sv.find(e=>e===t&&"known"!==e&&"unknown"!==e);if(l)n.push(l);else{let e=_.sv.find(e=>e===t&&("known"===e||"unknown"===e));e&&i.push(e)}}),u(n.length>0?n:[]),f(i.length>0?i:[])},treeData:v,expandedKeys:h,onExpand:e=>{m(e)}},onApply:()=>{n(a&&a.length>0?Array.from(new Set(a)):a),l(d&&d.length>0?Array.from(new Set(d)):d)},onReset:()=>{s(),u([]),f([])},onClear:()=>{u([]),f([])},onOpenChange:e=>{e||(u(t),f(r))},activeFiltersCount:y})};var N=n(40431);let D=()=>{let[e,t]=(0,N.v1)("statusFilters",(0,N.S$)((0,N.km)(_.sv)).withDefault([])),[n,i]=(0,N.v1)("vendorFilters",(0,N.S$)(N.Oi).withDefault([]));return{statusFilters:e,setStatusFilters:t,vendorFilters:n,setVendorFilters:i,reset:()=>{t([]),i([])}}};var R=n(17245),z=n(9270),E=n(71985);let P=e=>{let{monitorId:t,statusFilters:n,vendorFilters:i}=e,{paginationProps:r,pageIndex:l,pageSize:a,resetPagination:o}=(0,z.S)({defaultPageSize:50}),u=(0,R.Rx)(),{activeTab:d,filterTabs:f,activeParams:h,onTabChange:m}=(0,y.Z)(),p=(0,c.useMemo)(()=>{if(!n||0===n.length)return h.diff_status;let e=[];return(n.forEach(t=>{let n=(0,_.$Q)(t);n&&e.push(n)}),1===e.length)?e[0]:e.length>0?e:h.diff_status},[n,h.diff_status]),g=(0,c.useMemo)(()=>{if(!n||0===n.length)return;let e=[];return n.forEach(t=>{let n=(0,_.Lh)(t);n&&e.push(n)}),e.length>0?e:void 0},[n]),v=(0,c.useMemo)(()=>{if(!i||0===i.length)return;let e=[];return(i.includes("unknown")&&e.push("null"),i.includes("known")&&!i.includes("unknown"))?"not_null":e.length>0?e:void 0},[i]);(0,c.useEffect)(()=>{o()},[n,i,o]);let{data:k,isLoading:b,isFetching:j,refetch:C}=(0,x.QP)({monitor_config_key:t,page:l,size:a,search:u.searchQuery,diff_status:p,status:g,vendor_id:v},{refetchOnMountOrArgChange:!0}),w=(0,c.useMemo)(()=>{var e;return(null==k?void 0:k.items)?{items:k.items.map(e=>{var t,n,i,r,l,s,a;return{id:e.urn,urn:e.urn,name:null!==(t=e.name)&&void 0!==t?t:null,system_key:null!==(n=e.system_key)&&void 0!==n?n:null,data_uses:null!==(i=e.data_uses)&&void 0!==i?i:[],vendor_id:null!==(r=e.vendor_id)&&void 0!==r?r:null,total_updates:1,locations:null!==(l=e.locations)&&void 0!==l?l:[],domains:e.domain?[e.domain]:[],consent_status:null,metadata:null!==(s=e.metadata)&&void 0!==s?s:null,diff_status:null!==(a=e.diff_status)&&void 0!==a?a:null}}),total:null!==(e=k.total)&&void 0!==e?e:0}:{items:[],total:0}},[k]),S=(0,c.useCallback)(async e=>{await m(e),o(),C()},[m,o,C]),N=(0,c.useCallback)(e=>{var n,i;let r=null!==(i=null!==(n=e.urn)&&void 0!==n?n:e.id)&&void 0!==i?i:s.Kl,l=d?"#".concat(d):"";return"".concat(s.vi,"/").concat(E.w.INFRASTRUCTURE,"/").concat(t,"/").concat(r).concat(l)},[t,d]);return{data:w,isLoading:b,isFetching:j,refetch:C,searchQuery:u.searchQuery,updateSearch:u.updateSearch,paginationProps:r,filterTabs:f,activeTab:d,handleTabChange:S,activeParams:h,rowClickUrl:N,getRecordKey:(0,c.useCallback)(e=>{var t,n,i,r;return null!==(r=null!==(i=null!==(n=null!==(t=e.urn)&&void 0!==t?t:e.id)&&void 0!==n?n:e.vendor_id)&&void 0!==i?i:e.name)&&void 0!==r?r:s.Kl},[])}},M=e=>{let{monitorId:t,onSuccess:n}=e,i=(0,o.p8r)(),[r,{isLoading:l}]=(0,x.OB)(),[s,{isLoading:a}]=(0,x.ip)(),[u,{isLoading:d}]=(0,x.Vd)();return{handleBulkAction:(0,c.useCallback)(async(e,l)=>{let a,o;let c=l.map(e=>e.urn).filter(e=>!!e);if(0===c.length){i((0,v.Vo)("No valid systems selected. Please select systems with URNs."));return}if(e===_.Qk.ADD){a=await r({monitor_config_key:t,urns:c});let e=c.length;o="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been promoted to the system inventory.")}else if(e===_.Qk.IGNORE){a=await s({monitor_config_key:t,urns:c});let e=c.length;o="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been ignored.")}else{if(e!==_.Qk.RESTORE)return;a=await u({monitor_config_key:t,urns:c});let n=c.length;o="".concat(n," system").concat(n>1?"s":""," ").concat(n>1?"have":"has"," been restored.")}(0,g.D4)(a)?i((0,v.Vo)((0,g.e$)(a.error))):(i((0,v.t5)(o)),null==n||n())},[t,r,s,u,i,n]),isBulkActionInProgress:l||a||d}},L=e=>{let{items:t,getRecordKey:n}=e,[i,r]=(0,c.useState)(new Set),l=i.size>0,s=i.size,a=(0,c.useCallback)(e=>{if(e){var i;r(new Set(null!==(i=null==t?void 0:t.map(e=>n(e)))&&void 0!==i?i:[]))}else r(new Set)},[t,n]),o=(0,c.useCallback)((e,t)=>{r(n=>{let i=new Set(n);return t?i.add(e):i.delete(e),i})},[]),u=(0,c.useCallback)(()=>{r(new Set)},[]),d=(0,c.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size===t.length&&t.every(e=>i.has(n(e))),[t,i,n]),f=(0,c.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size<t.length,[t,i]),h=(0,c.useMemo)(()=>t?t.filter(e=>i.has(n(e))):[],[t,i,n]),m=(0,c.useCallback)(e=>i.has(n(e)),[i,n]);return{selectedKeys:i,hasSelectedRows:l,selectedRowsCount:s,selectedItems:h,isAllSelected:d,isIndeterminate:f,handleSelectAll:a,handleSelectItem:o,clearSelection:u,isItemSelected:m}};var A=n(60240);let T=e=>{let{isIgnoredTab:t,allowIgnore:n,isBulkActionInProgress:i,onBulkAction:r}=e;return t?[{key:_.Qk.RESTORE,label:"Restore",onClick:()=>r(_.Qk.RESTORE),disabled:i}]:[...n?[{key:_.Qk.IGNORE,label:"Ignore",onClick:()=>r(_.Qk.IGNORE),disabled:i}]:[],{key:_.Qk.ADD,label:"Add",onClick:()=>r(_.Qk.ADD),disabled:i}]},I=e=>!!e.diff_status&&!e.diff_status.includes(A.LL.MUTED),O=e=>{var t,n;let{monitorId:r}=e,l=D(),{data:s,isLoading:a,searchQuery:f,updateSearch:h,paginationProps:m,activeTab:p,handleTabChange:g,activeParams:v,rowClickUrl:x,getRecordKey:k,refetch:b}=P({monitorId:r,statusFilters:l.statusFilters,vendorFilters:l.vendorFilters}),{data:C}=(0,d.vc)({monitor_config_id:r}),{selectedItems:w,hasSelectedRows:N,selectedRowsCount:R,isAllSelected:z,isIndeterminate:E,handleSelectAll:A,handleSelectItem:O,clearSelection:U,isItemSelected:F}=L({items:null==s?void 0:s.items,getRecordKey:k}),{handleBulkAction:Q,isBulkActionInProgress:V}=M({monitorId:r,getRecordKey:k,onSuccess:()=>{U(),b()}}),J=p===y.A.IGNORED,Z=I(v),q=(0,c.useCallback)(e=>{Q(e,w)},[Q,w]),B=(0,c.useMemo)(()=>T({isIgnoredTab:J,allowIgnore:Z,isBulkActionInProgress:V,onBulkAction:q}),[J,Z,V,q]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.v2r,{"aria-label":"Asset state filter",mode:"horizontal",items:_.hc.map(e=>({key:e.key,label:e.label})),selectedKeys:[p],onClick:async e=>{await g(e.key),U()},className:"mb-4","data-testid":"asset-state-filter"}),(0,i.jsxs)(o.kCb,{vertical:!0,gap:"middle",className:"h-full",children:[(0,i.jsxs)(o.kCb,{justify:"space-between",children:[(0,i.jsx)(o.Dxz,{level:2,children:"Monitor results"}),(0,i.jsx)(o.kCb,{align:"center",children:(null==C?void 0:C.last_monitored)&&(0,i.jsxs)(o.xvT,{type:"secondary",children:["Last scan:"," ",new Date(C.last_monitored).toLocaleString()]})})]}),(0,i.jsxs)(o.kCb,{justify:"space-between",children:[(0,i.jsx)(o.kCb,{gap:"small",children:(0,i.jsx)(u.f,{value:f,onChange:h,placeholder:"Search"})}),(0,i.jsxs)(o.kCb,{gap:"small",children:[(0,i.jsx)(S,{...l}),(0,i.jsx)(o.Ltx,{menu:{items:B},disabled:!N||V,children:(0,i.jsx)(o.zxk,{type:"primary",icon:(0,i.jsx)(o.PJP._ME,{}),iconPosition:"end",disabled:!N||V,loading:V,children:"Actions"})}),(0,i.jsx)(o.ua7,{title:"Refresh",children:(0,i.jsx)(o.zxk,{icon:(0,i.jsx)(o.PJP.CQM,{}),"aria-label":"Refresh",onClick:b,loading:a})})]})]}),(0,i.jsxs)(o.kCb,{gap:"middle",align:"center",children:[(0,i.jsx)(o.XZJ,{checked:z,indeterminate:E,onChange:e=>A(e.target.checked),title:"Select all"}),(0,i.jsx)("span",{className:"ml-2",children:"Select all"}),R>0&&(0,i.jsxs)(o.xvT,{strong:!0,children:[R.toLocaleString()," selected"]})]}),(0,i.jsx)(o.aVo,{dataSource:null==s?void 0:s.items,loading:a,className:"h-full overflow-y-scroll",locale:{emptyText:(0,i.jsx)(o.HYy,{image:o.HYy.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},renderItem:e=>(0,i.jsx)(j,{item:e,selected:F(e),onSelect:O,rowClickUrl:x,monitorId:r,activeTab:p,allowIgnore:Z,onPromoteSuccess:b})}),(0,i.jsx)(o.tlE,{...m,total:(null==s?void 0:s.total)||0,showSizeChanger:{suffixIcon:(0,i.jsx)(o.PJP._ME,{})},hideOnSinglePage:(null===(t=m.pageSize)||void 0===t?void 0:t.toString())===(null===(n=m.pageSizeOptions)||void 0===n?void 0:n[0])})]})]})};var U=()=>{let e=decodeURIComponent((0,r.useRouter)().query.monitorId);return(0,i.jsxs)(l.Z,{title:"Action center - Discovered infrastructure systems",children:[(0,i.jsx)(a.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:s.vi},{title:e}]}),(0,i.jsx)(O,{monitorId:e})]})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,7245,4589,2888,9774,179],function(){return e(e.s=50755)}),_N_E=e.O()}]);