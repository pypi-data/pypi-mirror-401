(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{54727:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return n(45985)}])},6675:function(e,s,n){"use strict";n.d(s,{ZS:function(){return o},a4:function(){return i}});var l=n(3228);let t=n(78780).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:i}=t,a={purposes:{},special_purposes:{}},o=(0,l.P1)(t.endpoints.getPurposes.select(),e=>{let{data:s}=e;return s||a})},45985:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return I}});var l=n(24246),t=n(49617),i=n(27378),a=n(77213),o=n(58754),r=n(92222),c=n(59003),u=n(25980),d=n(47935),x=n(86677);let p=(e,s)=>{let n=e.filter(e=>e.isChecked);return n.length>0?"".concat(s,"=").concat(n.map(e=>e.value).join("&".concat(s,"="))):void 0},h=e=>{let{value:s,displayText:n,isChecked:i,onCheckboxChange:a}=e;return(0,l.jsx)(t.XZJ,{value:s,height:"20px",mb:"25px",isChecked:i,onChange:e=>{let{target:n}=e;a(s,n.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,l.jsx)(t.xvT,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:n})},s)},g=e=>{let{options:s,header:n,onCheckboxChange:a,columns:o=3,numDefaultOptions:r=15}=e,[c,u]=(0,i.useState)(!1),d=c?s:s.slice(0,r),x=s.length>r;return(0,l.jsxs)(t.Qdk,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,l.jsx)(t.X6q,{height:"56px",children:(0,l.jsxs)(t.KFZ,{height:"100%",children:[(0,l.jsx)(t.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:n}),(0,l.jsx)(t.XEm,{})]})}),(0,l.jsxs)(t.Hk3,{id:"panel-".concat(n),children:[(0,l.jsx)(t.MIq,{columns:o,children:d.map(e=>(0,l.jsx)(h,{...e,onCheckboxChange:a},e.value))}),!c&&x?(0,l.jsx)(t.wpx,{type:"text",onClick:()=>{u(!0)},children:"View more"}):null,c&&x?(0,l.jsx)(t.wpx,{type:"text",onClick:()=>{u(!1)},children:"View less"}):null]})]})},j=e=>{let{heading:s,children:n}=e;return(0,l.jsxs)(t.xuv,{padding:"12px 8px 8px 12px",maxHeight:600,children:[s?(0,l.jsx)(t.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:s}):null,n]})},C=e=>{let{resetFilters:s,isOpen:n,onClose:i,children:a,...o}=e;return(0,l.jsxs)(t.u_l,{isOpen:n,onClose:i,isCentered:!0,size:"2xl",...o,children:[(0,l.jsx)(t.ZAr,{}),(0,l.jsxs)(t.hzk,{children:[(0,l.jsx)(t.xBx,{children:"Filters"}),(0,l.jsx)(t.olH,{}),(0,l.jsx)(t.izJ,{}),(0,l.jsx)(t.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:a}),(0,l.jsx)(t.mzw,{children:(0,l.jsxs)(t.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(t.wpx,{onClick:s,className:"mr-3 grow",children:"Reset filters"}),(0,l.jsx)(t.wpx,{type:"primary",onClick:i,className:"grow",children:"Done"})]})})]})]})};var f=n(77830),m=n(23923),v=n(16134),k=n(6675),y=n(28079);let b=()=>{let{isOpen:e,onClose:s,onOpen:n}=(0,t.qY0)();(0,y.fd)();let l=(0,v.C)(y.U3);(0,k.a4)();let a=(0,v.C)(k.ZS),[o,r]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[d,x]=(0,i.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),[p,h]=(0,i.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]);(0,i.useEffect)(()=>{0===c.length&&u(l.map(e=>({value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1})))},[l,c,u]),(0,i.useEffect)(()=>{0===o.length&&r([...Object.entries(a.purposes).map(e=>({value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1})),...Object.entries(a.special_purposes).map(e=>({value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}))])},[a,o,u]);let g=(e,s,n,l)=>{l(n.map(n=>n.value===e?{...n,isChecked:s}:n))};return{isOpen:e,onClose:s,onOpen:n,resetFilters:()=>{u(e=>e.map(e=>({...e,isChecked:!1}))),x(e=>e.map(e=>({...e,isChecked:!1}))),r(e=>e.map(e=>({...e,isChecked:!1}))),h(e=>e.map(e=>({...e,isChecked:!1})))},purposeOptions:o,onPurposeChange:(e,s)=>{g(e,s,o,r)},dataUseOptions:c,onDataUseChange:(e,s)=>{g(e,s,c,u)},legalBasisOptions:d,onLegalBasisChange:(e,s)=>{g(e,s,d,x)},consentCategoryOptions:p,onConsentCategoryChange:(e,s)=>{g(e,s,p,h)}}},w=e=>{let{isOpen:s,isTcfEnabled:n,onClose:i,resetFilters:a,purposeOptions:o,onPurposeChange:r,dataUseOptions:c,onDataUseChange:u,legalBasisOptions:d,onLegalBasisChange:x,consentCategoryOptions:p,onConsentCategoryChange:h}=e;return(0,l.jsx)(C,{isOpen:s,onClose:i,resetFilters:a,children:(0,l.jsx)(t.UQy,{children:(0,l.jsxs)(j,{children:[n?(0,l.jsx)(g,{options:o,onCheckboxChange:r,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,l.jsx)(g,{options:c,onCheckboxChange:u,header:"Data uses"}),n?(0,l.jsx)(g,{options:d,onCheckboxChange:x,header:"Legal basis"}):null,n?null:(0,l.jsx)(g,{options:p,onCheckboxChange:h,header:"Consent categories"})]})})})};var _=n(32885);let{Text:S,Title:O}=t.AntTypography,T=()=>{let{isOpen:e,onOpen:s,onClose:n}=(0,t.qY0)();return{isOpen:e,onOpen:s,onClose:n}},z=e=>{let{isOpen:s,onClose:n,fidesKey:i}=e,{data:a,isLoading:o}=(0,_.ho)(i),r=(e,s)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O,{level:5,children:e}),(null==s?void 0:s.length)?(0,l.jsx)("div",{children:(0,l.jsx)(t.vyj,{size:[0,2],wrap:!0,children:null==s?void 0:s.map(e=>(0,l.jsx)(t.j8w,{children:e},e))})}):(0,l.jsxs)(S,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,l.jsxs)(t.u_l,{isOpen:s,onClose:n,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,l.jsx)(t.ZAr,{}),(0,l.jsxs)(t.hzk,{maxWidth:"800px",children:[(0,l.jsx)(t.xBx,{children:a?null==a?void 0:a.name:"Vendor"}),(0,l.jsx)(t.fef,{children:o?(0,l.jsx)(t.jqI,{className:"h-80 w-full",align:"center",justify:"center",children:(0,l.jsx)(t.$jN,{})}):!!a&&(0,l.jsxs)(t.AntTypography,{children:[(0,l.jsx)(O,{level:5,children:"Purposes"}),Object.entries(a.purposes||{}).length>0?(0,l.jsx)(t.UQy,{allowMultiple:!0,children:Object.entries(a.purposes).map((e,s)=>{let[n]=e;return(0,l.jsx)(t.Qdk,{children:e=>{let{isExpanded:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.KFZ,{backgroundColor:s?"gray.50":"unset",children:[(0,l.jsx)(t.xuv,{flex:"1",textAlign:"left",children:n}),(0,l.jsx)(t.XEm,{})]}),(0,l.jsxs)(t.Hk3,{backgroundColor:"gray.50",children:[(0,l.jsx)(t.jqI,{className:"my-4",vertical:!0,children:r("Data uses",a.purposes[n].data_uses)}),(0,l.jsx)(t.jqI,{className:"my-4",vertical:!0,children:r("Legal basis",a.purposes[n].legal_bases)})]})]})}},s)})}):(0,l.jsx)(S,{italic:!0,children:"no known purposes"}),(0,l.jsx)("div",{className:"my-4",children:r("Features",a.features)}),(0,l.jsx)("div",{className:"my-4",children:r("Data categories",a.data_categories)})]})}),(0,l.jsxs)(t.mzw,{children:[(0,l.jsx)(t.wpx,{size:"small",onClick:n,children:"Close"}),(0,l.jsx)(t.LZC,{})]})]})]})},F=(0,r.Cl)(),N={items:[],total:0,page:1,size:25,pages:1},P=()=>{let{tcf:e,dictionaryService:s}=(0,u.hz)(),{isLoading:n}=(0,_.x8)(),{isOpen:a,onOpen:o,onClose:h}=T(),g=(0,x.useRouter)(),[j,C]=(0,i.useState)(),{isOpen:v,onOpen:k,onClose:y,resetFilters:S,purposeOptions:O,onPurposeChange:P,dataUseOptions:R,onDataUseChange:I,legalBasisOptions:E,onLegalBasisChange:V,consentCategoryOptions:L,onConsentCategoryChange:M}=b(),Z=(0,i.useMemo)(()=>p(R,"data_uses"),[R]),q=(0,i.useMemo)(()=>p(E,"legal_bases"),[E]),A=(0,i.useMemo)(()=>p(O.filter(e=>e.value.includes("normal")).map(e=>({...e,value:e.value.split(".")[1]})),"purposes"),[O]),D=(0,i.useMemo)(()=>p(O.filter(e=>e.value.includes("special")).map(e=>({...e,value:e.value.split(".")[1]})),"special_purposes"),[O]),H=(0,i.useMemo)(()=>p(L,"consent_category"),[L]),{PAGE_SIZES:U,pageSize:X,setPageSize:B,onPreviousPageClick:Q,isPreviousPageDisabled:G,onNextPageClick:K,isNextPageDisabled:W,startRange:J,endRange:Y,pageIndex:$,setTotalPages:ee,resetPageIndexToDefault:es}=(0,d.oi)(),[en,el]=(0,i.useState)(),et=(0,i.useCallback)(e=>{es(),el(e)},[es,el]),{isFetching:ei,isLoading:ea,data:eo}=(0,_.de)({pageIndex:$,pageSize:X,dataUses:Z,search:en,legalBasis:q,purposes:A,specialPurposes:D,consentCategories:H}),{items:er,total:ec,pages:eu}=(0,i.useMemo)(()=>eo||N,[eo]);(0,i.useEffect)(()=>{ee(eu)},[eu,ee]);let ed=(0,i.useMemo)(()=>[F.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Vendor",...e})}),F.accessor(e=>e.data_uses,{id:"tcf_purpose",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"purposes",singSuffix:"purpose",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"TCF purpose",...e})}),F.accessor(e=>e.data_uses,{id:"data_uses",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"data uses",singSuffix:"data use",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Data use",...e})}),F.accessor(e=>e.legal_bases,{id:"legal_bases",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"bases",singSuffix:"basis",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Legal basis",...e})}),F.accessor(e=>e.consent_categories,{id:"consent_categories",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"categories",singSuffix:"category",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Categories",...e})}),F.accessor(e=>e.cookies,{id:"cookies",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"cookies",singSuffix:"cookie",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Cookies",...e})})],[]),ex=(0,c.b7)({columns:ed,data:er,state:{columnVisibility:{tcf_purpose:e,data_uses:e,legal_bases:e,consent_categories:!e,cookies:!e}},getCoreRowModel:(0,r.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return ea||n?(0,l.jsx)(d.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(t.kCb,{flex:1,direction:"column",overflow:"auto",children:[a&&j?(0,l.jsx)(z,{isOpen:a,fidesKey:j,onClose:h}):null,(0,l.jsxs)(d.Q$,{children:[(0,l.jsx)(d.HO,{globalFilter:en,setGlobalFilter:et,placeholder:"Search"}),(0,l.jsx)(w,{isOpen:v,isTcfEnabled:e,onClose:y,resetFilters:S,purposeOptions:O,onPurposeChange:P,dataUseOptions:R,onDataUseChange:I,legalBasisOptions:E,onLegalBasisChange:V,consentCategoryOptions:L,onConsentCategoryChange:M}),(0,l.jsxs)(t.Ugi,{alignItems:"center",spacing:2,children:[(0,l.jsx)(m.Z,{buttonLabel:"Add vendors",onButtonClick:s?()=>{g.push(f.Gg)}:void 0}),(0,l.jsx)(t.wpx,{onClick:k,"data-testid":"filter-multiple-systems-btn",children:"Filter"})]})]}),(0,l.jsx)(d.ZK,{tableInstance:ex,onRowClick:e=>{C(e.fides_key),o()}}),(0,l.jsx)(d.s8,{totalRows:ec||0,pageSizes:U,setPageSize:B,onPreviousPageClick:Q,isPreviousPageDisabled:G||ei,onNextPageClick:K,isNextPageDisabled:W||ei,startRange:J,endRange:Y})]})},{Text:R}=t.AntTypography;var I=()=>(0,l.jsxs)(a.Z,{title:"Vendors",children:[(0,l.jsx)(o.Z,{heading:"Vendors",children:(0,l.jsx)(R,{className:"block w-1/2",children:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"})}),(0,l.jsx)(P,{})]})}},function(e){e.O(0,[401,4093,2888,9774,179],function(){return e(e.s=54727)}),_N_E=e.O()}]);