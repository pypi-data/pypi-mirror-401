(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7890],{58095:function(e,t,n){var i=n(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,n){for(var i=-1,l=null==e?0:e.length;++i<l;)if(n(t,e[i]))return!0;return!1}},95372:function(e){e.exports=function(e,t,n,i){for(var l=e.length,r=n+(i?1:-1);i?r--:++r<l;)if(t(e[r],r,e))return r;return -1}},8817:function(e,t,n){var i=n(95372),l=n(1129),r=n(58263);e.exports=function(e,t,n){return t==t?r(e,t,n):i(e,l,n)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,n){var i=n(52485),l=n(58095),r=n(21796),s=n(65581),a=n(47111),o=n(43735);e.exports=function(e,t,n){var c=-1,u=l,d=e.length,f=!0,m=[],h=m;if(n)f=!1,u=r;else if(d>=200){var p=t?null:a(e);if(p)return o(p);f=!1,u=s,h=new i}else h=t?[]:m;e:for(;++c<d;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,f&&v==v){for(var x=h.length;x--;)if(h[x]===v)continue e;t&&h.push(v),m.push(g)}else u(h,v,n)||(h!==m&&h.push(v),m.push(g))}return m}},56632:function(e,t,n){var i=n(89278),l=n(80068),r=n(50098);e.exports=function(e){return function(t,n,s){var a=Object(t);if(!l(t)){var o=i(n,3);t=r(t),n=function(e){return o(a[e],e,a)}}var c=e(t,n,s);return c>-1?a[o?t[c]:c]:void 0}}},47111:function(e,t,n){var i=n(46151),l=n(50344),r=n(43735),s=i&&1/r(new i([,-0]))[1]==1/0?function(e){return new i(e)}:l;e.exports=s},58263:function(e){e.exports=function(e,t,n){for(var i=n-1,l=e.length;++i<l;)if(e[i]===t)return i;return -1}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),l=n(89278),r=n(47991),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return -1;var o=null==n?0:r(n);return o<0&&(o=s(a+o,0)),i(e,l(t,3),o)}},50344:function(e){e.exports=function(){}},94919:function(e,t,n){var i=n(91936),l=1/0;e.exports=function(e){return e?(e=i(e))===l||e===-l?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},83766:function(e,t,n){var i=n(92198);e.exports=function(e){return e&&e.length?i(e):[]}},50755:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/infrastructure/[monitorId]",function(){return n(72734)}])},58754:function(e,t,n){"use strict";var i=n(24246),l=n(49617),r=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:s=!0,children:a,rightContent:o,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(l.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(l.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,i.jsx)(r.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var i=n(24246),l=n(49617),r=n(72707),s=n.n(r);let a=e=>{let{data:{formattedTitle:t,description:n,name:r,primaryName:s}}=e;return(0,i.jsxs)(l.jqI,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:s||r}),s&&": ".concat(r)]}),(0,i.jsx)("em",{className:"overflow-hidden text-ellipsis",children:n})]})},o=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:s().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),u=e=>{let{options:t,...n}=e,r=null==t?void 0:t.map(e=>o(e)?{...e,options:e.options.map(c)}:c(e));return(0,i.jsx)(l.WPr,{options:r,filterOption:(e,t)=>{var n,i;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:a,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var i=n(24246),l=n(64925),r=n.n(l),s=n(27378),a=n(16134),o=n(30002),c=n(28079),u=n(57072);let d=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,a.C)(c.U3),{isLoading:n}=(0,u.MO)(),i=(0,a.C)(u.qb),{isLoading:l}=(0,o.te)();return{dataUses:t,dataSubjects:(0,a.C)(o.ZL),dataCategories:i,isLoading:e||n||l}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:l}=d(),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let l=t(a(e,n)),r=!!i.parent_key;return{name:i.name||void 0,primaryName:r&&(null==l?void 0:l.name)!==i.name&&(null==l?void 0:l.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:l,primaryName:r}=o(e,t,n);return l?r?(0,i.jsxs)(s.Fragment,{children:[(0,i.jsxs)("strong",{children:[r,":"]})," ",l]},e):(0,i.jsx)("strong",{children:l},e):e},u=t=>r()(e,{fides_key:t}),f=e=>r()(t,{fides_key:e}),m=e=>r()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:u,getDataUseDisplayName:e=>c(e,u,1),getDataUseDisplayNameProps:e=>o(e,u,1),getDataCategories:()=>t,getDataCategoryByKey:f,getDataCategoryDisplayName:e=>c(e,f,2),getDataCategoryDisplayNameProps:e=>o(e,f,2),getDataSubjects:()=>n,getDataSubjectByKey:m,getDataSubjectDisplayName:e=>{let t=m(e);return t?t.name:e},getDataSubjectDisplayNameProps:e=>{let t=m(e);return t?{name:t.name||e}:{}},getPrimaryKey:a,isLoading:l}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),l=n(49617),r=n(79894),s=n.n(r),a=n(27378);let{Text:o}=l.AntTypography,c=e=>{let{items:t,...n}=e,r=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let r=n===t.length-1,a={...e},c=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,i.jsx)(o,{style:{color:"inherit",maxWidth:r?void 0:400},ellipsis:!r,id:r?"breadcrumb-current-page":void 0,children:a.title})),c)?a.title=(0,i.jsx)(l.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,i.jsx)(s(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,i.jsx)(l.zrq,{items:r,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var i=n(27378),l=n(36866);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.h)(e),{pageIndex:n,pageSize:r,updatePageIndex:s,updatePageSize:a,pageSizeOptions:o,showSizeChanger:c}=t,u=(0,i.useMemo)(()=>({current:n,pageSize:r,showSizeChanger:c,pageSizeOptions:o.map(String),onChange:s,onShowSizeChange:(e,t)=>{a(t)}}),[n,r,c,o,s,a]);return{...t,paginationProps:u}}},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return i.Bd},L5:function(){return i.L5},MO:function(){return i.MO},qb:function(){return i.qb}});var i=n(5785)},72734:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var i=n(24246),l=n(86677),r=n(35287),s=n(77830),a=n(58754),o=n(49617),c=n(27378),u=n(30952),d=n(37059),f=n(16394),m=n(79283),h=n(34929),p=e=>{let{onSelectDataCategory:t,urn:n,...l}=e,{getDataUseDisplayNameProps:r,getDataUses:s}=(0,h.Z)(),a=s().filter(e=>e.active),[u,d]=(0,c.useState)(!1),f=a.map(e=>{let{name:t,primaryName:n}=r(e.fides_key);return{value:e.fides_key,label:(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:n||t}),n&&": ".concat(t)]}),name:t,primaryName:n,description:e.description||""}});return(0,i.jsx)(m.l,{options:f,prefix:(0,i.jsx)(o.wpx,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,i.jsx)(o.PJP.mm_,{}),disabled:l.disabled}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer -ml-5"},style:{"--ant-select-multiple-selector-bg-disabled":"transparent"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:u,onOpenChange:e=>d(e),onSelect:e=>{t(e),d(!1)},"data-classification-select":n,popupMatchSelectWidth:600,...l})},g=n(812),v=n(46628),x=n(70675),y=n(88708);let j=e=>{let{monitorId:t,system:n,allowIgnore:l,activeTab:r,addIcon:s=(0,i.jsx)(o.PJP.MCw,{}),ignoreIcon:a=(0,i.jsx)(o.PJP.uzw,{}),onPromoteSuccess:c}=e,[u,{isLoading:d}]=(0,x.Kj)(),[f,{isLoading:m}]=(0,x.Lm)(),[h,{isLoading:p}]=(0,x.RA)(),j=(0,o.pmc)(),k=async()=>{if(!n.urn){j((0,v.Vo)("Cannot promote: system URN is missing"));return}let e=await u({monitor_config_key:t,urn:n.urn});(0,g.D4)(e)?j((0,v.Vo)((0,g.e$)(e.error))):(j((0,v.t5)("".concat(n.name||"System"," has been promoted to the system inventory."))),c&&c())},b=async()=>{if(!n.urn){j((0,v.Vo)("Cannot ignore: system URN is missing"));return}let e=await f({monitor_config_key:t,urn:n.urn});(0,g.D4)(e)?j((0,v.Vo)((0,g.e$)(e.error))):(j((0,v.t5)("".concat(n.name||"System"," has been ignored."))),c&&c())},_=async()=>{if(!n.urn){j((0,v.Vo)("Cannot restore: system URN is missing"));return}let e=await h({monitor_config_key:t,urn:n.urn});(0,g.D4)(e)?j((0,v.Vo)((0,g.e$)(e.error))):(j((0,v.t5)("".concat(n.name||"System"," has been restored."))),c&&c())},w=d||m||p,S=r===y.A.IGNORED;return(0,i.jsxs)(o.vyj,{children:[l&&!S&&(0,i.jsx)(o.esZ,{title:"Ignore",children:(0,i.jsx)(o.wpx,{"data-testid":"ignore-btn",size:"small",onClick:b,disabled:!n.urn||w,loading:m,icon:a,"aria-label":"Ignore",children:!a&&"Ignore"})}),S?(0,i.jsx)(o.esZ,{title:n.urn?"Restore":"This system cannot be restored: URN is missing.",children:(0,i.jsx)(o.wpx,{"data-testid":"restore-btn",size:"small",onClick:_,disabled:!n.urn||w,loading:p,icon:(0,i.jsx)(o.PJP.CQM,{}),"aria-label":"Restore",children:"Restore"})}):(0,i.jsx)(o.esZ,{title:n.urn?"Add":"This system cannot be promoted: URN is missing.",children:(0,i.jsx)(o.wpx,{"data-testid":"add-btn",size:"small",onClick:k,disabled:!n.urn||w,loading:d,icon:s,"aria-label":"Add",children:!s&&"Add"})})]})},k=e=>{let{label:t,closable:n,onClose:l,isFromClassifier:r}=e;return(0,i.jsx)(o.j8w,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:l,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:r&&(0,i.jsx)(o.QMR,{}),children:(0,i.jsx)(o.lKn,{size:"sm",children:t})})},b=e=>{var t,n,l,r,s;let{item:a,selected:u,onSelect:d,onNavigate:m,rowClickUrl:h,monitorId:g,activeTab:v,allowIgnore:x,onSetDataCategories:y,onSelectDataCategory:b,dataCategoriesDisabled:_,onPromoteSuccess:w}=e,S=null!==(n=null!==(t=a.urn)&&void 0!==t?t:a.id)&&void 0!==n?n:"",C=null==h?void 0:h(a),{metadata:N}=a,I=null!==(l=a.name)&&void 0!==l?l:"Uncategorized",R=null!==(r=null==N?void 0:N.app_type)&&void 0!==r?r:"System type",D=(0,c.useMemo)(()=>{if(null==N?void 0:N.vendor_logo_url)return N.vendor_logo_url;let e=a.vendor_id||I;if(e&&"Uncategorized"!==e)try{let t=(0,f.ge)(e);if(t)return(0,f.Ms)(t,36)}catch(e){}},[null==N?void 0:N.vendor_logo_url,a.vendor_id,I]),E=e=>{d&&S&&d(S,e)};return(0,i.jsx)(o.krs.Item,{actions:[(0,i.jsx)(j,{monitorId:g,system:a,allowIgnore:x,activeTab:v,onPromoteSuccess:w},"actions")],children:(0,i.jsx)(o.krs.Item.Meta,{avatar:(0,i.jsxs)(o.jqI,{align:"center",gap:"small",children:[(0,i.jsx)(o.E_O,{checked:u,onChange:e=>E(e.target.checked),onClick:e=>e.stopPropagation()}),(0,i.jsx)(o.t3Z,{size:18,src:D,icon:(0,i.jsx)(o.PJP.Zrf,{}),alt:I})]}),title:(0,i.jsxs)(o.jqI,{gap:"small",align:"center",wrap:"wrap",children:[(0,i.jsx)(o.wpx,{type:"text",size:"small",onClick:()=>{C&&m&&m(C)},children:(0,i.jsx)(o.lKn,{strong:!0,children:I})}),(0,i.jsx)(o.lKn,{type:"secondary",style:{fontWeight:400},children:R})]}),description:(0,i.jsx)(p,{mode:"multiple",value:null!==(s=a.preferred_data_categories)&&void 0!==s?s:[],urn:S,tagRender:e=>{var t;let n=!!(null===(t=a.classifications)||void 0===t?void 0:t.find(t=>t.label===e.value));return k({...e,isFromClassifier:n,onClose:()=>{if(y&&S){var t,n;y(S,null!==(n=null===(t=a.preferred_data_categories)||void 0===t?void 0:t.filter(t=>t!==e.value))&&void 0!==n?n:[])}}})},onSelectDataCategory:e=>{if(b)b(e);else if(y&&S){var t;let n=null!==(t=a.preferred_data_categories)&&void 0!==t?t:[];n.includes(e)||y(S,[...n,e])}},disabled:_})})},S)};var _=n(98145),w=n(83766),S=n.n(w);let C=e=>{let{statusFilters:t,setStatusFilters:n,vendorFilters:l,setVendorFilters:r,reset:s}=e,[a,u]=(0,c.useState)(t),[d,f]=(0,c.useState)(l),[m,h]=(0,c.useState)([_.oq.STATUS]);(0,c.useEffect)(()=>{u(t)},[t]),(0,c.useEffect)(()=>{f(l)},[l]);let p=(0,c.useMemo)(()=>_.sv.filter(e=>"all"!==e&&"known"!==e&&"unknown"!==e).map(e=>({title:_.bE[e],key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),g=(0,c.useMemo)(()=>_.sv.filter(e=>"known"===e||"unknown"===e).map(e=>({title:_.bE[e],key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),v=(0,c.useMemo)(()=>{let e=[];return p.length>0&&e.push({title:"Status",key:_.oq.STATUS,checkable:!0,selectable:!1,isLeaf:!1,children:p}),g.length>0&&e.push({title:"Vendor",key:_.oq.VENDOR,checkable:!0,selectable:!1,isLeaf:!1,children:g}),e},[p,g]),x=(0,c.useMemo)(()=>S()([...null!=a?a:[],...null!=d?d:[]]),[a,d]),y=(0,c.useMemo)(()=>{let e=0;return t&&(e+=new Set(t).size),l&&(e+=new Set(l).size),e},[t,l]);return(0,i.jsx)(o.wn$,{treeProps:{checkable:!0,checkedKeys:x,onCheck:e=>{let t=Array.isArray(e)?e:e.checked,n=[],i=[],l=Object.values(_.oq);t.forEach(e=>{let t=e.toString();if(l.some(e=>e===t))return;let r=_.sv.find(e=>e===t&&"known"!==e&&"unknown"!==e);if(r)n.push(r);else{let e=_.sv.find(e=>e===t&&("known"===e||"unknown"===e));e&&i.push(e)}}),u(n.length>0?n:[]),f(i.length>0?i:[])},treeData:v,expandedKeys:m,onExpand:e=>{h(e)}},onApply:()=>{n(a&&a.length>0?Array.from(new Set(a)):a),r(d&&d.length>0?Array.from(new Set(d)):d)},onReset:()=>{s(),u([]),f([])},onClear:()=>{u([]),f([])},onOpenChange:e=>{e||(u(t),f(l))},activeFiltersCount:y})};var N=n(40431);let I=()=>{let[e,t]=(0,N.v1)("statusFilters",(0,N.S$)((0,N.km)(_.sv)).withDefault([])),[n,i]=(0,N.v1)("vendorFilters",(0,N.S$)(N.Oi).withDefault([]));return{statusFilters:e,setStatusFilters:t,vendorFilters:n,setVendorFilters:i,reset:()=>{t([]),i([])}}};var R=n(17245),D=n(9270),E=n(71985);let P=e=>{let{monitorId:t,statusFilters:n,vendorFilters:i}=e,{paginationProps:l,pageIndex:r,pageSize:a,resetPagination:o}=(0,D.S)({defaultPageSize:50}),u=(0,R.Rx)(),{activeTab:d,filterTabs:f,activeParams:m,onTabChange:h}=(0,y.Z)(),p=(0,c.useMemo)(()=>{if(!n||0===n.length)return m.diff_status;let e=[];return(n.forEach(t=>{let n=(0,_.$Q)(t);n&&e.push(n)}),1===e.length)?e[0]:e.length>0?e:m.diff_status},[n,m.diff_status]),g=(0,c.useMemo)(()=>{if(!n||0===n.length)return;let e=[];return n.forEach(t=>{let n=(0,_.Lh)(t);n&&e.push(n)}),e.length>0?e:void 0},[n]),v=(0,c.useMemo)(()=>{if(!i||0===i.length)return;let e=[];return(i.includes("unknown")&&e.push("null"),i.includes("known")&&!i.includes("unknown"))?"not_null":e.length>0?e:void 0},[i]);(0,c.useEffect)(()=>{o()},[n,i,o]);let{data:j,isLoading:k,isFetching:b,refetch:w}=(0,x.QP)({monitor_config_key:t,page:r,size:a,search:u.searchQuery,diff_status:p,status:g,vendor_id:v},{refetchOnMountOrArgChange:!0}),S=(0,c.useMemo)(()=>{var e;return(null==j?void 0:j.items)?{items:j.items.map(e=>{var t,n,i,l,r,s,a;return{id:e.urn,urn:e.urn,name:null!==(t=e.name)&&void 0!==t?t:null,system_key:null!==(n=e.system_key)&&void 0!==n?n:null,data_uses:null!==(i=e.data_uses)&&void 0!==i?i:[],vendor_id:null!==(l=e.vendor_id)&&void 0!==l?l:null,total_updates:1,locations:null!==(r=e.locations)&&void 0!==r?r:[],domains:e.domain?[e.domain]:[],consent_status:null,metadata:null!==(s=e.metadata)&&void 0!==s?s:null,diff_status:null!==(a=e.diff_status)&&void 0!==a?a:null}}),total:null!==(e=j.total)&&void 0!==e?e:0}:{items:[],total:0}},[j]),C=(0,c.useCallback)(async e=>{await h(e),o(),w()},[h,o,w]),N=(0,c.useCallback)(e=>{var n,i;let l=null!==(i=null!==(n=e.urn)&&void 0!==n?n:e.id)&&void 0!==i?i:s.Kl,r=d?"#".concat(d):"";return"".concat(s.vi,"/").concat(E.w.INFRASTRUCTURE,"/").concat(t,"/").concat(l).concat(r)},[t,d]);return{data:S,isLoading:k,isFetching:b,refetch:w,searchQuery:u.searchQuery,updateSearch:u.updateSearch,paginationProps:l,filterTabs:f,activeTab:d,handleTabChange:C,activeParams:m,rowClickUrl:N,getRecordKey:(0,c.useCallback)(e=>{var t,n,i,l;return null!==(l=null!==(i=null!==(n=null!==(t=e.urn)&&void 0!==t?t:e.id)&&void 0!==n?n:e.vendor_id)&&void 0!==i?i:e.name)&&void 0!==l?l:s.Kl},[])}},M=e=>{let{monitorId:t,onSuccess:n}=e,i=(0,o.pmc)(),[l,{isLoading:r}]=(0,x.OB)(),[s,{isLoading:a}]=(0,x.ip)(),[u,{isLoading:d}]=(0,x.Vd)();return{handleBulkAction:(0,c.useCallback)(async(e,r)=>{let a,o;let c=r.map(e=>e.urn).filter(e=>!!e);if(0===c.length){i((0,v.Vo)("No valid systems selected. Please select systems with URNs."));return}if(e===_.Qk.ADD){a=await l({monitor_config_key:t,urns:c});let e=c.length;o="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been promoted to the system inventory.")}else if(e===_.Qk.IGNORE){a=await s({monitor_config_key:t,urns:c});let e=c.length;o="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been ignored.")}else{if(e!==_.Qk.RESTORE)return;a=await u({monitor_config_key:t,urns:c});let n=c.length;o="".concat(n," system").concat(n>1?"s":""," ").concat(n>1?"have":"has"," been restored.")}(0,g.D4)(a)?i((0,v.Vo)((0,g.e$)(a.error))):(i((0,v.t5)(o)),null==n||n())},[t,l,s,u,i,n]),isBulkActionInProgress:r||a||d}},A=e=>{let{items:t,getRecordKey:n}=e,[i,l]=(0,c.useState)(new Set),r=i.size>0,s=i.size,a=(0,c.useCallback)(e=>{if(e){var i;l(new Set(null!==(i=null==t?void 0:t.map(e=>n(e)))&&void 0!==i?i:[]))}else l(new Set)},[t,n]),o=(0,c.useCallback)((e,t)=>{l(n=>{let i=new Set(n);return t?i.add(e):i.delete(e),i})},[]),u=(0,c.useCallback)(()=>{l(new Set)},[]),d=(0,c.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size===t.length&&t.every(e=>i.has(n(e))),[t,i,n]),f=(0,c.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size<t.length,[t,i]),m=(0,c.useMemo)(()=>t?t.filter(e=>i.has(n(e))):[],[t,i,n]),h=(0,c.useCallback)(e=>i.has(n(e)),[i,n]);return{selectedKeys:i,hasSelectedRows:r,selectedRowsCount:s,selectedItems:m,isAllSelected:d,isIndeterminate:f,handleSelectAll:a,handleSelectItem:o,clearSelection:u,isItemSelected:h}};var L=n(60240);let z=e=>{let{isIgnoredTab:t,allowIgnore:n,isBulkActionInProgress:i,onBulkAction:l}=e;return t?[{key:_.Qk.RESTORE,label:"Restore",onClick:()=>l(_.Qk.RESTORE),disabled:i}]:[...n?[{key:_.Qk.IGNORE,label:"Ignore",onClick:()=>l(_.Qk.IGNORE),disabled:i}]:[],{key:_.Qk.ADD,label:"Add",onClick:()=>l(_.Qk.ADD),disabled:i}]},O=e=>!!e.diff_status&&!e.diff_status.includes(L.LL.MUTED),T=e=>{var t,n;let{monitorId:l}=e,r=I(),{data:s,isLoading:a,searchQuery:f,updateSearch:m,paginationProps:h,activeTab:p,handleTabChange:g,activeParams:v,rowClickUrl:x,getRecordKey:j,refetch:k}=P({monitorId:l,statusFilters:r.statusFilters,vendorFilters:r.vendorFilters}),{data:w}=(0,d.vc)({monitor_config_id:l}),{selectedItems:S,hasSelectedRows:N,selectedRowsCount:R,isAllSelected:D,isIndeterminate:E,handleSelectAll:L,handleSelectItem:T,clearSelection:q,isItemSelected:Q}=A({items:null==s?void 0:s.items,getRecordKey:j}),{handleBulkAction:U,isBulkActionInProgress:F}=M({monitorId:l,getRecordKey:j,onSuccess:()=>{q(),k()}}),Z=p===y.A.IGNORED,V=O(v),K=(0,c.useCallback)(e=>{U(e,S)},[U,S]),B=(0,c.useMemo)(()=>z({isIgnoredTab:Z,allowIgnore:V,isBulkActionInProgress:F,onBulkAction:K}),[Z,V,F,K]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Niu,{"aria-label":"Asset state filter",mode:"horizontal",items:_.hc.map(e=>({key:e.key,label:e.label})),selectedKeys:[p],onClick:async e=>{await g(e.key),q()},className:"mb-4","data-testid":"asset-state-filter"}),(0,i.jsxs)(o.jqI,{vertical:!0,gap:"middle",className:"h-full",children:[(0,i.jsxs)(o.jqI,{justify:"space-between",children:[(0,i.jsx)(o.lQT,{level:2,children:"Monitor results"}),(0,i.jsx)(o.jqI,{align:"center",children:(null==w?void 0:w.last_monitored)&&(0,i.jsxs)(o.lKn,{type:"secondary",children:["Last scan:"," ",new Date(w.last_monitored).toLocaleString()]})})]}),(0,i.jsxs)(o.jqI,{justify:"space-between",children:[(0,i.jsx)(o.jqI,{gap:"small",children:(0,i.jsx)(u.f,{value:f,onChange:m,placeholder:"Search"})}),(0,i.jsxs)(o.jqI,{gap:"small",children:[(0,i.jsx)(C,{...r}),(0,i.jsx)(o.S0p,{menu:{items:B},disabled:!N||F,children:(0,i.jsx)(o.wpx,{type:"primary",icon:(0,i.jsx)(o.PJP._ME,{}),iconPosition:"end",disabled:!N||F,loading:F,children:"Actions"})}),(0,i.jsx)(o.esZ,{title:"Refresh",children:(0,i.jsx)(o.wpx,{icon:(0,i.jsx)(o.PJP.CQM,{}),"aria-label":"Refresh",onClick:k,loading:a})})]})]}),(0,i.jsxs)(o.jqI,{gap:"middle",align:"center",children:[(0,i.jsx)(o.E_O,{checked:D,indeterminate:E,onChange:e=>L(e.target.checked),title:"Select all"}),(0,i.jsx)("span",{className:"ml-2",children:"Select all"}),R>0&&(0,i.jsxs)(o.lKn,{strong:!0,children:[R.toLocaleString()," selected"]})]}),(0,i.jsx)(o.krs,{dataSource:null==s?void 0:s.items,loading:a,className:"h-full overflow-y-scroll",locale:{emptyText:(0,i.jsx)(o.oj8,{image:o.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},renderItem:e=>(0,i.jsx)(b,{item:e,selected:Q(e),onSelect:T,rowClickUrl:x,monitorId:l,activeTab:p,allowIgnore:V,onPromoteSuccess:k})}),(0,i.jsx)(o.B7X,{...h,total:(null==s?void 0:s.total)||0,showSizeChanger:{suffixIcon:(0,i.jsx)(o.PJP._ME,{})},hideOnSinglePage:(null===(t=h.pageSize)||void 0===t?void 0:t.toString())===(null===(n=h.pageSizeOptions)||void 0===n?void 0:n[0])})]})]})};var q=()=>{let e=decodeURIComponent((0,l.useRouter)().query.monitorId);return(0,i.jsxs)(r.Z,{title:"Action center - Discovered infrastructure systems",children:[(0,i.jsx)(a.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:s.vi},{title:e}]}),(0,i.jsx)(T,{monitorId:e})]})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,7245,4589,2888,9774,179],function(){return e(e.s=50755)}),_N_E=e.O()}]);