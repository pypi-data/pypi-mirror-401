"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{97181:function(e,a,l){l.d(a,{d:function(){return d}});var n=l(24246),t=l(49617),s=l(34090),i=l(27378),r=l(46238),o=l(40324);let d=e=>{let{name:a,label:l,labelProps:d,tooltip:c,isRequired:u,layout:v="inline",helperText:h,...m}=e,[x,j,{setValue:g}]=(0,s.U$)(a),p=!!(j.touched&&j.error),[f,b]=(0,i.useState)("");x.value||"tags"!==m.mode&&"multiple"!==m.mode||(x.value=[]),"tags"===m.mode&&"string"==typeof x.value&&(x.value=[x.value]);let y="tags"===m.mode?(e,a)=>e?e.value!==f||x.value.includes(f)?m.optionRender?m.optionRender(e,a):e.label:'Create "'.concat(f,'"'):void 0:m.optionRender||void 0,C=e=>{b(e),m.onSearch&&m.onSearch(e)},w=(e,a)=>{g(e),m.onChange&&m.onChange(e,a)};return"inline"===v?(0,n.jsx)(t.NIc,{isInvalid:p,isRequired:u,children:(0,n.jsxs)(t.rjZ,{templateColumns:l?"1fr 3fr":"1fr",children:[l?(0,n.jsx)(o.__,{htmlFor:m.id||a,...d,children:l}):null,(0,n.jsxs)(t.jqI,{align:"center",children:[(0,n.jsxs)(t.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,n.jsx)(t.WPr,{...x,id:m.id||a,"data-testid":"controlled-select-".concat(x.name),...m,optionRender:y,onSearch:"tags"===m.mode?C:void 0,onChange:w,value:x.value||void 0,status:p?"error":void 0}),h&&(0,n.jsx)(t.Q6r,{children:h}),(0,n.jsx)(o.Bc,{isInvalid:p,message:j.error,fieldName:x.name})]}),(0,n.jsx)(r.b,{label:c,className:p?"mt-2 self-start":void 0})]})]})}):(0,n.jsx)(t.NIc,{isInvalid:p,isRequired:u,children:(0,n.jsxs)(t.gCW,{alignItems:"start",children:[(0,n.jsxs)(t.jqI,{align:"center",children:[l?(0,n.jsx)(o.__,{htmlFor:m.id||a,fontSize:"xs",my:0,mr:1,...d,children:l}):null,(0,n.jsx)(r.b,{label:c})]}),(0,n.jsx)(t.WPr,{...x,id:m.id||a,"data-testid":"controlled-select-".concat(x.name),...m,optionRender:y,onSearch:"tags"===m.mode?C:void 0,onChange:w,value:x.value||void 0,status:p?"error":void 0}),h&&(0,n.jsx)(t.Q6r,{style:{marginTop:0},children:h}),(0,n.jsx)(o.Bc,{isInvalid:p,message:j.error,fieldName:x.name})]})})}},8133:function(e,a,l){var n=l(24246),t=l(49617);a.Z=e=>{let{title:a,children:l,isOpen:s,onClose:i,modalContentProps:r,showCloseButton:o=!1,footer:d,...c}=e;return(0,n.jsxs)(t.u_l,{isOpen:s,onClose:i,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...c,children:[(0,n.jsx)(t.ZAr,{}),(0,n.jsxs)(t.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",...r,children:[o&&(0,n.jsx)(t.olH,{}),(0,n.jsx)(t.xBx,{p:0,children:(0,n.jsx)(t.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,n.jsx)(t.X6q,{as:"h3",size:"sm",children:a})})}),(0,n.jsx)(t.fef,{pb:4,overflow:"auto",children:l}),d&&(0,n.jsx)(t.mzw,{children:d})]})]})}},33335:function(e,a,l){l.d(a,{E:function(){return n}});let n=e=>e.toLowerCase().replace(/[ .]/g,"_").replace(/[^a-zA-Z0-9_<>-]/g,"")},36345:function(e,a,l){l.d(a,{Z:function(){return j}});var n=l(24246),t=l(49617),s=l(34090),i=l(27378),r=l(16134),o=l(40324);let d=(0,t.IUT)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,n.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})});var c=l(46238),u=l(57865);let{Text:v}=t.AntTypography,h=e=>{let{searchText:a,suggestion:l,...t}=e;return a&&l?(0,n.jsxs)(v,{"aria-hidden":!0,style:{pointerEvents:"none",position:"absolute",zIndex:10,top:"var(--ant-line-width)",bottom:"var(--ant-line-width)",left:"var(--ant-padding-sm)",lineHeight:"calc(var(--ant-control-height) - var(--ant-line-width))"},...t,children:[(0,n.jsx)(v,{className:"text-transparent",children:a}),(0,n.jsx)(v,{type:"secondary",children:l.substring(a.length)})]}):null},m="Create new system",x=e=>{let{active:a,disabled:l,onRefreshSuggestions:s}=e,i={bg:a?"complimentary.500":"gray.100"};return(0,n.jsxs)(t.gCW,{children:[(0,n.jsx)(t.LZC,{minHeight:"18px"}),(0,n.jsxs)(t.v2r,{children:[(0,n.jsx)(t.j2t,{as:t.hU,size:"sm",isDisabled:l,icon:(0,n.jsx)(d,{color:a?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:i},...i}),(0,n.jsx)(t.qyq,{children:(0,n.jsx)(t.sNh,{onClick:s,children:(0,n.jsx)(t.xvT,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})};var j=e=>{var a,l;let{label:d,isCreate:v,lockedForGVL:j,options:g,isLoading:p,onVendorSelected:f}=e,b=(0,r.C)(u.bN),[y,C,{setValue:w}]=(0,s.U$)("name"),_=!!(C.touched&&C.error),I={...y,value:null!==(a=y.value)&&void 0!==a?a:""},{touched:N,values:z,setTouched:S,setFieldValue:R,validateForm:k}=(0,s.u6)(),[q,E]=(0,i.useState)(!0),W=null!==(l=g.find(e=>e.value===I.value))&&void 0!==l?l:{label:I.value,value:I.value,description:""},B=(e,a)=>!!(null==a?void 0:a.label.toLowerCase().startsWith(e.toLowerCase())),[T,U]=(0,i.useState)(""),Z=(0,i.useMemo)(()=>g.filter(e=>B(T,e)),[g,T]),A=(0,i.useMemo)(()=>{let e=g;return v&&T&&(e=[...g,{label:"".concat(m,' "').concat(T,'"...'),value:T}]),e},[v,g,T]),F=!!T&&Z.length>0,L=j&&!v;(0,i.useEffect)(()=>{E(!I.value&&!z.vendor_id)},[I.value,z.vendor_id,E]),(0,i.useEffect)(()=>{k()},[q,k]);let M=async()=>{U(""),R("vendor_id",void 0),await w(""),S({...N,vendor_id:!1,name:!1}),f(void 0)},P=async e=>{if(e){let a=g.some(a=>a.value===e.value)?e.value:void 0;R("vendor_id",a),await w(e.label.startsWith(m)?e.value:e.label),S({...N,vendor_id:!0,name:!0}),f(a)}},H=async e=>{I.onBlur(e),T&&await w(T),S({...N,name:!0})},D=async e=>{Z.length>0&&T!==Z[0].label?(e.preventDefault(),U(Z[0].label),R("vendor_id",Z[0].value),await w(Z[0].label),f(Z[0].value)):(R("vendor_id",void 0),await w(T)),S({...N,name:!0})},O=(0,n.jsx)(t.NIc,{isInvalid:_,isRequired:!0,width:"100%",children:(0,n.jsxs)(t.gCW,{alignItems:"start",position:"relative",width:"100%",children:[(0,n.jsxs)(t.Ugi,{spacing:1,children:[(0,n.jsx)(o.__,{htmlFor:"vendorName",fontSize:"xs",my:0,mr:1,children:d}),(0,n.jsx)(c.b,{label:"Enter the system name"})]}),(0,n.jsxs)(t.xuv,{width:"100%",className:"relative",children:[(0,n.jsx)(t.WPr,{id:"vendorName",labelInValue:!0,autoFocus:!0,allowClear:!0,options:A,loading:p,filterOption:(e,a)=>B(e,a)||!!(null==a?void 0:a.label.startsWith(m)),optionFilterProp:"label",value:W,placeholder:"Enter system name...","aria-label":"Select a system",disabled:L,onChange:P,onSearch:U,onClear:M,onBlur:H,onInputKeyDown:e=>{T&&"Tab"===e.key&&D(e)},status:_?"error":void 0,"data-testid":"vendor-name-select"}),(0,n.jsx)(h,{searchText:T,suggestion:Z.length?Z[0].label:""})]}),(0,n.jsx)(o.Bc,{isInvalid:_,message:C.error,fieldName:"name"})]})});return(0,n.jsxs)(t.Ugi,{alignItems:"flex-start",width:"full",children:[q?O:(0,n.jsx)(o.j0,{autoFocus:!0,id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:L,isRequired:!0,inputRightElement:L?null:(0,n.jsx)(t.PZ7,{onClick:M,size:"sm","data-testid":"clear-btn"})}),(0,n.jsx)(x,{active:!!z.vendor_id||F,disabled:!z.vendor_id||"showing"===b,onRefreshSuggestions:()=>f(z.vendor_id)})]})}}}]);