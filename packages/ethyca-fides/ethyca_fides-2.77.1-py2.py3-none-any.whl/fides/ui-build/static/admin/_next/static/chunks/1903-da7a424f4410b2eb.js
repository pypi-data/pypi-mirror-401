"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1903],{59969:function(e,t,n){var i=n(24246),r=n(49617);n(27378);var a=n(8557);t.Z=e=>{let t,{daysLeft:n,includeText:l,status:s}=e;if(!n||s===a.q.COMPLETE||s===a.q.CANCELED||s===a.q.DENIED||s===a.q.IDENTITY_UNVERIFIED)return(0,i.jsx)("span",{children:"-"});switch(!0){case n>=10:t=r.tAb.SUCCESS;break;case n<10&&n>4:t=r.tAb.WARNING;break;case n<5:t=r.tAb.ERROR}return(0,i.jsx)(r.j8w,{color:t,children:l?"".concat(n," days left"):n})}},18225:function(e,t,n){var i=n(24246),r=n(49617);t.Z=e=>{let{alignment:t="center",...n}=e;return(0,i.jsx)(r.kCb,{boxSize:"full",align:"center",justify:t,children:(0,i.jsx)(r.$jN,{color:"primary",...n})})}},58754:function(e,t,n){var i=n(24246),r=n(49617),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:l=!0,children:s,rightContent:o,style:u,...c}=e;return(0,i.jsxs)("div",{...c,style:l?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,i.jsxs)(r.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(r.lQT,{className:n||s?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,i.jsx)(a.m,{className:s?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),s]})}},45259:function(e,t,n){var i=n(24246),r=n(49617);let a={approved:{color:r.tAb.SUCCESS,label:"Approved"},complete:{color:r.tAb.SUCCESS,label:"Completed"},awaiting_email_send:{color:r.tAb.MARBLE,label:"Awaiting Email Send"},denied:{color:r.tAb.WARNING,label:"Denied"},canceled:{color:r.tAb.MARBLE,label:"Canceled"},error:{color:r.tAb.ERROR,label:"Error"},in_processing:{color:r.tAb.CAUTION,label:"In Progress"},paused:{color:r.tAb.MARBLE,label:"Paused"},pending:{color:r.tAb.INFO,label:"New"},identity_unverified:{color:r.tAb.MARBLE,label:"Unverified"},requires_input:{color:r.tAb.MINOS,label:"Requires Input"},requires_manual_finalization:{color:r.tAb.MINOS,label:"Requires Finalization"},duplicate:{color:r.tAb.DEFAULT,label:"Duplicate"}};t.Z=e=>{let{status:t}=e;return(0,i.jsx)(r.j8w,{color:a[t].color,className:"justify-center","data-testid":"request-status-badge",children:a[t].label})}},19904:function(e,t,n){n.d(t,{Tg:function(){return l}});var i=n(24246),r=n(16134),a=n(31793);let l=e=>(0,r.C)(a.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:n}=e;return l(t)?(0,i.jsx)(i.Fragment,{children:n}):null}},70788:function(e,t,n){n.d(t,{m:function(){return u}});var i=n(24246),r=n(49617),a=n(79894),l=n.n(a),s=n(27378);let{Text:o}=r.AntTypography,u=e=>{let{items:t,...n}=e,a=(0,s.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,s={...e},u=s.onClick&&!s.href;return("string"==typeof s.title&&(s.title=(0,i.jsx)(o,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:s.title})),u)?s.title=(0,i.jsx)(r.wpx,{type:"text",size:"small",icon:s.icon,onClick:s.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:s.title}):(s.icon&&(s.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,i.jsx)(l(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href)),s}),[t]);return(0,i.jsx)(r.zrq,{items:a,...n})}},42478:function(e,t,n){n.d(t,{FU:function(){return u},JE:function(){return r},Ki:function(){return d},SU:function(){return g},W:function(){return f},h9:function(){return a},jc:function(){return i},qt:function(){return o},sn:function(){return c}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:r,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:l,useGetMessagingConfigurationDetailsQuery:s,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let r=await i({url:"messaging/default/active"});return r.error&&404===r.error.status?{data:null}:r},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},57526:function(e,t,n){var i=n(24246),r=n(49617),a=n(27378),l=n(90449);t.Z=e=>{let{isOpen:t,onClose:n,onApproveRequest:s,isLoading:o,subjectRequest:u}=e,{identity:c,identity_verified_at:d,custom_privacy_request_fields:g}=u,f=(0,l.o8)(c),h=(0,l.Ub)(c,f),p=[...f?[f]:[],...h],m=(0,l.aP)(g),y=(0,a.useCallback)(()=>{s().then(()=>{n()})},[s,n]);return(0,i.jsxs)(r.u_l,{isOpen:t,onClose:n,size:"lg",isCentered:!0,children:[(0,i.jsx)(r.ZAr,{}),(0,i.jsxs)(r.hzk,{children:[(0,i.jsx)(r.xBx,{children:"Privacy request approval"}),(0,i.jsxs)(r.fef,{paddingTop:0,paddingBottom:0,children:[(0,i.jsx)(r.xvT,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,i.jsxs)(r.QI$,{children:[p.map(e=>(0,i.jsx)(r.HCh,{children:(0,i.jsxs)(r.kCb,{alignItems:"flex-start",children:[(0,i.jsxs)(r.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,i.jsx)(r.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:e.value}),"(",d?"Verified":"Unverified",")"]})},e.key)),m.map(e=>(0,i.jsx)(r.HCh,{children:(0,i.jsxs)(r.kCb,{alignItems:"flex-start",children:[(0,i.jsxs)(r.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,i.jsx)(r.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:Array.isArray(e.value)?e.value.join(", "):String(e.value)}),"(Unverified)"]})},e.key))]})]}),(0,i.jsx)(r.mzw,{children:(0,i.jsxs)(r.MIq,{columns:2,width:"100%",children:[(0,i.jsx)(r.wpx,{onClick:n,className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,i.jsx)(r.wpx,{type:"primary","data-testid":"continue-btn",onClick:y,loading:o,children:"Confirm"})]})})]})]})}},66548:function(e,t,n){var i=n(24246),r=n(40324),a=n(49617),l=n(34090),s=n(27378),o=n(55484);let u={denialReason:""};t.Z=e=>{let{isOpen:t,onClose:n,onDenyRequest:c}=e,d=(0,s.useCallback)((e,t)=>{let{setSubmitting:i}=t;c(e.denialReason).then(()=>{i(!1),n()})},[c,n]);return(0,i.jsxs)(a.u_l,{isOpen:t,onClose:n,isCentered:!0,returnFocusOnClose:!1,children:[(0,i.jsx)(a.ZAr,{}),(0,i.jsx)(a.hzk,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,i.jsx)(l.J9,{initialValues:u,validationSchema:o.Ry({denialReason:o.Z_().required().label("Reason for denial")}),onSubmit:d,children:e=>{let{isSubmitting:t,dirty:s,isValid:o}=e;return(0,i.jsxs)(l.l0,{children:[(0,i.jsx)(a.xBx,{children:"Privacy request denial"}),(0,i.jsx)(a.fef,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,i.jsx)(a.fef,{children:(0,i.jsx)(r.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,i.jsxs)(a.mzw,{className:"flex w-full gap-4",children:[(0,i.jsx)(a.wpx,{disabled:t,onClick:n,className:"grow",children:"Cancel"}),(0,i.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:!s||!o,loading:t,className:"grow","data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})}},90449:function(e,t,n){n.d(t,{$u:function(){return p},Pp:function(){return u},Ub:function(){return g},V1:function(){return h},aP:function(){return f},o8:function(){return d}});var i=n(90104),r=n.n(i),a=n(30644),l=n.n(a),s=n(71975),o=n.n(s);let u=(0,n(40431).jo)({parse:e=>{try{return JSON.parse(e)}catch(e){return null}},serialize:e=>JSON.stringify(e)}).withOptions({throttleMs:500}),c=(e,t)=>t?"string"==typeof t&&t.length>0?{value:t,label:e,key:e}:"object"!=typeof t||r()(t.value)?null:{value:t.value,label:t.label,key:e}:null,d=e=>{if(!e)return null;let t=c("email",e.email);if(t)return t;let n=c("phone_number",e.phone_number);if(n)return n;let i=Object.keys(e);return i.length>0?c(i[0],e[i[0]]):null},g=(e,t)=>e?Object.entries(e).map(e=>{let[t,n]=e;return c(t,n)}).filter(e=>!!e).filter(e=>e.key!==(null==t?void 0:t.key)):[],f=e=>e&&e?Object.entries(e).filter(e=>{let[,t]=e;return!l()(t.value)&&""!==t.value}).map(e=>{let[t,n]=e;return{key:t,label:n.label,value:n.value}}):[],h=e=>{if(!e)return{};let t={};return e.forEach(e=>{e.custom_privacy_request_fields&&Object.entries(e.custom_privacy_request_fields).forEach(e=>{let[n,i]=e;t[n]||(t[n]=i)})}),t},p=e=>{if(!e)return null;let t=o()(e,e=>null!==e);return Object.keys(t).length>0?t:null}},45489:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(90867);let r=e=>{let{subjectRequest:t}=e,[n,r]=(0,i.RW)({fixedCacheKey:t.id}),[a,l]=(0,i.F1)({fixedCacheKey:t.id}),[s,o]=(0,i.rC)({fixedCacheKey:t.id}),[u,c]=(0,i.zB)({fixedCacheKey:t.id}),d=l.isLoading||r.isLoading||c.isLoading;return{approveRequest:n,approveRequestResult:r,denyRequest:a,denyRequestResult:l,handleApproveRequest:()=>n({id:t.id}),handleDenyRequest:e=>a({id:t.id,reason:e}),handleDeleteRequest:()=>s({id:t.id}),handleFinalizeRequest:()=>u({privacyRequestId:t.id}),softDeleteRequestResult:o,finalizeRequestResult:c,isLoading:d}}},72281:function(e,t,n){n.d(t,{G:function(){return s},d:function(){return o}});var i=n(86677),r=n(27378),a=n(19904),l=n(60240);let s={REQUEST:"request",MANUAL_TASK:"manual-tasks"},o=()=>{let e=(0,i.useRouter)(),t=(0,a.Tg)([l.Sh.PRIVACY_REQUEST_READ]),n=(0,a.Tg)([l.Sh.MANUAL_FIELD_READ_OWN,l.Sh.MANUAL_FIELD_READ_ALL]),o=(0,r.useMemo)(()=>({request:t,manualTask:n}),[t,n]),[u,c]=(0,r.useState)(o.request?s.REQUEST:s.MANUAL_TASK),d=(0,r.useCallback)(()=>{let{tab:t}=e.query;return t&&"string"==typeof t&&Object.values(s).includes(t)?t:null},[e.query]),g=(0,r.useCallback)(t=>{e.replace({pathname:e.pathname,query:{tab:t}},void 0,{shallow:!0})},[e]);return(0,r.useEffect)(()=>{if(!e.isReady)return;let t=d();t?(t===s.REQUEST||t===s.MANUAL_TASK&&o.manualTask)&&c(t):o.request&&c(s.REQUEST)},[e.isReady,e.query,o,d,g]),{activeTab:u,handleTabChange:(0,r.useCallback)(e=>{Object.values(s).includes(e)&&(c(e),g(e))},[g]),availableTabs:o}}}}]);