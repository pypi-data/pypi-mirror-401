version: "1.0.0"

# Agents globaux - toujours installés dans ~/.claude/agents/
global:
  - name: commit
    file: global/commit.md
    version: "1.0.0"
    description: "Expert Git pour commits atomiques et conventionnels"
    model: haiku

  - name: architect
    file: global/architect.md
    version: "1.0.0"
    description: "Expert architecture pour décisions structurelles critiques"
    model: opus

  - name: doc
    file: global/doc.md
    version: "1.0.0"
    description: "Spécialiste documentation VitePress et OpenAPI"
    model: haiku

  - name: code-reviewer
    file: global/code-reviewer.md
    version: "1.0.0"
    description: "Expert revue de code multi-stack"
    model: sonnet

  - name: tech-lead
    file: global/tech-lead.md
    version: "1.0.0"
    description: "Chef d'orchestre coordonnant les agents spécialisés"
    model: opus

  - name: debug-opus
    file: global/debug-opus.md
    version: "1.0.0"
    description: "Expert debugging production et bugs critiques"
    model: opus

  - name: debug-sonnet
    file: global/debug-sonnet.md
    version: "1.0.0"
    description: "Expert debugging développement et bugs non-critiques"
    model: sonnet

  - name: ux
    file: global/ux.md
    version: "1.0.0"
    description: "Spécialiste UI/UX et accessibilité"
    model: sonnet

# Agents projet - installés dans ./.claude/agents/ selon contexte détecté
project:
  categories:
    backend:
      - name: spring-boot-sonnet
        file: project/backend/spring-boot-sonnet.md
        version: "1.0.0"
        tags: [java, spring, maven, gradle, kotlin]
        model: sonnet
        description: "Expert Spring Boot pour CRUD et endpoints simples"

      - name: spring-boot-opus
        file: project/backend/spring-boot-opus.md
        version: "1.0.0"
        tags: [java, spring, maven, gradle, kotlin]
        model: opus
        description: "Expert Spring Boot pour logique métier critique"

      - name: go
        file: project/backend/go.md
        version: "1.0.0"
        tags: [go, golang]
        model: sonnet
        description: "Expert Go pour APIs REST/gRPC et microservices"

      - name: go-opus
        file: project/backend/go-opus.md
        version: "1.0.0"
        tags: [go, golang]
        model: opus
        description: "Expert Go pour logique métier critique"

      - name: rust
        file: project/backend/rust.md
        version: "1.0.0"
        tags: [rust, cargo]
        model: sonnet
        description: "Expert Rust pour systèmes haute performance"

      - name: rust-opus
        file: project/backend/rust-opus.md
        version: "1.0.0"
        tags: [rust, cargo]
        model: opus
        description: "Expert Rust pour logique métier critique"

    frontend:
      - name: vue3
        file: project/frontend/vue3.md
        version: "1.0.0"
        tags: [vue, vue3, pinia]
        model: sonnet
        description: "Expert Vue 3 avec Vite, Tailwind et Pinia"

      - name: react
        file: project/frontend/react.md
        version: "1.0.0"
        tags: [react, nextjs]
        model: sonnet
        description: "Expert React et Next.js"

      - name: svelte
        file: project/frontend/svelte.md
        version: "1.0.0"
        tags: [svelte, sveltekit]
        model: sonnet
        description: "Expert Svelte et SvelteKit"

    devops:
      - name: terraform
        file: project/devops/terraform.md
        version: "1.0.0"
        tags: [terraform, iac, aws, gcp, azure]
        model: sonnet
        description: "Expert Terraform pour Infrastructure as Code"

      - name: gitlab-ci
        file: project/devops/gitlab-ci.md
        version: "1.0.0"
        tags: [gitlab, gitlab-ci, ci, cd, pipeline]
        model: sonnet
        description: "Expert GitLab CI/CD pour pipelines"

      - name: docker
        file: project/devops/docker.md
        version: "1.0.0"
        tags: [docker, docker-compose, container]
        model: haiku
        description: "Expert Docker et containerisation"

      - name: keycloak
        file: project/devops/keycloak.md
        version: "1.0.0"
        tags: [keycloak, oauth2, oidc, sso, auth]
        model: opus
        description: "Expert Keycloak OAuth2/OIDC et SSO"

    database:
      - name: postgresql-sonnet
        file: project/database/postgresql-sonnet.md
        version: "1.0.0"
        tags: [postgresql, postgres, sql, database]
        model: sonnet
        description: "Expert PostgreSQL pour optimisation queries"

      - name: postgresql-opus
        file: project/database/postgresql-opus.md
        version: "1.0.0"
        tags: [postgresql, postgres, sql, database]
        model: opus
        description: "Expert PostgreSQL pour schema design critique"

    quality:
      - name: qa
        file: project/quality/qa.md
        version: "1.0.0"
        tags: [test, testing, quality, vitest, junit]
        model: haiku
        description: "Spécialiste tests unitaires et couverture"

      - name: security
        file: project/quality/security.md
        version: "1.0.0"
        tags: [security, owasp, audit]
        model: opus
        description: "Expert sécurité applicative et audit OWASP"

      - name: playwright
        file: project/quality/playwright.md
        version: "1.0.0"
        tags: [playwright, e2e, testing]
        model: sonnet
        description: "Expert Playwright pour tests E2E"

# Règles de détection automatique pour agents projet
detection_rules:
  - detector: "pom.xml || build.gradle || build.gradle.kts"
    agents: [spring-boot-sonnet, spring-boot-opus]

  - detector: "go.mod"
    agents: [go, go-opus]

  - detector: "Cargo.toml"
    agents: [rust, rust-opus]

  - detector: "package.json + vue"
    agents: [vue3]

  - detector: "package.json + react"
    agents: [react]

  - detector: "package.json + svelte || svelte.config.js"
    agents: [svelte]

  - detector: "*.tf"
    agents: [terraform]

  - detector: ".gitlab-ci.yml"
    agents: [gitlab-ci]

  - detector: "Dockerfile || docker-compose.yml"
    agents: [docker]

  - detector: "*.sql || flyway || liquibase"
    agents: [postgresql-sonnet, postgresql-opus]

  - detector: "keycloak || realm.json"
    agents: [keycloak]

  - detector: "playwright.config.ts || playwright.config.js"
    agents: [playwright]

  - detector: "vitest.config.ts || jest.config.js"
    agents: [qa]
