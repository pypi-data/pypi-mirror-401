# AuroraView 打包配置示例
# ============================================================================
#
# 配置层级结构:
#   [package]              - 包元数据 & 身份标识
#   [frontend]             - 前端配置 (path 或 url)
#   [backend]              - 后端抽象层 (可选)
#   [backend.python]       - Python 特定设置
#   [backend.go]           - Go 特定设置
#   [backend.rust]         - Rust 特定设置
#   [backend.node]         - Node.js 特定设置
#   [backend.process]      - 通用进程设置
#   [window]               - 运行时窗口行为
#   [bundle]               - 通用打包设置
#   [bundle.windows]       - Windows 特定
#   [bundle.macos]         - macOS 特定
#   [bundle.linux]         - Linux 特定
#   [build]                - 构建钩子
#   [hooks]                - 文件收集
#   [runtime]              - 运行时环境
#   [debug]                - 调试设置
#   [license]              - 许可证验证
#   [inject]               - JS/CSS 注入
#
# 后端类型:
#   - "python": Python 后端 (standalone, pyoxidizer, embedded, portable, system)
#   - "go": Go 后端 (编译为二进制)
#   - "rust": Rust 后端 (编译为二进制)
#   - "node": Node.js 后端 (pkg, nexe, sea, portable)
#   - "none": 仅前端模式 (默认，可省略 [backend])
#
# 使用方法:
#   auroraview pack --config examples/pack-example.toml --build
#
# 命令行覆盖:
#   auroraview pack --config examples/pack-example.toml --icon ./my-icon.png --no-console --build

# ============================================================================
# 包信息 & 身份标识
# ============================================================================
[package]
name = "my-awesome-app"
version = "1.0.0"
title = "My Awesome App"
identifier = "com.mycompany.myapp"
description = "我的应用程序 - 展示新配置结构"
authors = ["Your Name <your@email.com>"]
license = "MIT"
allow_new_window = false

# ============================================================================
# 前端配置
# ============================================================================
[frontend]
path = "./dist"
# url = "https://example.com"                   # 或远程 URL (二选一)

# ============================================================================
# 后端配置 (可选)
# ============================================================================
# 如果不需要后端，可以省略整个 [backend] 部分
# [backend]
# type = "none"                                 # 显式声明无后端

# ============================================================================
# 窗口配置 (运行时窗口行为)
# ============================================================================
[window]
width = 1280
height = 720
min_width = 800
min_height = 600
resizable = true
frameless = false
transparent = false
always_on_top = false
start_position = "center"                       # 或 { x = 100, y = 100 }

# ============================================================================
# 打包配置
# ============================================================================
[bundle]
icon = "./assets/my-app-icon.png"
copyright = "Copyright 2025 My Company"
category = "Productivity"
short_description = "一个很棒的应用"
resources = []
external_bin = []

# ============================================================================
# 平台特定配置
# ============================================================================
[bundle.windows]
# icon = "./assets/my-app-icon.ico"             # 可选覆盖统一图标
console = false
file_version = "1.0.0.0"
product_version = "1.0.0"
file_description = "My Awesome App"
product_name = "My Awesome App"
company_name = "My Company"

# [bundle.macos]
# icon = "./assets/my-app-icon.icns"

# [bundle.linux]
# icon = "./assets/my-app-icon.png"
# categories = ["Utility", "Development"]

# ============================================================================
# 构建配置
# ============================================================================
[build]
before = ["npm run build"]
after = []
resources = ["./public"]
exclude = ["*.map", "*.ts", "node_modules", "*.log"]
out_dir = "./pack-output"
release = true

# ============================================================================
# 调试配置
# ============================================================================
[debug]
enabled = false
devtools = false
verbose = false
# remote_debugging_port = 9222

# ============================================================================
# 注入配置
# ============================================================================
[inject]
# js = "./inject.js"
# css = "./inject.css"
# js_code = "console.log('App loaded');"
# css_code = "body { background: #fff; }"

# ============================================================================
# 运行时环境变量
# ============================================================================
[runtime]
[runtime.env]
APP_ENV = "production"
LOG_LEVEL = "info"

# ============================================================================
# Python 后端配置示例
# ============================================================================
# 取消注释以下部分启用 Python 后端

# [backend]
# type = "python"
#
# [backend.python]
# version = "3.11"
# entry_point = "main:run"
# packages = ["requests", "pyyaml"]
# include_paths = ["."]
# exclude = ["*.pyc", "__pycache__", "tests"]
# optimize = 1
# strategy = "standalone"                       # standalone | pyoxidizer | embedded | portable | system
#
# [backend.python.isolation]
# pythonpath = true
# path = true
#
# [backend.python.protection]
# enabled = true
# optimization = 2
#
# [backend.process]
# console = false
# args = []
# env = { APP_MODE = "production" }
# restart_on_crash = true
# max_restarts = 3
#
# [backend.process.health_check]
# url = "http://localhost:8080/health"
# timeout = 30

# ============================================================================
# 钩子配置 (文件收集)
# ============================================================================
# [hooks]
# before_collect = []
# after_pack = []
#
# [[hooks.collect]]
# source = "./data/*.json"
# dest = "resources/data"
# preserve_structure = false
# description = "Application data files"

# ============================================================================
# 许可证配置 (可选)
# ============================================================================
# [license]
# enabled = true
# expires_at = "2025-12-31"
# require_token = false
# grace_period_days = 7
# expiration_message = "您的许可证已过期，请续费。"
