<p align="center">
  <img src="assets/icons/auroraview-logo-text.png" alt="AuroraView Logo" width="400">
</p>

<p align="center">
  ä¸­æ–‡æ–‡æ¡£ | <a href="./README.md">English</a>
</p>

<p align="center">
  <a href="https://pypi.org/project/auroraview/"><img src="https://img.shields.io/pypi/v/auroraview.svg" alt="PyPI ç‰ˆæœ¬"></a>
  <a href="https://pypi.org/project/auroraview/"><img src="https://img.shields.io/pypi/pyversions/auroraview.svg" alt="Python ç‰ˆæœ¬"></a>
  <a href="https://pepy.tech/project/auroraview"><img src="https://static.pepy.tech/badge/auroraview" alt="ä¸‹è½½é‡"></a>
  <a href="https://codecov.io/gh/loonghao/auroraview"><img src="https://codecov.io/gh/loonghao/auroraview/branch/main/graph/badge.svg" alt="Codecov"></a>
  <a href="https://github.com/loonghao/auroraview/actions/workflows/pr-checks.yml"><img src="https://github.com/loonghao/auroraview/actions/workflows/pr-checks.yml/badge.svg" alt="PR Checks"></a>
  <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
</p>

<p align="center">
  <a href="https://www.rust-lang.org/"><img src="https://img.shields.io/badge/Rust-1.75+-orange.svg" alt="Rust"></a>
  <a href="https://github.com/loonghao/auroraview"><img src="https://img.shields.io/badge/Platform-Windows%20%7C%20macOS%20%7C%20Linux-lightgrey.svg" alt="å¹³å°"></a>
  <a href="https://github.com/loonghao/auroraview/actions/workflows/ci.yml"><img src="https://github.com/loonghao/auroraview/actions/workflows/ci.yml/badge.svg?branch=main" alt="CI"></a>
  <a href="https://github.com/loonghao/auroraview/actions/workflows/build-wheels.yml"><img src="https://github.com/loonghao/auroraview/actions/workflows/build-wheels.yml/badge.svg?branch=main" alt="Build Wheels"></a>
  <a href="https://github.com/loonghao/auroraview/actions/workflows/release.yml"><img src="https://github.com/loonghao/auroraview/actions/workflows/release.yml/badge.svg?branch=main" alt="Release"></a>
</p>

<p align="center">
  <a href="https://github.com/loonghao/auroraview/actions/workflows/codeql.yml"><img src="https://github.com/loonghao/auroraview/actions/workflows/codeql.yml/badge.svg?branch=main" alt="CodeQL"></a>
  <a href="https://github.com/loonghao/auroraview/actions/workflows/security-audit.yml"><img src="https://github.com/loonghao/auroraview/actions/workflows/security-audit.yml/badge.svg?branch=main" alt="Security Audit"></a>
  <a href="https://github.com/loonghao/auroraview/releases"><img src="https://img.shields.io/github/v/release/loonghao/auroraview?display_name=tag" alt="Latest Release"></a>
  <a href="https://pre-commit.com/"><img src="https://img.shields.io/badge/pre--commit-enabled-brightgreen.svg" alt="pre-commit"></a>
</p>

<p align="center">
  <a href="https://github.com/loonghao/auroraview/stargazers"><img src="https://img.shields.io/github/stars/loonghao/auroraview?style=social" alt="GitHub Stars"></a>
  <a href="https://github.com/loonghao/auroraview/releases"><img src="https://img.shields.io/github/downloads/loonghao/auroraview/total" alt="GitHub Downloads"></a>
  <a href="https://github.com/loonghao/auroraview/commits/main"><img src="https://img.shields.io/github/last-commit/loonghao/auroraview" alt="Last Commit"></a>
  <a href="https://github.com/loonghao/auroraview/graphs/commit-activity"><img src="https://img.shields.io/github/commit-activity/m/loonghao/auroraview" alt="Commit Activity"></a>
</p>

<p align="center">
  <a href="https://github.com/loonghao/auroraview/issues"><img src="https://img.shields.io/github/issues/loonghao/auroraview" alt="Open Issues"></a>
  <a href="https://github.com/loonghao/auroraview/pulls"><img src="https://img.shields.io/github/issues-pr/loonghao/auroraview" alt="Open PRs"></a>
  <a href="https://github.com/loonghao/auroraview/graphs/contributors"><img src="https://img.shields.io/github/contributors/loonghao/auroraview" alt="Contributors"></a>
  <a href="https://conventionalcommits.org"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits"></a>
</p>

<p align="center">
  <a href="https://github.com/googleapis/release-please"><img src="https://img.shields.io/badge/release--please-enabled-blue" alt="release-please"></a>
  <a href="./.github/dependabot.yml"><img src="https://img.shields.io/badge/dependabot-enabled-025E8C?logo=dependabot" alt="Dependabot"></a>
  <a href="https://docs.astral.sh/ruff/"><img src="https://img.shields.io/badge/code%20style-ruff-000000.svg" alt="Code Style: ruff"></a>
  <a href="http://mypy-lang.org/"><img src="https://img.shields.io/badge/type%20checked-mypy-2A6DB0.svg" alt="Type Checked: mypy"></a>
</p>

<p align="center">
  <a href="./CODE_OF_CONDUCT.md">è¡Œä¸ºå‡†åˆ™</a> â€¢
  <a href="./SECURITY.md">å®‰å…¨ç­–ç•¥</a> â€¢
  <a href="https://github.com/loonghao/auroraview/issues">é—®é¢˜è¿½è¸ª</a>
</p>


ä¸€ä¸ªä¸ºDCCï¼ˆæ•°å­—å†…å®¹åˆ›ä½œï¼‰è½¯ä»¶è®¾è®¡çš„è½»é‡çº§WebViewæ¡†æ¶ï¼Œä½¿ç”¨Rustæ„å»ºå¹¶æä¾›Pythonç»‘å®šã€‚å®Œç¾æ”¯æŒMayaã€3ds Maxã€Houdiniã€Blenderç­‰ã€‚

> **âš ï¸ å¼€å‘çŠ¶æ€**: æœ¬é¡¹ç›®æ­£åœ¨ç§¯æå¼€å‘ä¸­ã€‚API å¯èƒ½åœ¨ v1.0.0 å‘å¸ƒå‰å‘ç”Ÿå˜åŒ–ã€‚é¡¹ç›®å°šæœªåœ¨ Linux å’Œ macOS å¹³å°ä¸Šè¿›è¡Œå¹¿æ³›æµ‹è¯•ã€‚

## å¿«é€Ÿä½“éªŒ

ä½¿ç”¨ `uvx` æ— éœ€å®‰è£…å³å¯å¿«é€Ÿä½“éªŒ AuroraViewï¼š

```bash
uvx auroraview --url baidu.com
```

## æ¦‚è¿°

AuroraView ä¸ºä¸“ä¸šDCCåº”ç”¨ç¨‹åºï¼ˆå¦‚Mayaã€3ds Maxã€Houdiniã€Blenderã€Photoshopå’ŒUnreal Engineï¼‰æä¾›ç°ä»£åŒ–çš„Web UIè§£å†³æ–¹æ¡ˆã€‚åŸºäºRustçš„Wryåº“å’ŒPyO3ç»‘å®šæ„å»ºï¼Œæä¾›åŸç”Ÿæ€§èƒ½å’Œæœ€å°å¼€é”€ã€‚

### ä¸»è¦ç‰¹æ€§

- **è½»é‡çº§**: çº¦5MBåŒ…ä½“ç§¯ï¼Œè€ŒElectronçº¦120MB
- **å¿«é€Ÿ**: åŸç”ŸRustæ€§èƒ½ï¼Œæœ€å°å†…å­˜å ç”¨
- **æ— ç¼é›†æˆ**: ä¸ºæ‰€æœ‰ä¸»æµDCCå·¥å…·æä¾›ç®€å•çš„Python API
- **ç°ä»£WebæŠ€æœ¯æ ˆ**: æ”¯æŒReactã€Vueæˆ–ä»»ä½•Webæ¡†æ¶
- **å®‰å…¨**: Rustçš„å†…å­˜å®‰å…¨ä¿è¯
- **è·¨å¹³å°**: æ”¯æŒWindowsã€macOSå’ŒLinux
- **DCCä¼˜å…ˆè®¾è®¡**: ä¸“ä¸ºDCCè½¯ä»¶é›†æˆè€Œæ„å»º
- **ç±»å‹å®‰å…¨**: Rust + Python å®Œæ•´ç±»å‹æ£€æŸ¥

[POINTER] **[DCC é›†æˆæŒ‡å—](./docs/DCC_INTEGRATION.md)** - äº†è§£å¦‚ä½•å°† AuroraView é›†æˆåˆ° Mayaã€Houdiniã€Nuke å’Œå…¶ä»– DCC åº”ç”¨ç¨‹åºä¸­ã€‚

## æ¶æ„

<p align="center">
  <img src="assets/images/architecture.png" alt="AuroraView æ¶æ„å›¾" width="800">
</p>
##  æŠ€æœ¯æ¡†æ¶

- æ ¸å¿ƒæ ˆï¼šRust 1.75+ã€PyO3 0.22ï¼ˆabi3ï¼‰ã€Wry 0.47ã€Tao 0.30
- å¼•æ“ï¼šWindowsï¼ˆWebView2ï¼‰ã€macOSï¼ˆWKWebViewï¼‰ã€Linuxï¼ˆWebKitGTKï¼‰
- æ‰“åŒ…ï¼šmaturin + abi3 â†’ å•ä¸ª wheel å…¼å®¹ CPython 3.7-3.13
- äº‹ä»¶å¾ªç¯ï¼šé»˜è®¤é˜»å¡å¼ show()ï¼›åç»­æä¾›éé˜»å¡æ¨¡å¼ä»¥é€‚é…å®¿ä¸»å¾ªç¯
- å»¶è¿ŸåŠ è½½ï¼šåœ¨ show() å‰è®¾ç½®çš„ URL/HTML ä¼šä¿å­˜å¹¶åœ¨åˆ›å»ºæ—¶åº”ç”¨ï¼ˆæœ€åå†™å…¥ç”Ÿæ•ˆï¼‰
- IPCï¼šPython â†” JavaScript åŒå‘äº‹ä»¶æ€»çº¿ï¼ˆåŸºäº CustomEventï¼‰
- åè®®ï¼šè‡ªå®šä¹‰åè®®ä¸èµ„æºåŠ è½½ï¼ˆå¦‚ dcc://ï¼‰
- åµŒå…¥ï¼šæ”¯æŒçˆ¶çª—å£å¥æŸ„ï¼ˆHWND/NSView/WIdï¼‰çš„ DCC å®¿ä¸»åµŒå…¥ï¼ˆè·¯çº¿å›¾ï¼‰
- å®‰å…¨ï¼šå¯é€‰çš„å¼€å‘è€…å·¥å…·ã€CSP é’©å­ã€è¿œç¨‹ URL ç™½åå•ï¼ˆè§„åˆ’ä¸­ï¼‰
- æ€§èƒ½ç›®æ ‡ï¼šæœ¬åœ° HTML é¦–å± <150msã€åŸºçº¿å†…å­˜ <50MB

### æŠ€æœ¯ç»†èŠ‚
- Python APIï¼š`auroraview.WebView` å°è£… Rust æ ¸å¿ƒå¹¶æä¾›æ˜“ç”¨å¢å¼º
- Rust æ ¸å¿ƒï¼šä½¿ç”¨ Arc<Mutex<...>> çš„å†…éƒ¨å¯å˜é…ç½®ï¼Œå®‰å…¨æ”¯æŒ show() å‰æ›´æ–°
- ç”Ÿå‘½å‘¨æœŸï¼šåœ¨ `show()` æ—¶åˆ›å»º WebViewï¼Œå¹¶åº”ç”¨ URL/HTMLï¼ˆæœ€åå†™å…¥ç”Ÿæ•ˆï¼‰
- JS æ¡¥ï¼šPython ä¾§ `emit(event, data)`ï¼›JS ä¾§é€šè¿‡ `CustomEvent('py', {...})` å›ä¼ åˆ° Pythonï¼ˆIpcHandlerï¼‰
- æ—¥å¿—ï¼šRust ç«¯ `tracing`ï¼›Python ç«¯ `logging`
- æµ‹è¯•ï¼špytest å†’çƒŸ + cargo æµ‹è¯•ï¼›CI æ„å»ºä¸‰å¹³å° wheel


## ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- [OK] **åŸç”Ÿ WebView é›†æˆ**: ä½¿ç”¨ç³»ç»Ÿ WebView (WebView2/WKWebView/WebKitGTK)ï¼Œå ç”¨ç©ºé—´æœ€å°
- [OK] **åŒå‘é€šä¿¡**: Python â†” JavaScript IPCï¼Œæ”¯æŒ async/await
- [OK] **è‡ªå®šä¹‰åè®®å¤„ç†å™¨**: ä» DCC é¡¹ç›®åŠ è½½èµ„æº (`auroraview://`ã€è‡ªå®šä¹‰åè®®)
- [OK] **äº‹ä»¶ç³»ç»Ÿ**: Node.js é£æ ¼ EventEmitterï¼Œæ”¯æŒ `on()`ã€`once()`ã€`off()`ã€`emit()`
- [OK] **å¤šçª—å£æ”¯æŒ**: WindowManager ç®¡ç†å¤šçª—å£ï¼Œæ”¯æŒè·¨çª—å£äº‹ä»¶é€šä¿¡
- [OK] **çº¿ç¨‹å®‰å…¨**: Rust ä¿è¯çš„å†…å­˜å®‰å…¨å’Œå¹¶å‘æ“ä½œ

### å­˜å‚¨ä¸æ•°æ®
- [OK] **localStorage/sessionStorage**: å®Œæ•´çš„ Web å­˜å‚¨ CRUD æ“ä½œ
- [OK] **Cookie ç®¡ç†**: set/get/delete/clear cookies
- [OK] **æµè§ˆæ•°æ®æ¸…ç†**: é€šè¿‡ `clear_browsing_data()` æ¸…ç†ç¼“å­˜ã€Cookieã€å†å²

### çª—å£ä¸å¯¼èˆª
- [OK] **æ–‡ä»¶å¯¹è¯æ¡†**: open_fileã€save_fileã€select_folderã€select_folders
- [OK] **æ¶ˆæ¯å¯¹è¯æ¡†**: confirmã€alertã€errorã€ok_cancel
- [OK] **å¯¼èˆªæ§åˆ¶**: go_backã€go_forwardã€reloadã€stopã€can_go_back/forward
- [OK] **çª—å£äº‹ä»¶**: on_window_show/hide/focus/blur/resizeã€on_fullscreen_changed
- [OK] **æ–‡ä»¶æ‹–æ”¾äº‹ä»¶**: åŸç”Ÿæ‹–æ”¾æ”¯æŒå®Œæ•´æ–‡ä»¶è·¯å¾„ï¼ˆfile_dropã€file_drop_hoverã€file_pasteï¼‰
- [OK] **å¯å–æ¶ˆäº‹ä»¶**: äº‹ä»¶å¤„ç†å™¨å¯ä»¥å–æ¶ˆäº‹ä»¶ï¼ˆä¾‹å¦‚é˜»æ­¢çª—å£å…³é—­ï¼‰
- [OK] **äº‹ä»¶å·¥å…·**: é«˜é¢‘äº‹ä»¶çš„é˜²æŠ–/èŠ‚æµè¾…åŠ©å‡½æ•°

### DCC é›†æˆ
- [OK] **ç”Ÿå‘½å‘¨æœŸç®¡ç†**: çˆ¶ DCC åº”ç”¨å…³é—­æ—¶è‡ªåŠ¨æ¸…ç†
- [OK] **Qt åç«¯**: QtWebView æ— ç¼é›†æˆåŸºäº Qt çš„ DCC
- [OK] **WebView2 é¢„çƒ­**: é¢„åˆå§‹åŒ– WebView2 åŠ é€Ÿ DCC å¯åŠ¨
- [OK] **æ€§èƒ½ç›‘æ§**: get_performance_metrics()ã€get_ipc_stats()

### æ¡Œé¢åŠŸèƒ½
- [OK] **ç³»ç»Ÿæ‰˜ç›˜**: ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ï¼Œå³é”®èœå•ï¼Œæœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼Œç‚¹å‡»æ˜¾ç¤º
- [OK] **å·¥å…·çª—å£**: é€šè¿‡ `tool_window=True` éšè—ä»»åŠ¡æ /Alt+Tab (WS_EX_TOOLWINDOW)
- [OK] **æµ®åŠ¨é¢æ¿**: æ— è¾¹æ¡†é€æ˜çª—å£ï¼Œé€‚ç”¨äº AI åŠ©æ‰‹å’Œå·¥å…·é¢æ¿
- [OK] **Owner æ¨¡å¼**: é€šè¿‡ `embed_mode="owner"` å®ç°çª—å£è·Ÿéšçˆ¶çª—å£æœ€å°åŒ–/æ¢å¤

### æ’ä»¶ç³»ç»Ÿ
- [OK] **Rust æ’ä»¶æ¶æ„**: é«˜æ€§èƒ½æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒ IPC
- [OK] **è¿›ç¨‹æ’ä»¶**: è¿è¡Œå¤–éƒ¨è¿›ç¨‹ï¼Œæ”¯æŒ stdout/stderr æµå¼è¾“å‡º
- [OK] **æ–‡ä»¶ç³»ç»Ÿæ’ä»¶**: åŸç”Ÿæ–‡ä»¶æ“ä½œï¼ˆè¯»å–ã€å†™å…¥ã€å¤åˆ¶ã€ç§»åŠ¨ï¼‰
- [OK] **å¯¹è¯æ¡†æ’ä»¶**: åŸç”Ÿæ–‡ä»¶/æ–‡ä»¶å¤¹å¯¹è¯æ¡†å’Œæ¶ˆæ¯æ¡†
- [OK] **Shell æ’ä»¶**: æ‰§è¡Œå‘½ä»¤ã€æ‰“å¼€ URLã€åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º
- [OK] **å‰ªè´´æ¿æ’ä»¶**: ç³»ç»Ÿå‰ªè´´æ¿è¯»å†™è®¿é—®

### Chrome æ‰©å±• API å…¼å®¹
- [OK] **25+ Chrome API**: å®Œæ•´çš„ Chrome Extension API polyfill å±‚
- [OK] **Storage API**: `chrome.storage.local/sync/session` æŒä¹…åŒ–å­˜å‚¨
- [OK] **Bookmarks API**: åˆ›å»ºã€æœç´¢ã€æ›´æ–°ã€åˆ é™¤ä¹¦ç­¾
- [OK] **History API**: æœç´¢å’Œç®¡ç†æµè§ˆå†å²
- [OK] **Downloads API**: ä¸‹è½½æ–‡ä»¶å¹¶è·Ÿè¸ªè¿›åº¦
- [OK] **Cookies API**: è·å–ã€è®¾ç½®ã€åˆ é™¤ Cookie
- [OK] **Notifications API**: å¸¦æ“ä½œçš„ç³»ç»Ÿé€šçŸ¥
- [OK] **TTS API**: æ–‡å­—è½¬è¯­éŸ³åˆæˆ
- [OK] **Idle/Power API**: ç”¨æˆ·æ´»åŠ¨æ£€æµ‹å’Œç”µæºç®¡ç†
- [OK] **WXT æ¡†æ¶**: å…¼å®¹ç°ä»£æ‰©å±•å¼€å‘æ¡†æ¶

### Gallery åº”ç”¨
- [OK] **äº¤äº’å¼å±•ç¤º**: åŸºäº React çš„ Galleryï¼Œå±•ç¤ºæ‰€æœ‰åŠŸèƒ½
- [OK] **ç¤ºä¾‹è¿è¡Œå™¨**: è¿è¡Œä»»æ„ç¤ºä¾‹ï¼Œå®æ—¶æ˜¾ç¤º stdout/stderr è¾“å‡º
- [OK] **åˆ†ç±»æµè§ˆå™¨**: æŒ‰ç±»åˆ«ç»„ç»‡ç¤ºä¾‹ï¼Œæ”¯æŒæœç´¢
- [OK] **Pack å‘½ä»¤**: é€šè¿‡ `auroraview pack` æ„å»ºç‹¬ç«‹ Gallery å¯æ‰§è¡Œæ–‡ä»¶

### å®‰å…¨
- [OK] **CSP é…ç½®**: å†…å®¹å®‰å…¨ç­–ç•¥æ”¯æŒ
- [OK] **CORS æ§åˆ¶**: è·¨åŸŸèµ„æºå…±äº«ç®¡ç†
- [OK] **æƒé™ç³»ç»Ÿ**: ç»†ç²’åº¦æƒé™æ§åˆ¶

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

#### Windows å’Œ macOS

```bash
pip install auroraview
```

#### Linux

ç”±äº webkit2gtk ç³»ç»Ÿä¾èµ–ï¼ŒLinux wheels ä¸åœ¨ PyPI ä¸Šæä¾›ã€‚è¯·ä» GitHub Releases å®‰è£…ï¼š

```bash
# é¦–å…ˆå®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt install libwebkit2gtk-4.1-dev libgtk-3-dev  # Debian/Ubuntu
# sudo dnf install gtk3-devel webkit2gtk3-devel      # Fedora/CentOS
# sudo pacman -S webkit2gtk                          # Arch Linux

# ä» GitHub Releases ä¸‹è½½å¹¶å®‰è£… wheel
pip install https://github.com/loonghao/auroraview/releases/latest/download/auroraview-{version}-cp37-abi3-linux_x86_64.whl
```

æˆ–ä»æºç æ„å»ºï¼š
```bash
pip install auroraview --no-binary :all:
```

### é›†æˆæ¨¡å¼

AuroraView æä¾›ä¸‰ç§ä¸»è¦é›†æˆæ¨¡å¼ä»¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š

| æ¨¡å¼ | ç±» | é€‚ç”¨åœºæ™¯ | åœé æ”¯æŒ |
|------|-----|----------|----------|
| **Qt åŸç”Ÿ** | `QtWebView` | Maya, Houdini, Nuke, 3ds Max | âœ… QDockWidget |
| **HWND** | `AuroraView` | Unreal Engine, é Qt åº”ç”¨ | âœ… é€šè¿‡ HWND API |
| **ç‹¬ç«‹** | `run_standalone` | æ¡Œé¢åº”ç”¨ç¨‹åº | N/A |

### WebView vs AuroraView: é€‰æ‹©åˆé€‚çš„ç±»

äº†è§£ `WebView` å’Œ `AuroraView` çš„åŒºåˆ«æœ‰åŠ©äºä½ é€‰æ‹©é€‚åˆçš„ç±»ï¼š

| ç‰¹æ€§ | `WebView` | `AuroraView` |
|------|-----------|--------------|
| **ç”¨é€”** | æ ¸å¿ƒç±»ï¼Œç›´æ¥ Rust ç»‘å®š | HWND é›†æˆçš„é«˜çº§å°è£… |
| **API é£æ ¼** | Mixin æ¨¡å¼ï¼Œå®Œå…¨æ§åˆ¶ | ç®€åŒ–çš„å§”æ‰˜æ¨¡å¼ |
| **é€‚ç”¨åœºæ™¯** | é«˜çº§å®šåˆ¶ï¼ŒDCC åµŒå…¥ | Unreal Engineï¼Œå¿«é€ŸåŸå‹ |
| **ä¿æ´»æœºåˆ¶** | æ‰‹åŠ¨ç®¡ç† | è‡ªåŠ¨ï¼ˆç±»çº§åˆ«æ³¨å†Œè¡¨ï¼‰ |
| **API ç»‘å®š** | æ‰‹åŠ¨è°ƒç”¨ `bind_api()` | é€šè¿‡ `api` å‚æ•°è‡ªåŠ¨ç»‘å®š |
| **ç”Ÿå‘½å‘¨æœŸé’©å­** | `on_loaded`ã€`on_shown` ç­‰ | `on_show`ã€`on_hide`ã€`on_close`ã€`on_ready` |

**ä½•æ—¶ä½¿ç”¨ `WebView`ï¼š**
- éœ€è¦å®Œå…¨æ§åˆ¶ WebView ç”Ÿå‘½å‘¨æœŸ
- æ„å»ºåŸºäº Qt çš„ DCC é›†æˆï¼ˆé…åˆ `QtWebView` ä½¿ç”¨ï¼‰
- éœ€è¦é«˜çº§åŠŸèƒ½å¦‚è‡ªå®šä¹‰åè®®ã€èµ„æºæ ¹ç›®å½•ç­‰

**ä½•æ—¶ä½¿ç”¨ `AuroraView`ï¼š**
- ä¸ Unreal Engine æˆ–å…¶ä»–åŸºäº HWND çš„åº”ç”¨é›†æˆ
- å¸Œæœ›ä½¿ç”¨æ›´ç®€å•çš„ API å’Œè‡ªåŠ¨ä¿æ´»ç®¡ç†
- ä» pywebview è¿ç§»å¹¶å¸Œæœ›ä½¿ç”¨ç†Ÿæ‚‰çš„ API

**ç¤ºä¾‹ï¼šWebViewï¼ˆæ ¸å¿ƒç±»ï¼‰**
```python
from auroraview import WebView

# å®Œå…¨æ§åˆ¶æ¨¡å¼
webview = WebView.create(
    title="æˆ‘çš„å·¥å…·",
    url="http://localhost:3000",
    auto_show=True,
    auto_timer=True
)
webview.bind_api(my_api_object)  # æ‰‹åŠ¨ API ç»‘å®š
webview.show()
```

**ç¤ºä¾‹ï¼šAuroraViewï¼ˆHWND å°è£…ï¼‰**
```python
from auroraview import AuroraView

# ç®€åŒ–æ¨¡å¼ï¼Œè‡ªåŠ¨ API ç»‘å®š
webview = AuroraView(
    url="http://localhost:3000",
    api=my_api_object  # æ„é€ æ—¶è‡ªåŠ¨ç»‘å®š
)
webview.show()
```

#### 1. Qt åŸç”Ÿæ¨¡å¼ (QtWebView)

**æœ€é€‚åˆåŸºäº Qt çš„ DCC åº”ç”¨ç¨‹åº** - Maya, Houdini, Nuke, 3ds Maxã€‚

æ­¤æ¨¡å¼åˆ›å»ºçœŸæ­£çš„ Qt æ§ä»¶ï¼Œå¯ä»¥åœé ã€åµŒå…¥å¸ƒå±€ï¼Œå¹¶ç”± Qt çš„çˆ¶å­ç³»ç»Ÿç®¡ç†ã€‚

```python
from auroraview import QtWebView
from qtpy.QtWidgets import QDialog, QVBoxLayout

# åˆ›å»ºå¯åœé å¯¹è¯æ¡†
dialog = QDialog(maya_main_window())
layout = QVBoxLayout(dialog)

# åˆ›å»ºåµŒå…¥å¼ WebView ä½œä¸º Qt æ§ä»¶
webview = QtWebView(
    parent=dialog,
    width=800,
    height=600
)
layout.addWidget(webview)

# åŠ è½½å†…å®¹
webview.load_url("http://localhost:3000")

# æ˜¾ç¤ºå¯¹è¯æ¡† - WebView ä¼šéšçˆ¶çª—å£è‡ªåŠ¨å…³é—­
dialog.show()
webview.show()
```

**ä¸»è¦ç‰¹æ€§ï¼š**
- âœ… æ”¯æŒ `QDockWidget` å¯åœé é¢æ¿
- âœ… è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆéšçˆ¶çª—å£å…³é—­ï¼‰
- âœ… åŸç”Ÿ Qt äº‹ä»¶é›†æˆ
- âœ… æ”¯æŒæ‰€æœ‰ Qt å¸ƒå±€ç®¡ç†å™¨

#### 2. HWND æ¨¡å¼ (AuroraView)

**æœ€é€‚åˆ Unreal Engine å’Œé Qt åº”ç”¨ç¨‹åº**ï¼Œéœ€è¦ç›´æ¥è®¿é—®çª—å£å¥æŸ„ã€‚

```python
from auroraview import AuroraView

# åˆ›å»ºç‹¬ç«‹ WebView
webview = AuroraView(url="http://localhost:3000")
webview.show()

# è·å– HWND ç”¨äºå¤–éƒ¨é›†æˆ
hwnd = webview.get_hwnd()
if hwnd:
    # Unreal Engine é›†æˆ
    import unreal
    unreal.parent_external_window_to_slate(hwnd)
```

**ä¸»è¦ç‰¹æ€§ï¼š**
- âœ… é€šè¿‡ `get_hwnd()` ç›´æ¥è®¿é—® HWND
- âœ… é€‚ç”¨äºä»»ä½•æ¥å— HWND çš„åº”ç”¨ç¨‹åº
- âœ… æ— éœ€ Qt ä¾èµ–
- âœ… å®Œå…¨æ§åˆ¶çª—å£å®šä½

#### 3. ç‹¬ç«‹æ¨¡å¼

**æœ€é€‚åˆæ¡Œé¢åº”ç”¨ç¨‹åº** - ä¸€è¡Œä»£ç å¯åŠ¨ç‹¬ç«‹åº”ç”¨ã€‚

```python
from auroraview import run_standalone

# å¯åŠ¨ç‹¬ç«‹åº”ç”¨ï¼ˆé˜»å¡ç›´åˆ°å…³é—­ï¼‰
run_standalone(
    title="æˆ‘çš„åº”ç”¨",
    url="https://example.com",
    width=1024,
    height=768
)
```

**ä¸»è¦ç‰¹æ€§ï¼š**
- æœ€ç®€å•çš„ API - ä¸€ä¸ªå‡½æ•°è°ƒç”¨
- è‡ªåŠ¨äº‹ä»¶å¾ªç¯ç®¡ç†
- æ— éœ€çˆ¶çª—å£

### å¿«é€Ÿå¼€å§‹

**æ¡Œé¢åº”ç”¨ï¼ˆä¸€è¡Œä»£ç ï¼‰ï¼š**
```python
from auroraview import run_desktop

# å¯åŠ¨ç‹¬ç«‹åº”ç”¨ - é˜»å¡ç›´åˆ°å…³é—­
run_desktop(title="æˆ‘çš„åº”ç”¨", url="http://localhost:3000")
```

**Maya é›†æˆï¼ˆQt æ¨¡å¼ï¼‰ï¼š**
```python
from auroraview import QtWebView
import maya.OpenMayaUI as omui

# åˆ›å»º WebView ä½œä¸º Qt æ§ä»¶
webview = QtWebView(
    parent=maya_main_window(),
    url="http://localhost:3000",
    width=800,
    height=600
)
webview.show()  # éé˜»å¡ï¼Œè‡ªåŠ¨å®šæ—¶å™¨
```

**Houdini é›†æˆï¼ˆQt æ¨¡å¼ï¼‰ï¼š**
```python
from auroraview import QtWebView
import hou

webview = QtWebView(
    parent=hou.qt.mainWindow(),
    url="http://localhost:3000"
)
webview.show()  # éé˜»å¡ï¼Œè‡ªåŠ¨å®šæ—¶å™¨
```

**Unreal Engine é›†æˆï¼ˆHWND æ¨¡å¼ï¼‰ï¼š**
```python
from auroraview import AuroraView

webview = AuroraView(url="http://localhost:3000")
webview.show()

# è·å– HWND ç”¨äº Unreal åµŒå…¥
hwnd = webview.get_hwnd()
if hwnd:
    import unreal
    unreal.parent_external_window_to_slate(hwnd)
```

### å‘½ä»¤è¡Œç•Œé¢

AuroraView åŒ…å«ä¸€ä¸ª CLIï¼Œç”¨äºå¿«é€Ÿå¯åŠ¨ WebView çª—å£ï¼š

```bash
# åŠ è½½ URL
auroraview --url https://example.com

# åŠ è½½æœ¬åœ° HTML æ–‡ä»¶
auroraview --html /path/to/file.html

# è‡ªå®šä¹‰çª—å£é…ç½®
auroraview --url https://example.com --title "æˆ‘çš„åº”ç”¨" --width 1024 --height 768

# ä½¿ç”¨ uvxï¼ˆæ— éœ€å®‰è£…ï¼‰
uvx auroraview --url https://example.com
```

> **Python 3.7 Windows ç”¨æˆ·æ³¨æ„**ï¼šç”±äº [uv/uvx çš„é™åˆ¶](https://github.com/astral-sh/uv/issues/10165)ï¼Œè¯·ä½¿ç”¨ `python -m auroraview` ä»£æ›¿ï¼š
> ```bash
> uvx --python 3.7 --from auroraview python -m auroraview --url https://example.com
> ```

**[æŸ¥çœ‹ CLI æ–‡æ¡£](./docs/CLI.md)** äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

### è‡ªå®šä¹‰çª—å£å›¾æ ‡

AuroraView é»˜è®¤æ˜¾ç¤º AuroraView å›¾æ ‡ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰å›¾æ ‡ï¼š

```python
from auroraview import WebView

# ä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡
webview = WebView.create(
    "æˆ‘çš„åº”ç”¨",
    url="http://localhost:3000",
    icon="path/to/my-icon.png"  # è‡ªå®šä¹‰å›¾æ ‡è·¯å¾„
)
webview.show()
```

**å›¾æ ‡è¦æ±‚ï¼š**
| å±æ€§ | æ¨è |
|------|------|
| **æ ¼å¼** | PNGï¼ˆæ¨èï¼‰ã€ICOã€JPEGã€BMPã€GIF |
| **å°ºå¯¸** | 32x32ï¼ˆä»»åŠ¡æ ï¼‰ã€64x64ï¼ˆAlt-Tabï¼‰ã€256x256ï¼ˆé«˜ DPIï¼‰ |
| **è‰²æ·±** | 32 ä½ RGBA ä»¥æ”¯æŒé€æ˜åº¦ |
| **æœ€ä½³å®è·µ** | ä½¿ç”¨æ­£æ–¹å½¢å›¾ç‰‡ï¼›éæ­£æ–¹å½¢å›¾ç‰‡ä¼šè¢«æ‹‰ä¼¸ |

> **æç¤º**ï¼šä¸ºäº†åœ¨æ‰€æœ‰ Windows UI å…ƒç´ ä¸­è·å¾—æœ€ä½³æ•ˆæœï¼Œè¯·æä¾›å¸¦é€æ˜åº¦çš„ 32x32 PNGã€‚

**Nuke é›†æˆï¼š**
```python
from auroraview import WebView
from qtpy import QtWidgets

main = QtWidgets.QApplication.activeWindow()
hwnd = int(main.winId())
webview = WebView.create("Nuke å·¥å…·", url="http://localhost:3000", parent=hwnd)
webview.show()  # åµŒå…¥æ¨¡å¼ï¼šéé˜»å¡ï¼Œè‡ªåŠ¨å®šæ—¶å™¨
```

**Blender é›†æˆï¼š**
```python
from auroraview import WebView

# Blender ä»¥ç‹¬ç«‹æ¨¡å¼è¿è¡Œï¼ˆæ— çˆ¶çª—å£ï¼‰
webview = WebView.create("Blender å·¥å…·", url="http://localhost:3000")
webview.show()  # ç‹¬ç«‹æ¨¡å¼ï¼šé˜»å¡ç›´åˆ°å…³é—­ï¼ˆä½¿ç”¨ show(wait=False) å¼‚æ­¥ï¼‰
```

**å›è°ƒåæ³¨å†Œï¼ˆEventTimerï¼‰**ï¼š
```python
from auroraview import EventTimer

timer = EventTimer(webview, interval_ms=16)

def _on_close(): ...

timer.on_close(_on_close)
# ä¹‹åå¦‚éœ€ç§»é™¤ï¼š
timer.off_close(_on_close)  # ä¹Ÿæ”¯æŒï¼šoff_tick(handler)
```

**å…±äº«çŠ¶æ€ï¼ˆå€Ÿé‰´ PyWebViewï¼‰**ï¼š

AuroraView æä¾› Python å’Œ JavaScript ä¹‹é—´çš„è‡ªåŠ¨åŒå‘çŠ¶æ€åŒæ­¥ï¼š

```python
from auroraview import WebView

webview = WebView.create("æˆ‘çš„åº”ç”¨", width=800, height=600)

# è®¿é—®å…±äº«çŠ¶æ€ï¼ˆç±»å­—å…¸æ¥å£ï¼‰
webview.state["user"] = "Alice"
webview.state["theme"] = "dark"
webview.state["count"] = 0

# è·Ÿè¸ªçŠ¶æ€å˜åŒ–
@webview.state.on_change
def on_state_change(key: str, value, old_value):
    print(f"çŠ¶æ€å˜åŒ–: {key} = {value} (åŸå€¼ {old_value})")

# åœ¨ JavaScript ä¸­ï¼š
# window.auroraview.state.user = "Bob";  // åŒæ­¥åˆ° Python
# console.log(window.auroraview.state.theme);  // "dark"
```

**å‘½ä»¤ç³»ç»Ÿï¼ˆå€Ÿé‰´ Tauriï¼‰**ï¼š

å°† Python å‡½æ•°æ³¨å†Œä¸ºå¯ä» JavaScript è°ƒç”¨çš„ RPC é£æ ¼å‘½ä»¤ï¼š

```python
from auroraview import WebView

webview = WebView.create("æˆ‘çš„åº”ç”¨", width=800, height=600)

# ä½¿ç”¨è£…é¥°å™¨æ³¨å†Œå‘½ä»¤
@webview.command
def greet(name: str) -> str:
    return f"ä½ å¥½, {name}!"

@webview.command("add_numbers")
def add(x: int, y: int) -> int:
    return x + y

# åœ¨ JavaScript ä¸­ï¼š
# const msg = await auroraview.invoke("greet", {name: "World"});
# const sum = await auroraview.invoke("add_numbers", {x: 1, y: 2});
```

**Channel æµå¼ä¼ è¾“**ï¼š

ä½¿ç”¨ Channel ä» Python å‘ JavaScript æµå¼ä¼ è¾“å¤§æ•°æ®ï¼š

```python
from auroraview import WebView

webview = WebView.create("æˆ‘çš„åº”ç”¨", width=800, height=600)

# åˆ›å»ºç”¨äºæµå¼ä¼ è¾“çš„ channel
with webview.create_channel() as channel:
    for i in range(100):
        channel.send({"progress": i, "data": f"chunk_{i}"})

# åœ¨ JavaScript ä¸­ï¼š
# const channel = auroraview.channel("channel_id");
# channel.onMessage((data) => console.log("æ”¶åˆ°:", data));
# channel.onClose(() => console.log("æµä¼ è¾“å®Œæˆ"));
```

## ä½¿ç”¨æ¨¡å¼

AuroraView æ”¯æŒå¤šç§ API é£æ ¼ä»¥é€‚åº”ä¸åŒçš„å¼€å‘å·¥ä½œæµã€‚é€‰æ‹©æœ€é€‚åˆé¡¹ç›®å¤æ‚åº¦å’Œå›¢é˜Ÿåå¥½çš„æ¨¡å¼ã€‚

### æ¨¡å¼ 1ï¼šè£…é¥°å™¨é£æ ¼ï¼ˆæœ€ç®€å•ï¼‰

é€‚ç”¨äºï¼š**å¿«é€ŸåŸå‹ã€ç®€å•å·¥å…·ã€ä¸€æ¬¡æ€§è„šæœ¬**

```python
from auroraview import WebView

view = WebView(title="æˆ‘çš„å·¥å…·", url="http://localhost:3000")

# ä½¿ç”¨ bind_call è£…é¥°å™¨æ³¨å†Œ API æ–¹æ³•
@view.bind_call("api.get_data")
def get_data() -> dict:
    """JS è°ƒç”¨: await auroraview.api.get_data()"""
    return {"items": [1, 2, 3], "count": 3}

@view.bind_call("api.save_file")
def save_file(path: str = "", content: str = "") -> dict:
    """JS è°ƒç”¨: await auroraview.api.save_file({path: "/tmp/a.txt", content: "hello"})"""
    with open(path, "w") as f:
        f.write(content)
    return {"ok": True, "path": path}

# æ³¨å†Œäº‹ä»¶å¤„ç†å™¨ï¼ˆæ— è¿”å›å€¼ï¼‰
@view.on("button_clicked")
def handle_click(data: dict):
    """JS å‘é€æ—¶è°ƒç”¨: auroraview.send_event("button_clicked", {...})"""
    print(f"æŒ‰é’®ç‚¹å‡»: {data['id']}")

view.show()
```

**JavaScript ç«¯ï¼š**
```javascript
// è°ƒç”¨ API æ–¹æ³•ï¼ˆæœ‰è¿”å›å€¼ï¼‰
const data = await auroraview.api.get_data();
console.log(data.items);  // [1, 2, 3]

const result = await auroraview.api.save_file({ path: "/tmp/test.txt", content: "Hello" });
console.log(result.ok);  // true

// å‘é€äº‹ä»¶åˆ° Pythonï¼ˆå³å‘å³å¿˜ï¼‰
auroraview.send_event("button_clicked", { id: "save_btn" });

// ç›‘å¬ Python äº‹ä»¶
auroraview.on("data_updated", (data) => {
    console.log("æ•°æ®æ›´æ–°:", data);
});
```

### æ¨¡å¼ 2ï¼šç±»ç»§æ‰¿ï¼ˆæ¨èï¼Œç±» Qt é£æ ¼ï¼‰

é€‚ç”¨äºï¼š**ç”Ÿäº§å·¥å…·ã€å›¢é˜Ÿåä½œã€å¤æ‚åº”ç”¨**

```python
from auroraview import WebView, Signal

class OutlinerTool(WebView):
    """Maya é£æ ¼çš„å¤§çº²å·¥å…·ï¼Œæ¼”ç¤ºç±» Qt æ¨¡å¼ã€‚"""

    # ä¿¡å·å®šä¹‰ï¼ˆPython -> JS é€šçŸ¥ï¼‰
    selection_changed = Signal(list)
    progress_updated = Signal(int, str)
    scene_loaded = Signal(str)

    def __init__(self):
        super().__init__(
            title="å¤§çº²å·¥å…·",
            url="http://localhost:3000",
            width=400,
            height=600
        )
        self._setup_api()
        self._setup_connections()

    def _setup_api(self):
        """ç»‘å®š API æ–¹æ³•ä¾› JavaScript è®¿é—®ã€‚"""
        self.bind_api(self, namespace="api")

    # API æ–¹æ³•ï¼ˆJS -> Pythonï¼‰
    def get_hierarchy(self, root: str = None) -> dict:
        """è·å–åœºæ™¯å±‚çº§ã€‚JS: await auroraview.api.get_hierarchy()"""
        return {
            "children": ["group1", "mesh_cube", "camera1"],
            "count": 3
        }

    def rename_object(self, old_name: str = "", new_name: str = "") -> dict:
        """é‡å‘½ååœºæ™¯å¯¹è±¡ã€‚JS: await auroraview.api.rename_object({old_name: "a", new_name: "b"})"""
        return {"ok": True, "old": old_name, "new": new_name}

# ä½¿ç”¨
tool = OutlinerTool()
tool.show()
```

### æ¨¡å¼ 3ï¼šæ˜¾å¼ç»‘å®šï¼ˆé«˜çº§ï¼‰

é€‚ç”¨äºï¼š**åŠ¨æ€é…ç½®ã€æ’ä»¶ç³»ç»Ÿã€è¿è¡Œæ—¶å®šåˆ¶**

```python
from auroraview import WebView

view = WebView(title="æ’ä»¶å®¿ä¸»", url="http://localhost:3000")

# å•ç‹¬å®šä¹‰å‡½æ•°
def get_plugins() -> dict:
    return {"plugins": ["plugin_a", "plugin_b"]}

def load_plugin(name: str) -> dict:
    print(f"åŠ è½½æ’ä»¶: {name}")
    return {"ok": True, "plugin": name}

# è¿è¡Œæ—¶æ˜¾å¼ç»‘å®š
view.bind_call("get_plugins", get_plugins)
view.bind_call("load_plugin", load_plugin)

# è¿æ¥å†…ç½®ä¿¡å·
view.on_ready.connect(lambda: print("WebView å·²å°±ç»ª!"))
view.on_navigate.connect(lambda url: print(f"å¯¼èˆªåˆ°: {url}"))

view.show()
```

### æ¨¡å¼å¯¹æ¯”

| æ–¹é¢ | è£…é¥°å™¨ | ç±»ç»§æ‰¿ | æ˜¾å¼ç»‘å®š |
|------|--------|--------|----------|
| **å¤æ‚åº¦** | ç®€å• | ä¸­ç­‰ | é«˜çº§ |
| **é€‚ç”¨åœºæ™¯** | åŸå‹ | ç”Ÿäº§ | æ’ä»¶ |
| **ä¿¡å·æ”¯æŒ** | æ—  | å®Œæ•´ | æœ‰é™ |
| **è‡ªåŠ¨ç»‘å®š** | æ‰‹åŠ¨ | é€šè¿‡ bind_api | æ‰‹åŠ¨ |
| **ç±»å‹æç¤º** | æ”¯æŒ | æ”¯æŒ | æ”¯æŒ |
| **Qt ç†Ÿæ‚‰åº¦** | ä½ | é«˜ | ä¸­ |
| **å¯æµ‹è¯•æ€§** | è‰¯å¥½ | ä¼˜ç§€ | è‰¯å¥½ |

> **æ¨è**ï¼šåŸå‹å¼€å‘ä½¿ç”¨**æ¨¡å¼ 1**ï¼Œç”Ÿäº§å·¥å…·ä½¿ç”¨**æ¨¡å¼ 2**ï¼Œæ„å»ºå¯æ‰©å±•ç³»ç»Ÿæ—¶ä½¿ç”¨**æ¨¡å¼ 3**ã€‚

æŸ¥çœ‹ [examples/](./examples/) ç›®å½•è·å–æ¯ç§æ¨¡å¼çš„å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ã€‚

#### 2. Qt åç«¯

ä½œä¸º Qt widget é›†æˆ,ä¸åŸºäº Qt çš„ DCC æ— ç¼é›†æˆã€‚éœ€è¦ `pip install auroraview[qt]`ã€‚

> **DCC é›†æˆè¯´æ˜**: åŸºäº Qt çš„ DCC åº”ç”¨ï¼ˆMayaã€Houdiniã€Nukeã€3ds Maxï¼‰éœ€è¦ QtPy ä½œä¸ºä¸­é—´ä»¶å±‚æ¥å¤„ç†ä¸åŒ DCC åº”ç”¨ä¹‹é—´çš„ Qt ç‰ˆæœ¬å·®å¼‚ã€‚å®‰è£… `[qt]` æ‰©å±•ä¼šè‡ªåŠ¨å®‰è£… QtPyã€‚

```python
from auroraview import QtWebView

# åˆ›å»º WebView ä½œä¸º Qt widget
webview = QtWebView(
    parent=maya_main_window(),  # ä»»ä½• QWidget (å¯é€‰)
    title="æˆ‘çš„å·¥å…·",
    width=800,
    height=600
)

# åŠ è½½å†…å®¹
webview.load_url("http://localhost:3000")
# æˆ–åŠ è½½ HTML
webview.load_html("<html><body><h1>ä½ å¥½,æ¥è‡ª Qt!</h1></body></html>")

# æ˜¾ç¤º widget
webview.show()
```

#### WebView2 é¢„çƒ­ï¼ˆè‡ªåŠ¨ï¼‰

`QtWebView` åœ¨é¦–æ¬¡å®ä¾‹åŒ–æ—¶è‡ªåŠ¨é¢„çƒ­ WebView2ï¼Œå°†åç»­åˆ›å»ºæ—¶é—´å‡å°‘çº¦ 50%ã€‚æ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼š

```python
from auroraview.integration.qt import QtWebView

# é¦–ä¸ª QtWebView è‡ªåŠ¨è§¦å‘é¢„çƒ­
webview = QtWebView(parent=maya_main_window())
webview.load_url("http://localhost:3000")
webview.show()
```

**é«˜çº§ç”¨æˆ·** å¦‚éœ€æ˜¾å¼æ§åˆ¶é¢„çƒ­æ—¶æœºï¼š

```python
from auroraview.integration.qt import WebViewPool, QtWebView

# åœ¨ DCC å¯åŠ¨æ—¶æ˜¾å¼é¢„çƒ­ï¼ˆå¦‚åœ¨ userSetup.py ä¸­ï¼‰
WebViewPool.prewarm()

# æ£€æŸ¥é¢„çƒ­çŠ¶æ€
if WebViewPool.has_prewarmed():
    print(f"é¢„çƒ­è€—æ—¶ {WebViewPool.get_prewarm_time():.2f}s")

# ä½¿ç”¨æ˜¾å¼æ§åˆ¶æ—¶ç¦ç”¨è‡ªåŠ¨é¢„çƒ­
webview = QtWebView(parent=maya_main_window(), auto_prewarm=False)

# å®Œæˆåæ¸…ç†ï¼ˆå¯é€‰ï¼Œé€€å‡ºæ—¶è‡ªåŠ¨è°ƒç”¨ï¼‰
WebViewPool.cleanup()
```

**ä¼˜åŠ¿ï¼š**
- âœ… é¦–ä¸ª `QtWebView` åˆ›å»ºæ—¶è‡ªåŠ¨é¢„çƒ­
- âœ… WebView åˆ›å»ºæ—¶é—´å‡å°‘çº¦ 50%
- âœ… çº¿ç¨‹å®‰å…¨ä¸”å¹‚ç­‰ï¼ˆå¯å®‰å…¨å¤šæ¬¡è°ƒç”¨ï¼‰
- âœ… åº”ç”¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†

**ä½•æ—¶ä½¿ç”¨ Qt åç«¯:**
- [OK] ä½ çš„ DCC å·²ç»åŠ è½½äº† Qt (Maya, Houdini, Nuke)
- [OK] ä½ æƒ³è¦æ— ç¼çš„ Qt widget é›†æˆ
- [OK] ä½ éœ€è¦ä½¿ç”¨ Qt å¸ƒå±€å’Œä¿¡å·/æ§½

**ä½•æ—¶ä½¿ç”¨åŸç”Ÿåç«¯:**
- [OK] æ‰€æœ‰å¹³å°çš„æœ€å¤§å…¼å®¹æ€§
- [OK] ç‹¬ç«‹åº”ç”¨ç¨‹åº
- [OK] æ²¡æœ‰ Qt çš„ DCC (Blender, 3ds Max)
- [OK] æœ€å°ä¾èµ–

### åŒå‘é€šä¿¡

AuroraView æä¾›å®Œæ•´çš„ Python å’Œ JavaScript ä¹‹é—´çš„åŒå‘é€šä¿¡ç³»ç»Ÿã€‚

#### é€šä¿¡ API æ¦‚è§ˆ

| æ–¹å‘ | JavaScript API | Python API | ç”¨é€” |
|------|---------------|------------|------|
| JS â†’ Python | `auroraview.call(method, params)` | `@webview.bind_call` | å¸¦è¿”å›å€¼çš„ RPC è°ƒç”¨ |
| JS â†’ Python | `auroraview.send_event(event, data)` | `@webview.on(event)` | å•å‘äº‹ä»¶é€šçŸ¥ |
| Python â†’ JS | - | `webview.emit(event, data)` | æ¨é€é€šçŸ¥ |
| ä»… JS | `auroraview.on(event, handler)` | - | æ¥æ”¶ Python äº‹ä»¶ |
| ä»… JS | `auroraview.trigger(event, data)` | - | JS æœ¬åœ°äº‹ä»¶ï¼ˆä¸å‘é€åˆ° Pythonï¼‰ |

> **é‡è¦**: `auroraview.trigger()` ä»…ç”¨äº JavaScript ç«¯æœ¬åœ°äº‹ä»¶ã€‚è¦å‘é€äº‹ä»¶åˆ° Pythonï¼Œè¯·ä½¿ç”¨ `auroraview.send_event()`ã€‚

#### Python â†’ JavaScriptï¼ˆæ¨é€äº‹ä»¶ï¼‰

```python
# Python ç«¯ï¼šå‘ JavaScript å‘é€äº‹ä»¶
webview.emit("update_data", {"frame": 120, "objects": ["cube", "sphere"]})
webview.emit("selection_changed", {"items": ["mesh1", "mesh2"]})
```

```javascript
// JavaScript ç«¯ï¼šç›‘å¬ Python äº‹ä»¶
window.auroraview.on('update_data', (data) => {
    console.log('å¸§:', data.frame);
    console.log('å¯¹è±¡:', data.objects);
});

window.auroraview.on('selection_changed', (data) => {
    highlightItems(data.items);
});
```

#### JavaScript â†’ Pythonï¼ˆäº‹ä»¶ï¼‰

```javascript
// JavaScript ç«¯ï¼šå‘é€äº‹ä»¶åˆ° Python
window.auroraview.send_event('export_scene', {
    path: '/path/to/export.fbx',
    format: 'fbx'
});

window.auroraview.send_event('viewport_orbit', { dx: 10, dy: 5 });
```

```python
# Python ç«¯ï¼šæ³¨å†Œäº‹ä»¶å¤„ç†å™¨
@webview.on("export_scene")
def handle_export(data):
    print(f"å¯¼å‡ºåˆ°: {data['path']}")
    # ä½ çš„ DCC å¯¼å‡ºé€»è¾‘

@webview.on("viewport_orbit")
def handle_orbit(data):
    rotate_camera(data['dx'], data['dy'])
```

#### JavaScript â†’ Pythonï¼ˆå¸¦è¿”å›å€¼çš„ RPCï¼‰

å¯¹äºè¯·æ±‚-å“åº”æ¨¡å¼ï¼Œä½¿ç”¨ `auroraview.call()` é…åˆ `bind_call`ï¼š

```javascript
// JavaScript ç«¯ï¼šè°ƒç”¨ Python æ–¹æ³•å¹¶è·å–ç»“æœ
const hierarchy = await auroraview.call('api.get_hierarchy', { root: 'scene' });
console.log('åœºæ™¯å±‚çº§:', hierarchy);

const result = await auroraview.call('api.rename_object', {
    old_name: 'cube1',
    new_name: 'hero_cube'
});
if (result.ok) {
    console.log('é‡å‘½åæˆåŠŸ');
}
```

```python
# Python ç«¯ï¼šç»‘å®šå¯è°ƒç”¨æ–¹æ³•
@webview.bind_call("api.get_hierarchy")
def get_hierarchy(root=None):
    # è¿”å›å€¼ä¼šå‘é€å› JavaScript
    return {"children": ["group1", "mesh_cube"], "count": 2}

@webview.bind_call("api.rename_object")
def rename_object(old_name, new_name):
    # åœ¨ DCC ä¸­æ‰§è¡Œé‡å‘½å
    cmds.rename(old_name, new_name)
    return {"ok": True, "old": old_name, "new": new_name}
```

#### å¸¸è§é”™è¯¯

```javascript
// é”™è¯¯ï¼štrigger() ä»…é™ JS æœ¬åœ°ï¼Œä¸ä¼šåˆ°è¾¾ Python
auroraview.trigger('my_event', data);  // Python ä¸ä¼šæ”¶åˆ°ï¼

// é”™è¯¯ï¼šdispatchEvent æ˜¯æµè§ˆå™¨ APIï¼Œä¸ä¼šåˆ°è¾¾ Python
window.dispatchEvent(new CustomEvent('my_event', {detail: data}));  // Python ä¸ä¼šæ”¶åˆ°ï¼

// æ­£ç¡®ï¼šä½¿ç”¨ send_event() å‘é€å•å‘äº‹ä»¶
auroraview.send_event('my_event', data);  // Python é€šè¿‡ @webview.on() æ¥æ”¶

// æ­£ç¡®ï¼šä½¿ç”¨ call() è¿›è¡Œè¯·æ±‚-å“åº”
const result = await auroraview.call('api.my_method', data);  // Python é€šè¿‡ @webview.bind_call() æ¥æ”¶
```

### çª—å£äº‹ä»¶ç³»ç»Ÿ

AuroraView æä¾›å®Œæ•´çš„çª—å£äº‹ä»¶ç³»ç»Ÿï¼Œç”¨äºè·Ÿè¸ªçª—å£ç”Ÿå‘½å‘¨æœŸï¼š

```python
from auroraview import WebView
from auroraview.core.events import WindowEvent, WindowEventData

webview = WebView(title="æˆ‘çš„åº”ç”¨", width=800, height=600)

# ä½¿ç”¨è£…é¥°å™¨æ³¨å†Œçª—å£äº‹ä»¶å¤„ç†å™¨
@webview.on_shown
def on_shown(data: WindowEventData):
    print("çª—å£å·²æ˜¾ç¤º")

@webview.on_focused
def on_focused(data: WindowEventData):
    print("çª—å£è·å¾—ç„¦ç‚¹")

@webview.on_blurred
def on_blurred(data: WindowEventData):
    print("çª—å£å¤±å»ç„¦ç‚¹")

@webview.on_resized
def on_resized(data: WindowEventData):
    print(f"çª—å£å¤§å°è°ƒæ•´ä¸º {data.width}x{data.height}")

@webview.on_moved
def on_moved(data: WindowEventData):
    print(f"çª—å£ç§»åŠ¨åˆ° ({data.x}, {data.y})")

@webview.on_closing
def on_closing(data: WindowEventData):
    print("çª—å£æ­£åœ¨å…³é—­...")
    return True  # è¿”å› True å…è®¸å…³é—­ï¼ŒFalse å–æ¶ˆå…³é—­

# çª—å£æ§åˆ¶æ–¹æ³•
webview.resize(1024, 768)
webview.move(100, 100)
webview.minimize()
webview.maximize()
webview.restore()
webview.toggle_fullscreen()
webview.focus()
webview.hide()

# åªè¯»çª—å£å±æ€§
print(f"å¤§å°: {webview.width}x{webview.height}")
print(f"ä½ç½®: ({webview.x}, {webview.y})")
```

### é«˜çº§åŠŸèƒ½

#### è‡ªå®šä¹‰åè®®å¤„ç†å™¨

AuroraView æä¾›å¼ºå¤§çš„è‡ªå®šä¹‰åè®®ç³»ç»Ÿï¼Œè§£å†³æœ¬åœ°èµ„æºåŠ è½½çš„ CORS é™åˆ¶é—®é¢˜ã€‚

**å†…ç½® `auroraview://` åè®®**

ç”¨äºåŠ è½½æœ¬åœ°èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ç­‰ï¼‰ï¼Œæ—  CORS é™åˆ¶ï¼š

```python
from auroraview import WebView

webview = WebView(
    title="æˆ‘çš„åº”ç”¨",
    asset_root="C:/projects/my_app/assets"  # é…ç½®èµ„æºæ ¹ç›®å½•
)

# HTML ä¸­ä½¿ç”¨ auroraview:// åè®®
webview.load_html("""
<html>
    <head>
        <link rel="stylesheet" href="auroraview://css/style.css">
    </head>
    <body>
        <img src="auroraview://images/logo.png">
        <script src="auroraview://js/app.js"></script>
    </body>
</html>
""")
```

**è·¯å¾„æ˜ å°„**:
- `auroraview://css/style.css` â†’ `{asset_root}/css/style.css`
- `auroraview://images/logo.png` â†’ `{asset_root}/images/logo.png`

**è‡ªå®šä¹‰åè®®æ³¨å†Œ**

ä¸º DCC ç‰¹å®šèµ„æºåˆ›å»ºè‡ªå®šä¹‰åè®®ï¼š

```python
from auroraview import WebView

webview = WebView(title="Maya å·¥å…·")

# æ³¨å†Œè‡ªå®šä¹‰åè®®å¤„ç†å™¨
def handle_maya_protocol(uri: str) -> dict:
    """å¤„ç† maya:// åè®®è¯·æ±‚"""
    # ä» URI æå–è·¯å¾„: maya://thumbnails/character.jpg
    path = uri.replace("maya://", "")

    # åŠ è½½ Maya é¡¹ç›®èµ„æº
    full_path = f"C:/maya_projects/current/{path}"

    try:
        with open(full_path, "rb") as f:
            return {
                "data": f.read(),
                "mime_type": "image/jpeg",
                "status": 200
            }
    except FileNotFoundError:
        return {
            "data": b"Not Found",
            "mime_type": "text/plain",
            "status": 404
        }

# æ³¨å†Œåè®®
webview.register_protocol("maya", handle_maya_protocol)

# HTML ä¸­ä½¿ç”¨
webview.load_html("""
<html>
    <body>
        <h1>Maya èµ„æºæµè§ˆå™¨</h1>
        <img src="maya://thumbnails/character.jpg">
        <video src="maya://previews/animation.mp4"></video>
    </body>
</html>
""")
```

**é«˜çº§ç¤ºä¾‹ï¼šFBX æ–‡ä»¶åŠ è½½**

```python
def handle_fbx_protocol(uri: str) -> dict:
    """åŠ è½½ FBX æ¨¡å‹æ–‡ä»¶"""
    path = uri.replace("fbx://", "")
    full_path = f"C:/models/{path}"

    try:
        with open(full_path, "rb") as f:
            return {
                "data": f.read(),
                "mime_type": "application/octet-stream",
                "status": 200
            }
    except Exception as e:
        return {
            "data": str(e).encode(),
            "mime_type": "text/plain",
            "status": 500
        }

webview.register_protocol("fbx", handle_fbx_protocol)

# JavaScript ä¸­ä½¿ç”¨
webview.load_html("""
<script>
    fetch('fbx://characters/hero.fbx')
        .then(r => r.arrayBuffer())
        .then(data => {
            // å¤„ç† FBX æ•°æ®
            console.log('FBX æ–‡ä»¶å¤§å°:', data.byteLength);
        });
</script>
""")
```

**ä¼˜åŠ¿**:
- âœ… **æ—  CORS é™åˆ¶** - è§£å†³ `file://` åè®®çš„è·¨åŸŸé—®é¢˜
- âœ… **ç®€æ´ URL** - `maya://logo.png` vs `file:///C:/long/path/logo.png`
- âœ… **å®‰å…¨æ§åˆ¶** - é™åˆ¶è®¿é—®èŒƒå›´ï¼Œé˜²æ­¢ç›®å½•éå†æ”»å‡»
- âœ… **çµæ´»æ‰©å±•** - æ”¯æŒä»å†…å­˜ã€æ•°æ®åº“ã€ç½‘ç»œåŠ è½½èµ„æº
- âœ… **è·¨å¹³å°** - è·¯å¾„å¤„ç†ç»Ÿä¸€ï¼ŒWindows/macOS/Linux ä¸€è‡´

#### è‡ªå®šä¹‰åè®®æœ€ä½³å®è·µ

##### URL è‡ªåŠ¨è½¬æ¢

AuroraView ä¼šè‡ªåŠ¨å°†æœ¬åœ°æ–‡ä»¶è·¯å¾„å’Œ `file://` URL è½¬æ¢ä¸ºè‡ªå®šä¹‰åè®®æ ¼å¼ã€‚è¿™ç¡®ä¿äº†è·¨å¹³å°çš„ä¸€è‡´å¤„ç†ã€‚

| æ¥æº | è¾“å…¥ | è½¬æ¢åçš„ URL |
|------|------|--------------|
| `file://` URL | `file:///C:/path/to/file.html` | `https://auroraview.localhost/type:file/C:/path/to/file.html` |
| æœ¬åœ°è·¯å¾„ | `C:/path/to/file.html` | `https://auroraview.localhost/type:local/C:/path/to/file.html` |
| Unix è·¯å¾„ | `/path/to/file.html` | `https://auroraview.localhost/type:local/path/to/file.html` |

`type:` å‰ç¼€ç”¨äºåŒºåˆ†è·¯å¾„æ¥æºï¼Œä¾¿äºè°ƒè¯•å’Œæ—¥å¿—è®°å½•ï¼š
- `type:file` - ä» `file://` URL è½¬æ¢è€Œæ¥
- `type:local` - ä»æœ¬åœ°æ–‡ä»¶è·¯å¾„è½¬æ¢è€Œæ¥

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```python
from auroraview import WebView

# ä»¥ä¸‹æ‰€æœ‰æ–¹å¼éƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸º auroraview åè®®
webview = WebView.create("æˆ‘çš„åº”ç”¨")

# ä» file:// URL åŠ è½½
webview.load_url("file:///C:/projects/app/index.html")
# â†’ https://auroraview.localhost/type:file/C:/projects/app/index.html

# ä»æœ¬åœ°è·¯å¾„åŠ è½½ï¼ˆWindowsï¼‰
webview.load_url("C:/projects/app/index.html")
# â†’ https://auroraview.localhost/type:local/C:/projects/app/index.html

# ä»æœ¬åœ°è·¯å¾„åŠ è½½ï¼ˆUnixï¼‰
webview.load_url("/home/user/app/index.html")
# â†’ https://auroraview.localhost/type:local/home/user/app/index.html
```

##### å¹³å°ç‰¹å®š URL æ ¼å¼

`auroraview://` åè®®åœ¨ä¸åŒå¹³å°ä½¿ç”¨ä¸åŒçš„ URL æ ¼å¼ï¼š

| å¹³å° | URL æ ¼å¼ | ç¤ºä¾‹ |
|------|----------|------|
| **Windows** | `https://auroraview.localhost/path` | `https://auroraview.localhost/index.html` |
| **macOS** | `auroraview://path` | `auroraview://index.html` |
| **Linux** | `auroraview://path` | `auroraview://index.html` |

> **æ³¨æ„**: åœ¨ Windows ä¸Šï¼Œwryï¼ˆåº•å±‚ WebView åº“ï¼‰ä¼šå°†è‡ªå®šä¹‰åè®®æ˜ å°„ä¸º HTTP/HTTPS æ ¼å¼ã€‚
> æˆ‘ä»¬ä½¿ç”¨ `.localhost` ä½œä¸ºä¸»æœºåä»¥ç¡®ä¿å®‰å…¨æ€§ã€‚

##### ä¸ºä»€ä¹ˆ `.localhost` æ˜¯å®‰å…¨çš„

`.localhost` é¡¶çº§åŸŸåæä¾›äº†å¼ºå¤§çš„å®‰å…¨ä¿éšœï¼š

1. **IANA ä¿ç•™åŸŸå** - `.localhost` æ˜¯ä¿ç•™é¡¶çº§åŸŸï¼ˆRFC 6761ï¼‰ï¼Œä»»ä½•äººéƒ½æ— æ³•æ³¨å†Œ
2. **ä»…é™æœ¬åœ°** - æµè§ˆå™¨å°† `.localhost` è§†ä¸ºæœ¬åœ°åœ°å€ (127.0.0.1)
3. **DNS å‰æ‹¦æˆª** - æˆ‘ä»¬çš„åè®®å¤„ç†å™¨åœ¨ DNS è§£æä¹‹å‰æ‹¦æˆªè¯·æ±‚
4. **æ— ç½‘ç»œæµé‡** - è¯·æ±‚æ°¸è¿œä¸ä¼šç¦»å¼€æœ¬åœ°æœºå™¨

##### æœ¬åœ°èµ„æºåŠ è½½æ–¹å¼å¯¹æ¯”

| æ–¹å¼ | å®‰å…¨æ€§ | æ¨èç¨‹åº¦ |
|------|--------|----------|
| `auroraview://` + `asset_root` | âœ… **é«˜** - è®¿é—®é™åˆ¶åœ¨æŒ‡å®šç›®å½• | **æ¨è** |
| `allow_file_protocol=True` | âš ï¸ ä½ - å¯è®¿é—®ç³»ç»Ÿä»»æ„æ–‡ä»¶ | è°¨æ…ä½¿ç”¨ |
| HTTP æœåŠ¡å™¨ | âœ… é«˜ - å¯æ§è®¿é—® | é€‚åˆå¼€å‘ç¯å¢ƒ |

**æ¨èæ–¹å¼ï¼ˆä½¿ç”¨ `asset_root` é…åˆç›¸å¯¹è·¯å¾„ï¼‰ï¼š**

<table>
<tr><th>WebView.create()</th><th>run_standalone()</th></tr>
<tr>
<td>

```python
from auroraview import WebView

# å®‰å…¨ï¼šåªèƒ½è®¿é—® assets/ ç›®å½•ä¸‹çš„æ–‡ä»¶
webview = WebView.create(
    title="æˆ‘çš„åº”ç”¨",
    asset_root="./assets",
)

# ä½¿ç”¨ç›¸å¯¹è·¯å¾„ - ä¼šè§£æåˆ° asset_root ç›®å½•
html = """
<html>
<body>
    <img src="./images/logo.png">
    <img src="./images/animation.gif">
</body>
</html>
"""
webview.load_html(html)
```

</td>
<td>

```python
from auroraview import run_standalone

# å®‰å…¨ï¼šåªèƒ½è®¿é—® assets/ ç›®å½•ä¸‹çš„æ–‡ä»¶
# ä½¿ç”¨ç›¸å¯¹è·¯å¾„ - ä¼šè§£æåˆ° asset_root ç›®å½•
html = """
<html>
<body>
    <img src="./images/logo.png">
    <img src="./images/animation.gif">
</body>
</html>
"""

run_standalone(
    title="æˆ‘çš„åº”ç”¨",
    html=html,
    asset_root="./assets",
)
```

</td>
</tr>
</table>

**ä¸æ¨èæ–¹å¼ï¼ˆä½¿ç”¨ `file://` åè®®ï¼‰ï¼š**

<table>
<tr><th>WebView.create()</th><th>run_standalone()</th></tr>
<tr>
<td>

```python
from auroraview import WebView
from auroraview import path_to_file_url

# âš ï¸ è­¦å‘Šï¼šå…è®¸è®¿é—®ä»»æ„æ–‡ä»¶
gif_url = path_to_file_url("C:/path/to/animation.gif")

webview = WebView.create(
    title="æˆ‘çš„åº”ç”¨",
    allow_file_protocol=True,
)

html = f'<img src="{gif_url}">'
webview.load_html(html)
```

</td>
<td>

```python
from auroraview import run_standalone
from auroraview import path_to_file_url

# âš ï¸ è­¦å‘Šï¼šå…è®¸è®¿é—®ä»»æ„æ–‡ä»¶
gif_url = path_to_file_url("C:/path/to/animation.gif")

html = f'<img src="{gif_url}">'

run_standalone(
    title="æˆ‘çš„åº”ç”¨",
    html=html,
    allow_file_protocol=True,
)
```

</td>
</tr>
</table>

> **æ³¨æ„**ï¼š`path_to_file_url()` è¾…åŠ©å‡½æ•°å°†æœ¬åœ°è·¯å¾„è½¬æ¢ä¸ºæ­£ç¡®çš„ `file:///` URLã€‚
> ä¾‹å¦‚ï¼š`C:\images\logo.gif` â†’ `file:///C:/images/logo.gif`

å®Œæ•´ç¤ºä¾‹è¯·å‚è€ƒ [examples/custom_protocol_example.py](./examples/custom_protocol_example.py) å’Œ [examples/local_assets_example.py](./examples/local_assets_example.py)ã€‚

#### ç”Ÿå‘½å‘¨æœŸç®¡ç†

å½“çˆ¶DCCåº”ç”¨å…³é—­æ—¶è‡ªåŠ¨å…³é—­WebView:

```python
from auroraview import WebView

# è·å–çˆ¶çª—å£å¥æŸ„ (Windowsä¸Šçš„HWND)
parent_hwnd = get_maya_main_window_hwnd()  # ä½ çš„DCCç‰¹å®šå‡½æ•°

webview = WebView(
    title="æˆ‘çš„å·¥å…·",
    width=800,
    height=600,
    parent_hwnd=parent_hwnd,  # ç›‘æ§è¿™ä¸ªçˆ¶çª—å£
    parent_mode="owner"  # ä½¿ç”¨owneræ¨¡å¼ä»¥ä¿è¯è·¨çº¿ç¨‹å®‰å…¨
)

webview.show()
# å½“çˆ¶çª—å£è¢«é”€æ¯æ—¶ï¼ŒWebViewä¼šè‡ªåŠ¨å…³é—­
```

#### ç¬¬ä¸‰æ–¹ç½‘ç«™é›†æˆ

å‘ç¬¬ä¸‰æ–¹ç½‘ç«™æ³¨å…¥JavaScriptå¹¶å»ºç«‹åŒå‘é€šä¿¡:

```python
from auroraview import WebView

webview = WebView(title="AIèŠå¤©", width=1200, height=800, dev_tools=True)

# æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
@webview.on("get_scene_info")
def handle_get_scene_info(data):
    # è·å–DCCåœºæ™¯æ•°æ®
    selection = maya.cmds.ls(selection=True)
    webview.emit("scene_info_response", {"selection": selection})

@webview.on("execute_code")
def handle_execute_code(data):
    # åœ¨DCCä¸­æ‰§è¡ŒAIç”Ÿæˆçš„ä»£ç 
    code = data.get("code", "")
    exec(code)
    webview.emit("execution_result", {"status": "success"})

# åŠ è½½ç¬¬ä¸‰æ–¹ç½‘ç«™
webview.load_url("https://ai-chat-website.com")

# æ³¨å…¥è‡ªå®šä¹‰JavaScript
injection_script = """
(function() {
    // å‘é¡µé¢æ·»åŠ è‡ªå®šä¹‰æŒ‰é’®
    const btn = document.createElement('button');
    btn.textContent = 'è·å–DCCé€‰æ‹©';
    btn.onclick = () => {
        window.dispatchEvent(new CustomEvent('get_scene_info', {
            detail: { timestamp: Date.now() }
        }));
    };
    document.body.appendChild(btn);

    // ç›‘å¬å“åº”
    window.addEventListener('scene_info_response', (e) => {
        console.log('DCCé€‰æ‹©:', e.detail);
    });
})();
"""

import time
time.sleep(1)  # ç­‰å¾…é¡µé¢åŠ è½½
webview.eval_js(injection_script)

webview.show()
```

è¯¦ç»†æŒ‡å—è¯·å‚é˜… [ç¬¬ä¸‰æ–¹ç½‘ç«™é›†æˆæŒ‡å—](./docs/THIRD_PARTY_INTEGRATION.md)ã€‚

### ç³»ç»Ÿæ‰˜ç›˜æ”¯æŒ

åˆ›å»ºå¸¦ç³»ç»Ÿæ‰˜ç›˜çš„æ¡Œé¢åº”ç”¨ï¼š

```python
from auroraview import run_desktop

# å¯åŠ¨å¸¦ç³»ç»Ÿæ‰˜ç›˜çš„åº”ç”¨
run_desktop(
    title="æˆ‘çš„åå°åº”ç”¨",
    html=my_html,
    width=400,
    height=300,
    system_tray=True,  # å¯ç”¨ç³»ç»Ÿæ‰˜ç›˜
    hide_on_close=True,  # å…³é—­æ—¶æœ€å°åŒ–åˆ°æ‰˜ç›˜
)
```

### æµ®åŠ¨å·¥å…·çª—å£

åˆ›å»ºæµ®åŠ¨é¢æ¿ï¼Œé€‚ç”¨äº AI åŠ©æ‰‹æˆ–å·¥å…·é¢æ¿ï¼š

```python
from auroraview import WebView

# åˆ›å»ºæµ®åŠ¨å·¥å…·çª—å£
webview = WebView.create(
    title="AI åŠ©æ‰‹",
    html=panel_html,
    width=320,
    height=400,
    frame=False,  # æ— è¾¹æ¡†çª—å£
    transparent=True,  # é€æ˜èƒŒæ™¯
    always_on_top=True,  # ä¿æŒç½®é¡¶
    tool_window=True,  # éšè—ä»»åŠ¡æ /Alt+Tab
    parent=parent_hwnd,  # å¯é€‰ï¼šè·Ÿéšçˆ¶çª—å£
    mode="owner",  # çª—å£è·Ÿéšçˆ¶çª—å£æœ€å°åŒ–/æ¢å¤
)
webview.show()
```

### Gallery åº”ç”¨

AuroraView åŒ…å«ä¸€ä¸ªäº¤äº’å¼ Galleryï¼Œå±•ç¤ºæ‰€æœ‰åŠŸèƒ½ï¼š

```bash
# è¿è¡Œ Gallery
just gallery

# æˆ–æ„å»ºç‹¬ç«‹ Gallery å¯æ‰§è¡Œæ–‡ä»¶
just gallery-pack
```

Gallery æä¾›ï¼š
- äº¤äº’å¼ç¤ºä¾‹æµè§ˆå™¨ï¼ŒæŒ‰ç±»åˆ«åˆ†ç»„
- å®æ—¶ç¤ºä¾‹è¿è¡Œå™¨ï¼Œæ˜¾ç¤º stdout/stderr è¾“å‡º
- è¿è¡Œæ—¶é…ç½®çš„è®¾ç½®é¢æ¿
- è·¨æ‰€æœ‰ç¤ºä¾‹çš„æœç´¢åŠŸèƒ½

### å®‰è£… CLI

ä½¿ç”¨å®‰è£…è„šæœ¬å®‰è£… `auroraview-cli`ï¼š

**Linux/macOS (bash):**
```bash
curl -fsSL https://raw.githubusercontent.com/loonghao/auroraview/main/scripts/install.sh | bash
```

**Windows (PowerShell):**
```powershell
irm https://raw.githubusercontent.com/loonghao/auroraview/main/scripts/install.ps1 | iex
```

**æ‰‹åŠ¨ä¸‹è½½ï¼š**

ä» [GitHub Releases](https://github.com/loonghao/auroraview/releases) ä¸‹è½½é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

| å¹³å° | ä¸‹è½½æ–‡ä»¶ |
|------|----------|
| Windows x64 | `auroraview-cli-{version}-x86_64-pc-windows-msvc.zip` |
| Linux x64 | `auroraview-cli-{version}-x86_64-unknown-linux-gnu.tar.gz` |
| macOS x64 | `auroraview-cli-{version}-x86_64-apple-darwin.tar.gz` |
| macOS ARM64 | `auroraview-cli-{version}-aarch64-apple-darwin.tar.gz` |

**ä»æºç æ„å»ºï¼š**
```bash
cargo build -p auroraview-cli --release
```

### åº”ç”¨æ‰“åŒ…

AuroraView æä¾›å¼ºå¤§çš„æ‰“åŒ…ç³»ç»Ÿï¼Œå¯åˆ›å»ºç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä½¿ç”¨ `auroraview-cli`ï¼ˆRust CLIï¼‰è¿›è¡Œæ‰“åŒ…ï¼š

```bash
# æ‰“åŒ…åŸºäº URL çš„åº”ç”¨
auroraview-cli pack --url https://example.com --output myapp

# æ‰“åŒ…å‰ç«¯é¡¹ç›®ï¼ˆReactã€Vue ç­‰ï¼‰
auroraview-cli pack --frontend ./dist --output myapp

# æ‰“åŒ…å…¨æ ˆåº”ç”¨ï¼ˆå‰ç«¯ + Python åç«¯ï¼‰
auroraview-cli pack --config auroraview.pack.toml
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹ (`auroraview.pack.toml`)ï¼š**

```toml
[package]
name = "my-app"
version = "1.0.0"

[app]
title = "æˆ‘çš„åº”ç”¨"
frontend_path = "./dist"

[window]
width = 1200
height = 800
resizable = true

[bundle]
# ç»Ÿä¸€å›¾æ ‡é…ç½®ï¼ˆæ”¯æŒ PNGã€JPGã€ICO æ ¼å¼ï¼‰
# PNG/JPGï¼šè‡ªåŠ¨è½¬æ¢ä¸ºå¤šåˆ†è¾¨ç‡ ICOï¼ˆ16-256pxï¼‰ç”¨äº Windows
# ICOï¼šè‡ªåŠ¨æå– PNG ç”¨äºçª—å£æ ‡é¢˜æ å›¾æ ‡
# æ¨èï¼šä½¿ç”¨ 256x256 æˆ–æ›´å¤§çš„ PNG å›¾ç‰‡ä»¥è·å¾—æœ€ä½³è´¨é‡
icon = "./assets/my-app-icon.png"

# Windows ç‰¹å®šé…ç½®
# æ³¨æ„ï¼šä½¿ç”¨ [bundle.platform.windows] è€Œé [bundle.windows]ï¼
# è¿™æ ·å¯ä»¥æ¸…æ¥šåŒºåˆ† [window]ï¼ˆè¿è¡Œæ—¶è¡Œä¸ºï¼‰å’Œå¹³å°æ‰“åŒ…é…ç½®
[bundle.platform.windows]
# éšè—æ§åˆ¶å°çª—å£ï¼ˆä¸æ˜¾ç¤ºé»‘è‰²å‘½ä»¤è¡Œçª—å£ï¼‰
# console = falseï¼ˆé»˜è®¤ï¼‰-> GUI åº”ç”¨ï¼Œæ— æ§åˆ¶å°
# console = true -> æ§åˆ¶å°åº”ç”¨ï¼Œæ˜¾ç¤ºé»‘æ¡†
console = false
# å¯é€‰ï¼šä½¿ç”¨ç‰¹å®šçš„ ICO æ–‡ä»¶è¦†ç›–ï¼ˆå¦‚æœä¸æƒ³è‡ªåŠ¨è½¬æ¢ï¼‰
# icon = "./assets/my-app-icon.ico"

[python]
entry_point = "main:main"
include_paths = ["./backend"]
strategy = "standalone"  # åµŒå…¥ Python è¿è¡Œæ—¶ï¼Œæ”¯æŒç¦»çº¿ä½¿ç”¨
```

> **æ³¨æ„**ï¼šç»Ÿä¸€å›¾æ ‡é…ç½®è‡ªåŠ¨å¤„ç†æ ¼å¼è½¬æ¢ - åªéœ€æä¾›ä¸€ä¸ª PNG å›¾ç‰‡ï¼Œå®ƒå°†åŒæ—¶ç”¨äº Windows å¯æ‰§è¡Œæ–‡ä»¶å›¾æ ‡ï¼ˆè½¬æ¢ä¸ºå¤šåˆ†è¾¨ç‡ ICOï¼‰å’Œçª—å£æ ‡é¢˜æ å›¾æ ‡ã€‚å®Œæ•´é…ç½®ç¤ºä¾‹è¯·å‚è€ƒ [examples/pack-example.toml](./examples/pack-example.toml)ã€‚

**å›¾æ ‡å’Œæ§åˆ¶å°çš„ CLI é€‰é¡¹ï¼š**

```bash
# é€šè¿‡ CLI æŒ‡å®šè‡ªå®šä¹‰å›¾æ ‡ï¼ˆæ”¯æŒ PNGã€JPGã€ICOï¼‰
auroraview pack --config app.toml --icon ./my-icon.png --build

# å¼ºåˆ¶æ˜¾ç¤ºæ§åˆ¶å°ï¼ˆç”¨äºè°ƒè¯•ï¼‰
auroraview pack --config app.toml --console --build

# å¼ºåˆ¶éšè—æ§åˆ¶å°ï¼ˆè¦†ç›–é…ç½®æ–‡ä»¶è®¾ç½®ï¼‰
auroraview pack --config app.toml --no-console --build
```

**æ‰“åŒ…ç­–ç•¥ï¼š**

| ç­–ç•¥ | ç¦»çº¿æ”¯æŒ | ä½“ç§¯ | è¯´æ˜ |
|------|----------|------|------|
| `standalone`ï¼ˆé»˜è®¤ï¼‰ | æ˜¯ | ~50-80MB | åµŒå…¥ Python è¿è¡Œæ—¶ï¼Œé¦–æ¬¡è¿è¡Œæ—¶è§£å‹ |
| `embedded` | å¦ | ~15MB | éœ€è¦ç³»ç»Ÿ Python |
| `portable` | æ˜¯ | ~50-80MB | ç›®å½•ç»“æ„ï¼ŒåŒ…å« Python |
| `pyoxidizer` | æ˜¯ | ~30-50MB | éœ€è¦å®‰è£… PyOxidizer |

**ä¸»è¦ç‰¹æ€§ï¼š**
- å•æ–‡ä»¶å¯æ‰§è¡Œåˆ†å‘
- åµŒå…¥å¼ Python è¿è¡Œæ—¶ï¼ˆæ— éœ€ç³»ç»Ÿ Pythonï¼‰
- é¦–æ¬¡è¿è¡Œè§£å‹åˆ°ç”¨æˆ·ç¼“å­˜ç›®å½•
- ç¯å¢ƒå˜é‡æ³¨å…¥
- æˆæƒ/Token éªŒè¯æ”¯æŒ
- è‡ªå®šä¹‰ Hooks æ”¶é›†é¢å¤–æ–‡ä»¶

## æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
-  [æ¶æ„è®¾è®¡](./docs/ARCHITECTURE.md) - æ¨¡å—åŒ–åç«¯æ¶æ„
-  [æŠ€æœ¯è®¾è®¡](./docs/TECHNICAL_DESIGN.md) - æŠ€æœ¯å®ç°ç»†èŠ‚
-  [DCC é›†æˆæŒ‡å—](./docs/DCC_INTEGRATION_GUIDE.md) - DCC åº”ç”¨é›†æˆ
-  [ç¬¬ä¸‰æ–¹ç½‘ç«™é›†æˆæŒ‡å—](./docs/THIRD_PARTY_INTEGRATION.md) - JavaScriptæ³¨å…¥å’ŒAIèŠå¤©é›†æˆ
-  [è·¯çº¿å›¾](./docs/ROADMAP.md) - æœªæ¥è®¡åˆ’å’Œå¼€å‘

### Maya é›†æˆä¸“é¢˜
- **[Maya é›†æˆè§£å†³æ–¹æ¡ˆ](./docs/MAYA_SOLUTION.md)** - æ¨èé˜…è¯»ï¼å®Œæ•´çš„ Maya é›†æˆæŒ‡å—
- [Maya é›†æˆé—®é¢˜åˆ†æ](./docs/MAYA_INTEGRATION_ISSUES.md) - æŠ€æœ¯ç»†èŠ‚å’Œé—®é¢˜æ ¹æº
- [å½“å‰çŠ¶æ€è¯´æ˜](./docs/CURRENT_STATUS.md) - å·²çŸ¥é™åˆ¶å’Œå¯ç”¨æ–¹æ¡ˆ

### é‡è¦æç¤ºï¼šMaya ç”¨æˆ·å¿…è¯»

å¦‚æœä½ åœ¨ Maya ä¸­ä½¿ç”¨ AuroraViewï¼Œè¯·æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¨¡å¼ï¼š

**åœºæ™¯ 1: åªéœ€è¦æ˜¾ç¤ºç½‘é¡µï¼ˆæ¨èï¼‰**
- ä½¿ç”¨ **Embedded æ¨¡å¼**
- ç‰¹ç‚¹: å®Œå…¨éé˜»å¡ï¼ŒMaya ä¿æŒå“åº”ï¼Œè‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- é™åˆ¶: JavaScript æ³¨å…¥æš‚ä¸å¯ç”¨

**åœºæ™¯ 2: éœ€è¦ JavaScript æ³¨å…¥å’ŒåŒå‘é€šä¿¡**
- ä½¿ç”¨ **Standalone æ¨¡å¼**
- ç‰¹ç‚¹: æ‰€æœ‰åŠŸèƒ½å¯ç”¨ï¼ŒåŒ…æ‹¬ `eval_js()` å’Œ `emit()`
- é™åˆ¶: å¯èƒ½æœ‰è½»å¾®é˜»å¡ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [Maya é›†æˆè§£å†³æ–¹æ¡ˆ](./docs/MAYA_SOLUTION.md)ã€‚

## DCCè½¯ä»¶æ”¯æŒ

| DCCè½¯ä»¶ | çŠ¶æ€ | Pythonç‰ˆæœ¬ | ç¤ºä¾‹ |
|---------|------|-----------|------|
| Maya | [OK] å·²æ”¯æŒ | 3.7+ | [Maya Outliner ç¤ºä¾‹](https://github.com/loonghao/auroraview-maya-outliner) |
| 3ds Max | [OK] å·²æ”¯æŒ | 3.7+ | - |
| Houdini | [OK] å·²æ”¯æŒ | 3.7+ | - |
| Blender | [OK] å·²æ”¯æŒ | 3.7+ | - |
| Photoshop | [CONSTRUCTION] è®¡åˆ’ä¸­ | 3.7+ | - |
| Unreal Engine | [CONSTRUCTION] è®¡åˆ’ä¸­ | 3.7+ | - |

> **ğŸ“š ç¤ºä¾‹**: æŸ¥çœ‹å®Œæ•´çš„å·¥ä½œç¤ºä¾‹ï¼Œè¯·è®¿é—® [Maya Outliner ç¤ºä¾‹](https://github.com/loonghao/auroraview-maya-outliner) - ä½¿ç”¨ AuroraViewã€Vue 3 å’Œ TypeScript æ„å»ºçš„ç°ä»£åŒ– Maya Outlinerã€‚

## å¼€å‘

### å‰ç½®è¦æ±‚

- Rust 1.75+
- Python 3.7+
- Node.js 18+ (ç”¨äºç¤ºä¾‹)

### ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/loonghao/auroraview.git
cd auroraview

# å®‰è£…Rustä¾èµ–å¹¶æ„å»º
cargo build --release

# ä»¥å¼€å‘æ¨¡å¼å®‰è£…PythonåŒ…
pip install -e .
```

### æµ‹è¯•

AuroraView æä¾›äº†ä¸€ä¸ªå…¨é¢çš„æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå¤šç§åç«¯ä»¥é€‚åº”ä¸åŒçš„æµ‹è¯•åœºæ™¯ã€‚

#### HeadlessWebView - ç»Ÿä¸€æµ‹è¯•æ¡†æ¶

AuroraView åŒ…å«ä¸€ä¸ªç»Ÿä¸€çš„æ— å¤´æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå¤šç§åç«¯ï¼š

```python
from auroraview.testing import HeadlessWebView

# è‡ªåŠ¨æ£€æµ‹æœ€ä½³åç«¯ï¼ˆæ¨è Playwrightï¼‰
with HeadlessWebView.auto() as webview:
    webview.goto("https://example.com")
    webview.click("#button")
    assert webview.text("#result") == "Success"

# æˆ–æ˜¾å¼ä½¿ç”¨ Playwright åç«¯
with HeadlessWebView.playwright() as webview:
    webview.load_html("<h1>æµ‹è¯•</h1>")
    assert webview.text("h1") == "æµ‹è¯•"
    webview.screenshot("test.png")
```

**å¯ç”¨åç«¯ï¼š**

| åç«¯ | æ–¹æ³• | å¹³å° | ç”¨é€” |
|------|------|------|------|
| Playwright | `HeadlessWebView.playwright()` | å…¨å¹³å° | æ¨èç”¨äº CI/CD |
| Xvfb | `HeadlessWebView.virtual_display()` | Linux | çœŸå® WebView æµ‹è¯• |
| WebView2 CDP | `HeadlessWebView.webview2_cdp(url)` | Windows | çœŸå® WebView2 æµ‹è¯• |

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- æ‰€æœ‰åç«¯ç»Ÿä¸€ API
- ä½¿ç”¨ `HeadlessWebView.auto()` è‡ªåŠ¨é€‰æ‹©åç«¯
- å®Œæ•´çš„ Playwright API è®¿é—®ï¼ˆå®šä½å™¨ã€æˆªå›¾ã€ç½‘ç»œæ‹¦æˆªï¼‰
- åŒ…å« Pytest fixtures
- CI/CD å°±ç»ª

**ä¾èµ–è¦æ±‚ï¼š** `pip install playwright && playwright install chromium`

#### Pytest é›†æˆ

```python
import pytest
from auroraview.testing import HeadlessWebView

# ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨
def test_basic_navigation():
    with HeadlessWebView.playwright() as webview:
        webview.goto("https://example.com")
        assert "Example" in webview.title()

# ä½¿ç”¨ pytest fixture
def test_with_fixture(headless_webview):
    headless_webview.load_html("<button id='btn'>ç‚¹å‡»</button>")
    headless_webview.click("#btn")
```

#### è¿è¡Œæµ‹è¯•

```bash
# ä½¿ç”¨ noxï¼ˆæ¨èï¼‰
uvx nox -s pytest          # ä¸å¸¦ Qt çš„æµ‹è¯•
uvx nox -s pytest-qt       # å¸¦ Qt çš„æµ‹è¯•
uvx nox -s pytest-all      # è¿è¡Œæ‰€æœ‰æµ‹è¯•

# æˆ–ç›´æ¥ä½¿ç”¨ pytest
uv run pytest tests/python/ -v

# è¿è¡Œæ— å¤´ WebView æµ‹è¯•
uv run pytest tests/python/integration/test_headless_webview.py -v
```

#### CI/CD é…ç½®

```yaml
# GitHub Actions ç¤ºä¾‹
- name: å®‰è£…ä¾èµ–
  run: |
    pip install playwright
    playwright install chromium

- name: è¿è¡Œæµ‹è¯•
  run: pytest tests/ -v
```

#### å¯ç”¨çš„ Nox ä¼šè¯

```bash
uvx nox -l                 # åˆ—å‡ºæ‰€æœ‰ä¼šè¯
uvx nox -s pytest          # ä¸å¸¦ Qt çš„æµ‹è¯•
uvx nox -s pytest-qt       # å¸¦ Qt çš„æµ‹è¯•
uvx nox -s pytest-all      # è¿è¡Œæ‰€æœ‰æµ‹è¯•
uvx nox -s lint            # è¿è¡Œä»£ç æ£€æŸ¥
uvx nox -s coverage        # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

## é¡¹ç›®ç»“æ„

```
auroraview/
â”œâ”€â”€ src/                    # Rustæ ¸å¿ƒåº“
â”œâ”€â”€ python/                 # Pythonç»‘å®š
â”œâ”€â”€ tests/                  # æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â””â”€â”€ benches/                # æ€§èƒ½åŸºå‡†æµ‹è¯•
```

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·é˜…è¯»æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md)äº†è§£è¯¦æƒ…ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦è§[LICENSE](./LICENSE)æ–‡ä»¶ã€‚

## è‡´è°¢

- [Wry](https://github.com/tauri-apps/wry) - è·¨å¹³å°WebViewåº“
- [PyO3](https://github.com/PyO3/pyo3) - Pythonçš„Rustç»‘å®š
- [Tauri](https://tauri.app/) - çµæ„Ÿå’Œç”Ÿæ€ç³»ç»Ÿ

## è”ç³»æ–¹å¼

- ä½œè€…: Hal Long
- é‚®ç®±: hal.long@outlook.com
- GitHub: [@loonghao](https://github.com/loonghao)

