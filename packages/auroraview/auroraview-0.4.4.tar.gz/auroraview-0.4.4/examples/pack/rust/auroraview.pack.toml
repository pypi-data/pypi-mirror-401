# AuroraView Pack - Rust Backend Example
# ============================================================================
#
# This example demonstrates a fullstack application with:
# - React/Vue frontend (built to ./dist)
# - Rust backend (compiled binary via Cargo)
#
# Rust backend compiles to a native binary with excellent performance.
# The binary is automatically built using Cargo during the pack process.

# ============================================================================
# Package Metadata
# ============================================================================
[package]
name = "rust-fullstack-app"
version = "1.0.0"
title = "Rust Fullstack App"
identifier = "com.example.rust-app"
description = "A fullstack application with Rust backend"
authors = ["Your Name <your@email.com>"]

# ============================================================================
# Frontend Configuration
# ============================================================================
[frontend]
path = "./dist"

# ============================================================================
# Backend Configuration
# ============================================================================
[backend]
type = "rust"

[backend.rust]
manifest = "./backend/Cargo.toml"
binary = "server"
profile = "release"
# target = "x86_64-pc-windows-msvc"
features = ["production"]
no_default_features = false
all_features = false

# Common process settings
[backend.process]
console = false
args = ["--port", "8080"]
env = { RUST_LOG = "info" }
working_dir = "$APP_DIR"
restart_on_crash = true
max_restarts = 3

# Health check
[backend.process.health_check]
url = "http://localhost:8080/health"
timeout = 10
interval = 5
retries = 3

# ============================================================================
# Window Configuration
# ============================================================================
[window]
width = 1280
height = 720
min_width = 800
min_height = 600
resizable = true
start_position = "center"

# ============================================================================
# Bundle Configuration
# ============================================================================
[bundle]
icon = "./assets/icon.png"
copyright = "Copyright 2025"
resources = ["./config"]

[bundle.windows]
icon = "./assets/icon.ico"
console = false

[bundle.linux]
categories = ["Development", "Utility"]

# ============================================================================
# Build Configuration
# ============================================================================
[build]
before = [
    "npm run build",
    "cargo build --release --manifest-path ./backend/Cargo.toml"
]
out_dir = "./pack-output"
release = true

# ============================================================================
# Hooks Configuration
# ============================================================================
[hooks]
[[hooks.collect]]
source = "./backend/target/release/server*"
dest = "backend"
description = "Rust backend binary"

[[hooks.collect]]
source = "./config/*.toml"
dest = "config"
description = "Configuration files"

# ============================================================================
# Debug Configuration
# ============================================================================
[debug]
enabled = false
devtools = false
