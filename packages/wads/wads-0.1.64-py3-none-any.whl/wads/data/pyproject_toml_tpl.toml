[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = ""
version = ""
description = ""
readme = "README.md"
requires-python = ">=3.10"
license = { text = "" }
keywords = []
authors = []
dependencies = []

[project.urls]
Homepage = ""
# Repository = ""  # URL to the source code repository
# Documentation = ""  # URL to the documentation (e.g., Read the Docs, GitHub Pages)
# Changelog = ""  # URL to the changelog or release notes
# Issues = ""  # URL to the issue tracker

# [project.scripts]
# # Console script entry points - creates command-line executables
# # Format: "command-name = package.module:function"
# # Example: my-tool = "mypackage.cli:main"

# [project.gui-scripts]
# # GUI application entry points - similar to scripts but for GUI apps
# # Format: "app-name = package.module:function"
# # Example: my-app = "mypackage.gui:main"

# [project.entry-points."some.group"]
# # Plugin-style entry points for extensibility
# # Allows other packages to discover and load plugins
# # Format: "plugin-name = package.module:object"
# # Example: json = "mypackage.serializers:JSONSerializer"

[project.optional-dependencies]
dev = ["pytest>=7.0", "pytest-cov>=4.0", "ruff>=0.1.0"]
docs = ["sphinx>=6.0", "sphinx-rtd-theme>=1.0"]

[tool.ruff]
line-length = 88
target-version = "py310"
exclude = [
    "**/*.ipynb",
    ".git",
    ".venv",
    "build",
    "dist",
    "tests",
    "examples",
    "scrap",
]

[tool.ruff.lint]
# Select the rules you want to enable. 
# It's best practice to enable whole rule families for consistency.
# See https://docs.astral.sh/ruff/rules/
select = [
    # Docstring Rule (Your request)
    "D100", # D100: Missing module docstring (Required)

    # Core Error-Catching (always good to have)
    # "F",    # F: Pyflakes - Logical errors, unused imports (Highly recommended)
    # "E",    # E: Pycodestyle Errors - Basic style errors (Highly recommended)
    # "B",    # B: Flake8-Bugbear - Common bug patterns (Highly recommended)

    # Clean-up / Modernization (Highly fixable and low-annoyance)
    # "UP",   # UP: Pyupgrade - Suggestions for modern Python syntax
    # "I",    # I: isort - Import sorting (If you don't use a separate tool like Black/Ruff formatter)
]

# Ignore specific rules that conflict or are too annoying
ignore = [
    # Docstring Ignore (Your request)
    "D203", # D203: 1 blank line before class docstring (Conflict with other docstring styles)

    # Common Ignores (Enable and uncomment if you find them annoying)
    "E501", # E501: Line too long (If you use an auto-formatter like Black/Ruff format, ignore this)
    "B905", # B905: `zip()` without an explicit `strict=` parameter
]

# Configure settings for rule families
[tool.ruff.lint.pydocstyle]
convention = "google" # or "numpy" or "pep257"

[tool.ruff.lint.per-file-ignores]
"**/tests/*" = ["D"]    # don't enforce docstrings in tests
"**/examples/*" = ["D"]
"**/scrap/*" = ["D"]

[tool.pytest.ini_options]
minversion = "6.0"
testpaths = ["tests"]
doctest_optionflags = ["NORMALIZE_WHITESPACE", "ELLIPSIS"]

# ============================================================================
# SYSTEM DEPENDENCIES
# ============================================================================
# System/OS-level dependencies (packages needed for your project to run)
# See wads_operational_dependencies_example.yml for detailed documentation

# Each dependency gets its own section: [tool.wads.ops.{name}]
# Example:
# [tool.wads.ops.ffmpeg]
# description = "Multimedia framework for video/audio processing"
# url = "https://ffmpeg.org/"
# check.linux = "which ffmpeg"
# check.macos = "which ffmpeg"
# install.linux = ["sudo apt-get update", "sudo apt-get install -y ffmpeg"]
# install.macos = "brew install ffmpeg"
# note = "On Alpine: apk add ffmpeg"

# ============================================================================
# CI Configuration (Single Source of Truth)
# ============================================================================
# This section defines all CI-specific configuration, eliminating the need
# to hardcode project-specific settings in CI workflow files.

[tool.wads.ci]
# Project name used in CI workflows (defaults to package name if not specified)
project_name = ""

# ‚öôÔ∏è EXECUTION FLOW AND COMMANDS
# Commands executed during different CI phases

[tool.wads.ci.commands]
# Pre-test setup commands - run before testing/linting begins
# Examples: database migrations, data generation, environment setup
pre_test = [
    # "python scripts/setup_test_data.py",
    # "python -m playwright install",
]

# Test commands - primary test suite execution
# If not specified, defaults to ["pytest"]
test = [
    # "pytest",
    # "pytest --cov=mypackage --cov-report=xml",
]

# Post-test commands - run after tests complete (e.g., cleanup, reports)
post_test = [
    # "python scripts/generate_coverage_report.py",
]

# Lint commands - code quality checks
# If not specified, uses Ruff configuration from [tool.ruff]
lint = [
    # "ruff check .",
]

# Format commands - code formatting
# If not specified, uses Ruff formatter
format = [
    # "ruff format --check .",
]

# ============================================================================
# üåç ENVIRONMENT VARIABLES
# Control which environment variables are required or have defaults

[tool.wads.ci.env]
# Required environment variables - CI will FAIL if these are not set in secrets
# These must be available in GitHub Secrets for CI to run
# Format: list of variable names
required_envvars = []

# Test-specific environment variables - CI will WARN if not set in secrets
# Tests requiring these will be skipped or may fail, but CI continues
# Format: list of variable names
test_envvars = []

# Extra/optional environment variables - loaded from secrets if available
# No warnings if missing; purely optional functionality
# Format: list of variable names
extra_envvars = []

# Default environment variables - set these if not provided by CI system
# Format: key-value pairs (inline table syntax)
# Note: These are literal defaults, NOT secret values
# Example: defaults = {"LOG_LEVEL" = "DEBUG", "TESTING" = "true", "PYTHONUNBUFFERED" = "1"}
defaults = {}

# ============================================================================
# ‚úÖ CODE QUALITY AND FORMATTING
# Tool-specific configuration for CI enforcement

[tool.wads.ci.quality]
# Ruff linter settings for CI (overrides/supplements [tool.ruff])
[tool.wads.ci.quality.ruff]
enabled = true
# line_length = 88  # Uncomment to override [tool.ruff] setting
# output_format = "github"  # For GitHub Actions annotations

# Black formatter settings (if using Black instead of Ruff format)
[tool.wads.ci.quality.black]
enabled = false
# line_length = 88
# target_version = ["py310", "py311", "py312"]

# Mypy type checker settings
[tool.wads.ci.quality.mypy]
enabled = false
# strict = true
# python_version = "3.10"
# ignore_missing_imports = true

# ============================================================================
# üß™ TEST CONFIGURATION
# Test-specific settings for CI

[tool.wads.ci.testing]
# Python versions to test against
python_versions = ["3.10", "3.12"]

# Pytest arguments (supplements [tool.pytest.ini_options])
pytest_args = ["-v", "--tb=short"]

# Coverage settings
coverage_enabled = true
coverage_threshold = 0                   # Minimum coverage percentage (0 = no enforcement)
coverage_report_format = ["term", "xml"] # terminal, xml, html, etc.

# Test paths to exclude (in addition to pytest configuration)
exclude_paths = ["examples", "scrap"]

# Run tests on Windows (informational only, may fail)
test_on_windows = true


# ============================================================================
# üìä CODE METRICS TRACKING
# Track code quality metrics over time using umpyre

[tool.wads.ci.metrics]
# Enable code metrics collection after successful tests
enabled = true
# Path to umpyre config file (relative to repo root)
config_path = ".github/umpyre-config.yml"
# Git branch to store metrics data
storage_branch = "code-metrics"
# Python version to use for metrics collection
python_version = "3.10"
# Run even if workflow failed (not recommended)
force_run = false

# ============================================================================
# üì¶ BUILD AND PUBLISH SETTINGS
# ============================================================================
# Control build and publication behavior

[tool.wads.ci.build]
# Build artifacts to create
sdist = true
wheel = true

# Publication settings
[tool.wads.ci.publish]
# Publish to PyPI on main/master branch
enabled = true
# skip_existing = false  # Skip upload if version already exists


# ============================================================================
# üìÑ DOCUMENTATION SETTINGS
# ============================================================================
# Control documentation generation and publishing

[tool.wads.ci.docs]
# Generate and publish GitHub Pages
enabled = true
# Builder to use: "epythet", "sphinx", "mkdocs"
builder = "epythet"
# Paths to ignore during documentation generation
ignore_paths = ["tests/", "scrap/", "examples/"]
