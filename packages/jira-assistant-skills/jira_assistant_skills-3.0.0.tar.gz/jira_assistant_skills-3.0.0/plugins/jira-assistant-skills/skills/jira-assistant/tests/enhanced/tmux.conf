# =============================================================================
# Tmux Configuration - Sensible Defaults
# =============================================================================

# -----------------------------------------------------------------------------
# General Settings
# -----------------------------------------------------------------------------

# Use 256 colors and true color support
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Enable mouse support (scrolling, pane selection, resizing)
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer size
set -g history-limit 50000

# Faster command sequences (no delay for escape)
set -sg escape-time 0

# Increase repeat timeout
set -g repeat-time 500

# Focus events for vim/neovim
set -g focus-events on

# Aggressive resize (useful for grouped sessions)
setw -g aggressive-resize on

# -----------------------------------------------------------------------------
# Key Bindings
# -----------------------------------------------------------------------------

# Change prefix from Ctrl-b to Ctrl-a (easier to reach)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload config with prefix + r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and - (more intuitive)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Create new window in current path
bind c new-window -c "#{pane_current_path}"

# Navigate panes with vim keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with vim keys (repeatable)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Navigate windows
bind -r C-h previous-window
bind -r C-l next-window

# Swap windows
bind -r "<" swap-window -d -t -1
bind -r ">" swap-window -d -t +1

# Toggle synchronize panes (type in all panes at once)
bind S setw synchronize-panes

# Kill pane/window without confirmation
bind x kill-pane
bind X kill-window

# -----------------------------------------------------------------------------
# Copy Mode (vi-style)
# -----------------------------------------------------------------------------

# Use vi keys in copy mode
setw -g mode-keys vi

# Enter copy mode with prefix + [
bind [ copy-mode

# vi-style selection and copy
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi Escape send -X cancel

# -----------------------------------------------------------------------------
# Status Bar
# -----------------------------------------------------------------------------

# Update status bar every second
set -g status-interval 1

# Status bar position
set -g status-position bottom

# Status bar colors
set -g status-style "bg=#1a1b26,fg=#a9b1d6"

# Left side: session name
set -g status-left-length 30
set -g status-left "#[fg=#7aa2f7,bold] #S #[fg=#565f89]│ "

# Right side: date and time
set -g status-right-length 50
set -g status-right "#[fg=#565f89]│ #[fg=#9ece6a]%Y-%m-%d #[fg=#565f89]│ #[fg=#7aa2f7]%H:%M "

# Window status
set -g window-status-format "#[fg=#565f89] #I:#W "
set -g window-status-current-format "#[fg=#7aa2f7,bold] #I:#W "
set -g window-status-separator ""

# Pane border colors
set -g pane-border-style "fg=#565f89"
set -g pane-active-border-style "fg=#7aa2f7"

# Message style
set -g message-style "bg=#1a1b26,fg=#7aa2f7"

# -----------------------------------------------------------------------------
# Activity Monitoring
# -----------------------------------------------------------------------------

# Notify on activity in other windows
setw -g monitor-activity on
set -g visual-activity off
