#应用实例 魔方
import turtleGL,numpy,math,turtle
line = [[[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0]], '#000000'], 
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0]], '#000000'], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0]], '#000000'], 
        [[[50.0, -50.0, -50.0], [50.0, 50.0, -50.0]], '#000000'], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0]], '#000000'], 
        [[[-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0]], '#000000'],
        [[[-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], '#000000'], 
        [[[50.0, -50.0, 50.0], [50.0, 50.0, 50.0]], '#000000'], 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0]], '#000000'], 
        [[[-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0]], '#000000'], 
        [[[-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0]], '#000000'], 
        [[[50.0, -50.0, -50.0], [50.0, -50.0, 50.0]], '#000000']]

face = [[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"], 
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]

camera = turtleGL.camera()
camera.camera_position = [300,250,300]
camera.to_target([0,0,0])
camera.camera_focal = 200
camera.ray = [-1,1,-1]
camera.type = 1
camera.rend = 1
cubes = []
for i in range(27):#块对象数组
    cube = turtleGL.scene()
    cube.center=[0,0,0]#设置中心点属性
    cubes.append(cube)

#面定义(3*3*6)
cubes[0].face=[
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"]]
cubes[0].generate_line()#边线生成
cubes[0].move([100,100,100])#平移
cubes[1].face=[ 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"]]
cubes[1].generate_line()
cubes[1].move([100,0,100])
cubes[2].face=[ 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[2].generate_line()
cubes[2].move([100,-100,100])
cubes[3].face=[
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"]]
cubes[3].generate_line()
cubes[3].move([0,100,100])
cubes[4].face=[
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"]]
cubes[0].generate_line()
cubes[4].move([0,0,100])
cubes[5].face=[
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[5].generate_line()
cubes[5].move([0,-100,100])
cubes[6].face=[
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"]]
cubes[6].generate_line()
cubes[6].move([-100,100,100])
cubes[7].face=[
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"]]
cubes[7].generate_line()
cubes[7].move([-100,0,100])
cubes[8].face=[
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[50.0, 50.0, 50.0], [-50.0, 50.0, 50.0], [-50.0, -50.0, 50.0], [50.0, -50.0, 50.0]], "#FFFF00"], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[8].generate_line()
cubes[8].move([-100,-100,100])
cubes[9].face=[
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"]]
cubes[9].generate_line()
cubes[9].move([100,100,0])
cubes[10].face=[
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"]]
cubes[10].generate_line()
cubes[10].move([100,0,0])
cubes[11].face=[
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"],
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[11].generate_line()
cubes[11].move([100,-100,0])
cubes[12].face=[
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"]]
cubes[12].generate_line()
cubes[12].move([0,100,0])
cubes[14].face=[
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[14].generate_line()
cubes[14].move([0,-100,0])
cubes[15].face=[
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"]]
cubes[15].generate_line()
cubes[15].move([-100,100,0])
cubes[16].face=[
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"]]
cubes[16].generate_line()
cubes[16].move([-100,0,0])
cubes[17].face=[
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"],
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[17].generate_line()
cubes[17].move([-100,-100,0])
cubes[18].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"]]
cubes[18].generate_line()
cubes[18].move([100,100,-100])
cubes[19].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"]]
cubes[19].generate_line()
cubes[19].move([100,0,-100])
cubes[20].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[50.0, 50.0, -50.0], [50.0, 50.0, 50.0], [50.0, -50.0, 50.0], [50.0, -50.0, -50.0]], "#FF0000"],
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[20].generate_line()
cubes[20].move([100,-100,-100])
cubes[21].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"]]
cubes[21].generate_line()
cubes[21].move([0,100,-100])
cubes[22].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"]]
cubes[22].generate_line()
cubes[22].move([0,0,-100])
cubes[23].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[23].generate_line()
cubes[23].move([0,-100,-100])
cubes[24].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[50.0, 50.0, -50.0], [-50.0, 50.0, -50.0], [-50.0, 50.0, 50.0], [50.0, 50.0, 50.0]], "#0000FF"]]
cubes[24].generate_line()
cubes[24].move([-100,100,-100])
cubes[25].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"]]
cubes[25].generate_line()
cubes[25].move([-100,0,-100])
cubes[26].face=[[[[50.0, -50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, 50.0, -50.0], [50.0, 50.0, -50.0]], "#AAAAAA"], 
        [[[-50.0, 50.0, -50.0], [-50.0, -50.0, -50.0], [-50.0, -50.0, 50.0], [-50.0, 50.0, 50.0]], "#FF8000"], 
        [[[-50.0, -50.0, -50.0], [50.0, -50.0, -50.0], [50.0, -50.0, 50.0], [-50.0, -50.0, 50.0]], "#00FF00"]]
cubes[26].generate_line()
cubes[26].move([-100,-100,-100])

def rotate(c,step):
    global cubes
    if c == 'U':
        for i in cubes:
            if abs(i.center[2]-100) < 10:
                i.rotate([0,0,numpy.pi/2/step],[0,0,0])#旋转
    if c == 'D':
        for i in cubes:
            if abs(i.center[2]+100) < 10:
                i.rotate([0,0,-numpy.pi/2/step],[0,0,0])
    if c == 'R':
        for i in cubes:
            if abs(i.center[1]-100) < 10:
                i.rotate([0,numpy.pi/2/step,0],[0,0,0])
    if c == 'L':
        for i in cubes:
            if abs(i.center[1]+100) < 10:
                i.rotate([0,-numpy.pi/2/step,0],[0,0,0])
    if c == 'F':
        for i in cubes:
            if abs(i.center[0]-100) < 10:
                i.rotate([numpy.pi/2/step,0,0],[0,0,0])
    if c == 'B':
        for i in cubes:
            if abs(i.center[0]+100) < 10:
                i.rotate([-numpy.pi/2/step,0,0],[0,0,0])

scene = turtleGL.scene()#显示用场景对象

r = 45#全局变量倾斜角
h = 300#全集变量高度角
step = 5

def mhu():
    global h
    h += 20

def mhd():
    global h
    h -= 20

def mrl():
    global r
    r -= 10

def mrr():
    global r
    r += 10

def ru():
    global cubes
    global scene
    rotate('U',step)
    scene.face = []
    scene.line = []
    for i in cubes:
        for j in i.face:
            scene.face.append(j)
        for j in i.line:
            scene.line.append(j)

def rd():
    global cubes
    global scene
    rotate('D',step)
    scene.face = []
    scene.line = []
    for i in cubes:
        for j in i.face:
            scene.face.append(j)
        for j in i.line:
            scene.line.append(j)

def rf():
    global cubes
    global scene
    rotate('F',step)
    scene.face = []
    scene.line = []
    for i in cubes:
        for j in i.face:
            scene.face.append(j)
        for j in i.line:
            scene.line.append(j)

def rb():
    global cubes
    global scene
    rotate('B',step)
    scene.face = []
    scene.line = []
    for i in cubes:
        for j in i.face:
            scene.face.append(j)
        for j in i.line:
            scene.line.append(j)

def rl():
    global cubes
    global scene
    rotate('L',step)
    scene.face = []
    scene.line = []
    for i in cubes:
        for j in i.face:
            scene.face.append(j)
        for j in i.line:
            scene.line.append(j)

def rr():
    global cubes
    global scene
    rotate('R',step)
    scene.face = []
    scene.line = []
    for i in cubes:
        for j in i.face:
            scene.face.append(j)
        for j in i.line:
            scene.line.append(j)

#按键绑定
turtle.onkey(mhu,'Up')
turtle.onkey(mhd,'Down')
turtle.onkey(mrl,'Left')
turtle.onkey(mrr,'Right')
turtle.onkey(ru,'u')
turtle.onkey(rd,'d')
turtle.onkey(rf,'f')
turtle.onkey(rb,'b')
turtle.onkey(rl,'l')
turtle.onkey(rr,'r')
turtle.listen()

scene.face == []
scene.line == []
for i in cubes:
    for j in i.face:
        scene.face.append(j)
    for j in i.line:
        scene.line.append(j)

while True:
    camera.clear()
    camera.camera_position = [500*math.cos(math.radians(r)),500*math.sin(math.radians(r)),h]
    camera.to_target([0,0,0])
    camera.draw_from_scene(scene.sort_all_avg(camera.camera_position))
    camera.update()
