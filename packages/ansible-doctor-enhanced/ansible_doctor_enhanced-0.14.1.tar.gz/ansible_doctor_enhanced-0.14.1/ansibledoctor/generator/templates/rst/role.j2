{% if sphinx_compat is not defined %}{% set sphinx_compat = true %}{% endif -%}
{# Breadcrumb navigation -#}
{% include '_breadcrumb.j2' ignore missing -%}

{{ role_name | rst_escape }}
{{ '=' * (role_name | rst_escape | length) }}

{% if role_description %}
{{ role_description | rst_escape }}
{% endif %}

:Generated: {{ generation_date.strftime('%Y-%m-%d %H:%M') }}
:Version: {{ generator_version }}

.. contents:: Table of Contents
   :depth: 2
   :local:

----

Overview
========

**Role Name:** ``{{ role_name | rst_escape }}``

{% if role.metadata.author %}**Author:** {{ role.metadata.author | rst_escape }}{% endif %}

{% if role.metadata.license %}**License:** {{ role.metadata.license }}{% endif %}

{% if role.metadata.platforms %}
Platforms
---------

{% for platform in role.metadata.platforms %}
- {{ platform.name }}{% if platform.versions %} ({{ platform.versions | join(', ') }}){% endif %}

{% endfor %}
{% endif %}

{% if role.metadata.dependencies %}
Dependencies
------------

{% for dep in role.metadata.dependencies %}
- ``{{ dep }}``
{% endfor %}
{% endif %}

----

{% if has_variables %}
Variables
=========

{% if variable_count == 0 %}
No variables defined.
{% else %}
{{ variable_count }} variable(s) defined:

{% for var in role.variables %}
``{{ var.name | rst_escape }}``
{{ '-' * ((var.name | rst_escape | length) + 4) }}

{% if var.description %}
{{ var.description | rst_escape }}
{% endif %}

:Type: ``{{ var.type if var.type else 'any' }}``
:Required: {{ 'Yes' if var.required else 'No' }}
:Value: {% if var.value %}``{{ var.value | rst_escape }}``{% else %}*(not set)*{% endif %}
{% if var.file_path %}:Source: ``{{ var.file_path }}:{{ var.line_number }}``{% endif %}


{% endfor %}
{% endif %}
{% endif %}

{% if has_tags %}
----

Tags
====

{% if tag_count == 0 %}
No tags defined.
{% else %}
{{ tag_count }} tag(s) available:

{% for tag in role.tags %}
``{{ tag.name | rst_escape }}``
{{ '-' * ((tag.name | rst_escape | length) + 4) }}

{% if tag.description %}
{{ tag.description | rst_escape }}
{% endif %}

:Usage Count: {{ tag.usage_count }}
:Locations:
{% for location in tag.file_locations %}
  - ``{{ location }}``
{% endfor %}


{% endfor %}
{% endif %}
{% endif %}

{% if role.handlers %}
----

Handlers
========

{% set handler_count = role.handlers | length %}
{% if handler_count == 0 %}
No handlers defined.
{% else %}
{{ handler_count }} handler(s) available:

{% for handler in role.handlers %}
``{{ handler.name | rst_escape }}``
{{ '-' * ((handler.name | rst_escape | length) + 4) }}

{% if handler.tags %}
**Tags:** {% for tag in handler.tags %}``{{ tag }}``{% if not loop.last %}, {% endif %}{% endfor %}
{% endif %}

{% if handler.listen %}
**Listen:** {% for listen_name in handler.listen %}``{{ listen_name | rst_escape }}``{% if not loop.last %}, {% endif %}{% endfor %}
{% endif %}

**Source:** ``{{ handler.file_path }}:{{ handler.line_number }}``

{% endfor %}
{% endif %}
{% endif %}

{% if has_todos %}
----

TODOs
=====

{% if todo_count == 0 %}
No TODOs found.
{% else %}
{{ todo_count }} TODO(s):

{% for todo in role.todos %}
{% if sphinx_compat and todo.priority in ['high', 'critical'] %}
.. warning:: {{ todo.description | rst_escape }}

   :Priority: {{ todo.priority | upper }}
   :Location: ``{{ todo.file_path }}:{{ todo.line_number }}``

{% else %}
- {{ todo.priority | format_priority }} **{{ todo.description | rst_escape }}** (``{{ todo.file_path }}:{{ todo.line_number }}``)
{% endif %}
{% endfor %}
{% endif %}
{% endif %}

{% if has_examples %}
----

Examples
========

{% if example_count == 0 %}
No examples provided.
{% else %}
{{ example_count }} example(s):

{% for example in role.examples %}
{{ example.title | rst_escape }}
{{ '-' * (example.title | rst_escape | length) }}

{% if example.description %}
{{ example.description | rst_escape }}
{% endif %}

.. code-block:: {{ example.language }}

{{ example.code | indent(3, first=True) }}

{% endfor %}
{% endif %}
{% endif %}

{% if role.existing_docs %}
----

Documentation
=============

{% if role.existing_docs.readme_content %}
README
------

{% if role.existing_docs.readme_format %}
*Format: {{ role.existing_docs.readme_format | upper }}*
{% endif %}

.. code-block:: text

{{ role.existing_docs.readme_content | indent(3, first=True) }}

{% endif %}

{% if role.existing_docs.license_content %}
License
-------

{% if role.existing_docs.license_type %}
**License Type:** {{ role.existing_docs.license_type }}
{% endif %}

.. code-block:: text

{{ role.existing_docs.license_content | indent(3, first=True) }}

{% endif %}

{% if role.existing_docs.templates_list %}
Templates
---------

Available Jinja2 templates:

{% for template in role.existing_docs.templates_list %}
- ``{{ template }}``
{% endfor %}

{% endif %}

{% if role.existing_docs.files_list %}
Static Files
------------

Available static files:

{% for file in role.existing_docs.files_list %}
- ``{{ file }}``
{% endfor %}

{% endif %}
{% endif %}

{# Sibling navigation #}
{% include '_siblings.j2' ignore missing %}

----

.. note::
   Documentation generated by **ansible-doctor-enhanced** v{{ generator_version }}
