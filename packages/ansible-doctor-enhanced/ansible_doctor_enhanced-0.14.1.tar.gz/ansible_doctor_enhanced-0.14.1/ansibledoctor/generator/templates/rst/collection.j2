{% set collection_fqcn = fqcn if fqcn is defined else metadata.namespace ~ '.' ~ metadata.name %}
{{ collection_fqcn | rst_escape }}
{{ '=' * (collection_fqcn | rst_escape | length) }}

{% if description is defined and description %}
{{ description }}
{% endif %}

:Version: {{ metadata.version }}
{% if generation_date is defined and generation_date %}:Generated: {{ generation_date.strftime('%Y-%m-%d %H:%M') }}{% endif %}

----

.. contents:: Table of Contents
   :depth: 2
   :local:

----

Overview
========

**Collection:** ``{{ collection_fqcn }}``

**Version:** {{ metadata.version }}

**Namespace:** {{ metadata.namespace }}

**Name:** {{ metadata.name }}

{% if metadata.authors %}
**Authors:**

{% for author in metadata.authors %}
- {{ author }}
{% endfor %}
{% endif %}

{% if description is defined and description %}
{{ description }}
{% endif %}

----

Installation
============

Install this collection using ``ansible-galaxy``:

.. code-block:: bash

   ansible-galaxy collection install {{ collection_fqcn }}

Install specific version:

.. code-block:: bash

   ansible-galaxy collection install {{ collection_fqcn }}:{{ metadata.version }}

Upgrade to latest version:

.. code-block:: bash

   ansible-galaxy collection install {{ collection_fqcn }} --upgrade

----

{% if roles is defined and roles %}
Roles
=====

{% for role in roles %}
{% set role_fqn = collection_fqcn ~ '.' ~ role.name %}
{{ role_fqn | rst_escape }}
{{ '-' * (role_fqn | rst_escape | length) }}

{% if role.description %}{{ role.description }}{% endif %}

{% endfor %}
{% endif %}

----

{% if plugins_by_type is defined and plugins_by_type %}
Plugins
=======

{% for plugin_type, plugin_list in plugins_by_type.items() %}
{{ plugin_type.value | capitalize }}s
{{ '-' * ((plugin_type.value ~ 's') | length) }}

{% for plugin in plugin_list %}
- **{{ plugin.name }}**{% if plugin.short_description %}: {{ plugin.short_description }}{% endif %}
{% endfor %}

{% endfor %}
{% endif %}

----

{% if metadata.dependencies %}
Dependencies
============

.. list-table::
   :header-rows: 1
   :widths: 50 50

   * - Collection
     - Version Constraint
{% for dep_name, dep_version in metadata.dependencies.items() %}
   * - ``{{ dep_name }}``
     - ``{{ dep_version }}``
{% endfor %}

----
{% endif %}

{% if examples is defined and examples %}
Examples
========

{% for example in examples %}
{{ example.title | rst_escape }}
{{ '-' * (example.title | rst_escape | length) }}

{% if example.description %}{{ example.description }}{% endif %}

.. code-block:: yaml

   {{ example.content | indent(3) }}

{% endfor %}
{% endif %}

----

Footer
======

Generated by **ansible-doctor-enhanced**{% if generator_version is defined and generator_version %} {{ generator_version }}{% endif %}
