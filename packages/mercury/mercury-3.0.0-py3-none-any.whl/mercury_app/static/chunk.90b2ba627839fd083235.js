"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2068,9687],{99687(e,n,t){t.r(n),t.d(n,{ConflatableMessage:()=>a,Message:()=>o,MessageLoop:()=>l});var l,r=t(55846),s=t(18538);class o{constructor(e){this.type=e}get isConflatable(){return!1}conflate(e){return!1}}class a extends o{get isConflatable(){return!0}conflate(e){return!0}}!function(e){let n=null;const t=(l=Promise.resolve(),e=>{let n=!1;return l.then(()=>!n&&e()),()=>{n=!0}});var l;function o(e,n){let t=u.get(e);if(!t||0===t.length)return void g(e,n);let l=(0,r.every)((0,r.retro)(t),t=>!t||function(e,n,t){let l=!0;try{l="function"==typeof e?e(n,t):e.messageHook(n,t)}catch(e){f(e)}return l}(t,e,n));l&&g(e,n)}e.sendMessage=o,e.postMessage=function(e,n){n.isConflatable&&(0,r.some)(a,t=>t.handler===e&&!!t.msg&&t.msg.type===n.type&&!!t.msg.isConflatable&&t.msg.conflate(n))||d(e,n)},e.installMessageHook=function(e,n){let t=u.get(e);t&&-1!==t.indexOf(n)||(t?t.push(n):u.set(e,[n]))},e.removeMessageHook=function(e,n){let t=u.get(e);if(!t)return;let l=t.indexOf(n);-1!==l&&(t[l]=null,m(t))},e.clearData=function(e){let n=u.get(e);n&&n.length>0&&(r.ArrayExt.fill(n,null),m(n));for(const n of a)n.handler===e&&(n.handler=null,n.msg=null)},e.flush=function(){i||null===n||(n(),n=null,i=!0,h(),i=!1)},e.getExceptionHandler=function(){return f},e.setExceptionHandler=function(e){let n=f;return f=e,n};const a=new s.LinkedList,u=new WeakMap,c=new Set;let f=e=>{console.error(e)},i=!1;function g(e,n){try{e.processMessage(n)}catch(e){f(e)}}function d(e,l){a.addLast({handler:e,msg:l}),null===n&&(n=t(h))}function h(){if(n=null,a.isEmpty)return;let e={handler:null,msg:null};for(a.addLast(e);;){let n=a.removeFirst();if(n===e)return;n.handler&&n.msg&&o(n.handler,n.msg)}}function m(e){0===c.size&&t(p),c.add(e)}function p(){c.forEach(y),c.clear()}function y(e){r.ArrayExt.removeAllWhere(e,E)}function E(e){return null===e}}(l||(l={}))}}]);