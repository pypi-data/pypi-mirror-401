"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[6999,9380],{86999(e,o,t){t.r(o),t.d(o,{default:()=>I,lineColItem:()=>j});var n,r=t(42597),i=t(78809),d=t(55199),l=t(28395),a=t(51009),s=t(34432),c=t(23256),u=t(23569),m=t(61960);!function(e){e.deleteLine="codemirror:delete-line",e.toggleBlockComment="codemirror:toggle-block-comment",e.toggleComment="codemirror:toggle-comment",e.selectNextOccurrence="codemirror:select-next-occurrence",e.toggleTabFocusMode="codemirror:toggle-tab-focus-mode",e.foldCurrent="codemirror:fold-current",e.unfoldCurrent="codemirror:unfold-current",e.foldSubregions="codemirror:fold-subregions",e.unfoldSubregions="codemirror:unfold-subregions",e.foldAll="codemirror:fold-all",e.unfoldAll="codemirror:unfold-all"}(n||(n={}));const g=".cm-content",f={id:"@jupyterlab/codemirror-extension:commands",description:"Registers commands acting on selected/active CodeMirror editor.",autoStart:!0,requires:[u.INotebookTracker],optional:[l.ITranslator,m.ICommandPalette],activate:(e,o,t,r)=>{const i=(t=null!=t?t:l.nullTranslator).load("jupyterlab"),d=e=>e.classList.contains(g),u=()=>{var o,t;const n=null!==(o=e.contextMenuHitTest(d))&&void 0!==o?o:null===(t=document.activeElement)||void 0===t?void 0:t.closest(g);if(n&&"cmView"in n)return n.cmView.view},m=()=>!!u(),f=()=>{var t,n;const r=e.shell.currentWidget,i=null===(t=o.currentWidget)||void 0===t?void 0:t.content;if(null!==o.currentWidget&&o.currentWidget===r&&i&&i.activeCell)return{type:"notebook",widget:r,notebook:i,isEnabled:!0};const d=r;return d&&d.content&&"function"==typeof(null===(n=d.content.editor)||void 0===n?void 0:n.focus)?{type:"fileEditor",widget:d,isEnabled:!0}:{type:"none",widget:null,isEnabled:!1}},b=()=>f().isEnabled;if(e.commands.addCommand(n.deleteLine,{label:i.__("Delete the current line"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{const e=u();e&&(0,a.deleteLine)(e)},isEnabled:m}),e.commands.addCommand(n.toggleBlockComment,{label:i.__("Toggle Block Comment"),caption:i.__("Toggles block comments in languages which support it (e.g. C, JavaScript)"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{const e=u();e&&(0,a.toggleBlockComment)(e)},isEnabled:m}),e.commands.addCommand(n.toggleComment,{label:i.__("Toggle Comment"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{const e=u();e&&(0,a.toggleComment)(e)},isEnabled:m}),e.commands.addCommand(n.toggleTabFocusMode,{label:i.__("Toggle Tab Focus Mode"),caption:i.__("Toggles behavior of Tab key between inserting indentation and moving to next focusable element"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{const e=u();e&&(0,a.toggleTabFocusMode)(e)},isEnabled:m}),e.commands.addCommand(n.selectNextOccurrence,{label:i.__("Select Next Occurrence"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{const e=u();e&&(0,c.selectNextOccurrence)(e)},isEnabled:m}),e.commands.addCommand(n.foldCurrent,{label:i.__("Fold Current Region"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{var e;const o=f();"notebook"===o.type?(o.notebook.mode="edit",o.notebook.activeCell&&(null===(e=o.notebook.activeCell.editor)||void 0===e||e.focus())):"fileEditor"===o.type&&o.widget.content.editor.focus();const t=u();if(!t)return;const{state:n}=t,r=n.selection.main.head,i=n.doc.lineAt(r);(0,s.foldable)(n,i.from,i.to)&&(0,s.foldCode)(t)},isEnabled:b}),e.commands.addCommand(n.unfoldCurrent,{label:i.__("Unfold Current Region"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{var e;const o=f();"notebook"===o.type?(o.notebook.mode="edit",o.notebook.activeCell&&(null===(e=o.notebook.activeCell.editor)||void 0===e||e.focus())):"fileEditor"===o.type&&o.widget.content.editor.focus();const t=u();if(!t)return;const{state:n}=t,r=n.selection.main.head,i=n.doc.lineAt(r);(0,s.foldable)(n,i.from,i.to)&&(0,s.unfoldCode)(t)},isEnabled:b}),e.commands.addCommand(n.foldSubregions,{label:i.__("Fold All Subregions"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{var e;const o=f();"notebook"===o.type?(o.notebook.mode="edit",o.notebook.activeCell&&(null===(e=o.notebook.activeCell.editor)||void 0===e||e.focus())):"fileEditor"===o.type&&o.widget.content.editor.focus();const t=u();if(t)try{const{state:e}=t,o=e.selection.main.head,n=e.doc.lineAt(o),r=(0,s.foldable)(e,n.from,n.to);let i=!1;try{i=void 0!==e.field(s.foldState,!1)}catch(e){i=!1}if(i||((0,s.foldCode)(t),(0,s.unfoldCode)(t)),!r)return;const d=[];let l=r.from+1;for(;l<r.to;){const o=e.doc.lineAt(l),t=(0,s.foldable)(e,o.from,o.to);t&&t.from>r.from&&t.to<=r.to?(d.push(s.foldEffect.of(t)),l=t.to):l=o.to+1}d.length>0&&t.dispatch({effects:d})}catch(e){}},isEnabled:b}),e.commands.addCommand(n.unfoldSubregions,{label:i.__("Unfold All Subregions"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{var e;const o=f();"notebook"===o.type?(o.notebook.mode="edit",o.notebook.activeCell&&(null===(e=o.notebook.activeCell.editor)||void 0===e||e.focus())):"fileEditor"===o.type&&o.widget.content.editor.focus();const t=u();if(t)try{const{state:e}=t,o=e.selection.main.head,n=e.doc.lineAt(o),r=(0,s.foldable)(e,n.from,n.to);if(!r)return;const i=e.field(s.foldState,!1);if(!i)return;const d=[];i.between(r.from+1,r.to,(e,o)=>{e>r.from&&o<=r.to&&d.push(s.unfoldEffect.of({from:e,to:o}))}),d.length>0&&t.dispatch({effects:d})}catch(e){}},isEnabled:b}),e.commands.addCommand(n.foldAll,{label:i.__("Fold All Regions"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{var e;const o=f();"notebook"===o.type?(o.notebook.mode="edit",o.notebook.activeCell&&(null===(e=o.notebook.activeCell.editor)||void 0===e||e.focus())):"fileEditor"===o.type&&o.widget.content.editor.focus();const t=u();if(t)try{(0,s.foldAll)(t)}catch(e){}},isEnabled:b}),e.commands.addCommand(n.unfoldAll,{label:i.__("Unfold All Regions"),describedBy:{args:{type:"object",properties:{}}},execute:()=>{var e;const o=f();"notebook"===o.type?(o.notebook.mode="edit",o.notebook.activeCell&&(null===(e=o.notebook.activeCell.editor)||void 0===e||e.focus())):"fileEditor"===o.type&&o.widget.content.editor.focus();const t=u();if(t)try{(0,s.unfoldAll)(t)}catch(e){}},isEnabled:b}),r){const e=i.__("File Operations");[n.foldCurrent,n.unfoldCurrent,n.foldSubregions,n.unfoldSubregions,n.foldAll,n.unfoldAll].forEach(o=>{r.addItem({command:o,category:e})})}}};var b=t(1101),p=t(88019),y=t(92410),v=t(25884),h=t(50992),C=t.n(h),E=t(73232),x=t.n(E);const k="@jupyterlab/codemirror-extension:plugin",T={id:"@jupyterlab/codemirror-extension:languages",description:"Provides the CodeMirror languages registry.",provides:b.IEditorLanguageRegistry,optional:[l.ITranslator],activate:(e,o)=>{const n=new b.EditorLanguageRegistry;for(const e of b.EditorLanguageRegistry.getDefaultLanguages(o))n.addLanguage(e);return n.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>{const[e,o,r]=await Promise.all([t.e(8693).then(t.t.bind(t,28693,23)),t.e(4810).then(t.bind(t,2429)),t.e(3358).then(t.bind(t,73358))]),i=e.markdown({base:e.markdownLanguage,codeLanguages:e=>n.findBest(e),extensions:[(0,b.parseMathIPython)(s.StreamLanguage.define(r.stexMath).parser)]});return new s.LanguageSupport(i.language,[i.support,(0,b.pythonBuiltin)(o.pythonLanguage)])}}),n}},_={id:"@jupyterlab/codemirror-extension:themes",description:"Provides the CodeMirror theme registry",provides:b.IEditorThemeRegistry,optional:[l.ITranslator],activate:(e,o)=>{const t=new b.EditorThemeRegistry;for(const e of b.EditorThemeRegistry.getDefaultThemes(o))t.addTheme(e);return t}},w={id:"@jupyterlab/codemirror-extension:extensions",description:"Provides the CodeMirror extension factory registry.",provides:b.IEditorExtensionRegistry,requires:[b.IEditorThemeRegistry],optional:[l.ITranslator,p.ISettingRegistry,y.IFormRendererRegistry],activate:(e,o,t,n,r)=>{const i=new b.EditorExtensionRegistry;for(const e of b.EditorExtensionRegistry.getDefaultExtensions({themes:o,translator:t}))i.addExtension(e);if(n){const o=e=>{var o;i.baseConfiguration=null!==(o=e.get("defaultConfig").composite)&&void 0!==o?o:{}};Promise.all([n.load(k),e.restored]).then(([e])=>{o(e),e.changed.connect(o)}),null==r||r.addRenderer(`${k}.defaultConfig`,{fieldRenderer:e=>{let o;const n=x().useMemo(()=>i.settingsSchema,[]);o=e.name in e.formContext.defaultFormData?e.formContext.defaultFormData[e.name]:{};for(const[e,t]of Object.entries(i.defaultConfiguration))void 0===n[e]||e in o||(o[e]=t);return x().createElement("div",{className:"jp-FormGroup-contentNormal"},x().createElement("h3",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},e.schema.title),e.schema.description&&x().createElement("div",{className:"jp-FormGroup-description"},e.schema.description),x().createElement(y.FormComponent,{schema:{title:e.schema.title,description:e.schema.description,type:"object",properties:n,additionalProperties:!1},validator:C(),formData:{...o,...e.formData},formContext:{defaultFormData:o},liveValidate:!0,onChange:t=>{var n;const r={};for(const[e,i]of Object.entries(null!==(n=t.formData)&&void 0!==n?n:{})){const t=o[e];void 0!==t&&v.JSONExt.deepEqual(i,t)||(r[e]=i)}e.onChange(r)},tagName:"div",translator:null!=t?t:l.nullTranslator}))}})}return i}},R={id:"@jupyterlab/codemirror-extension:binding",description:"Register the CodeMirror extension factory binding the editor and the shared model.",autoStart:!0,requires:[b.IEditorExtensionRegistry],activate:(e,o)=>{o.addExtension({name:"shared-model-binding",factory:e=>{var o;const t=e.model.sharedModel;return b.EditorExtensionRegistry.createImmutableExtension((0,b.ybinding)({ytext:t.ysource,undoManager:null!==(o=t.undoManager)&&void 0!==o?o:void 0}))}})}},S={id:"@jupyterlab/codemirror-extension:services",description:"Provides the service to instantiate CodeMirror editors.",provides:i.IEditorServices,requires:[b.IEditorLanguageRegistry,b.IEditorExtensionRegistry],optional:[l.ITranslator],activate:(e,o,t,n)=>({factoryService:new b.CodeMirrorEditorFactory({extensions:t,languages:o,translator:null!=n?n:l.nullTranslator}),mimeTypeService:new b.CodeMirrorMimeTypeService(o)})},j={id:"@jupyterlab/codemirror-extension:line-col-status",description:"Provides the code editor cursor position model.",autoStart:!0,requires:[l.ITranslator],optional:[r.ILabShell,d.IStatusBar],provides:i.IPositionModel,activate:(e,o,t,n)=>{const r=new i.LineCol(o),d=new Set;function l(e,o){Promise.all([...d].map(e=>e(o.newValue))).then(e=>{var o;r.model.editor=null!==(o=e.filter(e=>null!==e)[0])&&void 0!==o?o:null}).catch(e=>{console.error("Get editors",e)})}return n&&n.registerStatusItem(j.id,{priority:1,item:r,align:"right",rank:2,isActive:()=>!!r.model.editor}),t&&t.currentChanged.connect(l),{addEditorProvider:o=>{d.add(o),e.shell.currentWidget&&l(e.shell,{newValue:e.shell.currentWidget,oldValue:null})},update:()=>{l(e.shell,{oldValue:e.shell.currentWidget,newValue:e.shell.currentWidget})}}}},I=[f,T,_,R,w,S,j]}}]);