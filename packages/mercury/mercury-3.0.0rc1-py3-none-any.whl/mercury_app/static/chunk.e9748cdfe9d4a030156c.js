"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[3215,5596],{7470(e,t,n){var a=n(63476);t.H=a.createRoot,a.hydrateRoot},25596(e,t,n){n.r(t),n.d(t,{default:()=>me,kernelSettings:()=>ue,toggleHeader:()=>re});var a=n(42597),o=n(61960),s=n(73475),i=n(59915),r=n(88019),l=n(18387),c=n(28395),d=n(92410),p=n(25884),u=n(82336),m=n(48390),h=n(19172);const g="help:open",b="https://jupyterlab.readthedocs.io/en/stable/privacy_policies.html";async function y(e,t={},n){const a=null!=n?n:h.ServerConnection.makeSettings(),o=s.URLExt.join(a.baseUrl,e);let i;try{i=await h.ServerConnection.makeRequest(o,t,a)}catch(e){throw new h.ServerConnection.NetworkError(e)}const r=await i.json();if(!i.ok)throw new h.ServerConnection.ResponseError(i,r.message);return r}const f={id:"@jupyterlab/apputils-extension:announcements",description:"Add the announcement feature. It will fetch news on the internet and check for application updates.",autoStart:!0,optional:[h.IConfigSectionManager,r.ISettingRegistry,c.ITranslator],activate:(e,t,n,a)=>{var s,i;const r=f.id.replace(/[^\w]/g,"");Promise.all([e.restored,null!==(s=null==n?void 0:n.load("@jupyterlab/apputils-extension:notification"))&&void 0!==s?s:Promise.resolve(null),null!==(i=null==t?void 0:t.create({name:r}))&&void 0!==i?i:Promise.resolve(null)]).then(async([t,n,s])=>{const i=(null!=a?a:c.nullTranslator).load("jupyterlab");if(o.Notification.manager.changed.connect((e,t)=>{var n;if("removed"!==t.type)return;const{id:a,tags:o}=null!==(n=t.notification.options.data)&&void 0!==n?n:{};if((null!=o?o:[]).some(e=>["news","update"].includes(e))&&a){const e={};e[a]={seen:!0,dismissed:!0},null==s||s.update(e).catch(e=>{console.error(`Failed to update the announcements config:\n${e}`)})}}),"none"===(null==n?void 0:n.get("fetchNews").composite)){const t=o.Notification.emit(i.__("Would you like to get notified about official Jupyter news?"),"default",{autoClose:!1,actions:[{label:i.__("Open privacy policy"),caption:b,callback:t=>{t.preventDefault(),e.commands.hasCommand(g)?e.commands.execute(g,{text:i.__("Privacy policies"),url:b}):window.open(b,"_blank","noreferrer")},displayType:"link"},{label:i.__("Yes"),callback:()=>{o.Notification.dismiss(t),null==s||s.update({}).then(()=>r()).catch(e=>{console.error(`Failed to get the news:\n${e}`)}),null==n||n.set("fetchNews","true").catch(e=>{console.error(`Failed to save setting 'fetchNews':\n${e}`)})}},{label:i.__("No"),callback:()=>{o.Notification.dismiss(t),null==n||n.set("fetchNews","false").catch(e=>{console.error(`Failed to save setting 'fetchNews':\n${e}`)})}}]})}else await r();async function r(){var t,a,r,l;if("true"===(null!==(t=null==n?void 0:n.get("fetchNews").composite)&&void 0!==t?t:"false"))try{const t=await y("/lab/api/news",{},e.serviceManager.serverSettings);for(const{link:e,message:n,type:r,options:l}of t.news){const t=l.data.id,c=null!==(a=null==s?void 0:s.data[t])&&void 0!==a?a:{seen:!1,dismissed:!1};if(!c.dismissed){if(l.actions=[{label:i.__("Hide"),caption:i.__("Never show this notification again."),callback:()=>{const e={};e[t]={seen:!0,dismissed:!0},null==s||s.update(e).catch(e=>{console.error(`Failed to update the announcements config:\n${e}`)})}}],2===(null==e?void 0:e.length)&&l.actions.push({label:e[0],caption:e[1],callback:()=>{window.open(e[1],"_blank","noreferrer")},displayType:"link"}),!c.seen){l.autoClose=5e3;const e={};e[t]={seen:!0},null==s||s.update(e).catch(e=>{console.error(`Failed to update the announcements config:\n${e}`)})}o.Notification.emit(n,r,l)}}}catch(e){console.log("Failed to get the announcements.",e)}if(null===(r=null==n?void 0:n.get("checkForUpdates").composite)||void 0===r||r){const t=await y("/lab/api/update",{},e.serviceManager.serverSettings);if(t.notification){const{link:e,message:a,type:r,options:c}=t.notification,d=c.data.id,p=null!==(l=null==s?void 0:s.data[d])&&void 0!==l?l:{seen:!1,dismissed:!1};if(!p.dismissed){let t;if(c.actions=[{label:i.__("Ignore all updates"),caption:i.__("Do not prompt me if a new JupyterLab version is available."),callback:()=>{null==n||n.set("checkForUpdates",!1).then(()=>{o.Notification.dismiss(t)}).catch(e=>{console.error("Failed to set the `checkForUpdates` setting.",e)})}}],2===(null==e?void 0:e.length)&&c.actions.push({label:e[0],caption:e[1],callback:()=>{window.open(e[1],"_blank","noreferrer")},displayType:"accent"}),!p.seen){c.autoClose=5e3;const e={};e[d]={seen:!0},null==s||s.update(e).catch(e=>{console.error(`Failed to update the announcements config:\n${e}`)})}t=o.Notification.emit(a,r,c)}}}}})}};var v,_=n(49885);!function(e){e.licenses="apputils:licenses",e.licenseReport="apputils:license-report",e.refreshLicenses="apputils:licenses-refresh"}(v||(v={}));const w={id:"@jupyterlab/apputils-extension:licenses-client",description:"The licenses client plugin for fetching licenses.",autoStart:!0,provides:o.ILicensesClient,activate:e=>{const t=e.serviceManager.serverSettings;return new o.Licenses.LicensesClient({serverSettings:t})}},k={id:"@jupyterlab/apputils-extension:licenses-plugin",description:"Adds licenses reporting tools.",requires:[o.ILicensesClient,c.ITranslator],optional:[a.ILayoutRestorer,_.IMainMenu,o.ICommandPalette],autoStart:!0,activate:(e,t,n,a,i,r)=>{const{commands:l,shell:c}=e,p=n.load("jupyterlab"),u=p.__("Help"),m=p.__("Download All Licenses as"),h=p.__("Refresh Licenses"),g="help-licenses",b=new o.WidgetTracker({namespace:g}),y=p.__("Licenses");let f=0;function _(e){return o.Licenses.REPORT_FORMATS[e]||o.Licenses.REPORT_FORMATS[o.Licenses.DEFAULT_FORMAT]}l.addCommand(v.licenses,{label:y,describedBy:{args:{type:"object",properties:{}}},execute:e=>{if(!s.PageConfig.getOption("licensesUrl"))return void console.warn("No license API available from the server");const n=function(e){const n=new o.Licenses.Model({...e,client:t,trans:p}),a=new o.Licenses({model:n});a.id=`${g}-${++f}`,a.title.label=y,a.title.icon=d.copyrightIcon;const s=new o.MainAreaWidget({content:a,reveal:n.licensesReady});s.toolbar.addItem("refresh-licenses",new d.CommandToolbarButton({id:v.refreshLicenses,args:{noLabel:1},commands:l})),s.toolbar.addItem("spacer",d.Toolbar.createSpacerItem());for(const e of Object.keys(o.Licenses.REPORT_FORMATS)){const t=new d.CommandToolbarButton({id:v.licenseReport,args:{format:e,noLabel:1},commands:l});s.toolbar.addItem(`download-${e}`,t)}return s}(e);return c.add(n,"main",{type:"Licenses"}),b.add(n),n.content.model.trackerDataChanged.connect(()=>{b.save(n)}),n}}),l.addCommand(v.refreshLicenses,{label:e=>e.noLabel?"":h,caption:h,icon:d.refreshIcon,describedBy:{args:{type:"object",properties:{noLabel:{oneOf:[{type:"boolean"},{type:"number"}],description:"Whether to hide the label (truthy values hide label)"}}}},execute:async()=>{var e;return null===(e=b.currentWidget)||void 0===e?void 0:e.content.model.initLicenses()}}),l.addCommand(v.licenseReport,{label:e=>{if(e.noLabel)return"";const t=_(`${e.format}`);return`${m} ${t.title}`},caption:e=>{const t=_(`${e.format}`);return`${m} ${t.title}`},icon:e=>_(`${e.format}`).icon,describedBy:{args:{type:"object",properties:{format:{type:"string",description:p.__("The report format to use for download")},noLabel:{oneOf:[{type:"boolean"},{type:"number"}],description:"Whether to hide the label (truthy values hide label)"}},required:["format"]}},execute:async e=>{var t;const n=_(`${e.format}`);return await(null===(t=b.currentWidget)||void 0===t?void 0:t.content.model.download({format:n.id}))}}),r&&r.addItem({command:v.licenses,category:u}),i&&i.helpMenu.addGroup([{command:v.licenses}],0),a&&a.restore(b,{command:v.licenses,name:e=>"licenses",args:e=>{const{currentBundleName:t,currentPackageIndex:n,packageFilter:a}=e.content.model;return{currentBundleName:t,currentPackageIndex:n,packageFilter:a}}})}};var S,C=n(55199),T=n(9521),j=n(73232),I=n(7470);function E(e){const{manager:t,onClose:n,trans:a}=e,[o,s]=j.useState([]),[i,r]=j.useState(null);return j.useEffect(()=>{async function e(){s(await Promise.all(t.notifications.map(async e=>Object.freeze({...e}))))}return o.length!==t.count&&e(),t.changed.connect(e),()=>{t.changed.disconnect(e)}},[t]),j.useEffect(()=>{R.getIcons().then(e=>{r(e)}).catch(e=>{console.error(`Failed to get react-toastify icons:\n${e}`)})},[]),j.createElement(d.UseSignal,{signal:t.changed},()=>j.createElement(j.Fragment,null,j.createElement("h2",{className:"jp-Notification-Header jp-Toolbar"},j.createElement("span",{className:"jp-Toolbar-item"},t.count>0?a._n("%1 notification","%1 notifications",t.count):a.__("No notifications")),j.createElement("span",{className:"jp-Toolbar-item jp-Toolbar-spacer"}),j.createElement(d.ToolbarButtonComponent,{noFocusOnClick:!1,onClick:()=>{t.dismiss()},icon:d.deleteIcon,tooltip:a.__("Dismiss all notifications"),enabled:t.count>0}),j.createElement(d.ToolbarButtonComponent,{noFocusOnClick:!1,onClick:n,icon:d.closeIcon,tooltip:a.__("Hide notifications")})),j.createElement("ol",{className:"jp-Notification-List"},o.map(e=>{var n;const{id:o,message:s,type:r,options:l}=e,c="in-progress"===r?"default":r,p=()=>{t.dismiss(o)},u="default"===r?null:"in-progress"===r?null!==(n=null==i?void 0:i.spinner)&&void 0!==n?n:null:i&&i[r];return j.createElement("li",{className:"jp-Notification-List-Item",key:e.id,onClick:e=>{e.stopPropagation()}},j.createElement("div",{className:`Toastify__toast Toastify__toast-theme--light Toastify__toast--${c} jp-Notification-Toast-${c}`},j.createElement("div",{className:"Toastify__toast-body"},u&&j.createElement("div",{className:"Toastify__toast-icon"},u({theme:"light",type:c})),j.createElement("div",null,R.createContent(s,p,l.actions))),j.createElement(R.CloseButton,{close:p,closeIcon:d.deleteIcon.react,title:a.__("Dismiss notification"),closeIconMargin:!0})))}))))}!function(e){e.dismiss="apputils:dismiss-notification",e.display="apputils:display-notifications",e.notify="apputils:notify",e.update="apputils:update-notification"}(S||(S={}));class x extends d.VDomModel{constructor(e){super(),this.manager=e,this._highlight=!1,this._listOpened=!1,this._doNotDisturbMode=!1,this._count=e.count,this.manager.changed.connect(this.onNotificationChanged,this)}get count(){return this._count}get doNotDisturbMode(){return this._doNotDisturbMode}set doNotDisturbMode(e){this._doNotDisturbMode=e}get highlight(){return this._highlight}get listOpened(){return this._listOpened}set listOpened(e){this._listOpened=e,(this._listOpened||this._highlight)&&(this._highlight=!1),this.stateChanged.emit()}onNotificationChanged(e,t){this._count=this.manager.count;const{autoClose:n}=t.notification.options,a=this.doNotDisturbMode||"number"==typeof n&&n<=0;!this._listOpened&&"removed"!==t.type&&a&&(this._highlight=!0),this.stateChanged.emit()}}function P(e){return j.createElement(C.GroupItem,{role:"button",tabIndex:0,"aria-haspopup":!0,spacing:4,onClick:()=>{e.onClick()},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.onClick()},title:e.count>0?e.trans._n("%1 notification","%1 notifications",e.count):e.trans.__("No notifications")},j.createElement(C.TextItem,{className:"jp-Notification-Status-Text",source:`${e.count}`}),j.createElement(d.bellIcon.react,{top:"2px",stylesheet:"statusBar"}))}const N={id:"@jupyterlab/apputils-extension:notification",description:"Add the notification center and its status indicator.",autoStart:!0,optional:[C.IStatusBar,r.ISettingRegistry,c.ITranslator],activate:(e,t,n,a)=>{R.translator=null!=a?a:c.nullTranslator;const s=R.translator.load("jupyterlab"),i=new x(o.Notification.manager);i.doNotDisturbMode=!1,n&&Promise.all([n.load(N.id),e.restored]).then(([e])=>{const t=()=>{i.doNotDisturbMode=e.get("doNotDisturbMode").composite};t(),e.changed.connect(t)}),e.commands.addCommand(S.notify,{label:s.__("Emit a notification"),caption:s.__("Notification is described by {message: string, type?: string, options?: {autoClose?: number | false, actions: {label: string, commandId: string, args?: ReadOnlyJSONObject, caption?: string, className?: string}[], data?: ReadOnlyJSONValue}}."),describedBy:{args:{type:"object",properties:{message:{type:"string",description:"The notification message text"},type:{type:"string",description:'The notification type (e.g., "default", "info", "warning", "error")'},options:{type:"object",description:"Additional notification options",properties:{autoClose:{oneOf:[{type:"number"},{type:"boolean"}],description:"Auto-close timeout in milliseconds, or false to disable"},actions:{type:"array",description:"Array of action buttons for the notification",items:{type:"object",properties:{label:{type:"string",description:"The action button label"},commandId:{type:"string",description:"The command ID to execute when clicked"},args:{description:"Arguments to pass to the command"},caption:{type:"string",description:"The action button caption/tooltip"},className:{type:"string",description:"CSS class name for the action button"}},required:["label","commandId"]}},data:{description:"Additional data associated with the notification"}}}},required:["message"]}},execute:t=>{var n;const{message:a,type:s}=t,i=null!==(n=t.options)&&void 0!==n?n:{};return o.Notification.manager.notify(a,null!=s?s:"default",{...i,actions:i.actions?i.actions.map(t=>({...t,callback:()=>{e.commands.execute(t.commandId,t.args).catch(e=>{console.error(`Failed to executed '${t.commandId}':\n${e}`)})}})):null})}}),e.commands.addCommand(S.update,{label:s.__("Update a notification"),caption:s.__("Notification is described by {id: string, message: string, type?: string, options?: {autoClose?: number | false, actions: {label: string, commandId: string, args?: ReadOnlyJSONObject, caption?: string, className?: string}[], data?: ReadOnlyJSONValue}}."),describedBy:{args:{type:"object",properties:{id:{type:"string",description:"The notification ID to update"},message:{type:"string",description:"The notification message text"},type:{type:"string",description:'The notification type (e.g., "default", "info", "warning", "error")'},options:{type:"object",description:"Additional notification options",properties:{autoClose:{oneOf:[{type:"number"},{type:"boolean"}],description:"Auto-close timeout in milliseconds, or false to disable"},actions:{type:"array",description:"Array of action buttons for the notification",items:{type:"object",properties:{label:{type:"string",description:"The action button label"},commandId:{type:"string",description:"The command ID to execute when clicked"},args:{description:"Arguments to pass to the command"},caption:{type:"string",description:"The action button caption/tooltip"},className:{type:"string",description:"CSS class name for the action button"}},required:["label","commandId"]}},data:{description:"Additional data associated with the notification"}}}},required:["id","message"]}},execute:t=>{const{id:n,message:a,type:s,...i}=t;return o.Notification.manager.update({id:n,message:a,type:null!=s?s:"default",...i,actions:i.actions?i.actions.map(t=>({...t,callback:()=>{e.commands.execute(t.commandId,t.args).catch(e=>{console.error(`Failed to executed '${t.commandId}':\n${e}`)})}})):null})}}),e.commands.addCommand(S.dismiss,{label:s.__("Dismiss a notification"),describedBy:{args:{type:"object",properties:{id:{type:"string",description:"The notification ID to dismiss"}},required:["id"]}},execute:e=>{const{id:t}=e;o.Notification.manager.dismiss(t)}});let r=null;i.listOpened=!1;const l=o.ReactWidget.create(j.createElement(E,{manager:o.Notification.manager,onClose:()=>{null==r||r.dispose()},trans:s}));l.addClass("jp-Notification-Center"),o.Notification.manager.changed.connect(async function(e,t){var n;if(i.doNotDisturbMode||null!==r&&!r.isDisposed)return;const{message:a,type:o,options:s,id:l}=t.notification;if(!("number"==typeof s.autoClose&&s.autoClose<=0))switch(t.type){case"added":await R.createToast(l,a,o,s);break;case"updated":{const t=await R.toast(),i=s.actions,r=null!==(n=s.autoClose)&&void 0!==n?n:!(i&&i.length>0)&&null;if(t.isActive(l)){const n=()=>{t.dismiss(l),e.dismiss(l)};t.update(l,{type:"in-progress"===o?null:o,isLoading:"in-progress"===o,autoClose:r,render:R.createContent(a,n,s.actions)})}else await R.createToast(l,a,o,s)}break;case"removed":await R.toast().then(e=>{e.dismiss(l)})}});const p=()=>{r?(r.dispose(),r=null):(r=(0,C.showPopup)({body:l,anchor:u,align:"right",hasDynamicSize:!0,startHidden:!0}),R.toast().then(e=>{e.dismiss()}).catch(e=>{console.error(`Failed to dismiss all toasts:\n${e}`)}).finally(()=>{null==r||r.launch(),l.node.focus(),null==r||r.disposed.connect(()=>{i.listOpened=!1,r=null})})),i.listOpened=null!==r};e.commands.addCommand(S.display,{label:s.__("Show Notifications"),describedBy:{args:{type:"object",properties:{}}},execute:p});const u=o.ReactWidget.create(j.createElement(d.UseSignal,{signal:i.stateChanged},()=>(i.highlight||r&&!r.isDisposed?u.addClass("jp-mod-selected"):u.removeClass("jp-mod-selected"),j.createElement(P,{count:i.count,highlight:i.highlight,trans:s,onClick:p}))));u.addClass("jp-Notification-Status"),t?t.registerStatusItem(N.id,{item:u,align:"right",rank:-1}):(u.addClass("jp-ThemedContainer"),u.node.style.position="fixed",u.node.style.bottom="0",u.node.style.right="10px",T.Widget.attach(u,document.body),u.show())}};var R;!function(e){e.translator=c.nullTranslator;let t=null;function a(e){var t;return j.createElement("button",{className:"jp-Button jp-mod-minimal jp-Notification-Toast-Close"+(e.closeIconMargin?" jp-Notification-Toast-Close-Margin":""),title:null!==(t=e.title)&&void 0!==t?t:"",onClick:e.close},j.createElement(e.closeIcon,{className:"jp-icon-hover",tag:"span"}))}function s(t){const n=e.translator.load("jupyterlab");return j.createElement(a,{close:t.closeToast,closeIcon:d.closeIcon.react,title:n.__("Hide notification")})}e.CloseButton=a;let i=null;async function r(){if(null===i?i=new p.PromiseDelegate:await i.promise,null===t){t=await n.e(3721).then(n.t.bind(n,26102,23));const e=document.body.appendChild(document.createElement("div"));e.id="react-toastify-container",e.classList.add("jp-ThemedContainer"),(0,I.H)(e).render(j.createElement(t.ToastContainer,{draggable:!1,closeOnClick:!1,hideProgressBar:!0,newestOnTop:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,position:"bottom-right",className:"jp-toastContainer",transition:t.Slide,closeButton:s})),i.resolve()}return t.toast}e.toast=r,e.getIcons=async function(){return null===t&&await r(),t.Icons};const l={accent:"jp-mod-accept",link:"jp-mod-link",warn:"jp-mod-warn",default:""};function u({action:e,closeToast:t}){var n,a;const o=["jp-toast-button",l[null!==(n=e.displayType)&&void 0!==n?n:"default"]].join(" ");return j.createElement(d.Button,{title:null!==(a=e.caption)&&void 0!==a?a:e.label,className:o,onClick:n=>{e.callback(n),n.defaultPrevented||t()},small:!0},e.label)}function m(e,t,n){var a;const o=e.length>140?e.slice(0,140)+"…":e;return j.createElement(j.Fragment,null,j.createElement("div",{className:"jp-toast-message"},o.split("\n").map((e,t)=>j.createElement(j.Fragment,{key:`part-${t}`},t>0?j.createElement("br",null):null,e))),(null!==(a=null==n?void 0:n.length)&&void 0!==a?a:0)>0&&j.createElement("div",{className:"jp-toast-buttonBar"},j.createElement("div",{className:"jp-toast-spacer"}),n.map((e,n)=>j.createElement(u,{key:"button-"+n,action:e,closeToast:t}))))}e.createContent=m,e.createToast=async function(e,t,n,a={}){const{actions:s,autoClose:i,data:l}=a;return(await r())(({closeToast:n})=>m(t,()=>{n&&n(),o.Notification.manager.dismiss(e)},s),{autoClose:null!=i?i:!(s&&s.length>0)&&void 0,data:l,className:`jp-Notification-Toast-${n}`,toastId:e,type:"in-progress"===n?null:n,isLoading:"in-progress"===n})}}(R||(R={}));var L,D,F=n(55846),A=n(41820);!function(e){e.activate="apputils:activate-command-palette"}(L||(L={}));class M{constructor(e,t){this.translator=t||c.nullTranslator;const n=this.translator.load("jupyterlab");this._palette=e,this._palette.title.label="",this._palette.title.caption=n.__("Command Palette")}set placeholder(e){this._palette.inputNode.placeholder=e}get placeholder(){return this._palette.inputNode.placeholder}activate(){this._palette.activate()}addItem(e){const t=this._palette.addItem(e);return new u.DisposableDelegate(()=>{this._palette.removeItem(t)})}}!function(e){e.activate=function(t,n,a){const{commands:s,shell:i}=t,r=n.load("jupyterlab"),l=D.createPalette(t,n),c=new o.ModalCommandPalette({commandPalette:l,restore:()=>{const e=t.shell.currentWidget;e&&e.activate()}});let d=!1;if(l.node.setAttribute("role","region"),l.node.setAttribute("aria-label",r.__("Command Palette Section")),i.add(l,"left",{rank:300,type:"Command Palette"}),a){const e=a.load("@jupyterlab/apputils-extension:palette"),n=e=>{const t=e.get("modal").composite;d&&!t?(l.parent=null,c.detach(),i.add(l,"left",{rank:300,type:"Command Palette"})):!d&&t&&(l.parent=null,c.palette=l,l.show(),c.attach()),d=t};Promise.all([e,t.restored]).then(([e])=>{n(e),e.changed.connect(e=>{n(e)})}).catch(e=>{console.error(e.message)})}const p=()=>{const e=(0,F.find)(t.commands.keyBindings,e=>e.command===L.activate);if(e){const t=e.keys.map(A.CommandRegistry.formatKeystroke).join(", ");l.title.caption=r.__("Commands (%1)",t)}else l.title.caption=r.__("Commands")};return p(),t.commands.keyBindingChanged.connect(()=>{p()}),s.addCommand(L.activate,{describedBy:{args:{type:"object",properties:{}}},execute:()=>{d?c.activate():i.activateById(l.id)},label:r.__("Activate Command Palette")}),l.inputNode.placeholder=r.__("SEARCH"),new e(l,n)},e.restore=function(e,t,n){const a=D.createPalette(e,n);t.add(a,"command-palette")}}(M||(M={})),function(e){let t;e.createPalette=function(e,n){if(!t){t=new T.CommandPalette({commands:e.commands,renderer:d.CommandPaletteSvg.defaultRenderer}),t.id="command-palette",t.title.icon=d.paletteIcon;const a=n.load("jupyterlab");t.title.label=a.__("Commands")}return t}}(D||(D={}));class O extends l.DataConnector{constructor(e){super(),this._throttlers=Object.create(null),this._connector=e}fetch(e){const t=this._throttlers;return e in t||(t[e]=new m.Throttler(()=>this._connector.fetch(e),100)),t[e].invoke()}async list(e="all"){const{isDisabled:t}=s.PageConfig.Extension,{ids:n,values:a}=await this._connector.list("ids"===e?"ids":void 0);return"all"===e?{ids:n,values:a}:"ids"===e?{ids:n}:{ids:n.filter(e=>!t(e)),values:a.filter(({id:e})=>!t(e))}}async save(e,t){await this._connector.save(e,t)}}const W={id:"@jupyterlab/apputils-extension:settings-connector",description:"Provides the settings connector.",autoStart:!0,provides:r.ISettingConnector,activate:e=>new O(e.serviceManager.settings)},B={id:"@jupyterlab/apputils-extension:settings",autoStart:!0,provides:r.ISettingRegistry,optional:[r.ISettingConnector],description:"Provides the setting registry.",activate:async(e,t)=>{const{isDisabled:n}=s.PageConfig.Extension,a=null!=t?t:new O(e.serviceManager.settings),o=new r.SettingRegistry({connector:a,plugins:(await a.list("active")).values.filter(t=>e.hasPlugin(t.id))});return e.restored.then(async()=>{(await a.list("ids")).ids.forEach(async t=>{if(e.hasPlugin(t)&&!n(t)&&!(t in o.plugins))try{await o.load(t)}catch(n){console.warn(`Settings failed to load for (${t})`,n),e.isPluginActivated(t)||console.warn(`If 'jupyter.lab.transform=true' in the plugin schema, this may happen if {autoStart: false} in (${t}) or if it is one of the deferredExtensions in page config.`)}})}),o}},z={id:"@jupyterlab/apputils-extension:kernel-status",description:"Provides the kernel status indicator model.",autoStart:!0,requires:[C.IStatusBar],provides:o.IKernelStatusModel,optional:[o.ISessionContextDialogs,c.ITranslator,a.ILabShell],activate:(e,t,n,a,s)=>{const i=null!=a?a:c.nullTranslator,r=null!=n?n:new o.SessionContextDialogs({translator:i}),l=async()=>{d.model.sessionContext&&await r.selectKernel(d.model.sessionContext)},d=new o.KernelStatus({onClick:l,onKeyDown:async e=>{if("Enter"===e.key||"Spacebar"===e.key||" "===e.key)return e.preventDefault(),e.stopPropagation(),l()}},i),p=new Set;function u(e,t){var n;const{oldValue:a,newValue:o}=t;a&&a.title.changed.disconnect(m),d.model.sessionContext=null!==(n=[...p].map(e=>e(t.newValue)).filter(e=>null!==e)[0])&&void 0!==n?n:null,o&&d.model.sessionContext&&(m(o.title),o.title.changed.connect(m))}const m=e=>{d.model.activityName=e.label};return s&&s.currentChanged.connect(u),t.registerStatusItem(z.id,{priority:1,item:d,align:"left",rank:1,isActive:()=>null!==d.model.sessionContext}),{addSessionProvider:t=>{p.add(t),e.shell.currentWidget&&u(e.shell,{newValue:e.shell.currentWidget,oldValue:null})}}}},$={id:"@jupyterlab/apputils-extension:running-sessions-status",description:"Add the running sessions and terminals status bar item.",autoStart:!0,requires:[C.IStatusBar,c.ITranslator],optional:[r.ISettingRegistry],activate:(e,t,n,a)=>{const s=a=>{const s=(t=>{const a=new o.RunningSessions({onClick:()=>e.shell.activateById("jp-running-sessions"),onKeyDown:t=>{"Enter"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),e.shell.activateById("jp-running-sessions"))},serviceManager:e.serviceManager,translator:n,...t});return a.model.sessions=Array.from(e.serviceManager.sessions.running()).length,a.model.terminals=Array.from(e.serviceManager.terminals.running()).length,a})(a);return t.registerStatusItem($.id,{item:s,align:"left",rank:0})};if(a){let e;const t=(t,n)=>{var a,o;const i=null===(a=null==t?void 0:t.get("showStatusBarItem").composite)||void 0===a||a,r={"if-any":void 0,never:!1,always:!0}[null!==(o=null==n?void 0:n.get("showStatusBarItem").composite)&&void 0!==o?o:"if-any"];null==e||e.dispose(),(i||!1!==r)&&(e=s({showKernels:i,showTerminals:r}))},n="@jupyterlab/apputils-extension:kernels-settings",o="@jupyterlab/terminal-extension:plugin";Promise.all([n in a.plugins?a.load(n).catch(()=>{}):Promise.resolve(void 0),o in a.plugins?a.load(o).catch(()=>{}):Promise.resolve(void 0)]).then(([e,n])=>{t(e,n),e&&e.changed.connect(a=>{t(e=a,n)}),n&&n.changed.connect(a=>{t(e,n=a)})})}else s({showKernels:!0})}},U={id:"@jupyterlab/apputils-extension:subshell-settings",description:"Kernel subshell settings.",autoStart:!0,requires:[],optional:[r.ISettingRegistry],activate:(e,t)=>{t&&e.started.then(async()=>{const n=await t.load("@jupyterlab/apputils-extension:kernels-settings"),a=n.get("commsOverSubshells").composite;e.serviceManager.kernels.commsOverSubshells=a,n.changed.connect(()=>{const t=n.get("commsOverSubshells").composite;e.serviceManager.kernels.commsOverSubshells=t})}).catch(e=>{console.error("Fail to load settings for the subshells."),console.error(e)})}};var q;!function(e){e.changeTheme="apputils:change-theme",e.changePreferredLightTheme="apputils:change-light-theme",e.changePreferredDarkTheme="apputils:change-dark-theme",e.toggleAdaptiveTheme="apputils:adaptive-theme",e.themeScrollbars="apputils:theme-scrollbars",e.changeFont="apputils:change-font",e.incrFontSize="apputils:incr-font-size",e.decrFontSize="apputils:decr-font-size"}(q||(q={}));const H={id:"@jupyterlab/apputils-extension:themes",description:"Provides the theme manager.",requires:[r.ISettingRegistry,a.JupyterFrontEnd.IPaths,c.ITranslator],optional:[o.ISplashScreen],activate:(e,t,n,a,i)=>{const r=a.load("jupyterlab"),l=e.shell,c=e.commands,d=s.URLExt.join(e.serviceManager.serverSettings.baseUrl,n.urls.themes),p=H.id,u=new o.ThemeManager({key:p,host:l,settings:t,splash:null!=i?i:void 0,url:d});let m,h=null;return u.themeChanged.connect((e,t)=>{m=t.newValue,document.body.dataset.jpThemeLight=String(u.isLight(m)),document.body.dataset.jpThemeName=m,document.body.style.colorScheme=u.isLight(m)?"light":"dark",document.body.dataset.jpThemeScrollbars!==String(u.themeScrollbars(m))&&(document.body.dataset.jpThemeScrollbars=String(u.themeScrollbars(m)),u.themeScrollbars(m)?(h||(h=function(){const e=document.createElement("style");return e.setAttribute("type","text/css"),e.appendChild(document.createTextNode("/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*\n * Webkit scrollbar styling.\n * Separate file which is dynamically loaded based on user/theme settings.\n */\n\n/* use standard opaque scrollbars for most nodes */\n\n::-webkit-scrollbar,\n::-webkit-scrollbar-corner {\n  background: var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgb(var(--jp-scrollbar-thumb-color));\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-right: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-bottom: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n/* for code nodes, use a transparent style of scrollbar */\n\n.CodeMirror-hscrollbar::-webkit-scrollbar,\n.CodeMirror-vscrollbar::-webkit-scrollbar,\n.CodeMirror-hscrollbar::-webkit-scrollbar-corner,\n.CodeMirror-vscrollbar::-webkit-scrollbar-corner {\n  background-color: transparent;\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-thumb,\n.CodeMirror-vscrollbar::-webkit-scrollbar-thumb {\n  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid transparent;\n  border-right: var(--jp-scrollbar-endpad) solid transparent;\n}\n\n.CodeMirror-vscrollbar::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid transparent;\n  border-bottom: var(--jp-scrollbar-endpad) solid transparent;\n}\n")),e}()),h.parentElement||document.body.appendChild(h)):h&&h.parentElement&&h.parentElement.removeChild(h)),c.notifyCommandChanged(q.changeTheme)}),c.addCommand(q.changeTheme,{label:e=>{if(void 0===e.theme)return r.__("Switch to the provided `theme`.");const t=e.theme,n=u.getDisplayName(t);return e.isPalette?r.__("Use Theme: %1",n):n},describedBy:{args:{type:"object",properties:{theme:{type:"string",description:r.__("The theme name to switch to")},isPalette:{type:"boolean",description:r.__("Whether the command is being called from the palette")}},required:["theme"]}},isToggled:e=>e.theme===m,execute:e=>{const t=e.theme;if(t!==u.theme)return u.isToggledAdaptiveTheme()?u.toggleAdaptiveTheme():u.setTheme(t)}}),c.addCommand(q.changePreferredLightTheme,{label:e=>{if(void 0===e.theme)return r.__("Switch to the provided light `theme`.");const t=e.theme,n=u.getDisplayName(t);return e.isPalette?r.__("Set Preferred Light Theme: %1",n):n},describedBy:{args:{type:"object",properties:{theme:{type:"string",description:r.__("The preferred light theme name")},isPalette:{type:"boolean",description:r.__("Whether the command is being called from the palette")}},required:["theme"]}},isToggled:e=>e.theme===u.preferredLightTheme,execute:e=>{const t=e.theme;if(t!==u.preferredLightTheme)return u.setPreferredLightTheme(t)}}),c.addCommand(q.changePreferredDarkTheme,{label:e=>{if(void 0===e.theme)return r.__("Switch to the provided dark `theme`.");const t=e.theme,n=u.getDisplayName(t);return e.isPalette?r.__("Set Preferred Dark Theme: %1",n):n},describedBy:{args:{type:"object",properties:{theme:{type:"string",description:r.__("The preferred dark theme name")},isPalette:{type:"boolean",description:r.__("Whether the command is being called from the palette")}},required:["theme"]}},isToggled:e=>e.theme===u.preferredDarkTheme,execute:e=>{const t=e.theme;if(t!==u.preferredDarkTheme)return u.setPreferredDarkTheme(t)}}),c.addCommand(q.toggleAdaptiveTheme,{label:e=>e.isPalette?r.__("Synchronize Styling Theme with System Settings"):r.__("Synchronize with System Settings"),describedBy:{args:{type:"object",properties:{isPalette:{type:"boolean",description:r.__("Whether the command is being called from the palette")}}}},isToggled:()=>u.isToggledAdaptiveTheme(),execute:()=>{u.toggleAdaptiveTheme().catch(console.warn)}}),c.addCommand(q.themeScrollbars,{label:r.__("Theme Scrollbars"),describedBy:{args:{type:"object",properties:{}}},isToggled:()=>u.isToggledThemeScrollbars(),execute:()=>u.toggleThemeScrollbars()}),c.addCommand(q.changeFont,{label:e=>e.enabled?`${e.font}`:r.__("waiting for fonts"),describedBy:{args:{type:"object",properties:{enabled:{type:"boolean",description:r.__("Whether the font is available and enabled")},font:{type:"string",description:r.__("The font name")},key:{type:"string",description:r.__("The CSS property key to modify")}},required:["enabled","font","key"]}},isEnabled:e=>e.enabled,isToggled:e=>u.getCSS(e.key)===e.font,execute:e=>u.setCSSOverride(e.key,e.font)}),c.addCommand(q.incrFontSize,{label:e=>{switch(e.key){case"code-font-size":return r.__("Increase Code Font Size");case"content-font-size1":return r.__("Increase Content Font Size");case"ui-font-size1":return r.__("Increase UI Font Size");default:return r.__("Increase Font Size")}},describedBy:{args:{type:"object",properties:{key:{type:"string",description:r.__('The font size key to increase (e.g., "code-font-size", "content-font-size1", "ui-font-size1")')}},required:["key"]}},execute:e=>u.incrFontSize(e.key)}),c.addCommand(q.decrFontSize,{label:e=>{switch(e.key){case"code-font-size":return r.__("Decrease Code Font Size");case"content-font-size1":return r.__("Decrease Content Font Size");case"ui-font-size1":return r.__("Decrease UI Font Size");default:return r.__("Decrease Font Size")}},describedBy:{args:{type:"object",properties:{key:{type:"string",description:r.__('The font size key to decrease (e.g., "code-font-size", "content-font-size1", "ui-font-size1")')}},required:["key"]}},execute:e=>u.decrFontSize(e.key)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(u.isToggledAdaptiveTheme()){const t=e.matches?u.preferredDarkTheme:u.preferredLightTheme;u.theme!==t&&u.setTheme(t)}}),u},autoStart:!0,provides:o.IThemeManager},J={id:"@jupyterlab/apputils-extension:themes-palette-menu",description:"Adds theme commands to the menu and the command palette.",requires:[o.IThemeManager,c.ITranslator],optional:[o.ICommandPalette,_.IMainMenu],activate:(e,t,n,a,o)=>{const s=n.load("jupyterlab");o&&e.restored.then(()=>{var e;const n=null===(e=o.settingsMenu.items.find(e=>{var t;return"submenu"===e.type&&"jp-mainmenu-settings-apputilstheme"===(null===(t=e.submenu)||void 0===t?void 0:t.id)}))||void 0===e?void 0:e.submenu;n&&t.themes.forEach((e,t)=>{n.insertItem(t,{command:q.changeTheme,args:{isPalette:!1,theme:e}})})}),a&&e.restored.then(()=>{const e=s.__("Theme"),n=q.changeTheme,o=!0;t.themes.forEach(t=>{a.addItem({command:n,args:{isPalette:o,theme:t},category:e})}),t.themes.forEach(t=>{a.addItem({command:q.changePreferredLightTheme,args:{isPalette:o,theme:t},category:e})}),t.themes.forEach(t=>{a.addItem({command:q.changePreferredDarkTheme,args:{isPalette:o,theme:t},category:e})}),a.addItem({command:q.toggleAdaptiveTheme,args:{isPalette:o},category:e}),a.addItem({command:q.themeScrollbars,category:e}),a.addItem({command:q.incrFontSize,args:{key:"code-font-size"},category:e}),a.addItem({command:q.decrFontSize,args:{key:"code-font-size"},category:e}),a.addItem({command:q.incrFontSize,args:{key:"content-font-size1"},category:e}),a.addItem({command:q.decrFontSize,args:{key:"content-font-size1"},category:e}),a.addItem({command:q.incrFontSize,args:{key:"ui-font-size1"},category:e}),a.addItem({command:q.decrFontSize,args:{key:"ui-font-size1"},category:e})})},autoStart:!0},K={id:"@jupyterlab/apputils-extension:toolbar-registry",description:"Provides toolbar items registry.",autoStart:!0,provides:o.IToolbarWidgetRegistry,activate:e=>new o.ToolbarWidgetRegistry({defaultFactory:(0,o.createDefaultFactory)(e.commands)})};var V=n(60837);const Q="jupyterlab-workspace",Y="."+Q,G={id:"@jupyterlab/apputils-extension:workspaces",description:"Add workspace file type.",autoStart:!0,requires:[l.IStateDB,c.ITranslator,a.JupyterFrontEnd.IPaths],optional:[a.IRouter,V.IWorkspaceCommands],activate:(e,t,n,a,o,i)=>{const r=new X.WorkspaceFactory({workspaces:e.serviceManager.workspaces,state:t,translator:n,open:async t=>{if(i)await e.commands.execute(i.open,{workspace:t});else{const e=s.URLExt.join(a.urls.app,"workspaces"),n=s.URLExt.join(e,t);if(!n.startsWith(e))throw new Error("Can only be used for workspaces");o?o.navigate(n,{hard:!0}):document.location.href=n}}}),l=n.load("jupyterlab");e.docRegistry.addFileType({name:Q,contentType:"file",fileFormat:"text",displayName:l.__("JupyterLab Workspace File"),extensions:[Y],mimeTypes:["text/json"],iconClass:"jp-JupyterIcon"}),e.docRegistry.addWidgetFactory(r)}};var X;!function(e){class t extends i.ABCWidgetFactory{constructor(e){super({name:"Workspace loader",label:(e.translator||c.nullTranslator).load("jupyterlab").__("Workspace loader"),fileTypes:[Q],defaultFor:[Q],readOnly:!0}),this._state=e.state,this._workspaces=e.workspaces,this._open=e.open}createNewWidget(e){return e.ready.then(async()=>{const t=e.model.toJSON(),n=e.path,a=t.metadata.id;await this._workspaces.save(a,t),await this._state.save("workspace-ui:lastSave",n),await this._open(a)}),function(e){const t=new i.DocumentWidget({content:new T.Widget,context:e});return t.content.dispose(),t}(e)}}e.WorkspaceFactory=t}(X||(X={}));var Z=n(72804);const ee="jp-ContextualShortcut-TableItem";var te;!function(e){e.loadState="apputils:load-statedb",e.print="apputils:print",e.reset="apputils:reset",e.resetOnLoad="apputils:reset-on-load",e.runFirstEnabled="apputils:run-first-enabled",e.runAllEnabled="apputils:run-all-enabled",e.toggleHeader="apputils:toggle-header",e.displayShortcuts="apputils:display-shortcuts"}(te||(te={}));const ne={id:"@jupyterlab/apputils-extension:palette",description:"Provides the command palette.",autoStart:!0,requires:[c.ITranslator],provides:o.ICommandPalette,optional:[r.ISettingRegistry],activate:(e,t,n)=>M.activate(e,t,n)},ae={id:"@jupyterlab/apputils-extension:palette-restorer",description:"Restores the command palette.",autoStart:!0,requires:[a.ILayoutRestorer,c.ITranslator],activate:(e,t,n)=>{M.restore(e,t,n)}},oe={id:"@jupyterlab/apputils-extension:resolver",description:"Provides the window name resolver.",autoStart:!0,provides:o.IWindowResolver,requires:[a.JupyterFrontEnd.IPaths,a.IRouter],activate:async(e,t,n)=>{const{hash:a,search:i}=n.current,r=s.URLExt.queryStringToObject(i||""),l=new o.WindowResolver,c=s.PageConfig.getOption("workspace"),d=s.PageConfig.getOption("treePath"),p="multiple-document"===s.PageConfig.getOption("mode")?"lab":"doc",u=c||s.PageConfig.defaultWorkspace,m=d?s.URLExt.join("tree",d):"";try{return await l.resolve(u),l}catch(e){return new Promise(()=>{const{base:e}=t.urls,o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*Math.random())];let i=s.URLExt.join(e,p,"workspaces",`auto-${o}`);i=m?s.URLExt.join(i,s.URLExt.encodeParts(m)):i,r.reset="";const l=i+s.URLExt.objectToQueryString(r)+(a||"");n.navigate(l,{hard:!0})})}}},se={id:"@jupyterlab/apputils-extension:splash",description:"Provides the splash screen.",autoStart:!0,requires:[c.ITranslator],provides:o.ISplashScreen,activate:(e,t)=>{const n=t.load("jupyterlab"),{commands:a,restored:s}=e,i=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");let c;i.id="jupyterlab-splash",r.id="galaxy",l.id="main-logo",d.jupyterFaviconIcon.element({container:l,stylesheet:"splash"}),r.appendChild(l),["1","2","3"].forEach(e=>{const t=document.createElement("div"),n=document.createElement("div");t.id=`moon${e}`,t.className="moon orbit",n.id=`planet${e}`,n.className="planet",t.appendChild(n),r.appendChild(t)}),i.appendChild(r);const p=new m.Throttler(async()=>{if(!c){c=new o.Dialog({title:n.__("Loading…"),body:n.__("The loading screen is taking a long time.\nWould you like to clear the workspace or keep waiting?"),buttons:[o.Dialog.cancelButton({label:n.__("Keep Waiting")}),o.Dialog.warnButton({label:n.__("Clear Workspace")})]});try{const e=await c.launch();if(c.dispose(),c=null,e.button.accept&&a.hasCommand(te.reset))return a.execute(te.reset);requestAnimationFrame(()=>{p.invoke().catch(e=>{})})}catch(e){}}},{limit:12e3,edge:"trailing"});let h=0;return{show:(e=!0)=>(i.classList.remove("splash-fade"),i.classList.toggle("light",e),i.classList.toggle("dark",!e),h++,document.body.appendChild(i),p.invoke().catch(e=>{}),new u.DisposableDelegate(async()=>{await s,0===--h&&(p.stop(),c&&(c.dispose(),c=null),i.classList.add("splash-fade"),window.setTimeout(()=>{document.body.removeChild(i)},200))}))}}},ie={id:"@jupyterlab/apputils-extension:print",description:"Add the print capability",autoStart:!0,requires:[c.ITranslator],activate:(e,t)=>{var n;const a=t.load("jupyterlab");e.commands.addCommand(te.print,{label:a.__("Print…"),describedBy:{args:{type:"object",properties:{}}},isEnabled:()=>{const t=e.shell.currentWidget;return null!==o.Printing.getPrintFunction(t)},execute:async()=>{const t=e.shell.currentWidget,n=o.Printing.getPrintFunction(t);n&&await n()}}),null===(n=e.shell.currentChanged)||void 0===n||n.connect(()=>{e.commands.notifyCommandChanged(te.print)})}},re={id:"@jupyterlab/apputils-extension:toggle-header",description:"Adds a command to display the main area widget content header.",autoStart:!0,requires:[c.ITranslator],optional:[o.ICommandPalette],activate:(e,t,n)=>{var a;const s=t.load("jupyterlab"),i=s.__("Main Area");e.commands.addCommand(te.toggleHeader,{label:s.__("Show Header Above Content"),describedBy:{args:{type:"object",properties:{}}},isEnabled:()=>e.shell.currentWidget instanceof o.MainAreaWidget&&!e.shell.currentWidget.contentHeader.isDisposed&&e.shell.currentWidget.contentHeader.widgets.length>0,isToggled:()=>{const t=e.shell.currentWidget;return t instanceof o.MainAreaWidget&&!t.contentHeader.isHidden},execute:async()=>{const t=e.shell.currentWidget;t instanceof o.MainAreaWidget&&t.contentHeader.setHidden(!t.contentHeader.isHidden)}}),null===(a=e.shell.currentChanged)||void 0===a||a.connect(()=>{e.commands.notifyCommandChanged(te.toggleHeader)}),n&&n.addItem({command:te.toggleHeader,category:i})}},le={id:"@jupyterlab/apputils-extension:state",description:"Provides the application state. It is stored per workspaces.",autoStart:!0,provides:l.IStateDB,requires:[a.JupyterFrontEnd.IPaths,a.IRouter,c.ITranslator],optional:[o.IWindowResolver],activate:(e,t,n,a,o)=>{const r=a.load("jupyterlab");if(null===o)return new l.StateDB;let c=!1;const{commands:d,name:u,serviceManager:h}=e,{workspaces:g}=h,b=o.name,y=new p.PromiseDelegate,f=new l.StateDB({transform:y.promise}),v=new m.Debouncer(async()=>{const e=b,t={id:e},n=await f.toJSON();await g.save(e,{data:n,metadata:t})});return f.changed.connect(()=>{v.invoke()},f),f.changed.connect(()=>{var t;return async function(e){var t,n;const{workspace:a,db:o,name:r,currentWidget:l}=e,c=await o.toJSON();let d=null===(n=null===(t=c["layout-restorer:data"])||void 0===t?void 0:t.main)||void 0===n?void 0:n.current;if(void 0===d||!d.startsWith("notebook")&&!d.startsWith("editor"))document.title=`${s.PageConfig.getOption("appName")||"JupyterLab"}${"default"===a?"":` (${a})`}`;else{let e;e=l instanceof i.DocumentWidget?s.PathExt.basename(l.context.path):s.PathExt.basename(decodeURIComponent(window.location.href)),e=e.length>15?e.slice(0,12).concat("…"):e;const t=a.length>15?a.slice(0,12).concat("…"):a,n=Object.keys(c).filter(e=>e.startsWith("notebook")||e.startsWith("editor")).length;document.title=`${e}${n>1?` (${n})`:""} - ${"default"===a?r:t}`}}({workspace:b,db:f,name:u,currentWidget:null!==(t=e.shell.currentWidget)&&void 0!==t?t:void 0})}),d.addCommand(te.loadState,{label:r.__("Load state for the current workspace."),describedBy:{args:{type:"object",properties:{hash:{type:"string",description:r.__("The URL hash")},path:{type:"string",description:r.__("The URL path")},search:{type:"string",description:r.__("The URL search string containing query parameters")}}}},execute:async e=>{if(c)return;const{hash:t,path:a,search:o}=e,i=s.URLExt.queryStringToObject(o||""),r="string"==typeof i.clone?""===i.clone?s.PageConfig.defaultWorkspace:i.clone:null,l=r||b||null;if(null!==l){try{const e=await g.fetch(l);c||(c=!0,y.resolve({type:"overwrite",contents:e.data}))}catch({message:e}){console.warn(`Fetching workspace "${b}" failed.`,e),c||(c=!0,y.resolve({type:"cancel",contents:null}))}if(l===r){delete i.clone;const e=a+s.URLExt.objectToQueryString(i)+t,o=v.invoke().then(()=>n.stop);return o.then(()=>{n.navigate(e)}),o}await v.invoke()}else console.error(`${te.loadState} cannot load null workspace.`)}}),d.addCommand(te.reset,{label:r.__("Reset Application State"),describedBy:{args:{type:"object",properties:{reload:{type:"boolean",description:r.__("Whether to reload the page after resetting")}}}},execute:async({reload:e})=>{await f.clear(),await v.invoke(),e&&n.reload()}}),d.addCommand(te.resetOnLoad,{label:r.__("Reset state when loading for the workspace."),describedBy:{args:{type:"object",properties:{hash:{type:"string",description:r.__("The URL hash")},path:{type:"string",description:r.__("The URL path")},search:{type:"string",description:r.__("The URL search string containing query parameters")}}}},execute:e=>{const{hash:t,path:a,search:o}=e,i=s.URLExt.queryStringToObject(o||""),r="clone"in i;if(!("reset"in i))return;if(c)return n.reload();c=!0,y.resolve({type:"clear",contents:null}),delete i.reset;const l=a+s.URLExt.objectToQueryString(i)+t,d=f.clear().then(()=>v.invoke());return r?d.then(()=>{n.navigate(l,{hard:!0})}):d.then(()=>{n.navigate(l)}),d}}),n.register({command:te.loadState,pattern:/.?/,rank:30}),n.register({command:te.resetOnLoad,pattern:/(\?reset|\&reset)($|&)/,rank:20}),f}},ce={id:"@jupyterlab/apputils-extension:sessionDialogs",description:"Provides the session context dialogs.",provides:o.ISessionContextDialogs,optional:[c.ITranslator,r.ISettingRegistry],autoStart:!0,activate:async(e,t,n)=>new o.SessionContextDialogs({translator:null!=t?t:c.nullTranslator,settingRegistry:null!=n?n:null})},de={id:"@jupyterlab/apputils-extension:utilityCommands",description:"Adds meta commands to run set of other commands.",requires:[c.ITranslator],optional:[o.ICommandPalette],autoStart:!0,activate:(e,t,n)=>{const a=t.load("jupyterlab"),{commands:s}=e;if(s.addCommand(te.runFirstEnabled,{label:a.__("Run First Enabled Command"),describedBy:{args:{type:"object",properties:{commands:{type:"array",items:{type:"string"},description:a.__("Array of command IDs to attempt to run")},args:{description:a.__("Arguments to pass to the commands")}},required:["commands"]}},execute:t=>{const n=t.commands,a=t.args,o=Array.isArray(t);for(let t=0;t<n.length;t++){const s=n[t],i=o?a[t]:a;if(e.commands.isEnabled(s,i))return e.commands.execute(s,i)}}}),s.addCommand(te.runAllEnabled,{label:a.__("Run All Enabled Commands Passed as Args"),describedBy:{args:{type:"object",properties:{commands:{type:"array",items:{type:"string"},description:a.__("Array of command IDs to run")},args:{description:a.__("Arguments to pass to the commands")},errorIfNotEnabled:{type:"boolean",description:a.__("Whether to log an error if a command is not enabled")}}}},execute:async t=>{var n,a;const o=null!==(n=t.commands)&&void 0!==n?n:[],s=t.args,i=Array.isArray(t),r=null!==(a=t.errorIfNotEnabled)&&void 0!==a&&a;for(let t=0;t<o.length;t++){const n=o[t],a=i?s[t]:s;e.commands.isEnabled(n,a)?await e.commands.execute(n,a):r&&console.error(`${n} is not enabled.`)}},isEnabled:t=>{var n;const a=null!==(n=t.commands)&&void 0!==n?n:[],o=t.args,s=Array.isArray(t);return a.some((t,n)=>e.commands.isEnabled(t,s?o[n]:o))}}),s.addCommand(te.displayShortcuts,{label:a.__("Show Keyboard Shortcuts…"),caption:a.__("Show relevant keyboard shortcuts for the current active widget"),describedBy:{args:{type:"object",properties:{}}},execute:t=>{var n;const i=e.shell.currentWidget;if(!(null==i?void 0:i.node.contains(document.activeElement))&&i instanceof o.MainAreaWidget){const e=null!==(n=i.content.node)&&void 0!==n?n:null==i?void 0:i.node;null==e||e.focus()}return function(e){const{commands:t,trans:n,activeElement:a}=e,s=null!=a?a:document.activeElement;function i(e){const t=[];return e.forEach((e,n)=>{const a=[];e.split(" ").forEach((e,t)=>{a.push(j.createElement("span",{className:"jp-ContextualShortcut-Key",key:`ch-${t}`},j.createElement("kbd",null,e)),j.createElement(j.Fragment,{key:`fragment-${t}`}," + "))}),t.push(j.createElement("span",{key:`key-${n}`},a.slice(0,-1)),j.createElement(j.Fragment,{key:`fragment-${n}`}," + "))}),j.createElement("span",null,t.slice(0,-1))}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e){const n=t.label(e.command),a=e.command.split(":")[1].split("-");let o="";for(let e=0;e<a.length;e++)o=o+" "+r(a[e]);return n.length>0?n:o}function c(e,t){let n=t;for(let t=0;null!==n&&n!==n.parentElement;n=n.parentElement,++t){if(n.hasAttribute("data-lm-suppress-shortcuts"))return-1;if(n.matches(e))return t}return-1}const d=new Map;for(let e=0;e<t.keyBindings.length;e++){const n=t.keyBindings[e];let a=c(n.selector,s);if(a<0)continue;let o=A.CommandRegistry.formatKeystroke(n.keys);if(d.has(o)){let e=d.get(o);if(e[0]<a||e[0]===a&&Z.Selector.calculateSpecificity(e[1].selector)>Z.Selector.calculateSpecificity(n.selector))continue}d.set(o,[a,n])}let p=-1;const u=new Map;for(let[e,t]of d.values())p=Math.max(e,p),u.has(e)||u.set(e,[]),u.get(e).push(t);const m=[];for(let e=0;e<=p;e++)u.has(e)&&(m.push(u.get(e).map(e=>j.createElement("tr",{className:"jp-ContextualShortcut-TableRow",key:`${e.command}-${e.keys.join("-").replace(" ","_")}`},j.createElement("td",{className:ee},l(e)),j.createElement("td",{className:ee},i([...e.keys]))))),m.push(j.createElement("tr",{className:"jp-ContextualShortcut-TableLastRow",key:`group-${e}-last`})));const h=j.createElement("table",null,j.createElement("tbody",null,m));return(0,o.showDialog)({title:n.__("Keyboard Shortcuts"),body:h,buttons:[o.Dialog.cancelButton({label:n.__("Close")})]})}({commands:s,trans:a})}}),n){const e=a.__("Help");n.addItem({command:te.displayShortcuts,category:e})}}},pe={id:"@jupyterlab/apputils-extension:sanitizer",description:"Provides the HTML sanitizer.",autoStart:!0,provides:o.ISanitizer,requires:[r.ISettingRegistry],activate:(e,t)=>{const n=new o.Sanitizer,a=e=>{const t=e.get("allowedSchemes").composite,a=e.get("autolink").composite,o=e.get("allowNamedProperties").composite;t&&n.setAllowedSchemes(t),n.setAutolink(a),n.setAllowNamedProperties(o)};return t.load("@jupyterlab/apputils-extension:sanitizer").then(e=>{a(e),e.changed.connect(a)}).catch(e=>{console.error("Failed to load sanitizer settings:",e)}),n}},ue={id:"@jupyterlab/apputils-extension:kernels-settings",description:"Reserves the name for kernel settings.",autoStart:!0,requires:[r.ISettingRegistry],activate:(e,t)=>{t.load(ue.id)}},me=[ue,f,z,w,k,N,ne,ae,ie,oe,$,U,pe,W,B,le,se,ce,H,J,re,K,de,G]}}]);