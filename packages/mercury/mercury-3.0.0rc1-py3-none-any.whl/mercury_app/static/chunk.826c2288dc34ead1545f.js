"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[274],{60274(t,e,o){o.r(e);var n=o(25884),r=o(3128),c=o(18081);const s="__mercuryYdocAttachPatch";!function(){if(c.YNotebook.prototype[s])return;const t=c.YNotebook.prototype.insertCells;c.YNotebook.prototype.insertCells=function(e,o){if(!Array.isArray(o))return t.call(this,e,o);const s=o.map(t=>{const e=function(t,e){const o=new r.Map,s=new r.Text,a=new r.Map;if(o.set("source",s),o.set("metadata",a),o.set("cell_type",t.cell_type),o.set("id",t.id??n.UUID.uuid4()),"markdown"===t.cell_type)return new c.YMarkdownCell(o,s,{notebook:e},a);if("code"===t.cell_type){const t=new r.Array;return o.set("outputs",t),new c.YCodeCell(o,s,t,{notebook:e},a)}return new c.YRawCell(o,s,{notebook:e},a)}(t,this);return this._ycellMapping.set(e.ymodel,e),e});return this.transact(()=>{this._ycells.insert(e,s.map(t=>t.ymodel))}),s.forEach((t,e)=>{!function(t,e){if("function"==typeof t.setAttachments&&("markdown"===e.cell_type&&null!=e.attachments&&t.setAttachments(e.attachments),"raw"===e.cell_type&&e.attachments&&t.setAttachments(e.attachments)),"code"===e.cell_type){const o=e;t.execution_count=o.execution_count??null,o.outputs&&t.setOutputs(o.outputs)}if(null!=e.metadata&&t.setMetadata(e.metadata),null!=e.source){const o="string"==typeof e.source?e.source:e.source.join("");t.setSource(o)}}(t,o[e])}),s},c.YNotebook.prototype[s]=!0}(),function(){const t=Object.getOwnPropertyDescriptor(r.Text.prototype,"length");if(!t||!t.get)return;if(t.get.__mercuryPatched)return;const e=t.get;Object.defineProperty(r.Text.prototype,"length",{get(){return this.doc?e.call(this):0}}),Object.defineProperty(r.Text.prototype,"__mercuryPatched",{value:!0})}(),function(){if(r.UndoManager.prototype.__mercuryPatched)return;const t=r.UndoManager.prototype.addToScope;r.UndoManager.prototype.addToScope=function(e){const o=(Array.isArray(e)?e:[e]).filter(t=>t&&t.doc&&(!this.doc||t.doc===this.doc));if(0!==o.length)return t.call(this,o)},r.UndoManager.prototype.__mercuryPatched=!0}()}}]);