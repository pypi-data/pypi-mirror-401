Metadata-Version: 2.4
Name: mcp-seedream
Version: 1.1.9
Summary: MCP server for Doubao image generation - generates images from text prompts using Doubao's API
Project-URL: Homepage, https://github.com/aardpro/mcp-seedream
Project-URL: Repository, https://github.com/aardpro/mcp-seedream
Project-URL: Issues, https://github.com/aardpro/mcp-seedream/issues
Author-email: aardpro <chileehong@outlook.com>
License-Expression: MIT
License-File: LICENSE
Keywords: ai,api,doubao,image-generation,mcp,mcp-seedream,text-to-image
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.10
Requires-Dist: mcp>=1.0.0
Requires-Dist: minio>=7.2.7
Requires-Dist: openai>=1.3.7
Requires-Dist: requests>=2.31.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Requires-Dist: ruff>=0.1.0; extra == 'dev'
Description-Content-Type: text/markdown

# MCP Doubao å›¾åƒç”Ÿæˆå™¨ (MCP Doubao Image Generator)

[English](README.md) | [ä¸­æ–‡](README-CN.md)

ä¸€ä¸ª [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) æœåŠ¡å™¨ï¼Œèµ‹äºˆ AI åŠ©æ‰‹ä½¿ç”¨è±†åŒ… Seedream ä»æ–‡æœ¬æç¤ºç”Ÿæˆå›¾åƒçš„èƒ½åŠ›ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **è±†åŒ… Seedream é›†æˆ**ï¼šä½¿ç”¨è±†åŒ… Seedream API ä»æ–‡æœ¬æè¿°ç”Ÿæˆå›¾åƒ
- **å¤šå‚æ•°æ”¯æŒ**ï¼šæ”¯æŒå°ºå¯¸ã€æ ·å¼ã€è´¨é‡å’Œæ•°é‡é€‰é¡¹
- **ä¸“ç”¨æä¾›å•†**ï¼šä¸“ä¸ºè±†åŒ… Seedream æœåŠ¡è®¾è®¡
- **è·¨å¹³å°**ï¼šå®Œç¾æ”¯æŒ Windowsã€Linux å’Œ macOS
- **æ˜“äºé›†æˆ**ï¼šä¸º MCP å®¢æˆ·ç«¯æä¾›ç®€å•é…ç½®

## ğŸš€ å®‰è£…

### ä½¿ç”¨ uvx (æ¨è)

```bash
uvx mcp-seedream@latest
```

### ä½¿ç”¨ pip

```bash
pip install mcp-seedream@latest
```

### ä»æºç å®‰è£…

```bash
git clone https://github.com/aardpro/mcp-seedream.git
cd mcp-seedream
pip install -e .
```

## âš™ï¸ é…ç½®

### é…ç½®

#### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ä½¿ç”¨ MCP æœåŠ¡å™¨ä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¾ç½® `ARK_API_KEY` ç¯å¢ƒå˜é‡ã€‚ä»¥ä¸‹æ˜¯ä¸åŒæ“ä½œç³»ç»Ÿçš„è®¾ç½®æ–¹æ³•ï¼š

#### Windows (å‘½ä»¤æç¤ºç¬¦)
```cmd
set ARK_API_KEY=your-api-key-here
```

#### Windows (PowerShell)
```powershell
$env:ARK_API_KEY="your-api-key-here"
```

#### Linux/macOS (Bash/Zsh)
```bash
export ARK_API_KEY="your-api-key-here"
```

#### æ°¸ä¹…è®¾ç½® (Linux/macOS)
å°†ä»¥ä¸‹è¡Œæ·»åŠ åˆ°æ‚¨çš„ `~/.bashrc` æˆ– `~/.zshrc` æ–‡ä»¶ä¸­ï¼š
```bash
export ARK_API_KEY="your-api-key-here"
```

#### æ°¸ä¹…è®¾ç½® (Windows)
åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
1. æ‰“å¼€â€œç³»ç»Ÿå±æ€§â€å¯¹è¯æ¡† (å³é”®ç‚¹å‡»â€œæ­¤ç”µè„‘â€ -> â€œå±æ€§â€)
2. ç‚¹å‡»â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€
3. ç‚¹å‡»â€œç¯å¢ƒå˜é‡â€
4. åœ¨â€œç”¨æˆ·å˜é‡â€éƒ¨åˆ†ç‚¹å‡»â€œæ–°å»ºâ€
5. å˜é‡åï¼š`ARK_API_KEY`ï¼Œå˜é‡å€¼ï¼šæ‚¨çš„ API å¯†é’¥

#### é…ç½®æ–‡ä»¶

æœåŠ¡å™¨ä¼šä»å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é»˜è®¤è®¾ç½®ã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œè¯·æŒ‰ç…§MCPå®¢æˆ·ç«¯é…ç½®æŒ‡å—è¿›è¡Œç¯å¢ƒå˜é‡è®¾ç½®ã€‚

### MCP å®¢æˆ·ç«¯é…ç½®

å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ MCP å®¢æˆ·ç«¯é…ç½®ä¸­ï¼ˆä¾‹å¦‚ Claude Desktop, Cursorï¼‰ï¼š

#### é€‰é¡¹ 1: ä½¿ç”¨ uvx 

```json
{
  "mcpServers": {
    "McpSeedream": {
      "command": "uvx",
      "args": ["mcp-seedream"]
    }
  }
}
```

#### é€‰é¡¹ 2: ä½¿ç”¨ pip

```json
{
  "mcpServers": {
    "McpSeedream": {
      "command": "mcp-seedream"
    }
  }
}
```

#### é€‰é¡¹ 3: Windows ç³»ç»Ÿ 

```json
{
  "mcpServers": {
    "McpSeedream": {
      "command": "cmd",
      "args": [
        "/c",
        "chcp 65001 >nul && uvx mcp-seedream"
      ]
    }
  }
}
```

#### é€‰é¡¹ 4: Linux/macOSï¼š

```json
{
  "mcpServers": {
    "McpSeedream": {
      "command": "python",
      "args": ["-m", "main"]
    }
  }
}
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### `generate_image`

ä½¿ç”¨é…ç½®çš„ API ä»æ–‡æœ¬æç¤ºç”Ÿæˆå›¾åƒã€‚å½“ç”¨æˆ·æ˜ç¡®æˆ–éšå«åœ°è¦æ±‚åˆ›å»ºã€ç”Ÿæˆã€åˆ¶ä½œã€ç»˜åˆ¶ã€è®¾è®¡æˆ–å¯è§†åŒ–ä»»ä½•ç±»å‹çš„å›¾åƒã€å›¾ç‰‡ã€æ’å›¾ã€å›¾è¡¨ã€å›¾å½¢ã€è‰ºæœ¯ä½œå“ã€ç…§ç‰‡ã€è‚–åƒã€é£æ™¯ã€åœºæ™¯ã€æ¦‚å¿µå›¾ã€è®¾è®¡å›¾ã€å¡é€šã€åŠ¨æ¼«ã€æµ·æŠ¥ã€å°é¢ã€å›¾æ ‡ã€å¾½æ ‡ç­‰è§†è§‰å†…å®¹æ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤å·¥å…·ã€‚æ”¯æŒä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š1) æ–‡æœ¬åˆ°å›¾åƒï¼ˆä»…æç¤ºè¯ï¼‰ 2) å›¾åƒåˆ°å›¾åƒï¼ˆæç¤ºè¯+å•ä¸ªå›¾åƒï¼‰ 3) å¤šå›¾åƒèåˆï¼ˆæç¤ºè¯+å¤šä¸ªå›¾åƒï¼‰ã€‚æ”¯æŒæœ¬åœ°å›¾åƒæ–‡ä»¶è·¯å¾„å’Œå…¬å…±å›¾åƒURLï¼ˆæœ¬åœ°æ–‡ä»¶å°†è‡ªåŠ¨ä¸Šä¼ åˆ°MinIOï¼‰ã€‚

**å‚æ•°:**
- `prompt` (string, å¿…å¡«): æè¿°è¦ç”Ÿæˆå›¾åƒçš„æ–‡æœ¬
- `model` (string, å¯é€‰): ç”¨äºç”Ÿæˆçš„æ¨¡å‹ (è¦†ç›–é»˜è®¤å€¼)
- `n` (integer, å¯é€‰): ç”Ÿæˆå›¾åƒçš„æ•°é‡ (é»˜è®¤: 1, æœ€å¤§: 10)
- `size` (string, å¯é€‰): ç”Ÿæˆå›¾åƒçš„å°ºå¯¸ (é»˜è®¤: '2K')ã€‚å¯¹äºè±†åŒ… APIï¼Œä½¿ç”¨ '2K', '4K' æˆ–å…·ä½“å°ºå¯¸å¦‚ '1024x1024'
- `style` (string, å¯é€‰): ç”Ÿæˆå›¾åƒçš„é£æ ¼ (é»˜è®¤: 'vivid')
- `quality` (string, å¯é€‰): ç”Ÿæˆå›¾åƒçš„è´¨é‡ (é»˜è®¤: 'standard')
- `image` (string æˆ– string æ•°ç»„, å¯é€‰): ç”¨ä½œå›¾åƒç”Ÿæˆå‚è€ƒçš„å•ä¸ªå›¾åƒ URL æˆ–å›¾åƒ URL æ•°ç»„
- `sequential_image_generation` (string, å¯é€‰): å¯ç”¨ ('auto') æˆ–ç¦ç”¨ ('disabled') åºåˆ—å›¾åƒç”Ÿæˆä»¥åˆ›å»ºç›¸å…³å›¾åƒ (é»˜è®¤: 'disabled')
- `sequential_image_generation_options` (object, å¯é€‰): åºåˆ—å›¾åƒç”Ÿæˆé€‰é¡¹ï¼ŒåŒ…æ‹¬ max_images
- `attempts` (integer, å¯é€‰): ç”Ÿæˆå›¾åƒçš„å°è¯•æ¬¡æ•°ã€‚å¦‚æœæŒ‡å®šå¤šæ¬¡å°è¯•ï¼Œå°†ä½¿ç”¨ç›¸åŒçš„æç¤ºè¯å’Œå‚è€ƒå›¾åƒé‡å¤ç”Ÿæˆï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šæ¬¡æ•° (é»˜è®¤: 1, æœ€å¤§: 10)
- `output_dir` (string, å¿…å¡«): ä¿å­˜ç”Ÿæˆå›¾åƒçš„ç›®å½•ã€‚æ­¤å‚æ•°å¿…é¡»ç”±ä»£ç†åœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶æä¾›ï¼ˆä¸å†å…¨å±€é…ç½®ï¼‰ã€‚
- `target_filename` (string, å¯é€‰): ç”Ÿæˆå›¾åƒçš„ç›®æ ‡æ–‡ä»¶åã€‚å¦‚æœæœªæä¾›ï¼Œå°†ä½¿ç”¨æ—¶é—´æˆ³å’Œéšæœºæ•°å­—ç”Ÿæˆæ–‡ä»¶å

**ç¤ºä¾‹:**

æ–‡ç”Ÿå›¾:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "ä¸€åªå¯çˆ±çš„æŸ´çŠ¬åœ¨å…¬å›­é‡Œç©è€",
    "size": "2K",
    "style": "vivid",
    "n": 1,
    "output_dir": "./images"
  }
}
```

å›¾ç”Ÿå›¾ (ä½¿ç”¨å›¾åƒ URL):
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "å°†èƒŒæ™¯æ”¹ä¸ºæµ·æ»©åœºæ™¯",
    "image": "https://example.com/path/to/image.jpg",
    "size": "2K",
    "output_dir": "./images"
  }
}
```

å›¾ç”Ÿå›¾ (ä½¿ç”¨æœ¬åœ°å›¾åƒæ–‡ä»¶):
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "å°†èƒŒæ™¯æ”¹ä¸ºæµ·æ»©åœºæ™¯",
    "image": "./path/to/local/image.jpg",
    "size": "2K",
    "output_dir": "./images"
  }
}
```

å¤šå›¾èåˆ:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "å°†è¿™äº›å…ƒç´ åˆæˆä¸€ä¸ªåœºæ™¯",
    "image": ["http://175.178.248.52:9000/ai-images/1704218400_12345.jpg", "http://175.178.248.52:9000/ai-images/1704218400_67890.png"],
    "size": "2K",
    "output_dir": "./images"
  }
}
```

å¤šå›¾èåˆ (ä½¿ç”¨æœ¬åœ°å›¾åƒæ–‡ä»¶):
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "å°†è¿™äº›å…ƒç´ åˆæˆä¸€ä¸ªåœºæ™¯",
    "image": ["./path/to/local/image1.jpg", "./path/to/local/image2.png"],
    "size": "2K",
    "output_dir": "./images"
  }
}
```

åºåˆ—å›¾åƒç”Ÿæˆ:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "ç”Ÿæˆ 4 å¼ æ˜¾ç¤ºåŒä¸€è§’è‰²åœ¨ä¸åŒå­£èŠ‚çš„å›¾åƒ",
    "size": "2K",
    "sequential_image_generation": "auto",
    "sequential_image_generation_options": {
      "max_images": 4
    },
    "output_dir": "./images"
  }
}
```


## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ç›´æ¥è®© AI åŠ©æ‰‹ï¼š

- "ç”Ÿæˆä¸€å¼ æœªæ¥åŸå¸‚å¤œæ™¯çš„å›¾åƒ"
- "åˆ›å»ºä¸€å¹…å¥‡å¹»åŸå ¡è¢«æµ®ç©ºå±±è„‰ç¯ç»•çš„æ’å›¾"
- "åˆ¶ä½œä¸€å¼ æœºå™¨äººè¯»ä¹¦çš„å¡é€šé£æ ¼ç»˜ç”»"

## ğŸ’» å¼€å‘

### è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
git clone https://github.com/aardpro/mcp-seedream.git
cd mcp-seedream
pip install -e ".[dev]"
```

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

### æ„å»ºåŒ…

build && upload
```bash
rm -rf dist && pip install build && python -m build && pip install twine && twine upload dist/*
```

```bash
pip install build
python -m build
```

### å‘å¸ƒåˆ° PyPI

```bash
pip install twine
twine upload dist/*
```

## ä¿®æ”¹åçš„å‘å¸ƒæ­¥éª¤

å½“å¯¹é¡¹ç›®è¿›è¡Œä¿®æ”¹åï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å‘å¸ƒæ›´æ–°ç‰ˆæœ¬ï¼š

1. åœ¨ `pyproject.toml` ä¸­å¢åŠ ç‰ˆæœ¬å·
2. å®‰è£…æ„å»ºä¾èµ–ï¼š
   ```bash
   pip install build twine
   ```
3. æ„å»ºåŒ…ï¼š
   ```bash
   python -m build
   ```
4. æœ¬åœ°æµ‹è¯•æ„å»ºçš„åŒ…ï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼š
   ```bash
   pip install dist/mcp_seedream-*.whl
   ```
5. ä¸Šä¼ åˆ° PyPIï¼š
   ```bash
   twine upload dist/*
   ```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
doubao-image-generator/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ __main__.py
â”‚       â””â”€â”€ server.py
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE
```

## â“ å¸¸è§é—®é¢˜

### é…ç½®é—®é¢˜

è¯·ç¡®ä¿é¦–å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½® API è®¾ç½®ã€‚ARK_API_KEY æ˜¯å¿…éœ€çš„ï¼š

å¯¹äº MCP ç¯å¢ƒå˜é‡é…ç½®ï¼Œå‚è§ä¸Šé¢é…ç½®éƒ¨åˆ†çš„ç¤ºä¾‹ã€‚

### å›¾åƒç”Ÿæˆå¤±è´¥

å¦‚æœå›¾åƒç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ‚¨çš„ API å¯†é’¥æ˜¯å¦æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿçš„ç§¯åˆ†
2. æç¤ºè¯æ˜¯å¦è¿‡é•¿æˆ–åŒ…å«ç¦æ­¢å†…å®¹
3. è¯·æ±‚çš„å›¾åƒå°ºå¯¸æ˜¯å¦å—æ‚¨é€‰æ‹©çš„ API æä¾›å•†æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼
