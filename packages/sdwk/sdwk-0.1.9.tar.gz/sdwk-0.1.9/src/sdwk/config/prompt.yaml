# Prompt 配置文件
# 用于配置各种 LLM 提示词模板

# LLM 服务相关提示词
llm_service:
  # 语言提示词模板列表
  language_prompts:
    - |
      You are a helpful AI assistant. Please respond in {{lang}} language.
      If {{lang}} is "zh" or "zh-CN", respond in Simplified Chinese.
      If {{lang}} is "en", respond in English.
      If {{lang}} is "ja", respond in Japanese.

# AI 对话功能相关提示词
ai_chat:
  # 系统提示词
  system_prompt: |
    你是一个专业的软件开发追溯系统助手。你的任务是帮助用户理解和分析项目中的追溯关系、需求、设计、代码和测试等内容。

    请遵循以下原则：
    1. 基于提供的知识库内容回答问题
    2. 如果知识库中没有相关信息，请明确告知用户
    3. 回答要准确、简洁、专业
    4. 可以引用具体的节点信息来支持你的回答
    5. 使用中文回答问题

  # 通用知识库问答场景提示词
  general_context_prompt: |
    当前对话场景：通用知识库问答
    你可以访问整个项目的知识库，包括所有类型的追溯节点（需求、设计、代码、测试等）。

  # 特定节点问答场景提示词
  node_context_prompt: |
    当前对话场景：针对特定节点的深入讨论
    你正在讨论的节点：{node_title}
    节点类型：{node_kind}
    节点摘要：{node_summary}

  # 特定类型问答场景提示词
  kind_context_prompt: |
    当前对话场景：针对特定类型的问答
    当前关注的节点类型：{node_kind}
    你只能访问该类型的追溯节点。

  # RAG 上下文提示词模板
  rag_context_template: |
    以下是从知识库中检索到的相关信息：

    {context}

    请基于以上信息回答用户的问题。如果以上信息不足以回答问题，请明确告知用户。

# 数据提取相关提示词
extraction:
  # 需求提取提示词
  requirement_extraction: |
    请从以下文本中提取需求信息，包括：
    - 需求ID
    - 需求标题
    - 需求描述
    - 优先级
    - 状态

  # 设计提取提示词
  design_extraction: |
    请从以下文本中提取设计信息，包括：
    - 设计ID
    - 设计标题
    - 设计描述
    - 相关需求

  # 代码提取提示词
  code_extraction: |
    请从以下代码中提取关键信息，包括：
    - 文件路径
    - 类名
    - 方法名
    - 功能描述

# 追溯关系分析提示词
trace_analysis:
  # 关系推断提示词
  relationship_inference: |
    请分析以下两个节点之间的追溯关系：

    节点A：
    类型：{node_a_kind}
    标题：{node_a_title}
    摘要：{node_a_summary}

    节点B：
    类型：{node_b_kind}
    标题：{node_b_title}
    摘要：{node_b_summary}

    请判断它们之间是否存在追溯关系，如果存在，请说明关系类型（实现、测试、依赖等）。

  # 影响分析提示词
  impact_analysis: |
    请分析修改以下节点可能产生的影响：

    节点信息：
    类型：{node_kind}
    标题：{node_title}
    摘要：{node_summary}

    关联节点：
    {related_nodes}

    请列出可能受影响的节点，并说明影响的原因。
