[project]
name = "modaic"
dynamic = ["version"]
description = "Modular Agent Infrastructure Collection, a python framework for managing and sharing DSPy agents"
authors = [{ name = "Tyrin", email = "tytodd@mit.edu" }, {name = "Farouk", email = "farouk@modaic.dev"}]
readme = "README.md"
homepage = "https://github.com/modaic-ai/modaic"
license = {file = "LICENSE"}
requires-python = ">=3.10"
dependencies = [
    "dspy>=2.6.27",
    "gitpython>=3.1.45",
    "opik==1.8.42",
    "platformdirs>=4.3.8",
    "tomlkit>=0.13.3",
]

[project.urls]
Homepage = "https://github.com/modaic-ai/modaic"
Modaic = "https://www.modaic.dev"
Docs = "https://docs.modaic.dev"

[dependency-groups]
dev = [
    "ipykernel>=6.30.0",
    "pydoc-markdown>=4.8.2",
    "pydoc-mintlify>=0.1.0",
    "pytest>=8.4.1",
    "ruff>=0.12.7",
    "matplotlib>=3.10.6",
    "modaic",
    "rich>=14.1.0",
]
examples = [
    "langchain-text-splitters>=0.3.9",
    "pinecone>=7.3.0",
]

[tool.uv.sources]
modaic = { workspace = true }

[tool.ruff]
line-length = 120
fix = true
exclude = ["*scratchpad*.py", "**/*.ipynb"]

[tool.ruff.lint]
select = ["E", "F", "I", "B", "T20", "ERA", "ANN", "N"]
unfixable = [
  "F401",
  "F841",
]
ignore = ["ANN202","ANN002", "ANN003", "ANN204", "ANN401"]
extend-ignore = ["E501"]

#[tool.ruff.lint.flake8-todos]
#task-tags = ["TODO", "FIXME", "XXX", "BUG", "HACK", "NOTE", "CAVEAT", "DOCME"]

[tool.ruff.lint.flake8-annotations]
suppress-none-returning = true

[tool.uv.workspace]
members = [
    "tests/artifacts/test_repos/simple_repo",
    ".",
    "tests/artifacts/test_repos/simple_repo_with_compile",
    "tests/artifacts/test_repos/nested_repo",
    "tests/artifacts/test_repos/nested_repo_2",
    "tests/artifacts/test_repos/nested_repo_3",
    "tests/artifacts/test_repos/multi_module_repo",
    "tests/artifacts/test_repos/failing_repo",
]


[build-system]
requires = ["hatchling", "hatch-vcs"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.sdist]
include = ["modaic"]

[tool.hatch.build.targets.wheel]
packages = ["modaic"]

[tool.hatch.version]
source = "vcs"

[tool.pytest.ini_options]
pythonpath = ["."]
