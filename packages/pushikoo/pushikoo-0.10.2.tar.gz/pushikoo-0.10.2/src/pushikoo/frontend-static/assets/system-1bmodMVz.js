import{J as $,r,K as B,o as N,a8 as A,N as u,Q as m,R as t,c as s,b as n,W as l,Y as y}from"./index-DMKqdLaf.js";import{i as h,l as b,n as g,p as _,S,_ as L}from"./_plugin-vue_export-helper-DIV_95uD.js";import{S as T}from"./SchemaForm-Dd2o4P-y.js";import{L as I}from"./VSelect-0SukG3gG.js";import{V as x,a as w}from"./LoadingSpinner.vue_vue_type_style_index_0_scoped_0c8a0411_lang-D_MGrIbP.js";import{V as z}from"./VSnackbar-DhHOr01T.js";import{a as G}from"./VContainer-Dp3Q7MEs.js";import"./VTextField-Bjfd5Be9.js";import"./forwardRefs-DYN4dGLY.js";import"./VMenu-CRN2gxfd.js";const P={class:"d-flex align-center justify-space-between flex-wrap ga-4"},R={class:"text-h5 text-sm-h4 font-weight-bold mb-1"},U={class:"text-body-2 text-medium-emphasis mb-0"},j={class:"d-none d-sm-inline ml-2"},q={class:"text-h6 text-medium-emphasis mb-2"},D={class:"text-body-2 text-medium-emphasis mb-4"},F=$({__name:"system",setup(J){const c=r({}),i=r(null),f=r(!1),p=r(!1),o=r({show:!1,text:"",color:"success"}),{t:V}=B(),C=(e,a="success")=>{o.value.text=e,o.value.color=a,o.value.show=!0},v=async()=>{f.value=!0;try{const[e,a]=await Promise.all([S.getSystemConfigApiV1SystemConfigGet(),S.getSystemConfigSchemaApiV1SystemConfigSchemaGet().catch(()=>null)]);c.value=e||{},i.value=a}catch(e){console.error(e)}finally{f.value=!1}};N(()=>{v()}),A(()=>{v()});const k=async()=>{p.value=!0;try{await S.setSystemConfigApiV1SystemConfigPut({requestBody:c.value}),C(V("system.configurationSavedSuccessfully"),"success")}catch(e){console.error(e),C(V("system.failedToSaveConfiguration"),"error")}finally{p.value=!1}};return(e,a)=>(m(),u(G,{fluid:""},{default:t(()=>[s(x,{class:"mb-6"},{default:t(()=>[s(w,{cols:"12"},{default:t(()=>[n("div",P,[n("div",null,[n("h1",R,l(e.$t("system.title")),1),n("p",U,l(e.$t("system.description")),1)]),s(h,{color:"primary",size:"large",icon:e.$vuetify.display.xs,loading:p.value,disabled:!i.value,onClick:k},{default:t(()=>[s(b,{icon:"mdi-content-save"}),n("span",j,l(e.$t("system.saveSettings")),1)]),_:1},8,["icon","loading","disabled"])])]),_:1})]),_:1}),s(x,null,{default:t(()=>[s(w,{cols:"12"},{default:t(()=>[f.value?(m(),u(g,{key:0,class:"card-outlined"},{default:t(()=>[s(_,null,{default:t(()=>[s(I,{text:e.$t("system.loadingSystemStatus")},null,8,["text"])]),_:1})]),_:1})):i.value?(m(),u(g,{key:2,class:"card-outlined"},{default:t(()=>[s(_,null,{default:t(()=>[s(T,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=d=>c.value=d),schema:i.value,"root-schema":i.value},null,8,["modelValue","schema","root-schema"])]),_:1})]),_:1})):(m(),u(g,{key:1,class:"card-outlined"},{default:t(()=>[s(_,{class:"text-center py-12"},{default:t(()=>[s(b,{icon:"mdi-alert-circle-outline",size:"64",color:"error",class:"mb-4"}),n("div",q,l(e.$t("system.failedToLoadConfiguration")),1),n("div",D,l(e.$t("system.couldNotLoadSchema")),1),s(h,{color:"primary",variant:"tonal","prepend-icon":"mdi-refresh",onClick:v},{default:t(()=>[y(l(e.$t("common.retry")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}),s(z,{modelValue:o.value.show,"onUpdate:modelValue":a[2]||(a[2]=d=>o.value.show=d),color:o.value.color,location:"bottom right",rounded:"lg"},{actions:t(()=>[s(h,{variant:"text",onClick:a[1]||(a[1]=d=>o.value.show=!1)},{default:t(()=>[y(l(e.$t("common.close")),1)]),_:1})]),default:t(()=>[y(l(o.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1}))}}),ee=L(F,[["__scopeId","data-v-384d08b1"]]);export{ee as default};
