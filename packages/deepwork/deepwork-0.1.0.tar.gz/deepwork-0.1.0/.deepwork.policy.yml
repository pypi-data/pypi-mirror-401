- name: "README Accuracy"
  trigger: "src/**/*"
  safety: "README.md"
  instructions: |
    Source code in src/ has been modified. Please review README.md for accuracy:
    1. Verify project overview still reflects current functionality
    2. Check that usage examples are still correct
    3. Ensure installation/setup instructions remain valid
    4. Update any sections that reference changed code

- name: "Architecture Documentation Accuracy"
  trigger: "src/**/*"
  safety: "doc/architecture.md"
  instructions: |
    Source code in src/ has been modified. Please review doc/architecture.md for accuracy:
    1. Verify the documented architecture matches the current implementation
    2. Check that file paths and directory structures are still correct
    3. Ensure component descriptions reflect actual behavior
    4. Update any diagrams or flows that may have changed

- name: "Standard Jobs Source of Truth"
  trigger:
    - ".deepwork/jobs/deepwork_jobs/**/*"
    - ".deepwork/jobs/deepwork_policy/**/*"
  safety:
    - "src/deepwork/standard_jobs/deepwork_jobs/**/*"
    - "src/deepwork/standard_jobs/deepwork_policy/**/*"
  instructions: |
    You modified files in `.deepwork/jobs/deepwork_jobs/` or `.deepwork/jobs/deepwork_policy/`.

    **These are installed copies, NOT the source of truth!**

    Standard jobs (deepwork_jobs, deepwork_policy) must be edited in their source location:
    - Source: `src/deepwork/standard_jobs/[job_name]/`
    - Installed copy: `.deepwork/jobs/[job_name]/` (DO NOT edit directly)

    **Required action:**
    1. Revert your changes to `.deepwork/jobs/deepwork_*/`
    2. Make the same changes in `src/deepwork/standard_jobs/[job_name]/`
    3. Run `deepwork install --platform claude` to sync changes
    4. Verify the changes propagated correctly

    See CLAUDE.md section "CRITICAL: Editing Standard Jobs" for details.