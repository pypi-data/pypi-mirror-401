[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "clifpy"  
version = "0.3.7"
description = "A Python package for working with CLIF EHR data"
readme = "README.md"
license = {file = "LICENSE"}
authors = [
  {name = "CLIF Consortium", email = "clif_consortium@uchicago.edu"},
  {name = "Kaveri Chhikara", email = "kaveri.chhikara@gmail.com"},
  {name = "Dema Therese Maria", email = "theresemaria98@gmail.com"},
  {name = "Vaishvik Chaudhari", email = "Vaishvikc@gmail.com"},
  {name = "Zewei 'Whiskey' Liao", email = "whiskey0504@gmail.com"}
]
classifiers = [
  "Programming Language :: Python :: 3.9",
  "License :: OSI Approved :: Apache Software License",
  "Operating System :: OS Independent"
]
requires-python = ">=3.9"
dependencies = [
  "pandas",
  "duckdb",
  "pyarrow",
  "matplotlib",
  "seaborn",
  "pytest",
  "pytz",
  "tqdm",
  "polars>=1.33.1",
  "pyyaml>=6.0.2",
  "psutil>=7.1.0",
  "toml>=0.10.2",
  "build>=1.3.0",
  "twine>=6.2.0",
]

[tool.setuptools]
# Removed src layout; packages discovered from project root
include-package-data = true

[tool.setuptools.packages.find]
where = ["."]
include = ["clifpy*"]

[tool.setuptools.package-data]
clifpy = [
    "data/clif_demo/*.parquet", 
    "schemas/*.yaml",
    "data/comorbidity/*.yaml",
    "data/mdro.yaml"
]

[tool.pytest.ini_options]
markers = [
  "unit_conversion: marks tests related to unit conversion",
]
# addopts = "-p no:doctestplus"


[dependency-groups]
dev = [
    "ipykernel>=6.31.0",
    "marimo>=0.15.5",
    "memray>=1.19.1",
    "mkdocs>=1.6.1",
    "mkdocs-material>=9.6.20",
    "mkdocstrings[python]>=0.30.0",
    "nbformat>=5.10.4",
    "sybil>=9.2.0",
]
