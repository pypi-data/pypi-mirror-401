import{g as E,p as $,u as D,a as n,n as C,d as L,L as R,b as r,aB as Y,aE as we,aV as pe,c as q,f as Ve,aC as ee,k as A,_ as V,G as p,H as v,z as m,I as T,y as c,O as Se,Q as Ce,w as g,e as G,r as Q,bx as Le,t as X,by as xe,be as Be,m as I,F as te,D as ae,l as Pe,E as Ae,K as Te,x as w,Z as W,A as Ie,bz as Ee,v as $e,ac as De,bt as Me,M as Re,X as Fe,B as Ue,a7 as Ne,bA as ze,an as We}from"./main-DOt-U49O.js";import{d as se,C as O,V as He}from"./VDialog-C3BkCs2z.js";import{a as Oe}from"./change-password-dialog-B1cpZ-vs.js";import{S as Ke,V as je}from"./VForm-BkEGVkHb.js";import{d as oe,g as qe,i as Z,l as J,n as Ge,m as Qe,f as Xe,c as H}from"./VSelectionControl-D3iAHJ8o.js";import{d as K,a as ne,r as Ze,s as Je,k as Ye,l as et,t as tt,v as at,o as S,D as st,f as ot,n as le,L as nt,E as ie,h as re,F as lt,j as de,V as it}from"./forwardRefs-DU5TZuO6.js";import{u as rt}from"./ssrBoot-C5YMHJxE.js";const dt=$({text:String,...R(),...K()},"VToolbarTitle"),ut=E()({name:"VToolbarTitle",props:dt(),setup(e,t){let{slots:o}=t;return D(()=>{const a=!!(o.default||o.text||e.text);return n(e.tag,{class:L(["v-toolbar-title",e.class]),style:C(e.style)},{default:()=>[a&&r("div",{class:"v-toolbar-title__placeholder"},[o.text?o.text():e.text,o.default?.()])]})}),{}}}),ct=[null,"prominent","default","comfortable","compact"],mt=$({absolute:Boolean,collapse:Boolean,collapsePosition:{type:String,default:"start"},color:String,density:{type:String,default:"default",validator:e=>ct.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...at(),...R(),...tt(),...et(),...K({tag:"header"}),...ee()},"VToolbar"),ft=E()({name:"VToolbar",props:mt(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:a,backgroundColorStyles:s}=ne(()=>e.color),{borderClasses:i}=Ze(e),{elevationClasses:d}=Je(e),{roundedClasses:u}=Ye(e),{themeClasses:l}=Y(e),{rtlClasses:b}=we(),f=pe(e.extended===null?!!o.extension?.():e.extended),y=q(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),_=q(()=>f.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Ve({VBtn:{variant:"text"}}),D(()=>{const x=!!(e.title||o.title),B=!!(o.image||e.image),h=o.extension?.();return f.value=e.extended===null?!!h:e.extended,n(e.tag,{class:L(["v-toolbar",`v-toolbar--collapse-${e.collapsePosition}`,{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,i.value,d.value,u.value,l.value,b.value,e.class]),style:C([s.value,e.style])},{default:()=>[B&&r("div",{key:"image",class:"v-toolbar__image"},[o.image?n(S,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):n(se,{key:"image-img",cover:!0,src:e.image},null)]),n(S,{defaults:{VTabs:{height:A(y.value)}}},{default:()=>[r("div",{class:"v-toolbar__content",style:{height:A(y.value)}},[o.prepend&&r("div",{class:"v-toolbar__prepend"},[o.prepend?.()]),x&&n(ut,{key:"title",text:e.title},{text:o.title}),o.default?.(),o.append&&r("div",{class:"v-toolbar__append"},[o.append?.()])])]}),n(S,{defaults:{VTabs:{height:A(_.value)}}},{default:()=>[n(oe,null,{default:()=>[f.value&&r("div",{class:"v-toolbar__extension",style:{height:A(_.value)}},[h])]})]})]})}),{contentHeight:y,extensionHeight:_}}}),gt={name:"AppBanner",computed:{...p(v,["isBanner"]),...p(v,{banner:e=>e.adminFlags.bannerText})}};function ht(e,t,o,a,s,i){return e.isBanner?(c(),m(ft,{key:0,id:"banner",height:"36",density:"compact",flat:"",title:e.banner},null,8,["title"])):T("",!0)}const vt=V(gt,[["render",ht],["__scopeId","data-v-2458e7e5"]]),bt={name:"AdminBrowserLink",components:{CodexListItem:O},data(){return{mdiBookshelf:Ce}},computed:{...p(Se,["lastRoute"])}};function yt(e,t,o,a,s,i){const d=g("CodexListItem");return c(),m(d,{to:e.lastRoute,"prepend-icon":s.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const _t=V(bt,[["render",yt]]),kt=$({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Qe(),...Ge()},"VSwitch"),wt=E()({name:"VSwitch",inheritAttrs:!1,props:kt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:o,slots:a}=t;const s=G(e,"indeterminate"),i=G(e,"modelValue"),{loaderClasses:d}=st(e),{isFocused:u,focus:l,blur:b}=qe(e),f=Q(),y=Q(),_=Le&&window.matchMedia("(forced-colors: active)").matches,x=X(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),B=xe(),h=X(()=>e.id||`switch-${B}`);function ue(){s.value&&(s.value=!1)}function ce(M){M.stopPropagation(),M.preventDefault(),f.value?.input?.click()}return D(()=>{const[M,me]=Be(o),fe=Z.filterProps(e),ge=J.filterProps(e);return n(Z,I({ref:y,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},d.value,e.class]},M,fe,{modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,id:h.value,focused:u.value,style:e.style}),{...a,default:F=>{let{id:he,messagesId:ve,isDisabled:be,isReadonly:ye,isValid:j}=F;const U={model:i,isValid:j};return n(J,I({ref:f},ge,{modelValue:i.value,"onUpdate:modelValue":[P=>i.value=P,ue],id:he.value,"aria-describedby":ve.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:be.value,readonly:ye.value,onFocus:l,onBlur:b},me),{...a,default:P=>{let{backgroundColorClasses:N,backgroundColorStyles:k}=P;return r("div",{class:L(["v-switch__track",_?void 0:N.value]),style:C(k.value),onClick:ce},[a["track-true"]&&r("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](U)]),a["track-false"]&&r("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](U)])])},input:P=>{let{inputNode:N,icon:k,backgroundColorClasses:_e,backgroundColorStyles:ke}=P;return r(te,null,[N,r("div",{class:L(["v-switch__thumb",{"v-switch__thumb--filled":k||e.loading},e.inset||_?void 0:_e.value]),style:C(e.inset?void 0:ke.value)},[a.thumb?n(S,{defaults:{VIcon:{icon:k,size:"x-small"}}},{default:()=>[a.thumb({...U,icon:k})]}):n(Xe,null,{default:()=>[e.loading?n(nt,{name:"v-switch",active:!0,color:j.value===!1?void 0:x.value},{default:z=>a.loader?a.loader(z):n(ie,{active:z.isActive,color:z.color,indeterminate:!0,size:"16",width:"2"},null)}):k&&n(le,{key:String(k),icon:k,size:"x-small"},null)]})])])}})}})}),ot({},y)}}),pt={name:"AuthLoginDialog",components:{SubmitFooter:Ke,CodexListItem:O},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:Te}},computed:{...p(Ae,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...p(v,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...Pe(v,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:t})=>(this.submitButtonEnabled=t,this.submitButtonEnabled)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){globalThis.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){globalThis.removeEventListener("keyup",this._keyUpListener)},methods:{...ae(v,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:t})=>{if(!t)return;const o=this.registerMode?"register":"login";return this.doAuth(o)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function Vt(e,t,o,a,s,i){const d=g("CodexListItem"),u=g("SubmitFooter");return c(),m(He,{modelValue:e.showLoginDialog,"onUpdate:modelValue":t[7]||(t[7]=l=>e.showLoginDialog=l),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:w(({props:l})=>[n(d,I(l,{"prepend-icon":s.mdiLogin,title:i.loginLabel}),null,16,["prepend-icon","title"])]),default:w(()=>[n(je,{id:"authDialog",ref:"form"},{default:w(()=>[n(H,{modelValue:s.credentials.username,"onUpdate:modelValue":t[0]||(t[0]=l=>s.credentials.username=l),autocomplete:"username",label:"Username",rules:s.rules.username,clearable:"",autofocus:"",onKeydown:t[1]||(t[1]=W(l=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),n(H,{ref:"password",modelValue:s.credentials.password,"onUpdate:modelValue":t[2]||(t[2]=l=>s.credentials.password=l),autocomplete:s.registerMode?"new-password":"current-password",label:"Password",rules:s.rules.password,clearable:"",type:"password",onKeydown:t[3]||(t[3]=W(l=>{s.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),n(oe,null,{default:w(()=>[s.registerMode?(c(),m(H,{key:0,ref:"passwordConfirm",modelValue:s.credentials.passwordConfirm,"onUpdate:modelValue":t[4]||(t[4]=l=>s.credentials.passwordConfirm=l),autocomplete:"new-password",label:"Confirm Password",rules:s.rules.passwordConfirm,clearable:"",type:"password",onKeydown:W(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):T("",!0)]),_:1}),e.adminFlags.registration?(c(),m(wt,{key:0,modelValue:s.registerMode,"onUpdate:modelValue":t[5]||(t[5]=l=>s.registerMode=l),label:"Register"},{default:w(()=>[...t[8]||(t[8]=[Ie(" Register ",-1)])]),_:1},8,["modelValue"])):T("",!0),n(u,{verb:s.registerMode?"Register":"Login",table:"",disabled:!s.submitButtonEnabled,onSubmit:i.submit,onCancel:t[6]||(t[6]=l=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const St=V(pt,[["render",Vt],["__scopeId","data-v-f5e28bf6"]]),Ct={name:"AuthMenu",components:{AuthLoginDialog:St,ChangePasswordDialog:Oe,CodexListItem:O},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:Ee}},computed:{...p(v,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...ae(v,["logout"])}},Lt={key:0};function xt(e,t,o,a,s,i){const d=g("CodexListItem"),u=g("ChangePasswordDialog"),l=g("AuthLoginDialog");return e.user?(c(),$e("div",Lt,[n(d,{"prepend-icon":s.mdiLogout,title:i.logoutTitle,onClick:De(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),o.showChangePassword?(c(),m(u,{key:0,user:e.user},null,8,["user"])):T("",!0)])):(c(),m(l,{key:1}))}const Bt=V(Ct,[["render",xt]]),Pt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function At(e,t,o,a,s,i){return c(),m(ie,I({"aria-label":"loading",class:"codexProgressCircular",indeterminate:o.indeterminate},e.$attrs),null,16,["indeterminate"])}const Tt=V(Pt,[["render",At],["__scopeId","data-v-7bb4cf22"]]),It=$({actionText:String,bgColor:String,color:String,icon:Re,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...R(),...de(),...lt({size:void 0}),...ee()},"VEmptyState"),Et=E()({name:"VEmptyState",props:It(),emits:{"click:action":e=>!0},setup(e,t){let{emit:o,slots:a}=t;const{themeClasses:s}=Y(e),{backgroundColorClasses:i,backgroundColorStyles:d}=ne(()=>e.bgColor),{dimensionStyles:u}=re(e),{displayClasses:l}=Me();function b(f){o("click:action",f)}return D(()=>{const f=!!(a.actions||e.actionText),y=!!(a.headline||e.headline),_=!!(a.title||e.title),x=!!(a.text||e.text),B=!!(a.media||e.image||e.icon),h=e.size||(e.image?200:96);return r("div",{class:L(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,i.value,l.value,e.class]),style:C([d.value,u.value,e.style])},[B&&r("div",{key:"media",class:"v-empty-state__media"},[a.media?n(S,{key:"media-defaults",defaults:{VImg:{src:e.image,height:h},VIcon:{size:h,icon:e.icon}}},{default:()=>[a.media()]}):r(te,null,[e.image?n(se,{key:"image",src:e.image,height:h},null):e.icon?n(le,{key:"icon",color:e.color,size:h,icon:e.icon},null):void 0])]),y&&r("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),_&&r("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),x&&r("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:A(e.textWidth)}},[a.text?.()??e.text]),a.default&&r("div",{key:"content",class:"v-empty-state__content"},[a.default()]),f&&r("div",{key:"actions",class:"v-empty-state__actions"},[n(S,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:b}})??n(it,{onClick:b},null)]})])])}),{}}}),$t={name:"EmptyState"};function Dt(e,t,o,a,s,i){return c(),m(Et,{class:"empty"},Fe({_:2},[Ue(e.$slots,(d,u)=>({name:u,fn:w(l=>[Ne(e.$slots,u,I({props:d},l),void 0,!0)])}))]),1024)}const Mt=V($t,[["render",Dt],["__scopeId","data-v-c7e33c8c"]]),Rt=$({scrollable:Boolean,...R(),...de(),...K({tag:"main"})},"VMain"),Ft=E()({name:"VMain",props:Rt(),setup(e,t){let{slots:o}=t;const{dimensionStyles:a}=re(e),{mainStyles:s}=ze(),{ssrBootStyles:i}=rt();return D(()=>n(e.tag,{class:L(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:C([s.value,i.value,a.value,e.style])},{default:()=>[e.scrollable?r("div",{class:"v-main__scroller"},[o.default?.()]):o.default?.()]})),{}}}),Ut={name:"UnauthorizedEmptyState",components:{AppBanner:vt,AdminBrowserLink:_t,AuthMenu:Bt,PlaceholderLoading:Tt,EmptyState:Mt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:We}},computed:{...p(v,["isAuthChecked","isAuthorized","isUserAdmin"]),...p(v,{showAdminBrowserLink(e){return this.$router.currentRoute?.value?.name?.startsWith("admin")&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},Nt={class:"login"};function zt(e,t,o,a,s,i){const d=g("AppBanner"),u=g("AdminBrowserLink"),l=g("AuthMenu"),b=g("EmptyState"),f=g("PlaceholderLoading");return c(),m(Ft,{id:"unauthorized"},{default:w(()=>[n(d),e.isAuthChecked?(c(),m(b,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:s.mdiLockOutline},{default:w(()=>[r("div",Nt,[e.showAdminBrowserLink?(c(),m(u,{key:0})):T("",!0),n(l,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(c(),m(f,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const Qt=V(Ut,[["render",zt],["__scopeId","data-v-4d9418eb"]]);export{vt as A,Mt as E,Tt as P,Qt as U,ft as V,ut as a,_t as b,Ft as c,Bt as d};
