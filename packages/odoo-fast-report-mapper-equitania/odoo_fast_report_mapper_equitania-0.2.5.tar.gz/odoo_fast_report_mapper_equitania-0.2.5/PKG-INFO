Metadata-Version: 2.4
Name: odoo-fast-report-mapper-equitania
Version: 0.2.5
Summary: A Python library for creating, managing, and testing FastReport entries in Odoo environments
Home-page: https://github.com/equitania/odoo-fast-report-mapper
Author: Equitania Software GmbH
Author-email: info@equitania.de
Project-URL: Bug Reports, https://github.com/equitania/odoo-fast-report-mapper/issues
Project-URL: Source, https://github.com/equitania/odoo-fast-report-mapper
Project-URL: Documentation, https://www.ownerp.com/odoo-fastreport
Project-URL: Company, https://www.equitania.de
Keywords: odoo,fastreport,report,pdf,generator,yaml,mapping,cli
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Office/Business
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: License :: OSI Approved :: GNU Affero General Public License v3
Classifier: Operating System :: OS Independent
Classifier: Environment :: Console
Classifier: Natural Language :: English
Classifier: Natural Language :: German
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE.txt
Requires-Dist: OdooRPC>=0.10.1
Requires-Dist: click>=8.1.3
Requires-Dist: PyYaml>=5.4.1
Requires-Dist: tqdm>=4.65.0
Requires-Dist: python-dotenv>=0.19.0
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov>=2.0; extra == "dev"
Requires-Dist: black>=22.0; extra == "dev"
Requires-Dist: flake8>=4.0; extra == "dev"
Requires-Dist: mypy>=0.910; extra == "dev"
Requires-Dist: twine>=4.0; extra == "dev"
Provides-Extra: test
Requires-Dist: pytest>=6.0; extra == "test"
Requires-Dist: pytest-cov>=2.0; extra == "test"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: keywords
Dynamic: license-file
Dynamic: project-url
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# Odoo Fast Report Mapper

[![PyPI version](https://badge.fury.io/py/odoo-fast-report-mapper-equitania.svg)](https://badge.fury.io/py/odoo-fast-report-mapper-equitania)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: AGPL v3](https://img.shields.io/badge/License-AGPL%20v3-blue.svg)](https://www.gnu.org/licenses/agpl-3.0)

**Deutsch** | [English](#english)

## üá©üá™ Projektbeschreibung

Eine Python-Bibliothek zur Erstellung, Verwaltung und Testung von FastReport-Eintr√§gen in Odoo-Umgebungen. Dieses Tool unterst√ºtzt die Entwicklung und Wartung von FastReport-Dokumenten f√ºr Odoo-Module.

### Hauptfunktionen

- **Report-Mapping**: Automatische Erstellung und Aktualisierung von FastReport-Eintr√§gen in Odoo
- **Feld-Zuordnung**: Intelligente Zuordnung von Odoo-Modellfeldern zu Berichten
- **Berechnete Felder**: Unterst√ºtzung f√ºr benutzerdefinierte Berechnungen mit Parametern
- **Test-Rendering**: Validierung der FastReport-Dokumente vor der Produktionsfreigabe
- **Mehrsprachigkeit**: Deutsche und englische Berichtsnamen
- **Mehrere Exportformate**: PDF, TXT, XML, PNG, JPG, TIFF, ODS, ODT, XLS, DOC

### Workflow-Optionen

- **Workflow 0**: Nur Mapping (Standard) - Erstellt/aktualisiert Berichte in Odoo
- **Workflow 1**: Nur Testing - Testet FastReport-Rendering
- **Workflow 2**: Mapping und Testing - Beide Operationen

---

## üá¨üáß English

A Python library for creating, managing, and testing FastReport entries in Odoo environments. This tool supports the development and maintenance of FastReport documents for Odoo modules.

### Key Features

- **Report Mapping**: Automatic creation and updating of FastReport entries in Odoo
- **Field Mapping**: Intelligent mapping of Odoo model fields to reports
- **Calculated Fields**: Support for custom calculations with parameters
- **Test Rendering**: Validation of FastReport documents before production release
- **Multi-language**: German and English report names
- **Multiple Export Formats**: PDF, TXT, XML, PNG, JPG, TIFF, ODS, ODT, XLS, DOC

### Workflow Options

- **Workflow 0**: Mapping only (default) - Creates/updates reports in Odoo
- **Workflow 1**: Testing only - Tests FastReport rendering
- **Workflow 2**: Mapping and Testing - Both operations

---

## üì¶ Installation

### Systemanforderungen / System Requirements

- Python (>= 3.8)
- click (>= 8.1.3)
- OdooRPC (>= 0.10.1)
- PyYAML (>= 5.4.1)
- tqdm (>= 4.65.0)
- python-dotenv (>= 0.19.0)

### Mit pip installieren / Install with pip

```bash
pip install odoo-fast-report-mapper-equitania
```

### Entwicklungsumgebung / Development Environment

```bash
# Virtuelles Environment erstellen / Create virtual environment
uv venv && source .venv/bin/activate

# oder mit traditionellem pip / or with traditional pip
python -m venv .venv && source .venv/bin/activate

# Abh√§ngigkeiten installieren / Install dependencies
pip install -r requirements.txt

# Paket im Entwicklungsmodus installieren / Install package in development mode
pip install -e .
```

### Lokales Testen & Paket erstellen / Local Testing & Building

```bash
# 1. Entwicklungsumgebung aktivieren / Activate development environment
source .venv/bin/activate  # Linux/macOS
# oder / or
.venv\Scripts\activate  # Windows

# 2. Development-Dependencies installieren / Install development dependencies
pip install -r requirements-dev.txt

# 3. Code-Formatierung pr√ºfen / Check code formatting
black odoo_fast_report_mapper/ odoo_report_helper/ --check
flake8 odoo_fast_report_mapper/ odoo_report_helper/

# 4. Tests ausf√ºhren / Run tests
pytest tests/ -v

# 5. Paket lokal bauen / Build package locally
uv build
# oder mit setuptools / or with setuptools
python setup.py sdist bdist_wheel

# 6. Lokales Paket installieren / Install local package
pip install dist/odoo-fast-report-mapper-equitania-*.tar.gz

# 7. Paket testen / Test the package
odoo-fast-report-mapper --help

# 8. Paket-Integrit√§t pr√ºfen / Check package integrity
twine check dist/*
```

### Version aktualisieren & ver√∂ffentlichen / Update Version & Publish

```bash
# 1. Version in __version__.py anpassen / Update version in __version__.py
# Editiere: odoo_fast_report_mapper/__version__.py
# __version__ = "0.1.26"  # Beispiel / Example

# 2. Changelog aktualisieren / Update changelog
# Dokumentiere √Ñnderungen / Document changes

# 3. Build & Upload zu PyPI / Build & Upload to PyPI
uv build
twine upload dist/*

# 4. Git Tag erstellen / Create git tag
git tag v0.1.26
git push origin v0.1.26
```

**Hinweis:** Die Version wird jetzt zentral in `odoo_fast_report_mapper/__version__.py` verwaltet und automatisch von `setup.py` √ºbernommen.

---

## üöÄ Verwendung / Usage

### Erste Schritte / Getting Started

**1. Erstelle eine .env Datei / Create a .env file:**

```bash
# Kopiere die Beispiel-Datei / Copy the example file
cp .env.example .env

# Bearbeite .env mit deinen Zugangsdaten / Edit .env with your credentials
nano .env  # oder dein bevorzugter Editor / or your preferred editor
```

**2. Konfiguriere die Verbindung / Configure the connection:**

```bash
# .env Datei Beispiel / .env file example
ODOO_URL=https://your-odoo-instance.com
ODOO_PORT=443
ODOO_USER=admin
ODOO_PASSWORD=your_password
ODOO_DATABASE=your_database
ODOO_LANGUAGE=ger
ODOO_WORKFLOW=0
```

### Grundlegende Verwendung / Basic Usage

```bash
# Version anzeigen / Show version
odoo-fast-report-mapper --version
odoo-fr-mapper --version

# Hilfe anzeigen / Show help
odoo-fast-report-mapper --help

# Interaktiver Modus / Interactive mode
odoo-fast-report-mapper

# Direkter Aufruf mit YAML-Pfad / Direct call with YAML path
odoo-fast-report-mapper --yaml_path=./reports_yaml
```

### Erweiterte Beispiele / Advanced Examples

```bash
# Odoo v16 Entwicklungsdatenbank / Odoo v16 development database
odoo-fast-report-mapper --yaml_path=$HOME/gitbase/fr-core-yaml/v16/yaml

# Odoo v18 Produktionsumgebung / Odoo v18 production environment
odoo-fast-report-mapper --yaml_path=$HOME/gitbase/fr-core-yaml/v18/yaml

# Mit spezifischer .env Datei / With specific .env file
# Option 1: --env_path zeigt auf Verzeichnis / --env_path points to directory
odoo-fast-report-mapper --yaml_path=./yaml --env_path=/path/to/config/

# Option 2: --env_path zeigt direkt auf Datei / --env_path points directly to file
odoo-fast-report-mapper --yaml_path=./yaml --env_path=/path/to/config/.env

# Option 3: .env im aktuellen Verzeichnis / .env in current directory (default)
odoo-fast-report-mapper --yaml_path=./yaml
```

---

## ‚öôÔ∏è Konfiguration / Configuration

### Server-Konfiguration / Server Configuration

**WICHTIG / IMPORTANT:** Die Verbindungskonfiguration erfolgt jetzt √ºber eine `.env` Datei f√ºr bessere Sicherheit. / Connection configuration is now done via a `.env` file for better security.

**Erstelle eine `.env` Datei / Create a `.env` file:**

```bash
# Odoo Server Connection (Required)
ODOO_URL=https://your-odoo-instance.com
ODOO_PORT=443
ODOO_USER=admin
ODOO_PASSWORD=your_password
ODOO_DATABASE=your_database
ODOO_LANGUAGE=ger                 # 'ger' or 'eng'

# Optional Configuration (with defaults)
ODOO_COLLECT_YAML=False           # YAML collection mode
ODOO_DISABLE_QWEB=True            # Disable QWeb reports
ODOO_WORKFLOW=0                   # 0=Mapping, 1=Testing, 2=Both
```

**Sicherheitshinweise / Security Notes:**

- ‚úÖ Die `.env` Datei wird automatisch von `.gitignore` ausgeschlossen
- ‚úÖ Verwende `.env.example` als Vorlage
- ‚ö†Ô∏è Teile niemals deine `.env` Datei mit Credentials
- ‚ö†Ô∏è Nutze unterschiedliche Credentials f√ºr Produktion und Entwicklung

**Migration von YAML-Konfiguration / Migration from YAML Configuration:**

Falls du bisher `config.yaml` genutzt hast, kopiere die Werte einfach in die `.env` Datei:

```bash
# Alt (DEPRECATED): --server_path=./connection_yaml
# Neu: .env Datei im aktuellen Verzeichnis
```

### Report-Konfiguration / Report Configuration

Erstelle YAML-Dateien im `reports_yaml` Ordner:

```yaml
# Benennung / Naming
name:
  ger: Deutscher_Bericht
  eng: English_Report
report_name: eq_fr_sales_report
report_model: sale.order
attachment: ('Sales_Report.pdf')
print_report_name: ('Sales Report')

# Eigenschaften / Properties
report_type: fast_report
eq_export_type: pdf
eq_ignore_images: true
eq_handling_html_fields: standard
eq_multiprint: create_zip
multi: false
eq_print_button: false
attachment_use: true

# Firmen-IDs / Company IDs (optional)
company_id:
  - 1
  - 2

# Abh√§ngigkeiten / Dependencies
dependencies:
  - sale
  - account

# Erforderliche Felder / Required Fields
report_fields:
  sale.order:
    - id
    - name
    - partner_id
    - amount_total
    - state
  sale.order.line:
    - id
    - product_id
    - quantity
    - price_unit
    - price_total

# Berechnete Felder / Calculated Fields
calculated_fields:
  payment_text:
    eq_get_payment_terms:
      - partner_id.lang
      - currency_id
```

---

## üèóÔ∏è Architektur / Architecture

### Komponenten / Components

1. **CLI Interface** (`odoo_fast_report_mapper.py`): Befehlszeileninterface mit Click
2. **Connection Manager** (`odoo_connection.py`): OdooRPC-Integration und Verbindungsmanagement
3. **Report Processing** (`eq_report.py`): Report-Objekte und Validierung
4. **Utilities** (`eq_utils.py`): YAML-Verarbeitung und Hilfsfunktionen

### Datenfluss / Data Flow

```
YAML-Konfiguration ‚Üí Report-Objekte ‚Üí Odoo-Verbindung ‚Üí FastReport-Erstellung
```

---

## üß™ Testing

### Unit Tests ausf√ºhren / Run Unit Tests

```bash
# Alle Tests / All tests
python -m pytest tests/

# Spezifische Test-Datei / Specific test file
python -m pytest tests/utils_test.py

# Mit Verbose-Ausgabe / With verbose output
python -m pytest tests/ -v

# Mit Coverage / With coverage
python -m pytest tests/ --cov=odoo_fast_report_mapper
```

### Manuelle Tests / Manual Testing

```bash
# Verbindung testen / Test connection
python -c "from odoo_report_helper import utils; print(utils.prepare_connection('https://demo.odoo.com', 443))"

# YAML-Parsing testen / Test YAML parsing
python -c "from odoo_report_helper import utils; print(utils.parse_yaml('yaml_examples/reports_yaml/template.yaml'))"
```

---

## üõ†Ô∏è Entwicklung / Development

### Paket erstellen / Build Package

```bash
# Mit setuptools / With setuptools
python setup.py sdist bdist_wheel

# Mit UV (empfohlen / recommended)
uv build

# Paket pr√ºfen / Check package
twine check dist/*
```

### Code-Qualit√§t / Code Quality

```bash
# Formatierung / Formatting
black odoo_fast_report_mapper/ odoo_report_helper/

# Linting
flake8 odoo_fast_report_mapper/ odoo_report_helper/

# Typ-√úberpr√ºfung / Type checking
mypy odoo_fast_report_mapper/ odoo_report_helper/
```

---

## üîß Troubleshooting

### H√§ufige Probleme / Common Issues

#### Verbindungsfehler / Connection Errors
```bash
# SSL-Zertifikat-Probleme / SSL certificate issues
export PYTHONHTTPSVERIFY=0

# Proxy-Konfiguration / Proxy configuration
export HTTP_PROXY=http://proxy.company.com:8080
export HTTPS_PROXY=https://proxy.company.com:8080
```

#### Modul-Abh√§ngigkeiten / Module Dependencies
```bash
# Fehlende Module pr√ºfen / Check missing modules
odoo-fast-report-mapper --server_path=./config --yaml_path=./reports 2>&1 | grep "NOT INSTALLED"
```

#### YAML-Syntaxfehler / YAML Syntax Errors
```bash
# YAML-Syntax validieren / Validate YAML syntax
python -c "import yaml; yaml.safe_load(open('your_file.yaml'))"
```

---

## üìö Weitere Ressourcen / Additional Resources

- **FastReport f√ºr Odoo**: https://www.ownerp.com/odoo-fastreport
- **Equitania Software GmbH**: https://www.equitania.de
- **GitHub Repository**: https://github.com/equitania/odoo-fast-report-mapper
- **PyPI Package**: https://pypi.org/project/odoo-fast-report-mapper-equitania/

---

## ü§ù Mitwirkung / Contributing

Beitr√§ge sind willkommen! Bitte lese die Entwicklungsrichtlinien und erstelle einen Pull Request.

Contributions are welcome! Please read the development guidelines and create a pull request.

### Entwicklungsrichtlinien / Development Guidelines

1. **Code Style**: Befolge PEP 8 / Follow PEP 8
2. **Tests**: F√ºge Tests f√ºr neue Funktionen hinzu / Add tests for new features
3. **Dokumentation**: Aktualisiere die Dokumentation / Update documentation
4. **Commit-Nachrichten**: Verwende aussagekr√§ftige Commit-Nachrichten / Use meaningful commit messages

---

## üìÑ Lizenz / License

Dieses Projekt steht unter der **AGPLv3**-Lizenz. Weitere Details findest du in der [LICENSE.txt](LICENSE.txt) Datei.

This project is licensed under the **AGPLv3** license. See the [LICENSE.txt](LICENSE.txt) file for details.

---

## üìû Support

Bei Fragen oder Problemen:
- GitHub Issues: https://github.com/equitania/odoo-fast-report-mapper/issues
- E-Mail: info@equitania.de

For questions or issues:
- GitHub Issues: https://github.com/equitania/odoo-fast-report-mapper/issues
- Email: info@equitania.de  
