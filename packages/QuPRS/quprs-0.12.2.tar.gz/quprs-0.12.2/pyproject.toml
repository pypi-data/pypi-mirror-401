[build-system]
requires = ["hatchling", "hatch-vcs", "cmake"]
build-backend = "hatchling.build"

[project]
name = "QuPRS"
authors = [
    { name = "Wei-Jia Huang", email = "wei.jia.huang.physics@gmail.com" },
]
description = "QuPRS: Quantum Path-sum Reduction and Solver" 
keywords = ["pathsum", "weighted model counting", "quantum circuit", "equivalence checking", ]
readme = "README.md"
license-files  = ["LICENSE.md", "NOTICE.md"]
requires-python = ">=3.11"
classifiers = [
    "Development Status :: 4 - Beta", # (Alpha, Beta, Production/Stable)
    "Intended Audience :: Developers",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Operating System :: POSIX :: Linux",   
    "Operating System :: MacOS :: MacOS X", 
    "Topic :: Scientific/Engineering :: Physics",
    "Topic :: Scientific/Engineering :: Mathematics",
    "Topic :: Scientific/Engineering :: Electronic Design Automation (EDA)",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Software Development :: Testing",
]
dependencies = [
    "numpy",
    "sympy",
    "symengine",
    "qiskit<2.0,>=1.0.0",
    "qiskit-qasm3-import>=0.5.1",
    "psutil",
]
version = "0.12.2"
[project.optional-dependencies]
dev = [
    "ipykernel",
    "build",
    "pytest",
    "pytest-xdist",
    "pytest-cov",
    "pytest-flake8",
    "pytest-benchmark",
    "pytest-codspeed",
    "pytest-html",
    "pandas",
    "tqdm"
]
[project.urls]
Homepage = "https://github.com/PhysicsQoo/QuPRS" # GitHub link
PyPI = "https://pypi.org/project/QuPRS/"
# (Optional) Other URLs related to your project
"Bug Tracker" = "https://github.com/PhysicsQoo/QuPRS/issues"
"Documentation" = "https://github.com/PhysicsQoo/QuPRS#readme"

[tool.hatch.build.targets.wheel.hooks.custom]
path = "scripts/hatch_build.py"

[tool.hatch.build.targets.wheel]
artifacts = ["src/QuPRS/utils/wmc_tools/*"]
packages = ["src/QuPRS"]
pure = false

[tool.hatch.build.targets.sdist]
include = [
    "src",
    "scripts",
    "GPMC",
    "ganak",
    "LICENSE.md",
    "NOTICE.md",
    "README.md",
    "pyproject.toml"
]

[tool.hatch.version]
source = "static"

[tool.hatch.build.hooks.vcs]
version-file = "src/QuPRS/_version.py"

[tool.cibuildwheel]
# Skip PyPy, 32-bit, and musllinux builds
skip = ["pp*", "*i686*", "*musllinux*", "cp314*"]
build-frontend = "build"

[tool.cibuildwheel.linux]
before-all = "sh scripts/install_linux_deps.sh"

[tool.cibuildwheel.macos]
before-all = "brew install gmp mpfr zlib"