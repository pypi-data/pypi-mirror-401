# autowt Configuration File
# 
# This is a comprehensive example of all configuration options for autowt.
# Configuration is loaded from multiple sources in this order:
#   1. Global config: ~/.config/autowt/config.toml (Linux) or ~/Library/Application Support/autowt/config.toml (macOS)
#   2. Project config: autowt.toml or .autowt.toml in project root
#   3. Environment variables: AUTOWT_* prefix
#   4. Command line flags
#
# Later sources override earlier ones.

# ============================================================================
# Terminal Management
# ============================================================================

[terminal]
# How autowt opens worktrees in your terminal
# Options: "tab" (default), "window", "inplace", "echo"
#   - tab: Open in a new tab
#   - window: Open in a new window
#   - inplace: Switch the current terminal to the worktree directory
#   - echo: Output shell commands to stdout
# CLI: --terminal=tab
# ENV: AUTOWT_TERMINAL_MODE=tab
mode = "tab"

# Always create a new terminal session instead of switching to existing ones
# Useful if you want to keep multiple terminals open for the same worktree
# CLI: --ignore-same-session
# ENV: AUTOWT_TERMINAL_ALWAYS_NEW=true
always_new = false

# Force a specific terminal program instead of auto-detection
# Leave commented to use auto-detection
# ENV: AUTOWT_TERMINAL_PROGRAM=iterm2
# program = "iterm2"  # Options: iterm2, terminal, tmux, gnome-terminal, konsole, etc.

# ============================================================================
# Worktree Management
# ============================================================================

[worktree]
# Pattern for worktree directory location
# Variables: {repo_dir}, {repo_name}, {repo_parent_dir}, {branch}
# Default: "../{repo_name}-worktrees/{branch}"
# Can also use environment variables: "$HOME/worktrees/{repo_name}/{branch}"
# Example with repo_parent_dir: "{repo_parent_dir}/worktrees/{branch}"
# ENV: AUTOWT_WORKTREE_DIRECTORY_PATTERN="../{repo_name}-worktrees/{branch}"
directory_pattern = "../{repo_name}-worktrees/{branch}"

# Automatically fetch from remote before creating new worktrees
# CLI: --no-fetch (to disable)
# ENV: AUTOWT_WORKTREE_AUTO_FETCH=false
auto_fetch = true

# Automatically prefix new branch names with a template
# Variables: {repo_name}, {github_username} (if gh CLI is available)
# Examples:
#   branch_prefix = "feature/"           # Simple prefix
#   branch_prefix = "{github_username}/" # Use GitHub username
# When set, "autowt my-feature" creates "feature/my-feature" or "alice/my-feature"
# Also used when switching: "autowt my-feature" switches to "feature/my-feature" if it exists
# ENV: AUTOWT_WORKTREE_BRANCH_PREFIX="feature/"
# branch_prefix = "feature/"

# ============================================================================
# Cleanup Configuration
# ============================================================================

[cleanup]
# Default mode for cleanup command
# Options: "interactive" (default), "merged", "remoteless", "all"
# CLI: --mode=merged
# ENV: AUTOWT_CLEANUP_DEFAULT_MODE=merged
default_mode = "interactive"

# ============================================================================
# Init Scripts and Hooks
# ============================================================================

[scripts]
# Command to run after creating or switching to a worktree
# CLI: --init="npm install" (maps to session_init)
# ENV: AUTOWT_SCRIPTS_SESSION_INIT="npm install && npm run dev"
session_init = "echo 'Always run after creating a new worktree; copy env vars & install dependencies'"

[scripts.custom]
# Custom scripts for specialized worktree initialization
# First argument becomes the branch name by default, with branch prefix added
# Run with 'autowt <command> <arg>'
release = 'claude "Cut a release according to the project conventions"'

[scripts.custom.bugfix]
# Using the longer form of scripts.custom entries, you can customize the
# branch name and add a description for `autowt --help`.
# Branch names are sanitized automatically, you don't need to do it yourself.
branch_name = "gh issue view $1 --json title --template '{{.title}}'"
session_init = 'claude "Fix the bug described in GitHub issue $1"'
description = "Work on a GitHub issue"

# ============================================================================
# User Interface
# ============================================================================

# Confirmation prompts
[confirmations]
# Which operations require confirmation
# CLI: -y / --yes (to skip all confirmations)
# ENV: AUTOWT_CONFIRMATIONS_CLEANUP_MULTIPLE=false
cleanup_multiple = true  # When cleaning up multiple worktrees

# ENV: AUTOWT_CONFIRMATIONS_FORCE_OPERATIONS=false
force_operations = true  # When using --force flag