# EvalVault 개발 백서 (new_whitepaper) 작성 규칙

> **대상**: 내부 개발자
>
> **목표**: 신규 합류자가 코드베이스를 빠르게 이해하고, 기능 추가/리팩토링/운영을 안전하게 수행할 수 있도록 **근거 기반(코드/문서 경로)**으로 설명한다.

---

## 0. 이 백서의 불변 조건 (Non-negotiables)

- **근거 기반**: 핵심 기술 설명은 반드시 근거 경로를 포함한다.
  - 코드: `src/evalvault/...`
  - 문서: `docs/...`
- **도메인 중심**: 서술의 중심은 항상 `domain`의 책임과 흐름이다. 어댑터는 “연결/변환” 관점에서만 설명한다.
- **재현 가능성**: “말”로 끝내지 않고, 가능한 곳에 재현 명령(예: `uv run ...`) 또는 검증 포인트를 제공한다.
- **CLI ↔ Web 용어 통일**: 동일 개념은 CLI와 Web UI에서 동일한 명칭으로 설명한다.
- **장(파일) 단위 독립성**: 각 파일은 단독으로 읽어도 맥락이 유지되게 작성하되, 중복은 최소화한다.

---

## 1. 통일된 서술 템플릿 (모든 장 공통)

각 장은 아래 순서를 기본으로 유지한다.

1. **이 장의 목적 / 독자 / 선행 지식**
2. **TL;DR** (5~10줄)
3. **핵심 개념 & 용어**
4. **사용자 관점 플로우** (CLI 및 Web UI)
5. **내부 동작(구현) 플로우** (도메인 중심)
6. **설계 근거 / 트레이드오프**
7. **운영/테스트/디버깅 팁**
8. **근거(Evidence) 링크**
9. **전문가 관점 체크리스트** (아래 §2)
10. **향후 변경 시 업데이트 가이드** (문서 유지보수 루틴)

> 장이 매우 길어질 경우: “사용자 관점 → 내부 동작 → 근거” 흐름은 유지한 채, 세부 항목을 하위 섹션으로 쪼갠다.

---

## 2. 전문가 관점 통합 체크리스트 (섹션 작성 시 반드시 확인)

### 2.1 인지심리학자 (인지 부하 / 청킹)
- [ ] 한 섹션에 새로운 개념이 과도하게 밀집되지 않는가
- [ ] ‘정의 → 예시 → 반례/주의 → 요약’ 구조가 유지되는가
- [ ] 긴 목록/표는 의미 단위로 분해되었는가

### 2.2 교육공학자 (학습 경로 / 레벨링)
- [ ] 초급/중급/고급이 어디서 갈리는지 명확한가
- [ ] 최소 재현 예제(Minimum Repro)가 제공되는가
- [ ] 실습 순서가 “성공 경험”을 먼저 제공하는가

### 2.3 언어학자 (용어 / 문장)
- [ ] 용어는 한글/영문 표기를 일관되게 유지하는가
- [ ] 다의어를 회피하거나 문서 내에서 정의했는가
- [ ] 문장이 불필요하게 길지 않은가(과도한 종속절/수식어 제거)

### 2.4 Markdown 문서 전문가 (구조 / 탐색)
- [ ] H1/H2/H3 계층이 일관적이며 점프가 없는가
- [ ] 표/코드블록은 한 화면에서 의미가 유지되는가
- [ ] 내부 링크(상대 경로)와 앵커가 깨지지 않는가

### 2.5 UI/UX 전문가 (사용자 여정 / 일관성)
- [ ] 사용자의 목표(실행/비교/공유/디버깅) 관점으로 흐름이 설명되는가
- [ ] 에러/예외/실패 케이스의 피드백 경로가 설명되는가
- [ ] CLI와 Web UI의 동일 개념이 동일한 표현으로 연결되는가

### 2.6 디자이너 (시각적 리듬 / 스캔 가능성)
- [ ] 한 섹션이 ‘문단 → 코드 → 요약/표’ 같은 리듬을 갖는가
- [ ] 강조(굵게/코드) 규칙이 남용되지 않는가
- [ ] 다이어그램/표는 텍스트 설명을 동반하는가(수출/PDF 대비)

### 2.7 컴퓨터공학자 (정합성 / 경계)
- [ ] 의존성 방향(어댑터→포트→도메인)이 서술과 일치하는가
- [ ] 추상화(Port)가 “무엇”을 정의하고 “어떻게”는 강제하지 않는가
- [ ] 확장 지점(새 어댑터/포트/서비스)이 명확한가

### 2.8 개발자 (실무 / 유지보수)
- [ ] 실제 파일 경로와 실행 명령이 포함되어 있는가
- [ ] 테스트 전략(단위/통합/스모크)과 주의점이 있는가
- [ ] ‘고치기 쉬운’ 방향으로 책임과 경계를 설명하는가

---

## 3. Markdown/PDF(외부 렌더러) 호환 규칙

- **Mermaid**: 가능하면 사용하되, 렌더러가 Mermaid를 지원하지 않을 수 있으므로 **다이어그램의 핵심을 텍스트로도 설명**한다.
- **Callout(주의/팁)**: Notion/Bear에서 호환성을 높이기 위해 기본은 `> **NOTE**:` 형태의 blockquote를 사용한다.
- **코드 블록**: 언어 태그를 항상 붙인다(예: ```bash, ```python).
- **링크**: 폴더 내 상대 경로 링크를 기본으로 하되, 외부 문서 링크는 최소화한다(내부 SSoT 우선).

---

## 4. Evidence 표기 규칙

근거는 아래 두 형식 중 하나로 통일한다.

- 코드 근거: `src/evalvault/...`
- 문서 근거: `docs/...`

가능하면 “왜 이 파일이 근거인지” 한 줄을 함께 적는다.

---

## 5. 문서 완성 정의 (Definition of Done)

- 각 장에 TL;DR + Evidence + 체크리스트가 존재한다.
- 전체 INDEX에서 모든 장으로 이동 가능하다.
- 신규 합류자가 다음을 수행할 수 있다.
  - 최소 1개 e2e fixture로 실행
  - 결과 저장 경로 이해
  - CLI와 Web UI 연결(동일 DB) 이해
  - 아키텍처 경계(domain/ports/adapters) 이해
