Metadata-Version: 2.4
Name: ubigeos-peru
Version: 0.2.2
Summary: Librer칤a de Python que convierte c칩digos de ubigeo en su correspondiente departamento, provincia o distrito, y viceversa, adem치s de informaci칩n suplementaria.
Author-email: Michael Su치rez <michael-salvador@hotmail.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/MichaelSuarez0/ubigeos_peru
Keywords: ubigeo,peru,departamentos,provincias,distritos,enaho
Requires-Python: <3.13,>=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: orjson
Requires-Dist: rapidfuzz
Dynamic: license-file

# Ubigeos Per칰

Librer칤a de Python que convierte c칩digos de ubigeo en su correspondiente departamento, provincia o distrito, y viceversa. Incluye m칠todos clave para limpiar y validar nombres oficiales, consultar macrorregiones, coordenadas geogr치ficas, etc. Se integra f치cilmente con pandas y polars para procesar bases de datos peruanas como la ENAHO.

Las fuentes o bases de datos de ubigeos:
- **[ubigeos_inei_2025](https://github.com/MichaelSuarez0/ubigeos_peru/blob/main/databases/ubigeo_inei_2025.csv)**: 
  - Fuente: limpieza del Directorio Nacional de Gobiernos Regionales, Municipalidades Provinciales, Distritales y de Centros Poblados 2025 (Cuadros en Excel).
  - [Script y detalles aqu칤](https://github.com/MichaelSuarez0/ubigeos_peru/blob/main/construction/crear_ubigeo_inei.py)
  
- **[ubigeos_reniec_2025](https://github.com/MichaelSuarez0/ubigeos_peru/blob/main/databases/ubigeo_reniec_2025.csv)**: 
  - Fuente: solicitud de acceso a la informaci칩n p칰blica. SOLICITUD DE REGISTRO N췈 1931-2025.
  - [Script y detalles aqu칤](https://github.com/MichaelSuarez0/ubigeos_peru/blob/main/construction/crear_ubigeo_reniec.py)

## Caracter칤sticas Principales

- **Soporte Multi-institucional**: Soporte para consultar c칩digos de ubigeo de INEI y Reniec.
- **Normalizaci칩n Inteligente**: Manejo autom치tico de acentos y may칰sculas para validar ubicaciones.
- **Optimizado para Big Data**: 1 000 000 consultas en 0.25-0.65 segundos
- **Carga Diferida**: Optimizaci칩n de memoria mediante lazy loading de recursos y patr칩n singleton.
- **Metadatos Geogr치ficos**: Acceso a informaci칩n adicional como capital, altitud, superficie y coordenadas

## Instalaci칩n

Ejecutar en una terminal

```bash
pip install ubigeos-peru
```

Con uv

```bash
uv add ubigeos-peru
```

## Uso B치sico

### Inicializaci칩n

Se recomienda importar de la siguiente manera:

```python
import ubigeos_peru as ubg
```
La clase siempre tendr치 una 칰nica instancia para evitar cargar recursos dos veces.

## Consultar informaci칩n de Ubigeo
```python
# Departamento
departamento = ubg.get_departamento("1")                 # "Amazonas" (c칩digo corto)
departamento = ubg.get_departamento("010101")            # "Amazonas" (c칩digo completo)
departamento = ubg.get_departamento(10101)               # "Amazonas" (integer)
departamento = ubg.get_departamento(10101, normalize=True) # "AMAZONAS"

# Provincia
provincia = ubg.get_provincia("1201")                    # "Huancayo"
provincia = ubg.get_provincia(10101, normalize = True)   # "CHACHAPOYAS"

# Distrito
distrito = ubg.get_distrito("50110")                     # "San Juan Bautista"
distrito = ubg.get_distrito(150110)                      # "Comas"
```
## Obtener Ubigeo a partir de ubicaci칩n
```python
codigo_dept = ubg.get_ubigeo("Madre de dios", "departamentos") # "17"
codigo_prov = ubg.get_ubigeo("Huaral", "provincia")            # "1506"
codigo_dist = ubg.get_ubigeo("Lince", "distritos")             # "150116"
codigo_dist = ubg.get_ubigeo("Mi peru", "distritos", "reniec") # "240107"
```

## Validaci칩n y Normalizaci칩n ("agregar" o quitar tildes)
```python
ubg.validate_departamento("HUANUCO")                     # "Hu치nuco"
ubg.validate_departamento("HU츼NUCO", normalize=True)     # "HUANUCO"
ubicacion = ubg.validate_ubicacion("SAN MARTIN")         # "San Mart칤n"

# Validar y agregar tildes o may칰sculas a cualquier ubicaci칩n geogr치fica
ubicacion = ubg.validate_ubicacion("Mi peru")            # "Mi Per칰"
ubicacion = ubg.validate_ubicacion("Madre de dios")      # "Madre de Dios"
```

## Macrorregiones

```python
# Obtener macrorregi칩n - m칰ltiples formatos
macro = ubg.get_macrorregion("Amazonas")                 # "Oriente"
macro = ubg.get_macrorregion("AMAZONAS")                 # "Oriente" (may칰sculas)
macro = ubg.get_macrorregion("01")                       # "Oriente" (c칩digo string)
macro = ubg.get_macrorregion(1)                          # "Oriente" (entero)

# Con instituci칩n espec칤fica
macro_ceplan = ubg.get_macrorregion(25, institucion="ceplan")          # "Nororiente"
macro_ceplan = ubg.get_macrorregion("Ucayali", institucion="ceplan")   # "Nororiente"

# Mapeo completo de macrorregiones
mapa_macro = ubg.get_macrorregion_map()
```

## Metadatos Geogr치ficos

```python
# Capitales
capital_dept = ubg.get_metadato("La libertad", level="departamentos", key="capital") # "Trujillo"
capital_prov = ubg.get_metadato("Huarochiri", level="provincias", key="capital")     # "Matucana"

# Altitudes
altitud_dept = ubg.get_metadato("Cusco", level="departamento", key="altitud")       # "3439"
altitud_prov = ubg.get_metadato("Huarochiri", level="provincia", key="altitud")     # "2395"

# Superficies
sup1 = ubg.get_metadato("Lince", level="distritos", key="superficie")               # "3.03"
sup2 = ubg.get_metadato("San Isidro", level="distritos", key="superficie")          # "11.1"

```

---

## Integraci칩n con Pandas

La librer칤a est치 optimizada para trabajar con DataFrames de pandas, como por ejemplo encuestas de la Enaho:

```python
import pandas as pd

# Crear DataFrame de ejemplo (datos no oficiales)
df = pd.DataFrame({
    "UBIGEO": [10101, 50101, 110101, 150101, 210101, 220101],
    "POBLACION": [45694, 67823, 34576, 857497, 45983, 87564]
})

# Agregar informaci칩n geogr치fica
df["DEPARTAMENTO"] = ubg.get_departamento(df["UBIGEO"])
```
Esto generar치 el siguiente DataFrame:

```
    UBIGEO  POBLACION DEPARTAMENTO
0    10101      45694    Amazonas
1    50101      67823    Ayacucho
2   110101      34576    Ica
3   150101     857497    Lima
4   210101      45983    Puno
5   220101      87564    San Mart칤n
```
Tambi칠n se pueden pasar argumentos con una funci칩n lambda
```python
# Agregar informaci칩n geogr치fica
df["PROVINCIA"] = ubg.get_provinciadf(df["UBIGEO"], normalize= True)
```
Esto generar치 el siguiente DataFrame:

```
    UBIGEO  POBLACION DEPARTAMENTO  PROVINCIA
0    10101      45694    Amazonas    CHACHAPOYAS
1    50101      67823    Ayacucho    HUAMANGA
2   110101      34576    Ica         ICA
3   150101     857497    Lima        LIMA
4   210101      45983    Puno        PUNO
5   220101      87564    San Mart칤n  MOYOBAMBA
```
---

## Contribuci칩n

Por favor, cont치ctame si encuentras alguno de los siguientes:

- **Base de datos de la SUNAT actualizada**: Es la 칰nica que me falta.
- **Errores en el uso de la librer칤a**: Funciones que dan error cuando no deber칤an.
- **C칩digos incorrectos**: C칩digos INEI o RENIEC incorrectos.
- **Nombres incorrectos**: Ubicaciones que no siguen el nombre oficial.
- **Ubicaciones faltantes**: Provincias o distritos que no est치n en la base de datos.

游닎 michael-salvador@hotmail.com

## C칩mo contribuir

#### 1. Preparar el entorno
Debes clonar o hacer fork del repositorio para tener acceso a las carpetas /construction y /resources_readable

```bash
# Clona o haz fork del repositorio
git clone https://github.com/username/repo-name.git
cd repo-name

# Si usas uv
uv sync
uv pip install -e .

# Si usas pip
pip install -e .
```

#### 2. Identificar el recurso a actualizar

Los recursos disponibles son:
- `departamentos`-> ubigeo : departamento
- `provincias`-> ubigeo : provincia
- `distritos`-> ubigeo : distrito
- `equivalencias`-> UBICACION : Ubicaci칩n
- `inverted`-> nivel : { Ubicaci칩n : ubigeo }
- `macrorregiones`-> departamento : { macrorregion }
- `otros`-> Ubicaci칩n : capital, superficie, altitud, etc


## Licencia

Esta librer칤a utiliza datos oficiales de instituciones p칰blicas peruanas y est치 destinada para uso acad칠mico y de investigaci칩n.
