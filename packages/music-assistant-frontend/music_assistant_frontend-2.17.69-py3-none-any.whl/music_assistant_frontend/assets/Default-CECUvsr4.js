import{_ as le,a as Nt,s as t,b as Ut,e as xe,c as I,M as B,P as ct,$ as X,g as $e,R as se,d as Pe,f as ve,w as Te,h as ae,i as Qe,v as Oe,E as Kt,j as qe,k as Je,l as kt,m as xt,r as ue,n as mt,Q as jt,o as Gt,p as Ae,q as Ht,t as Yt}from"./index-CDEBH59G.js";import{R as Wt,b as $t,u as Xt}from"./vue-router-BgJK_hRC.js";import{c as G}from"./utils-CDN07tui.js";import{d as V,D as v,e as s,u as e,A as N,E as o,h as U,J as Re,K as st,H as n,f as _,an as Jt,b as m,ad as J,n as de,$ as Y,a1 as x,F as W,P as we,r as T,c as Q,ao as Zt,L as ea,M as ce,I as P,ap as ta,aq as aa,ar as la,as as ia,at as sa,au as ra,av as oa,aw as na,ax as ua,ay as da,az as ca,o as Ce,a0 as Ze,al as ma,s as Ue,a as Ct,w as Z,aA as pt,aB as pa,aC as ya,aD as va,aE as It,j as et,m as fa,O as Ee,aF as _a}from"./lucide-C2DU1LFb.js";import{u as Ke,D as ha,a as ba,b as ga,c as Pa,d as wa,e as ka,f as xa,g as $a,T as Ca,h as Ia,i as Sa,j as La,k as Va,P as Ta,l as Qa}from"./reka-ui-GpbaI08z.js";import{v as Ie,w as Ma,x as Aa,y as Ea,z as Fa}from"./vueuse-DIaEWNCo.js";import{_ as Da,c as Ba}from"./index-_We2Vr5Z.js";import{D as Oa}from"./constants-CXMxJR4j.js";import{u as qa}from"./vue-i18n-DySrp6mW.js";import{M as St,_ as Lt,i as Ra,a as za}from"./MediaItemThumb-CqYZMBB6.js";import{_ as We}from"./ProviderIcon.vue_vue_type_style_index_0_lang-B9jfcvK2.js";import{T as Na}from"./Toolbar-Dp1pNnt7.js";import{p as Vt,a as ze,e as tt,b as Ne,c as Me,i as Ua,g as Ka,d as re,V as rt,z as ja,l as Ga,A as Tt,B as Ha,C as at,q as De,D as Ve,E as Ya,F as Xe,G as yt,H as Wa,I as Xa,n as lt,J as Ja,K as Za,L as el,M as tl,N as al,O as ll,P as il,m as sl,Q as rl,f as ol}from"./vuetify-RelkxOq-.js";import{I as ke}from"./Icon-BFR8qrzJ.js";import{M as be}from"./Button-9OJ6xEmW.js";import{_ as nl,a as ul,b as dl}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-ZsAs7pQL.js";import{V as cl,P as ot,g as ml,a as vt}from"./PlayerCard-Cth5orVN.js";import{M as he,a as it}from"./marquee_text_sync-Bq__kE4i.js";import{_ as Qt}from"./NowPlayingBadge.vue_vue_type_style_index_0_lang-D7lqdhVg.js";import{L as pl}from"./ListItem-Dgbq8PpM.js";import{C as Fe}from"./color-BTziYnFN.js";import{u as yl}from"./userPreferences-DMJzf3W5.js";import"./qrcode-DSFhiIp2.js";import"./marked-C0Rlrcoy.js";/* empty css            */import"./swiper-Jy9GbtzK.js";import"./index-kQIztB-E.js";const vl=le(Nt,[["__scopeId","data-v-021e9d8d"]]),fl=V({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(a,{emit:i}){const p=Ke(a,i);return(u,c)=>(s(),v(e(ha),N({"data-slot":"sheet"},e(p)),{default:o(f=>[U(u.$slots,"default",Re(st(f)))]),_:3},16))}}),_l=V({__name:"SheetOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const i=a,l=Ie(i,"class");return(r,p)=>(s(),v(e(ba),N({"data-slot":"sheet-overlay",class:e(G)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",i.class)},e(l)),{default:o(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),hl=V({inheritAttrs:!1,__name:"SheetContent",props:{class:{default:void 0},side:{default:"right"},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:i}){const l=a,r=i,p=Ie(l,"class","side"),u=Ke(p,r);return(c,f)=>(s(),v(e(ga),null,{default:o(()=>[n(_l),n(e(Pa),N({"data-slot":"sheet-content",class:e(G)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a.side==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a.side==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a.side==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a.side==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",l.class)},{...c.$attrs,...e(u)}),{default:o(()=>[U(c.$slots,"default"),n(e(wa),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none"},{default:o(()=>[n(e(Jt),{class:"size-4"}),f[0]||(f[0]=_("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),bl=V({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const i=a,l=Ie(i,"class");return(r,p)=>(s(),v(e(ka),N({"data-slot":"sheet-description",class:e(G)("text-muted-foreground text-sm",i.class)},e(l)),{default:o(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),gl=V({__name:"SheetHeader",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("div",{"data-slot":"sheet-header",class:J(e(G)("flex flex-col gap-1.5 p-4",i.class))},[U(l.$slots,"default")],2))}}),Pl=V({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const i=a,l=Ie(i,"class");return(r,p)=>(s(),v(e(xa),N({"data-slot":"sheet-title",class:e(G)("text-foreground font-semibold",i.class)},e(l)),{default:o(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),ft="sidebar_state",wl=3600*24*7,kl="16rem",xl="18rem",$l="3rem",Cl="b",[nt,Il]=$a("Sidebar"),Sl={class:"flex h-full w-full flex-col"},Ll=["data-state","data-collapsible","data-variant","data-side"],Vl={"data-sidebar":"sidebar",class:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"},Tl=V({inheritAttrs:!1,__name:"Sidebar",props:{side:{default:"left"},variant:{default:"sidebar"},collapsible:{default:"offcanvas"},class:{}},setup(a){const i=a,{isMobile:l,state:r,openMobile:p,setOpenMobile:u}=nt();return(c,f)=>a.collapsible==="none"?(s(),m("div",N({key:0,"data-slot":"sidebar",class:e(G)("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",i.class)},c.$attrs),[U(c.$slots,"default")],16)):e(l)?(s(),v(e(fl),N({key:1,open:e(p)},c.$attrs,{"onUpdate:open":e(u)}),{default:o(()=>[n(e(hl),{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",side:a.side,class:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:de({"--sidebar-width":e(xl)})},{default:o(()=>[n(gl,{class:"sr-only"},{default:o(()=>[n(Pl,null,{default:o(()=>[...f[0]||(f[0]=[Y("Sidebar",-1)])]),_:1}),n(bl,null,{default:o(()=>[...f[1]||(f[1]=[Y("Displays the mobile sidebar.",-1)])]),_:1})]),_:1}),_("div",Sl,[U(c.$slots,"default")])]),_:3},8,["side","style"])]),_:3},16,["open","onUpdate:open"])):(s(),m("div",{key:2,class:"group peer text-sidebar-foreground hidden md:block","data-slot":"sidebar","data-state":e(r),"data-collapsible":e(r)==="collapsed"?a.collapsible:"","data-variant":a.variant,"data-side":a.side},[_("div",{class:J(e(G)("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a.variant==="floating"||a.variant==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)"))},null,2),_("div",N({class:e(G)("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",a.side==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a.variant==="floating"||a.variant==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)",i.class)},c.$attrs),[_("div",Vl,[U(c.$slots,"default")])],16)],8,Ll))}}),Ql=V({__name:"SidebarContent",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("div",{"data-slot":"sidebar-content","data-sidebar":"content",class:J(e(G)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",i.class))},[U(l.$slots,"default")],2))}}),Ml=V({__name:"SidebarFooter",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",class:J(e(G)("flex flex-col gap-2 p-2 pb-26 ml-auto",i.class))},[U(l.$slots,"default")],2))}}),Al=V({__name:"SidebarGroup",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("div",{"data-slot":"sidebar-group","data-sidebar":"group",class:J(e(G)("relative flex w-full min-w-0 flex-col p-2",i.class))},[U(l.$slots,"default")],2))}}),El=V({__name:"SidebarGroupContent",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",class:J(e(G)("w-full text-sm",i.class))},[U(l.$slots,"default")],2))}}),Fl=V({__name:"SidebarHeader",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("div",{"data-slot":"sidebar-header","data-sidebar":"header",class:J(e(G)("flex flex-col gap-2 p-2",i.class))},[U(l.$slots,"default")],2))}}),Dl=V({__name:"SidebarInset",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("main",{"data-slot":"sidebar-inset",class:J(e(G)("bg-background relative flex min-w-0 flex-1 flex-col overflow-x-hidden","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",i.class))},[U(l.$slots,"default")],2))}}),Mt=V({__name:"SidebarMenu",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",class:J(e(G)("flex w-full min-w-0 flex-col gap-1",i.class))},[U(l.$slots,"default")],2))}}),Bl=V({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(a,{emit:i}){const p=Ke(a,i);return(u,c)=>(s(),v(e(Ca),N({"data-slot":"tooltip"},e(p)),{default:o(f=>[U(u.$slots,"default",Re(st(f)))]),_:3},16))}}),Ol=V({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{default:void 0}},emits:["escapeKeyDown","pointerDownOutside"],setup(a,{emit:i}){const l=a,r=i,p=Ie(l,"class"),u=Ke(p,r);return(c,f)=>(s(),v(e(Ia),null,{default:o(()=>[n(e(Sa),N({"data-slot":"tooltip-content"},{...e(u),...c.$attrs},{class:e(G)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",l.class)}),{default:o(()=>[U(c.$slots,"default"),n(e(La),{class:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]),_:3},16,["class"])]),_:3}))}}),ql=V({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(a){const i=a;return(l,r)=>(s(),v(e(Va),N({"data-slot":"tooltip-trigger"},i),{default:o(()=>[U(l.$slots,"default")]),_:3},16))}}),_t=V({__name:"SidebarMenuButtonChild",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{default:void 0},asChild:{type:Boolean},as:{default:"button"}},setup(a){const i=a;return(l,r)=>(s(),v(e(Ta),N({"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":a.size,"data-active":a.isActive,class:e(G)(e(Kl)({variant:a.variant,size:a.size}),i.class),as:a.as,"as-child":a.asChild},l.$attrs),{default:o(()=>[U(l.$slots,"default")]),_:3},16,["data-size","data-active","class","as","as-child"]))}}),Rl=V({inheritAttrs:!1,__name:"SidebarMenuButton",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{},asChild:{type:Boolean},as:{default:"button"},tooltip:{default:void 0}},setup(a){const i=a,{isMobile:l,state:r}=nt(),p=Ie(i,"tooltip");return(u,c)=>a.tooltip?(s(),v(e(Bl),{key:1},{default:o(()=>[n(e(ql),{"as-child":""},{default:o(()=>[n(_t,Re(st({...e(p),...u.$attrs})),{default:o(()=>[U(u.$slots,"default")]),_:3},16)]),_:3}),n(e(Ol),{side:"right",align:"center",hidden:e(r)!=="collapsed"||e(l)},{default:o(()=>[typeof a.tooltip=="string"?(s(),m(W,{key:0},[Y(x(a.tooltip),1)],64)):(s(),v(we(a.tooltip),{key:1}))]),_:1},8,["hidden"])]),_:3})):(s(),v(_t,Re(N({key:0},{...e(p),...u.$attrs})),{default:o(()=>[U(u.$slots,"default")]),_:3},16))}}),zl=V({__name:"SidebarMenuItem",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),m("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",class:J(e(G)("group/menu-item relative",i.class))},[U(l.$slots,"default")],2))}}),Nl=V({__name:"SidebarProvider",props:{defaultOpen:{type:Boolean,default:!Fa?.cookie.includes(`${ft}=false`)},open:{type:Boolean,default:void 0},class:{default:void 0}},emits:["update:open"],setup(a,{emit:i}){const l=a,r=i,p=Ma("(max-width: 768px)"),u=T(!1),c=Aa(l,"open",r,{defaultValue:l.defaultOpen??!1,passive:l.open===void 0});function f(L){c.value=L,document.cookie=`${ft}=${c.value}; path=/; max-age=${wl}`}function S(L){u.value=L}function O(){return p.value?S(!u.value):f(!c.value)}Ea("keydown",L=>{L.key===Cl&&(L.metaKey||L.ctrlKey)&&(L.preventDefault(),O())});const F=Q(()=>c.value?"expanded":"collapsed");return Il({state:F,open:c,setOpen:f,isMobile:p,openMobile:u,setOpenMobile:S,toggleSidebar:O}),(L,$)=>(s(),v(e(Qa),{"delay-duration":0},{default:o(()=>[_("div",N({"data-slot":"sidebar-wrapper",style:{"--sidebar-width":e(kl),"--sidebar-width-icon":e($l)},class:e(G)("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",l.class)},L.$attrs),[U(L.$slots,"default")],16)]),_:3}))}}),Ul=V({__name:"SidebarTrigger",props:{class:{}},setup(a){const i=a,{toggleSidebar:l}=nt();return(r,p)=>(s(),v(e(Da),{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",class:J(e(G)("h-10 w-10",i.class)),onClick:e(l)},{default:o(()=>[n(e(Zt)),p[0]||(p[0]=_("span",{class:"sr-only"},"Toggle Sidebar",-1))]),_:1},8,["class","onClick"]))}}),Kl=Ba("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}}),jl=V({__name:"NavMain",props:{items:{}},setup(a){const i=ea(Wt),l=$t(),r=p=>l.path===p||l.path.startsWith(p+"/");return(p,u)=>(s(),v(e(Al),null,{default:o(()=>[n(e(El),{class:"flex flex-col gap-2"},{default:o(()=>[n(e(Mt),null,{default:o(()=>[(s(!0),m(W,null,ce(a.items,c=>(s(),v(e(zl),{key:c.title,class:"mr-1.5"},{default:o(()=>[n(e(Rl),N({as:e(i)},{ref_for:!0},{to:c.url},{"is-active":r(c.url),tooltip:c.title,class:"no-underline font-semibold text-sm"}),{default:o(()=>[c.icon?(s(),v(we(c.icon),{key:0,class:"mr-1"})):P("",!0),_("span",null,x(c.title),1)]),_:2},1040,["as","is-active","tooltip"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Gl=le(jl,[["__scopeId","data-v-9904e199"]]),At=function(){const a=localStorage.getItem("frontend.settings.menu_items"),i=a?a.split(","):Oa,l=[];for(const r of i)r==="home"&&l.push({label:"home",icon:ta,path:"/home",isLibraryNode:!1}),r==="search"&&l.push({label:"search",icon:aa,path:"/search",isLibraryNode:!1}),r==="artists"&&l.push({label:"artists",icon:la,path:"/artists",isLibraryNode:!0,hidden:t.libraryArtistsCount===0}),r==="albums"&&l.push({label:"albums",icon:ia,path:"/albums",isLibraryNode:!0,hidden:t.libraryAlbumsCount===0}),r==="tracks"&&l.push({label:"tracks",icon:sa,path:"/tracks",isLibraryNode:!0,hidden:t.libraryTracksCount===0}),r==="playlists"&&l.push({label:"playlists",icon:ra,path:"/playlists",isLibraryNode:!0,hidden:t.libraryPlaylistsCount===0}),r==="audiobooks"&&l.push({label:"audiobooks",icon:oa,path:"/audiobooks",isLibraryNode:!0,hidden:t.libraryAudiobooksCount===0}),r==="podcasts"&&l.push({label:"podcasts",icon:na,path:"/podcasts",isLibraryNode:!0,hidden:t.libraryPodcastsCount===0}),r==="radios"&&l.push({label:"radios",icon:ua,path:"/radios",isLibraryNode:!0,hidden:t.libraryRadiosCount===0}),r==="browse"&&l.push({label:"browse",icon:da,path:"/browse",isLibraryNode:!0}),r==="settings"&&l.push({label:"settings.settings",icon:ca,path:"/settings",isLibraryNode:!0});return l},Hl=V({__name:"AppSidebar",setup(a){const i=Xt(),{t:l}=qa(),r=At(),p=Q(()=>r.filter(u=>!u.hidden).map(u=>({title:l(u.label),url:u.path,icon:u.icon})));return(u,c)=>(s(),v(e(Tl),{collapsible:"icon"},{default:o(()=>[n(e(Fl),null,{default:o(()=>[n(e(Mt),null,{default:o(()=>[_("div",{class:"sidebar-header",onClick:c[0]||(c[0]=f=>e(i).push("/"))},[...c[1]||(c[1]=[_("img",{src:Ut,alt:"Music Assistant",class:"sidebar-header-logo"},null,-1),_("div",{class:"sidebar-header-title"},"Music Assistant",-1)])])]),_:1})]),_:1}),n(e(Ql),null,{default:o(()=>[n(Gl,{items:p.value},null,8,["items"])]),_:1}),n(e(Ml),null,{default:o(()=>[n(e(Ul),{class:"-ml-1"})]),_:1})]),_:1}))}}),Yl=le(Hl,[["__scopeId","data-v-791e6fdf"]]),Wl={class:"media-thumb"},Xl={style:{"margin-left":"-10px","padding-right":"5px"}},Jl=V({__name:"AddToPlaylistDialog",setup(a){const i=T(!1),l=T([]),r=T([]),p=T(),u=T([]);Ce(()=>{xe.on("playlistdialog",async F=>{i.value=!0,u.value=F.items,p.value=F.parentItem,await c()}),Ze(()=>{xe.off("playlistdialog")})});const c=async function(){l.value=[],r.value=[];const F=await I.getLibraryPlaylists();let L=u.value.length?u.value[0]:void 0;if(!L)return;"provider_mappings"in L||(L=await I.getItem(L.media_type,L.item_id,L.provider));const $=L?.media_type===B.RADIO;for(const D of F){if(!D.provider_mappings.filter(ee=>ee.available).length||!D.is_editable||p.value&&p.value.media_type===B.PLAYLIST&&D.item_id===p.value.item_id)continue;const q=I.providers[D.provider_mappings[0].provider_instance];$?q&&q.domain=="builtin"&&l.value.push(D):q&&(q.domain=="builtin"||q.is_streaming_provider||L?.provider_mappings.filter(ee=>ee.provider_instance==q.instance_id).length)&&l.value.push(D)}for(const D of Object.values(I.providers))D.supported_features.includes(ct.PLAYLIST_CREATE)&&D.supported_features.includes(ct.PLAYLIST_TRACKS_EDIT)&&($?D.domain=="builtin"&&r.value.push(D.instance_id):(D.domain=="builtin"||D.is_streaming_provider||L?.provider_mappings.filter(q=>q.provider_instance==D.instance_id).length)&&r.value.push(D.instance_id))},f=async function(F){I.addPlaylistTracks(F.item_id,u.value.map(L=>L.uri)),O(),Ua.info(X("background_task_added"))},S=async function(F){const L=prompt(X("new_playlist_name"));if(!L)return;const $=await I.createPlaylist(L,F);f($)},O=function(){i.value=!1};return(F,L)=>(s(),v(Vt,{modelValue:i.value,"onUpdate:modelValue":[L[0]||(L[0]=$=>i.value=$),L[1]||(L[1]=$=>{e(t).dialogActive=$})],fullscreen:"",transition:"dialog-bottom-transition"},{default:o(()=>[n(ze,null,{default:o(()=>[n(Na,{icon:"mdi-playlist-plus",title:e(X)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:O}]},null,8,["title","menu-items"]),n(tt),L[4]||(L[4]=_("br",null,null,-1)),n(Ne,null,{default:o(()=>[(s(!0),m(W,null,ce(l.value,$=>(s(),m("div",{key:$.item_id},[n(Me,{onClick:D=>f($)},{prepend:o(()=>[_("div",Wl,[n(St,{item:$,size:50},null,8,["item"])])]),title:o(()=>[_("div",null,x($.name),1)]),subtitle:o(()=>[_("div",null,x($.owner),1)]),append:o(()=>[$.provider_mappings?(s(),v(We,{key:0,domain:$.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):P("",!0)]),_:2},1032,["onClick"])]))),128)),L[2]||(L[2]=_("div",{style:{height:"30px"}},null,-1)),n(tt),L[3]||(L[3]=_("div",{style:{height:"30px"}},null,-1)),(s(!0),m(W,null,ce(r.value,$=>(s(),m("div",{key:$},[n(Me,{onClick:D=>S($)},{prepend:o(()=>[_("div",Xl,[n(We,{domain:e(I).providers[$].domain,size:50},null,8,["domain"])])]),title:o(()=>[_("div",null,x(e(X)("new_playlist")),1)]),subtitle:o(()=>[_("div",null,x(e(X)("create_playlist_on",[e(I).providers[$].name])),1)]),append:o(()=>[n(We,{domain:e(I).providers[$].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Zl=le(Jl,[["__scopeId","data-v-8911bda1"]]),ei=V({__name:"View",setup(a){return(i,l)=>{const r=ma("router-view");return s(),v(Ka,{id:"cont",class:J(["main-layout",{"main-layout--mobile":e(t).mobileLayout}])},{default:o(()=>[n(e(Nl),null,{default:o(()=>[e(t).mobileLayout?P("",!0):(s(),v(Yl,{key:0})),n(e(Dl),null,{default:o(()=>[_("div",{class:J(["content-section",{"content-section--mobile":e(t).mobileLayout}])},[n(r,null,{default:o(({Component:p})=>[(s(),v(we(p)))]),_:1}),n(Zl),n(vl)],2)]),_:1})]),_:1})]),_:1},8,["class"])}}}),ht=le(ei,[["__scopeId","data-v-15e3d043"]]),Et=V({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(i,l)=>a.isVisible&&a.playerQueue?(s(),v(ke,N({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e($e)(a.icon?.color,[[a.playerQueue.repeat_mode==e(se).OFF,null],[a.playerQueue.repeat_mode==e(se).ALL,"primary"],[a.playerQueue.repeat_mode==e(se).ONE,"primary"]]),icon:e($e)(a.icon?.icon,[[a.playerQueue.repeat_mode==e(se).OFF,"mdi-repeat-off"],[a.playerQueue.repeat_mode==e(se).ALL,"mdi-repeat"],[a.playerQueue.repeat_mode==e(se).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),variant:"button",onClick:l[0]||(l[0]=r=>e(I).queueCommandRepeat(a.playerQueue.queue_id||"",e($e)(null,[[a.playerQueue.repeat_mode==e(se).OFF,e(se).ALL],[a.playerQueue.repeat_mode==e(se).ALL,e(se).ONE],[a.playerQueue.repeat_mode==e(se).ONE,e(se).OFF]])))}),null,16,["disabled","color","icon"])):P("",!0)}});function je(a){return{activeSource:Q(()=>{const l=typeof a=="object"&&"value"in a?a.value:a;if(!(!l?.active_source||!l?.source_list))return l.source_list.find(r=>r.id===l.active_source)})}}const Ft=V({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=a,{activeSource:l}=je(Ue(i,"player")),r=Q(()=>i.playerQueue?.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1),p=Q(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Pe.NEXT_PREVIOUS)),u=Q(()=>l.value?l.value.can_next_previous:r.value||p.value);return(c,f)=>a.isVisible&&a.player?(s(),v(ke,N({key:0},a.icon,{disabled:!u.value,icon:"mdi-skip-next-outline",variant:"button",onClick:f[0]||(f[0]=S=>e(I).playerCommandNext(a.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Dt=V({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(a){const i=a,{activeSource:l}=je(Ue(i,"player")),r=Q(()=>i.playerQueue?i.playerQueue.items>0:!1),p=Q(()=>!(!i.player||i.playerQueue?.active||!i.player.current_media)),u=Q(()=>l.value?l.value.can_play_pause:r.value||p.value),c=Q(()=>i.player?.playback_state==ve.PLAYING?"mdi-pause":"mdi-play");return(f,S)=>a.isVisible&&a.player?(s(),v(ke,N({key:0},a.icon,{disabled:!u.value,icon:a.iconStyle?`${c.value}-${a.iconStyle}`:c.value,variant:"button",onClick:S[0]||(S[0]=O=>e(I).playerCommandPlayPause(a.player.player_id))}),null,16,["disabled","icon"])):P("",!0)}}),Bt=V({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=a,{activeSource:l}=je(Ue(i,"player")),r=Q(()=>!i.playerQueue?.active||!i.playerQueue?.items||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0),p=Q(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Pe.NEXT_PREVIOUS)),u=Q(()=>l.value?l.value.can_next_previous:r.value||p.value);return(c,f)=>a.isVisible&&a.player?(s(),v(ke,N({key:0},a.icon,{disabled:!u.value,icon:"mdi-skip-previous-outline",variant:"button",onClick:f[0]||(f[0]=S=>e(I).playerCommandPrevious(a.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Ot=V({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(i,l)=>a.isVisible&&a.playerQueue?(s(),v(ke,N({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e($e)(a.icon?.color,[[a.playerQueue.shuffle_enabled,"primary",""]]),icon:e($e)(a.icon?.icon,[[a.playerQueue.shuffle_enabled,"mdi-shuffle"],[a.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),variant:"button",onClick:l[0]||(l[0]=r=>e(I).queueCommandShuffle(a.playerQueue.queue_id,!a.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):P("",!0)}}),ti={key:0,class:"player-controls"},ai={key:0,class:"player-controls-elements"},li={key:1,class:"player-controls-elements"},ii={key:2},si={key:3,class:"player-controls-elements"},ri={key:4,class:"player-controls-elements"},bt=V({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){return(i,l)=>a.visibleComponents?(s(),m("div",ti,[a.visibleComponents&&a.visibleComponents.shuffle?.isVisible?(s(),m("div",ai,[n(Ot,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):P("",!0),a.visibleComponents&&a.visibleComponents.previous?.isVisible?(s(),m("div",li,[n(Bt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):P("",!0),a.visibleComponents&&a.visibleComponents.play?.isVisible?(s(),m("div",ii,[n(Dt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":"circle",icon:a.visibleComponents.play.icon},null,8,["player","player-queue","icon"])])):P("",!0),a.visibleComponents&&a.visibleComponents.next?.isVisible?(s(),m("div",si,[n(Ft,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):P("",!0),a.visibleComponents&&a.visibleComponents.repeat?.isVisible?(s(),m("div",ri,[n(Et,{"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):P("",!0)])):P("",!0)}}),qt=V({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(l,r)=>a.isVisible?(s(),v(ke,N({key:0},a.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e($e)(a.icon?.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),variant:"button",onClick:i}),null,16,["disabled","color"])):P("",!0)}}),oi={class:"tip-content"},ni={class:"tip-label"},ui={class:"tip-player-name"},di={class:"tip-hint"},Rt=V({__name:"SpeakerBtn",props:{color:{}},setup(a){const i=T(!1);let l=!1;const r=Q(()=>t.activePlayer?.playback_state===ve.PLAYING||t.activePlayer?.playback_state===ve.PAUSED),p=Q(()=>!(l||t.playerTipShown||!t.activePlayer||t.activePlayerId===Te.player_id));function u(){i.value=!1,l=!0,t.playerTipShown=!0}function c(){u(),t.showPlayersMenu=!0}function f(){i.value&&u()}return Ce(()=>{if(t.playerTipShown){l=!0;return}setTimeout(()=>{p.value&&(i.value=!0,document.addEventListener("click",f,{capture:!0}))},1e3)}),Ct(()=>{document.removeEventListener("click",f,{capture:!0})}),Z(()=>t.playerTipShown,S=>{S&&i.value&&(i.value=!1,l=!0)}),Z(i,(S,O)=>{O&&!S&&(l=!0,t.playerTipShown=!0)}),(S,O)=>(s(),v(e(nl),{open:i.value,"onUpdate:open":O[0]||(O[0]=F=>i.value=F)},{default:o(()=>[n(e(ul),{"as-child":""},{default:o(()=>[n(be,{variant:"icon",ripple:!1,icon:"",onClick:c},{default:o(()=>[n(re,{color:a.color?a.color:"",size:24,icon:e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]),_:1})]),_:1}),n(e(dl),{side:"top","side-offset":8,class:"player-tip",onPointerDownOutside:u,onEscapeKeyDown:u,onFocusOutside:u},{default:o(()=>[_("div",oi,[_("div",ni,x(r.value?S.$t("player_tip.currently_playing"):S.$t("player_tip.selected_player")),1),_("div",ui,x(e(t).activePlayer?.name),1),_("div",di,x(S.$t("player_tip.click_to_change")),1)]),O[1]||(O[1]=_("div",{class:"tip-arrow"},null,-1))]),_:1})]),_:1},8,["open"]))}}),ci={key:0},mi={key:0},pi={class:"text-caption ml-1"},yi={key:1},vi=V({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const i=a,l=T(!1),r=T(t.activePlayer?Math.round(t.activePlayer.group_members.length>0?t.activePlayer.group_volume:t.activePlayer.volume_level||0):0),p=Q(()=>{if(!t.activePlayer)return pt;if(t.activePlayer.volume_muted)return pa;const u=r.value;return u===0?ya:u<50?va:pt});return(u,c)=>i.isVisible&&e(t).activePlayer?(s(),m("div",ci,[n(rt,{modelValue:l.value,"onUpdate:modelValue":c[2]||(c[2]=f=>l.value=f),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:u.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:o(({props:f})=>[e(ae)("bp6")||!a.responsiveVolumeSize?(s(),m("div",mi,[n(ot,{style:"margin-right: 0px; margin-left: 0px;",width:a.volumeSize,"is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer?.available||e(t).activePlayer?.powered==!1||!e(t).activePlayer?.supported_features.includes(e(Pe).VOLUME_SET),"model-value":e(t).activePlayer.group_members.length>0?Math.round(e(t).activePlayer?.group_volume||0):Math.round(e(t).activePlayer?.volume_level||0),"allow-wheel":!0,"onUpdate:modelValue":c[0]||(c[0]=S=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolume(e(t).activePlayer?.player_id||"",S):e(I).playerCommandVolumeSet(e(t).activePlayer?.player_id||"",S)),"onUpdate:localValue":c[1]||(c[1]=S=>r.value=S)},{prepend:o(()=>[n(be,N({variant:"icon",size:"48",ripple:!1},{...f}),{default:o(()=>[(s(),v(we(p.value),{color:i.color?a.color:"",size:18},null,8,["color"])),_("div",pi,x(Math.round(r.value)),1)]),_:1},16)]),_:2},1032,["width","is-powered","disabled","model-value"])])):(s(),m("div",yi,[n(be,N({...f},{size:"48",variant:"icon"}),{default:o(()=>[(s(),v(we(p.value),{color:i.color?a.color:"",size:24},null,8,["color"])),_("div",{class:"text-caption",style:de({color:i.color?a.color:""})},x(Math.round(r.value)),5)]),_:1},16)]))]),default:o(()=>[n(ze,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:o(()=>[e(t).activePlayer?(s(),v(cl,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):P("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):P("",!0)}}),fi=le(vi,[["__scopeId","data-v-a4673e3b"]]),gt=V({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){return(i,l)=>(s(),m(W,null,[a.player&&a.player.isVisible?(s(),v(Rt,{key:0,color:a.player.color},null,8,["color"])):P("",!0),a.queue&&a.queue.isVisible?(s(),v(qt,{key:1,color:a.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):P("",!0),a.volume&&a.volume.isVisible?(s(),v(fi,{key:2,color:a.volume.color,"volume-size":a.volume.volumeSize,"responsive-volume-size":a.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):P("",!0)],64))}});function Be(a,i,l){if(a===void 0||i===void 0||l!==void 0&&l!==ve.PLAYING)return a;const r=i*1e3,p=Date.now(),c=Math.max(0,p-r)/1e3;return a+c}const _i={style:{width:"auto",height:"24px"}},hi={key:0,style:{width:"100%"}},bi=["onClick"],gi={key:0,class:"time-text-row"},Pi={class:"text-caption time-text-right"},wi=V({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(a){const{activeSource:i}=je(Ue(t,"activePlayer")),l=T(!1),r=T(!0),p=T(!1),u=T(0),c=T(0),f=T(0);let S=null;const O=(z=500)=>{S||(S=setInterval(()=>f.value=Date.now(),z))},F=()=>{S&&(clearInterval(S),S=null)};Ct(()=>{F()});const L=Q(()=>{if(i.value){if(t.activePlayer?.powered===!1)return!1;const h=!!t.activePlayer?.current_media?.duration;if(t.activePlayer?.current_media?.media_type==B.RADIO||t.activePlayer?.current_media?.duration==null)return!1;if(i.value.can_seek&&h)return!0}return!1}),$=Q(()=>{if(u.value!=null){if(l.value&&t.activePlayer?.current_media?.duration){const z=t.activePlayer.current_media.duration-u.value;return`-${Qe(z)}`}return Qe(u.value)}return"0:00"}),D=Q(()=>{const z=t.activePlayer?.current_media?.duration;return!z||t.activePlayer?.current_media?.media_type==B.RADIO?"":Qe(z)}),q=Q(()=>{f.value;const z=t.activePlayer?.playback_state==="playing",h=!!(t.activePlayerQueue&&t.activePlayerQueue.active),w=t.activePlayer?.current_media?.elapsed_time!=null;if(z&&(h||w)?O():F(),p.value)return c.value=u.value,u.value;const k=t.activePlayerQueue;return k?.elapsed_time!=null&&k?.elapsed_time_last_updated!=null?Be(k.elapsed_time,k.elapsed_time_last_updated,k.state)??0:t.activePlayer?.current_media?.elapsed_time!=null&&t.activePlayer?.current_media?.elapsed_time_last_updated!=null?Be(t.activePlayer.current_media.elapsed_time,t.activePlayer.current_media.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:t.activePlayer?.elapsed_time!=null&&t.activePlayer?.elapsed_time_last_updated!=null?Be(t.activePlayer.elapsed_time,t.activePlayer.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:0}),ee=Q(()=>{const z={};return t.curQueueItem?.media_item?.metadata?.chapters&&t.curQueueItem.media_item.metadata.chapters.forEach(h=>{z[h.start]=h.name}),z});Z(q,z=>{p.value||(u.value=z)});const te=function(){p.value=!0},fe=()=>{p.value=!1,!p.value&&t.activePlayer&&I.playerCommandSeek(t.activePlayer.player_id,Math.round(c.value))},oe=function(z){if(t.curQueueItem?.media_item?.metadata?.chapters){for(const h of t.curQueueItem.media_item.metadata.chapters)if(h.start==z){I.playMedia(t.curQueueItem.media_item.uri,void 0,void 0,h.position.toString());return}}};return(z,h)=>(s(),m("div",_i,[e(t).activePlayer?(s(),m("div",hi,[n(ja,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=w=>u.value=w),disabled:!L.value,style:{width:"100%"},min:0,max:e(t).activePlayer?.current_media?.duration,"hide-details":"","track-size":4,"thumb-size":r.value?0:10,"show-ticks":ee.value?"always":!1,ticks:ee.value,"tick-size":"4",color:a.color,onTouchstart:h[1]||(h[1]=w=>r.value=!1),onTouchend:h[2]||(h[2]=w=>r.value=!0),onMouseenter:h[3]||(h[3]=w=>r.value=!1),onMouseleave:h[4]||(h[4]=w=>r.value=!0),onStart:te,onEnd:fe},{"tick-label":o(({tick:w})=>[a.showLabels&&!r.value&&Object.values(ee.value).length<6?(s(),m("a",{key:0,class:"text-caption",onClick:k=>oe(w.value)},x(w.label),9,bi)):P("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),a.showLabels?(s(),m("div",gi,[_("div",{class:"text-caption time-text-left",onClick:h[5]||(h[5]=w=>l.value?l.value=!1:l.value=!0)},x($.value),1),_("div",Pi,x(D.value),1)])):P("",!0)])):P("",!0)]))}}),zt=le(wi,[["__scopeId","data-v-9fb885e9"]]),ki={class:"lyrics-container"},xi={key:0,class:"lyrics-loading"},$i={key:1,class:"lyrics-empty"},Ci={key:2,class:"lyrics-intro"},Ii={class:"song-title"},Si={class:"artist-name"},Li={class:"lyrics-coming-soon"},Vi=V({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1},lyrics:{default:void 0},lrcLyrics:{default:void 0}},setup(a){It(g=>({v275a5ede:g.textColor}));const i=a,l=(g,C=!0)=>{if(C&&!i.debugMode)return;(C?console.debug:console.log)(`[lyricSynch] ${g}`)},r=T([]),p=T(!1),u=T(-1),c=T(null),f=T(!1),S=T(0),O=T(0),F=Q(()=>{if(!q.value||!r.value.length)return!1;const g=r.value[0].time,C=i.position||0;return u.value===-1&&C<g}),L=Q(()=>{if(!i.mediaItem)return"";if("media_type"in i.mediaItem&&i.mediaItem.media_type==="track"){const g=i.mediaItem;if(g.artists?.length)return g.artists.map(C=>C.name).join(", ")}return"media_type"in i.mediaItem&&i.mediaItem.media_type==="artist"?i.mediaItem.name:""}),$=()=>i.lyrics??i.mediaItem?.metadata?.lyrics??null,D=()=>i.lrcLyrics??i.mediaItem?.metadata?.lrc_lyrics??null;Q(()=>{const g=$(),C=D();return!!g&&g.trim().length>0||!!C&&C.trim().length>0});const q=Q(()=>{if(r.value.some(A=>A.time>0))return!0;const g=D(),C=$();return!!(g&&g.includes("[")||C&&/\[\d+:\d+[.:]?\d*\]/.test(C))}),ee=g=>{const C=g.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(C){const A=parseInt(C[1]);let R=parseInt(C[2]),ie=0;if(C[3]){const me=C[3].replace(/[.:]/,".");ie=Math.round(parseFloat(me)*1e3)}return{time:(A*60*1e3+R*1e3+ie)/1e3,text:C[4].trim()||" "}}return{time:0,text:g.trim()||" "}},te=()=>{p.value=!0;try{const g=D()||"",C=$()||"";let A="",R=!1;if(g?(A=g,R=!0):C&&/\[\d+:\d+[.:]?\d*\]/.test(C)?(A=C,R=!0):C&&(A=C,R=!1),R){const ie=A.split(`
`).filter(K=>K.trim());r.value=ie.map(K=>ee(K)).filter(K=>K.text.trim()).sort((K,H)=>K.time-H.time),l(`Loaded ${r.value.length} synchronized lyrics lines`,!1)}else if(A){const ie=A.split(`
`).filter(K=>K.trim());r.value=ie.map(K=>({time:0,text:K.trim()})).filter(K=>K.text),l(`Loaded ${r.value.length} plain text lyrics lines`,!1)}else r.value=[]}catch(g){l(`Error processing lyrics: ${g}`,!1),r.value=[]}finally{p.value=!1}},fe=g=>{const C=g;l(`Calculating look-ahead at ${g.toFixed(3)}s`);let A=-1,R=-1;for(let ye=0;ye<r.value.length;ye++)if(r.value[ye].time<=C)A=ye;else{R=ye;break}if(l(`Current lyric index: ${A}, Next lyric index: ${R}`),R===0){const y=r.value[0].time-C;if(l(`Pre-lyrics intro: ${y.toFixed(2)}s until first lyric`),y>5){l("Long intro - using fixed look-ahead: 0.3s"),S.value=.3;return}else if(y>2){const d=Math.min(1,y*.15);l(`Medium intro - calculated look-ahead: ${d.toFixed(2)}s`),S.value=d;return}l("Short intro - using standard calculation")}if(R===-1||A===-1){l("Cannot determine appropriate look-ahead, using default: 0.3s"),S.value=.3;return}const ie=r.value[A].time,K=r.value[R].time,H=K-ie,me=S.value;l(`Gap analysis:
    - Current lyric time: ${ie.toFixed(3)}s
    - Next lyric time: ${K.toFixed(3)}s
    - Gap between lyrics: ${H.toFixed(3)}s
    - Previous look-ahead: ${me.toFixed(3)}s`);let ne;H<.5?(ne=.3,l(`Very rapid lyrics detected (${H.toFixed(2)}s gap) - using 30% look-ahead`)):H<.8?(ne=.1,l(`Fast lyrics detected (${H.toFixed(2)}s gap) - using 10% look-ahead`)):H<1.5?(ne=.2,l(`Medium lyrics detected (${H.toFixed(2)}s gap) - using 20% look-ahead`)):H<3?(ne=.3,l(`Slower lyrics detected (${H.toFixed(2)}s gap) - using 30% look-ahead`)):H>10?(ne=.02,l(`Very slow lyrics detected (${H.toFixed(2)}s gap) - using 2% look-ahead`)):(ne=.4,l(`Slow lyrics detected (${H.toFixed(2)}s gap) - using 40% look-ahead`));const Se=Math.min(1.5,H*ne);l(`Target look-ahead: ${Se.toFixed(3)}s`);const Ge=Math.abs(Se-me),Le=Math.min(.8,.3+Ge*.5),pe=me*(1-Le)+Se*Le;l(`Smoothed look-ahead: ${pe.toFixed(3)}s (adaptation rate: ${(Le*100).toFixed(0)}%)`),Math.abs(pe-me)>.3&&l(`Look-ahead adjusted: ${me.toFixed(2)}s â†’ ${pe.toFixed(2)}s`,!1),S.value=pe},oe=g=>g===void 0||!r.value.length||!q.value||f.value,z=g=>{const C=Math.round((g+S.value)*1e3);let A=-1;for(let R=0;R<r.value.length&&Math.round(r.value[R].time*1e3)<=C;R++)A=R;return A},h=(g,C)=>{g<0||g===u.value||(l(`Lyric activated: "${r.value[g].text}"`),l(`Activating lyric at ${C.toFixed(2)}s (adjusted: ${(C+S.value).toFixed(2)}s):
    - Index: ${g}
    - Lyric time: ${r.value[g].time.toFixed(2)}s`),l(`Transition details:
    - Raw position: ${C.toFixed(3)}s
    - Dynamic look-ahead: ${S.value.toFixed(3)}s
    - Adjusted position: ${(C+S.value).toFixed(3)}s`),g>0&&w(g,C),O.value=C,u.value=g,et(()=>k()))},w=(g,C)=>{const A=C-O.value,R=r.value[g].time-r.value[g-1].time;l(`Timing analysis:
    - Expected gap: ${R.toFixed(3)}s
    - Actual gap: ${A.toFixed(3)}s
    - Difference: ${(A-R).toFixed(3)}s`)},k=()=>{const g=document.querySelector(".lyrics-line.active"),C=c.value;g&&C&&g.scrollIntoView({behavior:"smooth",block:"center"})};return Z([()=>i.mediaItem?.item_id,()=>i.lyrics,()=>i.lrcLyrics],()=>{te()},{immediate:!0}),Z(()=>i.position,g=>{if(oe(g))return;const C=g??0;fe(C);const A=z(C);A!==u.value&&h(A,C)}),Ce(()=>{const g=c.value;g&&g.addEventListener("scroll",()=>{f.value=!0,setTimeout(()=>{f.value=!1},8e3)},{passive:!0})}),(g,C)=>(s(),m("div",ki,[p.value?(s(),m("div",xi,[n(Ga,{indeterminate:"",color:a.textColor},null,8,["color"]),_("div",null,x(e(X)("loading_lyrics")),1)])):r.value.length?F.value&&q.value?(s(),m("div",Ci,[_("div",Ii,x(i.mediaItem?.name),1),_("div",Si,x(L.value),1),_("div",Li,x(e(X)("lyrics_will_appear_soon")),1)])):(s(),m("div",{key:3,ref_key:"lyricsContainer",ref:c,class:J(["lyrics-scroll-container",{"static-lyrics":!q.value}])},[(s(!0),m(W,null,ce(r.value,(A,R)=>(s(),m("div",{key:R,class:J(["lyrics-line",{active:u.value===R||!q.value}])},x(A.text),3))),128))],2)):(s(),m("div",$i,x(e(X)("no_lyrics_available")),1))]))}}),Ti=le(Vi,[["__scopeId","data-v-1a18eb83"]]),Qi=["onClick"],Mi={class:"main"},Ai={key:0,class:"main-media-details"},Ei={key:0,class:"main-media-details-image"},Fi={key:1,class:"icon-thumb-large"},Di={class:"main-media-details-track-info"},Bi={key:8,style:{margin:"auto","padding-top":"20px"}},Oi={key:1,class:"main-queue-items"},qi={class:"queue-items-scroll-box"},Ri={class:"media-thumb listitem-media-thumb"},zi={class:"title-row"},Ni={class:"d-flex"},Ui={style:{"white-space":"nowrap"},class:"pr-1"},Ki={key:0},ji={key:0,style:{"margin-left":"50px"}},Gi={key:0,class:"text-caption"},Hi={key:1,class:"lyrics-wrapper"},Yi={key:2,class:"main-queue-items"},Wi={class:"main-media-details-image main-media-details-image-alt"},Xi={key:1,class:"icon-thumb-large"},Ji={class:"player-bottom"},Zi={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},es={class:"media-controls"},ts={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},as={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ls=V({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){const{name:i}=Tt(),l=a,r=new it,p=T(-1),u=new it,c=T([]),f=T(0),S=T(!1),O=T(0);let F=null;const L=(y=250)=>{F||(F=setInterval(()=>O.value=Date.now(),y))},$=()=>{F&&(clearInterval(F),F=null)},D=Q(()=>{O.value;const y=t.activePlayer?.playback_state===ve.PLAYING,d=t.activePlayerQueue;return y&&d?.active?L():$(),d?.elapsed_time!=null&&d?.elapsed_time_last_updated!=null?Be(d.elapsed_time,d.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:0}),q=Q(()=>t.activePlayerQueue?c.value.slice(t.activePlayerQueue.current_index):[]),ee=Q(()=>t.activePlayerQueue?c.value.slice(0,t.activePlayerQueue.current_index).reverse():[]),te=T({plain:null,synced:null}),fe=Q(()=>{const y=te.value.plain,d=te.value.synced;return!!y&&y.trim().length>0||!!d&&d.trim().length>0}),oe=async()=>{if(te.value={plain:null,synced:null},!t.showFullscreenPlayer)return;const y=t.curQueueItem?.media_item;if(!y||y.media_type!==B.TRACK)return;const d=y,b=d.metadata?.lyrics?.trim()||null,M=d.metadata?.lrc_lyrics?.trim()||null;if(b||M){te.value={plain:b,synced:M};return}try{const[E,j]=await I.getTrackLyrics(d);te.value={plain:E,synced:j},(E||j)&&(d.metadata={...d.metadata,...E&&{lyrics:E},...j&&{lrc_lyrics:j}})}catch(E){console.error("Failed to fetch track lyrics:",E)}};Z(()=>t.curQueueItem?.media_item?.item_id,oe,{immediate:!0}),Z(()=>t.showFullscreenPlayer,y=>{y&&oe()});const z=Q(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),h=Q(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),w=Q(()=>Oe.display.height.value>800),k=function(y){t.showFullscreenPlayer=!1,ue.push({name:y.media_type,params:{itemId:y.item_id,provider:y.provider}})},g=async function(){const y=t.activePlayer?.current_media;if(!y)return;const d=t.curQueueItem?.media_item;if(d&&d.media_type===B.TRACK)t.showFullscreenPlayer=!1,ue.push({name:"track",params:{itemId:d.item_id,provider:d.provider}});else{const b=y.artist?`${y.artist} - ${y.title}`:y.title||"";try{const M=await I.getLibraryTracks(void 0,b,5);if(M.length>0){let E=M[0];if(y.artist&&y.title){const j=M.find(ge=>ge.name.toLowerCase()===y.title.toLowerCase()&&ge.artists?.some(_e=>_e.name.toLowerCase()===y.artist.toLowerCase()));j&&(E=j)}t.showFullscreenPlayer=!1,ue.push({name:"track",params:{itemId:E.item_id,provider:E.provider}});return}}catch(M){console.error("Error searching library for track:",M)}t.globalSearchTerm=b,ue.push({name:"search"}),t.showFullscreenPlayer=!1}},C=async function(){const y=t.activePlayer?.current_media;if(!y?.album)return;const d=t.curQueueItem?.media_item;if(!(d&&y.album===d.name))if(d&&"album"in d&&d.album)t.showFullscreenPlayer=!1,ue.push({name:"album",params:{itemId:d.album.item_id,provider:d.album.provider}});else{try{const M=await I.getLibraryAlbums(void 0,y.album,5);if(M.length>0){let E=M[0];if(y.artist){const j=M.find(ge=>ge.artists?.some(_e=>_e.name.toLowerCase()===y.artist.toLowerCase()||_e.name.toLowerCase().includes(y.artist.toLowerCase())||y.artist.toLowerCase().includes(_e.name.toLowerCase())));j&&(E=j)}t.showFullscreenPlayer=!1,ue.push({name:"album",params:{itemId:E.item_id,provider:E.provider}});return}}catch(M){console.error("Error searching library for album:",M)}const b=y.artist?`${y.artist} - ${y.album}`:y.album||"";t.globalSearchTerm=b,ue.push({name:"search"}),t.showFullscreenPlayer=!1}},A=async function(){const y=t.activePlayer?.current_media;if(!y?.artist)return;const d=t.curQueueItem?.media_item;if(d&&"artists"in d&&d.artists&&d.artists.length>0)t.showFullscreenPlayer=!1,ue.push({name:"artist",params:{itemId:d.artists[0].item_id,provider:d.artists[0].provider}});else{try{const b=await I.getLibraryArtists(void 0,y.artist,5);if(b.length>0){let M=b[0];const E=b.find(j=>j.name.toLowerCase()===y.artist.toLowerCase());E&&(M=E),t.showFullscreenPlayer=!1,ue.push({name:"artist",params:{itemId:M.item_id,provider:M.provider}});return}}catch(b){console.error("Error searching library for artist:",b)}t.globalSearchTerm=y.artist,ue.push({name:"search"}),t.showFullscreenPlayer=!1}},R=function(y,d){const b=c.value.indexOf(d),M=[{label:"play_now",labelArgs:[],action:()=>{K(d,"play_now")},icon:"mdi-play-circle-outline",disabled:b===t.activePlayerQueue?.current_index||b===t.activePlayerQueue?.index_in_buffer},{label:"play_next",labelArgs:[],action:()=>{K(d,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_up",labelArgs:[],action:()=>{K(d,"up")},icon:"mdi-arrow-up",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_down",labelArgs:[],action:()=>{K(d,"down")},icon:"mdi-arrow-down",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_delete",labelArgs:[],action:()=>{K(d,"delete")},icon:"mdi-delete",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)}];d?.media_item?.media_type==B.TRACK&&M.push({label:"show_info",labelArgs:[],action:()=>{k(d.media_item)},icon:"mdi-information-outline",disabled:!1}),xe.emit("contextmenu",{items:M,posX:y.clientX,posY:y.clientY})},ie=function(y){t.activePlayer&&xe.emit("contextmenu",{items:ml(t.activePlayer,t.activePlayerQueue),posX:y.clientX,posY:y.clientY})},K=function(y,d){!y||!t.activePlayerQueue||(d=="play_now"?I.queueCommandPlayIndex(t.activePlayerQueue?.queue_id,y.queue_item_id):d=="move_next"?I.queueCommandMoveNext(t.activePlayerQueue?.queue_id,y.queue_item_id):d=="up"?I.queueCommandMoveUp(t.activePlayerQueue?.queue_id,y.queue_item_id):d=="down"?I.queueCommandMoveDown(t.activePlayerQueue?.queue_id,y.queue_item_id):d=="delete"&&I.queueCommandDelete(t.activePlayerQueue?.queue_id,y.queue_item_id))},H=async function(){S.value=!0,c.value=[],await mt(100),S.value=!1},me=async function({done:y}){if(!t.activePlayerQueue||t.activePlayerQueue.items==0){y("empty");return}if(c.value.length>=t.activePlayerQueue?.items){y("empty");return}const d=c.value.length,b=(t.activePlayerQueue.current_index||0)+50,M=await I.getPlayerQueueItems(t.activePlayerQueue.queue_id,b,d);c.value.push(...M),M.length<50?y("empty"):y("ok")};Ce(()=>{const y=I.subscribe(Kt.QUEUE_ITEMS_UPDATED,d=>{d.object_id==t.activePlayerQueue?.queue_id&&(d.data,H())});Ze(y)});const ne=y=>{y.key==="Escape"&&t.showFullscreenPlayer&&!t.dialogActive&&(t.showFullscreenPlayer=!1)};Ce(()=>{window.addEventListener("keydown",ne),Ze(()=>{window.removeEventListener("keydown",ne),$()})});const Se=async function(y){if(!t.curQueueItem?.media_item)return;if(!t.curQueueItem.media_item.favorite){I.toggleFavorite(t.curQueueItem.media_item);return}let d=t.curQueueItem.media_item;(d.provider!="library"||!("provider_mappings"in d))&&[B.ALBUM,B.ARTIST,B.AUDIOBOOK,B.PLAYLIST,B.PODCAST,B.RADIO,B.TRACK].includes(d.media_type)&&(d=await I.getLibraryItem(d.media_type,d.item_id,d.provider)||d);const b=[];"favorite"in d&&d.favorite&&d.provider=="library"&&[B.ALBUM,B.ARTIST,B.AUDIOBOOK,B.PLAYLIST,B.PODCAST,B.RADIO,B.TRACK].includes(d.media_type)&&b.push({label:"favorites_remove",labelArgs:[],action:()=>{I.removeItemFromFavorites(d.media_type,d.item_id),d.favorite=!1,t.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[B.ALBUM,B.ARTIST,B.AUDIOBOOK,B.PLAYLIST,B.PODCAST,B.RADIO,B.TRACK].includes(d.media_type)&&b.push({label:"add_playlist",labelArgs:[],action:()=>{xe.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),xe.emit("contextmenu",{items:b,posX:y.clientX,posY:y.clientY})},Ge=function(){S.value=!0,mt(100).then(()=>{S.value=!1})},Le=function(y,d){I.playMedia(y.uri,jt.PLAY,void 0,d.position.toString())};Z(()=>t.activePlayerId,y=>{H()},{immediate:!0});const pe=T(void 0),ye=T(void 0);return fa(()=>{const y=Fe("white"),d=Fe("black"),b=5,M=.05,E=Oe.theme.current.value.dark?l.colorPalette.darkColor||"#000":l.colorPalette.lightColor||"#fff";let j=Fe(E);const ge=y.contrast(j),_e=d.contrast(j),ut=ge>=_e;let He=ut?y:d,Ye=Math.max(ge,_e);if(Ye<b){let dt=M;for(;Ye<b&&dt<=.5;)ut?j=j.darken(M):j=j.lighten(M),Ye=Fe(He).contrast(j),dt+=M}document.documentElement.style.setProperty("--text-color",He.hex()),pe.value=He.hex(),ye.value=j.hex()}),(y,d)=>(s(),v(Vt,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":d[8]||(d[8]=b=>e(t).showFullscreenPlayer=b),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999",persistent:""},{default:o(()=>[n(ze,{color:ye.value},{default:o(()=>[n(Ha,{class:"v-toolbar-default",color:"transparent"},{prepend:o(()=>[n(be,{icon:"",onClick:d[0]||(d[0]=b=>e(t).showFullscreenPlayer=!1)},{default:o(()=>[n(re,{icon:"mdi-chevron-down"})]),_:1})]),append:o(()=>[e(t).activePlayerQueue?.radio_source.length?(s(),v(rt,{key:0,scrim:""},{activator:o(({props:b})=>[n(be,N(b,{icon:""}),{default:o(()=>[n(re,{color:"accent",icon:"mdi-radio-tower"})]),_:1},16)]),default:o(()=>[n(ze,{title:e(X)("queue_radio_enabled"),subtitle:e(X)("queue_radio_based_on")},{text:o(()=>[(s(!0),m(W,null,ce(e(t).activePlayerQueue?.radio_source,b=>(s(),m("div",{key:b.uri},[_("a",{onClick:M=>k(b)},x(b.name),9,Qi)]))),128))]),_:1},8,["title","subtitle"])]),_:1})):P("",!0),w.value?P("",!0):(s(),v(Rt,{key:1})),n(be,{icon:"",onClick:Ee(ie,["stop"])},{default:o(()=>[n(re,{icon:"mdi-dots-vertical"})]),_:1})]),_:1}),_("div",Mi,[e(ae)("bp7")||!e(t).showQueueItems?(s(),m("div",Ai,[y.$vuetify.display.height>600?(s(),m("div",Ei,[e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.current_media?.image_url?(s(),v(at,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])):(s(),m("div",Fi,[n(re,{size:"128",icon:e(t).activePlayer?.type==e(Je).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))])):P("",!0),_("div",Di,[e(t).activePlayer?.powered==!1?(s(),v(De,{key:0,style:de(`font-size: ${z.value};`)},{default:o(()=>[Y(x(e(t).activePlayer?.name),1)]),_:1},8,["style"])):e(t).activePlayer?.current_media?.title?(s(),v(De,{key:1,style:de(`font-size: ${z.value};cursor:pointer;`),onClick:g},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[Y(x(e(t).activePlayer.current_media.title),1)]),_:1},8,["sync"])]),_:1},8,["style"])):(s(),v(De,{key:2,style:de(`font-size: ${z.value};cursor:pointer;`),onClick:d[1]||(d[1]=b=>e(t).showPlayersMenu=!0)},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[Y(x(e(t).activePlayer?.name||e(X)("no_player")),1)]),_:1},8,["sync"])]),_:1},8,["style"])),e(t).activePlayer?.powered==!1?(s(),v(Ve,{key:3,class:"text-h6 text-md-h5 text-lg-h4"},{default:o(()=>[Y(x(e(X)("off")),1)]),_:1})):e(t).activePlayer?.current_media?.album?(s(),v(Ve,{key:4,style:de(`font-size: ${h.value};cursor:pointer;`),onClick:C},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[Y(x(e(t).activePlayer.current_media.album),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),e(t).activePlayer?.current_media?.artist?(s(),v(Ve,{key:5,style:de(`font-size: ${h.value};cursor:pointer;`),onClick:A},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[Y(x(e(t).activePlayer.current_media.artist),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),!e(t).activePlayerQueue&&e(t).activePlayer?.active_source?(s(),v(Ve,{key:6,class:"caption"},{default:o(()=>[Y(x(e(X)("external_source_active",[e(kt)(e(t).activePlayer)])),1)]),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),v(Ve,{key:7,class:"caption"},{default:o(()=>[Y(x(e(X)("queue_empty")),1)]),_:1})):P("",!0),e(t).activePlayer?.powered!=!1&&e(t).curQueueItem?.streamdetails?(s(),m("div",Bi,[n(Lt)])):P("",!0)])])):P("",!0),e(t).showQueueItems&&e(t).activePlayerQueue?(s(),m("div",Oi,[n(Ya,{modelValue:f.value,"onUpdate:modelValue":d[2]||(d[2]=b=>f.value=b),"hide-slider":"",density:"compact",onClick:Ge},{default:o(()=>[n(Xe,{value:0},{default:o(()=>[Y(x(e(X)("queue"))+" ",1),n(yt,{color:"grey",content:(e(t).activePlayerQueue?.items||0)-(e(t).activePlayerQueue?.current_index||0),inline:""},null,8,["content"])]),_:1}),n(Xe,{value:1},{default:o(()=>[Y(x(e(X)("played"))+" ",1),n(yt,{color:"grey",content:e(t).activePlayerQueue?.current_index,inline:""},null,8,["content"])]),_:1}),fe.value?(s(),v(Xe,{key:0,value:2},{default:o(()=>[Y(x(e(X)("lyrics")),1)]),_:1})):P("",!0)]),_:1},8,["modelValue"]),_("div",qi,[!S.value&&f.value!==2?(s(),v(Wa,{key:0,onLoad:me,"empty-text":"",height:"100%"},{default:o(()=>[n(Xa,{"item-height":70,"max-height":"90%",items:f.value==0?q.value:ee.value},{default:o(({item:b,index:M})=>[n(pl,{link:"","show-menu-btn":!0,disabled:!b.available,onClick:Ee(E=>R(E,b),["stop"]),onMenu:Ee(E=>R(E,b),["stop"]),onMouseenter:E=>p.value=M,onMouseleave:d[3]||(d[3]=E=>p.value=-1)},{prepend:o(()=>[_("div",Ri,[n(St,{size:"50",item:b},null,8,["item"])])]),title:o(()=>[_("div",zi,[n(he,{sync:M==0&&f.value==0?e(r):e(u),disabled:!(M==0&&f.value==0||p.value==M)},{default:o(()=>[_("span",{class:J({"is-playing":b.queue_item_id===e(t).curQueueItem?.queue_item_id})},x(b.name),3)]),_:2},1032,["sync","disabled"])])]),subtitle:o(()=>[_("div",Ni,[_("span",Ui,x(e(Qe)(b.duration))+" | ",1),n(he,{sync:M==0&&f.value==0?e(r):e(u),disabled:!(M==0&&f.value==0||p.value==M)},{default:o(()=>[b.media_item&&"album"in b.media_item&&b.media_item.album?(s(),m("span",Ki,x(b.media_item.album.name),1)):P("",!0)]),_:2},1032,["sync","disabled"])])]),append:o(()=>[b.queue_item_id===e(t).curQueueItem?.queue_item_id&&e(t).activePlayer?.playback_state!=e(ve).IDLE?(s(),v(Qt,{key:0,"show-badge":e(ae)("bp4")},null,8,["show-badge"])):P("",!0),b.available?P("",!0):(s(),v(re,{key:1},{default:o(()=>[...d[9]||(d[9]=[Y("mdi-alert",-1)])]),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),b.queue_item_id==e(t).curQueueItem?.queue_item_id&&b.media_item?.metadata?.chapters?.length?(s(),m("div",ji,[(s(!0),m(W,null,ce(b.media_item.metadata?.chapters,E=>(s(),v(Me,{key:E.position,onClick:Ee(j=>Le(b.media_item,E),["stop"])},{title:o(()=>[_("div",null,x(E.name),1)]),append:o(()=>[E.end?(s(),m("span",Gi,x(e(Qe)(E.end-E.start)),1)):P("",!0)]),_:2},1032,["onClick"]))),128))])):P("",!0)]),_:1},8,["items"])]),_:1})):P("",!0),f.value===2?(s(),m("div",Hi,[n(Ti,{"media-item":e(t).curQueueItem?.media_item,position:D.value,duration:e(t).curQueueItem?.duration,"stream-details":e(t).curQueueItem?.streamdetails,"text-color":pe.value,lyrics:te.value.plain,"lrc-lyrics":te.value.synced},null,8,["media-item","position","duration","stream-details","text-color","lyrics","lrc-lyrics"])])):P("",!0)])])):P("",!0),!e(t).showQueueItems&&y.$vuetify.display.height<=600?(s(),m("div",Yi,[_("div",Wi,[e(t).activePlayer?.current_media?.image_url?(s(),v(at,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])):(s(),m("div",Xi,[n(re,{size:"128",icon:e(t).activePlayer?.type==e(Je).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))])])):P("",!0)]),_("div",Ji,[_("div",Zi,[n(zt,{"show-labels":!0,color:pe.value},null,8,["color"])]),_("div",es,[e(t).activePlayerQueue?(s(),v(ke,{key:0,disabled:!e(t).curQueueItem?.media_item,icon:e(t).curQueueItem?.media_item?.favorite?"mdi-heart":"mdi-heart-outline",title:e(X)("tooltip.favorite"),variant:"button",class:"media-controls-item","max-height":"30px",onClick:Se},null,8,["disabled","icon","title"])):P("",!0),y.$vuetify.display.mdAndUp?(s(),v(Ot,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):P("",!0),n(Bt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),n(Dt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"70px"},null,8,["player","player-queue"]),n(Ft,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),y.$vuetify.display.mdAndUp?(s(),v(Et,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):P("",!0),e(t).activePlayerQueue?(s(),v(qt,{key:3,class:"media-controls-item","max-height":"30px"})):P("",!0)]),e(t).activePlayer?(s(),m("div",ts,[n(ot,{width:"100%","is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer||!e(t).activePlayer?.available||e(t).activePlayer.powered==!1||!e(t).activePlayer.supported_features.includes(e(Pe).VOLUME_SET),"model-value":Math.round(e(t).activePlayer.group_members.length>0?e(t).activePlayer.group_volume:e(t).activePlayer.volume_level||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:pe.value,"allow-wheel":!0,"onUpdate:modelValue":d[4]||(d[4]=b=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolume(e(t).activePlayerId,b):e(I).playerCommandVolumeSet(e(t).activePlayerId,b)),"onClick:prepend":d[5]||(d[5]=b=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolumeDown(e(t).activePlayerId):e(I).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":d[6]||(d[6]=b=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolumeUp(e(t).activePlayerId):e(I).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):P("",!0),w.value?(s(),m("div",as,[n(lt,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:d[7]||(d[7]=b=>e(t).showPlayersMenu=!0)},{default:o(()=>[n(re,{icon:e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"]),Y(" "+x(e(t).activePlayer?e(xt)(e(t).activePlayer):""),1)]),_:1})])):P("",!0)])]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),is=le(ls,[["__scopeId","data-v-393fb6f4"]]),ss={key:0},rs={key:1,class:"icon-thumb"},os={key:0},ns={key:0,class:"pl-4"},us={key:0},ds={class:"ma-line-clamp-1"},cs={class:"ma-line-clamp-1"},ms={key:0},ps={key:1},ys={key:2},vs={key:2,class:"ma-line-clamp-1"},fs={key:3,class:"ma-line-clamp-1"},_s={key:4},hs=V({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const i=new it,l=a,r=Q(()=>t.activePlayerQueue?.current_item?.streamdetails);return(p,u)=>(s(),m(W,null,[n(Me,{class:"player-track-details",style:{height:"auto",width:"100%",margin:"0px",padding:"0px"},lines:"two"},{prepend:o(()=>[_("div",{class:"media-thumb player-media-thumb",style:de(`cursor: pointer;height: ${e(ae)({breakpoint:"phone"})?60:64}px; width: ${e(ae)({breakpoint:"phone"})?60:64}px; `),onClick:u[0]||(u[0]=c=>e(t).showFullscreenPlayer=!0)},[e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.current_media?.image_url?(s(),m("div",ss,[n(at,{class:"media-thumb",style:{"border-radius":"4px"},size:"60",src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])])):(s(),m("div",rs,[n(re,{size:"32",icon:e(t).activePlayer?.type==e(Je).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))],4)]),title:o(()=>[_("div",{style:de({cursor:"pointer",color:a.primaryColor}),class:"d-flex align-center"},[e(t).activePlayer&&e(t).activePlayer?.powered!=!1?(s(),m("div",os,x(e(xt)(e(t).activePlayer)),1)):e(t).activePlayer?.powered==!1?(s(),m("div",{key:1,onClick:u[1]||(u[1]=c=>e(t).showPlayersMenu=!0)},x(e(t).activePlayer?.name),1)):(s(),m("div",{key:2,onClick:u[2]||(u[2]=c=>e(t).showPlayersMenu=!0)},x(p.$t("no_player")),1)),e(t).activePlayer&&e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.playback_state!=e(ve).IDLE?(s(),v(Qt,{key:3,"show-badge":!1,"show-icon":!0,"icon-style":"margin-left: 12px; margin-bottom: 4px;"})):P("",!0)],4)]),append:o(()=>[r.value?.audio_format.content_type&&!e(ae)({breakpoint:"phone"})&&a.showQualityDetailsBtn?(s(),m("div",ns,[n(Lt)])):P("",!0)]),subtitle:o(()=>[_("div",{style:de({cursor:"pointer",color:a.primaryColor}),onClick:u[3]||(u[3]=c=>e(t).showFullscreenPlayer=!0)},[e(t).activePlayer?.powered==!1?(s(),m("div",us,x(p.$t("off")),1)):e(t).activePlayer?.current_media?.title?(s(),m(W,{key:1},[_("div",ds,[n(he,{sync:e(i)},{default:o(()=>[Y(x(e(t).activePlayer.current_media.title),1)]),_:1},8,["sync"])]),_("div",cs,[n(he,{sync:e(i)},{default:o(()=>[e(t).activePlayer?.current_media?.artist&&e(t).activePlayer?.current_media?.album&&!l.showOnlyArtist?(s(),m("span",ms,x(e(t).activePlayer?.current_media?.artist)+" â€¢ "+x(e(t).activePlayer?.current_media?.album),1)):e(t).activePlayer?.current_media?.artist?(s(),m("span",ps,x(e(t).activePlayer?.current_media?.artist),1)):e(t).activePlayer?.current_media?.album?(s(),m("span",ys,x(e(t).activePlayer?.current_media?.album),1)):P("",!0)]),_:1},8,["sync"])])],64)):e(t).activePlayer&&!e(t).activePlayerQueue&&e(t).activePlayer?.active_source?(s(),m("div",vs,x(p.$t("external_source_active",[e(kt)(e(t).activePlayer)])),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),m("div",fs,x(p.$t("queue_empty")),1)):e(t).activePlayer?(s(),m("div",_s,x(e(t).activePlayer?.name),1)):P("",!0)],4)]),_:1}),n(is,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":a.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Pt=le(hs,[["__scopeId","data-v-5a848776"]]),bs=["data-floating"],gs={class:"mediacontrols"},Ps={class:"mediacontrols-left"},ws={class:"mediacontrols-bottom-center"},ks={class:"mediacontrols-bottom-right"},xs={key:1,class:"mediacontrols-mobile-container"},$s=["data-floating"],Cs={class:"mediacontrols","data-mobile":!0},Is={class:"mediacontrols-left"},Ss={class:"mediacontrols-bottom-right"},Ls={key:0,class:"volume-slider"},Vs=V({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){It(u=>({v45d54d6a:p.value}));const{mobile:i}=Tt({mobileBreakpoint:576}),l=T({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),r=new Image;r.src=Oe.theme.current.value.dark?Ra:za,r.crossOrigin="Anonymous",r.addEventListener("load",function(){l.value=Gt(r)});const p=Q(()=>Oe.theme.current.value.dark?l.value&&l.value.darkColor?l.value.darkColor:"#CCCCCC26":l.value&&l.value.lightColor?l.value.lightColor:"#CCCCCC26");return Z(()=>t.activePlayer?.current_media?.image_url,()=>{t.activePlayer?.current_media?.image_url?r.src=qe(t.activePlayer.current_media.image_url):r.src=""}),(u,c)=>e(i)?(s(),m("div",xs,[_("div",{class:"mediacontrols-bg","data-floating":a.useFloatingPlayer},null,8,$s),_("div",Cs,[_("div",Is,[n(Pt,{"show-quality-details-btn":!1,"show-only-artist":!0,"color-palette":l.value,"primary-color":u.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["color-palette","primary-color"])]),_("div",Ss,[_("div",null,[n(gt,{queue:{isVisible:!1,color:u.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:u.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!1,color:u.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),n(bt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:!0,icon:{staticWidth:"40px",staticHeight:"40px",color:u.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])]),e(t).activePlayer?(s(),m("div",Ls,[n(ot,{width:"100%",color:"secondary","is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer||!e(t).activePlayer?.available||e(t).activePlayer.powered==!1||!e(t).activePlayer.supported_features.includes(e(Pe).VOLUME_SET),"model-value":Math.round(e(t).activePlayer.group_members.length>0?e(t).activePlayer.group_volume:e(t).activePlayer.volume_level||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":c[0]||(c[0]=f=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolume(e(t).activePlayerId,f):e(I).playerCommandVolumeSet(e(t).activePlayerId,f)),"onClick:prepend":c[1]||(c[1]=f=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolumeDown(e(t).activePlayerId):e(I).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":c[2]||(c[2]=f=>e(t).activePlayer.group_members.length>0?e(I).playerCommandGroupVolumeUp(e(t).activePlayerId):e(I).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):P("",!0)])):(s(),m(W,{key:0},[_("div",{class:"mediacontrols-bg","data-floating":a.useFloatingPlayer},null,8,bs),_("div",gs,[_("div",Ps,[n(Pt,{"show-quality-details-btn":!!e(ae)("bp8"),"show-only-artist":!e(ae)("bp7"),"color-palette":l.value,"primary-color":u.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),_("div",ws,[n(bt,{"visible-components":{repeat:{isVisible:e(ae)("bp3")},shuffle:{isVisible:e(ae)("bp3")},play:{isVisible:!0,icon:{staticWidth:"48px",staticHeight:"48px"}},previous:{isVisible:e(ae)("bp3")},next:{isVisible:e(ae)("bp3")}}},null,8,["visible-components"]),e(ae)("bp6")?(s(),v(zt,{key:0,"is-progress-bar":!1,disabled:!e(t).activePlayerQueue?.active||e(t).activePlayerQueue?.current_item?.media_item?.media_type!==e(B).TRACK},null,8,["disabled"])):P("",!0)]),_("div",ks,[_("div",null,[n(gt,{queue:{isVisible:e(ae)("bp3"),color:u.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:u.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:e(t).activePlayer!=null,color:u.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"])])])])],64))}}),Ts=le(Vs,[["__scopeId","data-v-5ee38b8e"]]),Qs={class:"menuButton"},Ms={class:"menuButton"},As=V({__name:"BottomNavigation",props:{height:{}},setup(a){const i=At(),l=T(!1);return(r,p)=>(s(),v(Ja,{height:a.height,"bg-color":"default",grow:"",role:"navigation"},{default:o(()=>[(s(!0),m(W,null,ce(e(i).filter(u=>!u.isLibraryNode),u=>(s(),v(lt,{key:u.label,to:u.path,"aria-label":r.$t(u.label),tabindex:"0",variant:"text","active-color":"fg","base-color":"grey"},{default:o(()=>[(s(),v(we(u.icon),{class:"w-6 h-6"})),_("span",Qs,x(r.$t(u.label)),1)]),_:2},1032,["to","aria-label"]))),128)),n(rt,null,{activator:o(({props:u})=>[n(lt,N(u,{"aria-haspopup":"true","aria-expanded":l.value.toString(),"aria-label":"Open library menu","base-color":"grey"}),{default:o(()=>[n(e(_a),{class:"w-6 h-6"}),_("span",Ms,x(r.$t("library")),1)]),_:1},16,["aria-expanded"])]),default:o(()=>[n(Ne,null,{default:o(()=>[(s(!0),m(W,null,ce(e(i).filter(u=>u.isLibraryNode),u=>(s(),v(Me,{key:u.label,title:r.$t(u.label),to:u.path},{prepend:o(()=>[(s(),v(we(u.icon),{class:"w-5 h-5 mr-3"}))]),_:2},1032,["title","to"]))),128))]),_:1})]),_:1})]),_:1},8,["height"]))}}),Es=V({__name:"Footer",setup(a){const i=Q(()=>t.isInStandaloneMode?100:80);return(l,r)=>(s(),m(W,null,[e(t).mobileLayout?(s(),m("div",{key:0,class:J(l.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:`
      position: fixed;
      width: 100%;
      height: 180px;
      bottom: 0px;
      z-index: 999;
    `},null,2)):P("",!0),e(t).mobileLayout?(s(),v(As,{key:1,height:i.value},null,8,["height"])):P("",!0),n(Za,{app:"",color:"default",class:J(`py-0 px-0 ${e(t).mobileLayout?"mediacontrols-player-float":"mediacontrols-player-default"}`)},{default:o(()=>[n(Ts,{"use-floating-player":e(t).mobileLayout},null,8,["use-floating-player"])]),_:1},8,["class"])],64))}}),Fs={style:{float:"right"}},Ds={class:"player-content"},wt=3,Bs=V({__name:"PlayerSelect",setup(a){const i=T(!1),l=T([]),r=T([]),p=T(void 0),u=T(""),{getPreference:c,setPreference:f}=yl(),S=c("allPlayersExpanded");Z(S,h=>{p.value=h?0:void 0},{immediate:!0}),Z(p,h=>{f("allPlayersExpanded",h===0)});const O=c("recentlySelectedPlayerIds");O.value&&(l.value=O.value);const F=h=>{let w=0;(h.playback_state===ve.PLAYING||h.playback_state===ve.PAUSED)&&(w+=2),h.player_id===Te.player_id&&(w+=2),h.current_media&&(w+=1);const k=l.value.indexOf(h.player_id);return k!==-1&&(w+=wt-k),w},L=()=>{const w=Object.values(I.players).filter(k=>Ae(k)).sort((k,g)=>{const C=F(k),A=F(g);return A!==C?A-C:k.name.toUpperCase()>g.name.toUpperCase()?1:-1});r.value=w.map(k=>k.player_id)},$=Q(()=>Object.values(I.players).filter(h=>Ae(h)).sort((h,w)=>h.name.toUpperCase()>w.name?.toUpperCase()?1:-1)),D=Q(()=>{if(u.value){const w=u.value.toLowerCase();return $.value.filter(k=>k.name.toLowerCase().includes(w))}const h=ee.value.map(w=>w.player_id);return $.value.filter(w=>!h.includes(w.player_id))}),q=Q(()=>$.value.length>8),ee=Q(()=>Object.values(I.players).filter(k=>Ae(k)).filter(k=>F(k)>0).sort((k,g)=>{const C=r.value.indexOf(k.player_id),A=r.value.indexOf(g.player_id);return C-A}).slice(0,3));Z(()=>t.showPlayersMenu,h=>{if(h)L();else{if(u.value="",t.activePlayerId){f("activePlayerId",t.activePlayerId),localStorage.setItem("activePlayerId",t.activePlayerId);const w=l.value.filter(k=>k!==t.activePlayerId);w.unshift(t.activePlayerId),l.value=w.slice(0,wt)}f("recentlySelectedPlayerIds",l.value)}}),Z(()=>I.players,h=>{h&&oe()},{deep:!0}),Z(()=>Te.player_id,h=>{h&&oe()});function te(h,w=!1){t.activePlayerId!==h.player_id&&(t.activePlayerId=h.player_id,t.playerTipShown=!0),w&&(t.showPlayersMenu=!1),et(()=>{const k=document.getElementById(h.player_id);k&&k.scrollIntoView({behavior:"smooth",block:"nearest"})})}function fe(h){t.activePlayerId!==h.player_id?(t.activePlayerId=h.player_id,i.value=!0):i.value=!i.value,i.value&&et(()=>{const w=document.getElementById(h.player_id);w&&w.scrollIntoView({behavior:"smooth",block:"nearest"})})}Ce(()=>{oe()});const oe=function(){if(t.activePlayer&&Ae(t.activePlayer))return;const h=z();h&&(t.activePlayerId=h)},z=function(){const h=localStorage.getItem("activePlayerId")||c("activePlayerId").value;if(h&&h in I.players&&I.players[h].available)return h;if(Te.player_id)return Te.player_id};return(h,w)=>(s(),m(W,null,[n(el,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":w[0]||(w[0]=k=>e(t).showPlayersMenu=k)},null,8,["modelValue"]),e(t).showPlayersMenu?(s(),v(rl,{key:0,modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":w[4]||(w[4]=k=>e(t).showPlayersMenu=k),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999",color:"background"},{prepend:o(()=>[n(De,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:o(()=>[_("b",null,x(h.$t("players")),1),_("div",Fs,[e(Ht).isAdmin()?(s(),v(be,{key:0,variant:"icon",to:{name:"playersettings"}},{default:o(()=>[n(re,{size:"24"},{default:o(()=>[...w[5]||(w[5]=[Y("mdi-cog",-1)])]),_:1})]),_:1})):P("",!0),n(be,{variant:"icon",onClick:w[1]||(w[1]=k=>e(t).showPlayersMenu=!1)},{default:o(()=>[n(re,{size:"24"},{default:o(()=>[...w[6]||(w[6]=[Y("mdi-close",-1)])]),_:1})]),_:1})])]),_:1}),n(tt)]),default:o(()=>[_("div",Ds,[n(Ne,{flat:"",style:{margin:"0px 10px",padding:"0"}},{default:o(()=>[(s(!0),m(W,null,ce(ee.value,k=>(s(),v(vt,{id:k.player_id,key:k.player_id,style:{margin:"10px 0px"},player:k,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&k.player_id==e(t).activePlayerId,"show-sync-controls":k.supported_features.includes(e(Pe).SET_MEMBERS),"allow-power-control":!0,onClick:g=>te(k),onToggleExpand:fe},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),$.value.length>3?(s(),v(tl,{key:0,modelValue:p.value,"onUpdate:modelValue":w[3]||(w[3]=k=>p.value=k),variant:"accordion",flat:"",class:"expansion"},{default:o(()=>[n(al,{style:{padding:"0"}},{default:o(()=>[n(ll,null,{default:o(()=>[_("h3",null,x(h.$t("all_players")),1)]),_:1}),n(il,{style:{padding:"0"}},{default:o(()=>[q.value?(s(),v(sl,{key:0,modelValue:u.value,"onUpdate:modelValue":w[2]||(w[2]=k=>u.value=k),placeholder:h.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",variant:"outlined",density:"compact","hide-details":"",style:{margin:"0 8px 24px 8px"}},null,8,["modelValue","placeholder"])):P("",!0),n(Ne,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:o(()=>[(s(!0),m(W,null,ce(D.value,k=>(s(),v(vt,{id:k.player_id,key:k.player_id,style:{margin:"5px 0px"},player:k,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&k.player_id==e(t).activePlayerId,"show-sync-controls":k.supported_features.includes(e(Pe).SET_MEMBERS),"allow-power-control":!0,onClick:g=>te(k),onToggleExpand:fe},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):P("",!0)])]),_:1},8,["modelValue"])):P("",!0)],64))}}),Os=le(Bs,[["__scopeId","data-v-0347fc66"]]);function qs(a={}){const{immediate:i=!1,onNeedRefresh:l,onOfflineReady:r,onRegistered:p,onRegisteredSW:u,onRegisterError:c}=a;let f,S,O;const F=async($=!0)=>{await S,O?.()};async function L(){if("serviceWorker"in navigator){if(f=await Yt(async()=>{const{Workbox:$}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:$}},[],import.meta.url).then(({Workbox:$})=>new $("./sw.js",{scope:"./",type:"classic"})).catch($=>{c?.($)}),!f)return;O=()=>{f?.messageSkipWaiting()};{let $=!1;const D=()=>{$=!0,f?.addEventListener("controlling",q=>{q.isUpdate&&window.location.reload()}),l?.()};f.addEventListener("installed",q=>{typeof q.isUpdate>"u"?typeof q.isExternal<"u"&&q.isExternal?D():!$&&r?.():q.isUpdate||r?.()}),f.addEventListener("waiting",D)}f.register({immediate:i}).then($=>{u?u("./sw.js",$):p?.($)}).catch($=>{c?.($)})}}return S=L(),F}function Rs(a={}){const{immediate:i=!0,onNeedRefresh:l,onOfflineReady:r,onRegistered:p,onRegisteredSW:u,onRegisterError:c}=a,f=T(!1),S=T(!1);return{updateServiceWorker:qs({immediate:i,onNeedRefresh(){f.value=!0,l?.()},onOfflineReady(){S.value=!0,r?.()},onRegistered:p,onRegisteredSW:u,onRegisterError:c}),offlineReady:S,needRefresh:f}}const zs={key:0,class:"pwa-toast",role:"alert"},Ns={class:"message"},Us={key:0},Ks={key:1},js=V({__name:"ReloadPrompt",setup(a){const{offlineReady:i,needRefresh:l,updateServiceWorker:r}=Rs(),p=async()=>{i.value=!1,l.value=!1};return(u,c)=>e(i)||e(l)?(s(),m("div",zs,[_("div",Ns,[e(i)?(s(),m("span",Us," App ready to work offline ")):(s(),m("span",Ks," New content available, click on reload button to update. "))]),e(l)?(s(),m("button",{key:0,onClick:c[0]||(c[0]=f=>e(r)())},"Reload")):P("",!0),_("button",{onClick:p},"Close")])):P("",!0)}}),Gs=V({__name:"Default",setup(a){const i=$t();return Z([()=>i.query.player,()=>Object.keys(I.players).length],([l])=>{if(!l)return;const r=l.toString().toLowerCase(),p=Object.values(I.players).find(u=>u.player_id.toLowerCase()===r||u.name.toLowerCase()===r)?.player_id;p&&(t.activePlayerId=p)},{immediate:!0}),Z(()=>i.query.showFullscreenPlayer,l=>{t.showFullscreenPlayer=!!l},{immediate:!0}),Z(()=>i.query.frameless,l=>{l&&(t.frameless=!0)},{immediate:!0}),(l,r)=>(s(),m(W,null,[n(ol,null,{default:o(()=>[e(t).frameless?(s(),v(ht,{key:0})):(s(),m(W,{key:1},[n(Os),n(ht),n(Es)],64))]),_:1}),e(t).isInStandaloneMode?(s(),v(js,{key:0})):P("",!0)],64))}}),Pr=le(Gs,[["__scopeId","data-v-f5755772"]]);export{Pr as default};
