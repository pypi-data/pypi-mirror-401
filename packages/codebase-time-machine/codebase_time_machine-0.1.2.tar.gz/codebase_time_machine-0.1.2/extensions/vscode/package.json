{
  "name": "codebase-time-machine",
  "displayName": "Codebase Time Machine",
  "description": "Understand why code exists, not just what it does",
  "icon": "assets/icon.png",
  "version": "0.1.6",
  "publisher": "BurakKTopal",
  "repository": {
    "type": "git",
    "url": "https://github.com/BurakKTopal/codebase-time-machine"
  },
  "engines": {
    "vscode": "^1.80.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "ctm.whyDoesThisExist",
        "title": "CTM: Why does this code exist?"
      }
    ],
    "menus": {
      "editor/context": [
        {
          "command": "ctm.whyDoesThisExist",
          "group": "navigation",
          "when": "editorHasSelection"
        }
      ]
    },
    "configuration": {
      "title": "Codebase Time Machine",
      "properties": {
        "ctm.provider": {
          "type": "string",
          "enum": [
            "anthropic",
            "openai",
            "gemini"
          ],
          "enumDescriptions": [
            "Anthropic Claude models",
            "OpenAI GPT models",
            "Google Gemini models"
          ],
          "default": "anthropic",
          "description": "AI provider to use for code analysis"
        },
        "ctm.apiKey": {
          "type": "string",
          "description": "API key for the selected provider",
          "default": ""
        },
        "ctm.anthropicApiKey": {
          "type": "string",
          "description": "(Deprecated: Use ctm.apiKey instead) Anthropic API key for AI summaries",
          "default": "",
          "deprecationMessage": "This setting is deprecated. Please use ctm.apiKey instead."
        },
        "ctm.model": {
          "type": "string",
          "enum": [
            "claude-3-5-haiku-20241022",
            "claude-haiku-4-5-20251001",
            "claude-sonnet-4-5-20250929",
            "gpt-4.1-nano",
            "gpt-4.1",
            "gemini-2.0-flash-lite",
            "gemini-2.5-flash"
          ],
          "enumDescriptions": [
            "[Anthropic] Haiku 3.5 - Fast, cheapest ($0.80/$4)",
            "[Anthropic] Haiku 4.5 - Fast, cheap ($1/$5)",
            "[Anthropic] Sonnet 4.5 - Balanced ($3/$15)",
            "[OpenAI] GPT-4.1 Nano - Fastest, cheapest ($0.10/$0.40)",
            "[OpenAI] GPT-4.1 - Balanced, great for coding ($2/$8)",
            "[Google] Gemini 2.0 Flash-Lite - Fastest, cheapest ($0.075/$0.30)",
            "[Google] Gemini 2.5 Flash - Balanced with thinking ($0.15/$0.60)"
          ],
          "default": "claude-3-5-haiku-20241022",
          "description": "Model ID from the selected provider."
        },
        "ctm.maxToolCalls": {
          "type": "number",
          "minimum": 3,
          "maximum": 50,
          "default": 12,
          "description": "Total tool calls including investigation and summarization. Last 3 calls reserved for summary. Example: value of 12 means 9 investigation + 3 summary. Higher number implies deeper analysis, but more token usage."
        },
        "ctm.serverPath": {
          "type": "string",
          "description": "Path to local CTM repository for development. Leave empty to use installed package.",
          "default": ""
        },
        "ctm.serverCommand": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "markdownDescription": "Full command to start CTM server. [Edit in settings.json](command:workbench.action.openSettingsJson)\n\n- **PyPI package** (default): `[\"python\", \"-m\", \"ctm_mcp_server.stdio_server\"]`\n- **Local development**: `[\"uv\", \"run\", \"ctm-server\"]`",
          "default": [
            "python",
            "-m",
            "ctm_mcp_server.stdio_server"
          ]
        },
        "ctm.githubToken": {
          "type": "string",
          "description": "GitHub Personal Access Token for private repositories and higher rate limits (get one at https://github.com/settings/tokens)",
          "default": ""
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./ && node -e \"require('fs').copyFileSync('src/SYSTEM_PROMPT.md', 'out/SYSTEM_PROMPT.md')\"",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts",
    "test": "mocha --require tsx --require src/test/setup.ts --extensions ts src/**/*.test.ts",
    "package": "vsce package"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.32.0",
    "@modelcontextprotocol/sdk": "^1.25.1"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.0",
    "@types/node": "^20.0.0",
    "@types/sinon": "^17.0.0",
    "@types/vscode": "^1.80.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vscode/vsce": "^2.0.0",
    "cross-env": "^7.0.3",
    "eslint": "^8.0.0",
    "mocha": "^10.0.0",
    "sinon": "^17.0.0",
    "tsx": "^4.7.0",
    "typescript": "^5.0.0"
  }
}